!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0ffda627-c059-4f33-a680-fd29da9b9262",e._sentryDebugIdIdentifier="sentry-dbid-0ffda627-c059-4f33-a680-fd29da9b9262")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["32637"],{5370:function(e,t,a){a.d(t,{A:()=>n});let n={group:"group-JuxKi2",segment:"segment-XiSgAE",outlined:"outlined-kJWSK2"}},8295:function(e,t,a){a.d(t,{Jj:()=>S,_d:()=>D,aD:()=>C,gQ:()=>Y});var n=a(69277),l=a(4006),o=a(17402),r=a(21481),i=a(69141),s=a(77578),c=a(2886),u=a(84605),d=a(86500),f=a(68349),h=a(35369),p=a(76977),g=a(16993),b=a(75303),_=a(24777),m=a(63136),y=a(75990),k=a(3843),w=a(39318),v=a(96670);function Y(e){var t;let a,b,_,m,Y,T,{pub:I,item:W,isOpen:O,setOpen:x,themeVariables:R,width:M}=e,{iString:F}=(0,u.GO)(),{type:P,target_user:L,target_user_id:B,target_pledge_note:N,target_subscription_note:G,post:K}=W,U=I.logo_url||I.cover_photo_url||I.author_photo_url||(null==(t=I.author)?void 0:t.photo_url),j=null==K?void 0:K.cover_image,H="post_asset"===P,{assetThemes:q,assetTypes:z,includePreviewTextToggle:Q}=((e,t)=>{var a;let{postCoverImageUrl:n,pubCoverImageUrl:l,pub:o,themeVariables:r}=t,i=[],s=[],c=!1,u=r||o.theme,d=null!=(a=(null==u?void 0:u.web_bg_color)||(null==u?void 0:u.cover_bg_color))?a:"";switch(e){case"post_asset":n&&i.push("image"),((null==u?void 0:u.background_pop_color)||(null==u?void 0:u.background_pop))&&i.push("accent"),i.push("primary"),"#ffffff"!==d.toLowerCase()&&i.push("black&white"),c=!0;break;case"pub_shareable_image":l&&i.push("image"),i.push("primary"),s.push({type:"logo",label:"Logo"}),o.has_posts&&s.push({type:"posts",label:"Top posts"}),o.hero_text&&s.push({type:"description",label:"Description"});break;case"paid_subscription":case"pledged_subscription":((null==u?void 0:u.background_pop_color)||(null==u?void 0:u.background_pop))&&i.push("accent"),i.push("primary")}return{assetThemes:i,assetTypes:s,includePreviewTextToggle:c}})(P,{postCoverImageUrl:j,pubCoverImageUrl:U,pub:I,themeVariables:R}),V=R||I.theme,[J,X]=(0,o.useState)(H?"instagram":"stories"),[Z,$]=(0,o.useState)(q.find(e=>"image"===e)&&U?"image":q.find(e=>"accent"===e)&&((null==V?void 0:V.background_pop_color)||(null==V?void 0:V.background_pop))?"accent":"primary"),[ee,et]=(0,o.useState)("logo");(0,o.useEffect)(()=>{O&&(0,d.u4)(d.qY.SHARE_CENTER_CUSTOMIZE_ASSETS_MODAL_OPENED)},[O]);let[ea,en]=(0,o.useState)(!0),el=()=>{switch(Z){case"image":return(0,n._)({aspectRatio:J,bgImage:!0},z.length&&{type:ee},Q&&ea&&{hidePreviewText:!0});case"accent":return(0,n._)({aspectRatio:J,bgColor:(null==V?void 0:V.background_pop_color)||(null==V?void 0:V.background_pop),textColor:null==V?void 0:V.print_on_pop},z.length&&{type:ee},Q&&ea&&{hidePreviewText:!0});case"primary":return(0,n._)({aspectRatio:J,bgColor:(null==V?void 0:V.web_bg_color)||(null==V?void 0:V.cover_bg_color),textColor:(null==V?void 0:V.print_on_web_bg_color)||(null==V?void 0:V.cover_print_primary)},z.length&&{type:ee},Q&&ea&&{hidePreviewText:!0});default:return(0,n._)({aspectRatio:J,bgColor:"#ffffff",textColor:"#404040"},z.length&&{type:ee},Q&&ea&&{hidePreviewText:!0})}},eo=(0,f.rr)(),er=()=>{x(!1)};switch(P){case"arr_10k_milestone":_=k.Fh.ARR10K,b=(0,l.Y)(r.Q,{pub:I,milestone:_,style:{aspectRatio:J}}),m=(0,w.ed9)(I,_,{aspectRatio:J},"".concat(_," - ").concat("stories"===J?"vertical":J));break;case"arr_1k_milestone":_=k.Fh.ARR1K,b=(0,l.Y)(r.Q,{pub:I,milestone:_,style:{aspectRatio:J}}),m=(0,w.ed9)(I,_,{aspectRatio:J},"".concat(_," - ").concat("stories"===J?"vertical":J));break;case"list_100_milestone":_=k.ai.List100,b=(0,l.Y)(r.Q,{pub:I,milestone:_,style:{aspectRatio:J}}),m=(0,w.ed9)(I,_,{aspectRatio:J},"".concat(_," - ").concat("stories"===J?"vertical":J));break;case"list_1k_milestone":_=k.ai.List1K,b=(0,l.Y)(r.Q,{pub:I,milestone:_,style:{aspectRatio:J}}),m=(0,w.ed9)(I,_,{aspectRatio:J},"".concat(_," - ").concat("stories"===J?"vertical":J));break;case"paid_subscription":b=(0,l.Y)(c.zL,{pub:I,note:G,user:L||{id:B||0},style:el()}),m=(0,w.pJR)(I,L||{id:B||0},el(),{fileToDownload:"Message - ".concat("stories"===J?"vertical":J)}),T=()=>{(0,d.u4)(d.qY.SUBSCRIPTION_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==L?void 0:L.id)||B,aspectRatio:J,source:"download-button"})};break;case"pledged_subscription":b=(0,l.Y)(c.b7,{pub:I,note:N,user:L||{id:B||0},style:el()}),m=(0,w.H_d)(I,L||{id:B||0},el(),{fileToDownload:"Message - ".concat("stories"===J?"vertical":J)}),T=()=>{(0,d.u4)(d.qY.PLEDGE_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==L?void 0:L.id)||B,aspectRatio:J,source:"download-button"})};break;case"pub_shareable_image":a=F("Create shareable image"),b=(0,l.Y)(i.i,{pub:I,style:el()}),Y="".concat(I.name," - ").concat("stories"===J?"vertical":J),m=(0,w.gEL)(I,null,el(),{fileToDownload:Y}),T=()=>{(0,d.u4)(d.qY.PUBLICATION_MEDIA_ASSETS_IMAGE_DOWNLOADED,{aspectRatio:J,source:"download-button"})};break;case"post_asset":{let e=el(),{text:t,translatedText:n}="image"===Z?{text:"Image".concat(ea?" - no preview":""),translatedText:F(ea?"Image - no preview":"Image")}:"accent"===Z?{text:"Accent Color".concat(ea?" - no preview":""),translatedText:F(ea?"Accent Color - no preview":"Accent Color")}:"primary"===Z?{text:"Background Color".concat(ea?" - no preview":""),translatedText:F(ea?"Background Color - no preview":"Background Color")}:{text:"Black and White".concat(ea?" - no preview":""),translatedText:F(ea?"Black and White - no preview":"Black and White")};a=F("Create shareable image"),b=K&&(0,l.Y)(y.D,{pub:I,post:K,style:e,translatedText:n,size:420,hoverOverlay:!1}),Y="".concat(n," - ").concat("stories"===J?"vertical":J),m=K&&(0,w.fsB)(I,K,e,Y),T=()=>{(0,d.u4)(d.qY.WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED,{post_id:null==K?void 0:K.id,type:t,aspectRatio:e.aspectRatio,share_center:!0,inline:!1,source:"download-button"})}}}["arr_10k_milestone","arr_1k_milestone","list_100_milestone","list_1k_milestone"].includes(P)?(a=F("Share milestone"),Y="".concat(_," - ").concat("stories"===J?"vertical":J),T=()=>{(0,d.u4)(d.qY.MILESTONE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{milestone:_,aspectRatio:J,source:"download-button"})}):["paid_subscription","pledged_subscription"].includes(P)&&(a=F("Share message"),Y="Message - ".concat("stories"===J?"vertical":J));let ei=async()=>{null==T||T();let e=document.createElement("a");e.href=m,e.download=Y,e.target="_blank",e.rel="noopener noreferrer",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},es=q.length>1,ec=z.length>1,eu=s.C1.length>1;return(0,l.FD)(g.aF,{isOpen:O,onClose:er,width:M||640,renderOverReactLaagPortal:!0,fullscreenMobile:!0,children:[(0,l.Y)(g.rQ,{onClose:er,title:a,showClose:!0,showDivider:!0}),(0,l.Y)(g.cw,{children:(0,l.FD)(p.I1,{gap:20,children:[(0,l.Y)(p.pT,{className:v.A.imageContainer,alignItems:"center",justifyContent:"center",children:b}),(0,l.FD)(D,{children:[es&&(0,l.Y)(S,{assetThemes:q,assetTheme:Z,setAssetTheme:$,theme:V,pubCoverImageUrl:U}),ec&&(0,l.Y)(E,{assetTypes:z,assetType:ee,setAssetType:et}),eu&&(0,l.Y)(C,{aspectRatio:J,setAspectRatio:X,includeInstagram:H}),Q&&(0,l.Y)(A,{hidePreviewText:ea,setHidePreviewText:en})]})]})}),!eo&&(0,l.Y)(g.jl,{showDivider:!0,direction:"column",primaryButton:(0,l.Y)(h.$n,{priority:"primary",onClick:ei,children:F("Download image")})})]})}function S(e){let{assetThemes:t,assetTheme:a,setAssetTheme:n,theme:o,pubCoverImageUrl:r}=e;return(0,l.FD)(p.I1,{gap:8,children:[(0,l.Y)(m.EY.B4,{weight:"medium",translated:!0,children:"Background"}),(0,l.Y)(p.Ye,{gap:8,children:t.map(e=>(0,l.Y)(s.Hg,{value:e,isSelected:e===a,onClick:()=>n(e),themeVariables:o,coverImageUrl:r}))})]})}function E(e){let{assetTypes:t,assetType:a,setAssetType:n}=e;return(0,l.FD)(p.I1,{gap:8,children:[(0,l.Y)(m.EY.B4,{weight:"medium",translated:!0,children:"Type"}),(0,l.Y)(p.Ye,{gap:8,children:t.map(e=>{let{type:t,label:o}=e;return(0,l.Y)(s.jK,{label:o,isSelected:t===a,onClick:()=>n(t)})})})]})}function C(e){let{aspectRatio:t,setAspectRatio:a,includeInstagram:n}=e,o=n?s.C1:s.C1.filter(e=>"instagram"!==e);return(0,l.FD)(p.I1,{gap:8,children:[(0,l.Y)(m.EY.B4,{weight:"medium",translated:!0,children:"Aspect Ratio"}),(0,l.Y)(p.Ye,{gap:8,children:o.map(e=>(0,l.Y)(s.cK,{value:e,isSelected:e===t,onClick:()=>a(e)}))})]})}function A(e){let{hidePreviewText:t,setHidePreviewText:a}=e;return(0,l.FD)(p.I1,{gap:8,children:[(0,l.Y)(m.EY.B4,{weight:"medium",translated:!0,children:"Preview Text"}),(0,l.Y)(p.pT,{flex:"grow",alignItems:"center",children:(0,l.Y)(_.d,{checked:!t,onChange:e=>{a(!e),(0,d.u4)(d.qY.SHARE_CENTER_CUSTOMIZE_ASSETS_PREVIEW_TEXT_TOGGLED,{includePreviewText:e})}})})]})}let D=(0,b.I4)({display:"flex",gap:20,overflowX:"auto",flex:"auto",justifyContent:"space-between"})},64127:function(e,t,a){a.d(t,{JZ:()=>Y,PJ:()=>v,g:()=>S,gz:()=>C,tH:()=>E,yg:()=>w});var n=a(4006),l=a(82853),o=a(93164),r=a(27775),i=a(60996),s=a(60745),c=a(49031),u=a(70357),d=a(38685),f=a(84605),h=a(40691),p=a(35369),g=a(88774),b=a(87370),_=a(78526),m=a(2481),y=a(39318),k=a(49807);let w=e=>{let{variant:t,url:a,onLinkClicked:l}=e,{iString:o}=(0,f.GO)(),r=()=>{window.open((0,k.yRP)("https://www.facebook.com/sharer/sharer.php",{u:a}),"_blank"),null==l||l("facebook")};return"icon"===t?(0,n.Y)(p.K0,{priority:"secondary-outline",onClick:r,children:(0,n.Y)(c.A,{size:20})}):(0,n.Y)(g.Dr,{leading:(0,n.Y)(c.A,{}),onClick:r,children:o("Share to Facebook")})},v=e=>{let{variant:t,url:a,twitterText:l,onLinkClicked:o}=e,{iString:r}=(0,f.GO)(),i=()=>{window.open((0,y.gKg)({url:a,text:l||""}),"_blank"),null==o||o("twitter")};return"icon"===t?(0,n.Y)(p.K0,{priority:"secondary-outline",onClick:i,children:(0,n.Y)(d.A,{size:20})}):(0,n.Y)(g.Dr,{leading:(0,n.Y)(d.A,{}),onClick:i,children:r("Share to X")})},Y=e=>{let{variant:t,url:a,twitterText:l,onLinkClicked:o}=e,{iString:r}=(0,f.GO)(),i=()=>{window.open((0,y.man)({text:l?"".concat(l,"\n").concat(a):null!=a?a:""}),"_blank"),null==o||o("bluesky")};return"icon"===t?(0,n.Y)(p.K0,{priority:"secondary-outline",onClick:i,children:(0,n.Y)(s.A,{size:20})}):(0,n.Y)(g.Dr,{leading:(0,n.Y)(s.A,{}),onClick:i,children:r("Share to Bluesky")})},S=e=>{let{variant:t,url:a,onLinkClicked:o}=e,{iString:r}=(0,f.GO)(),i=(0,_.L)(),s=()=>{a&&(i(a),null==o||o("copy"))};return"icon"===t?(0,n.Y)(p.K0,{priority:"secondary-outline",onClick:s,children:(0,n.Y)(l.A,{height:20})}):(0,n.Y)(g.Dr,{leading:(0,n.Y)(l.A,{}),onClick:s,children:r("Copy link")})},E=e=>{let{variant:t,url:a,onLinkClicked:l}=e,{iString:o}=(0,f.GO)(),r=(0,m.NP)(),i=()=>{r.open({restackUrl:a||""}),null==l||l("notes")};return"icon"===t?(0,n.Y)(p.K0,{priority:"secondary-outline",onClick:i,children:(0,n.Y)(u.A,{size:20})}):(0,n.Y)(g.Dr,{leading:(0,n.Y)(u.A,{}),onClick:i,children:o("Share to Notes")})};function C(e){let t=w(e),a=Y(e),l=v(e),s=S(e),c=E(e),u=(e=>{let{onLinkClicked:t,comment:a}=e,{iString:l}=(0,f.GO)(),{openModal:r,closeModal:s}=(0,h.hS)();return a?(0,n.Y)(g.Dr,{leading:(0,n.Y)(o.A,{}),onClick:()=>{null==t||t("embed"),r({children:(0,n.Y)(i.k,{comment:a||void 0,onClose:s}),width:540})},children:l("Embed note")}):null})(e),d=function(e){let{url:t,onLinkClicked:a}=e,{iString:l}=(0,f.GO)(),o=(0,b.$)();return(0,n.Y)(g.Dr,{leading:(0,n.Y)(r.A,{}),onClick:()=>{o.open({linkAttachmentUrl:null!=t?t:void 0,source:"share_post"}),null==a||a("chat")},children:l("Send as message")})}(e);return(0,n.FD)(n.FK,{children:[(0,n.FD)(g.H9,{isFirst:!0,children:[s,d]}),(0,n.FD)(g.H9,{children:[c,t,a,l]}),(0,n.Y)(g.H9,{children:u})]})}},26606:function(e,t,a){a.d(t,{i:()=>l});var n=a(94729);let l=e=>async t=>{let a="before";t({type:"conversation-request_initial",payload:{conversationId:e}});try{let l=await (0,n.x6)("/api/v1/messages/dm/".concat(e));t({type:"conversation-load_more",payload:{edge:a,cursor:null,page:l}})}catch(n){t({type:"conversation-request_error",payload:{conversationId:e,edge:a,cursor:null,error:n}})}}},68391:function(e,t,a){a.d(t,{C4:()=>s,Kl:()=>i});var n=a(4006),l=a(17402),o=a(46271);let r=(0,l.createContext)({registerVideo:()=>void 0,unregisterVideo:()=>void 0,updatePaywallState:()=>void 0}),i=e=>{let{children:t}=e,[a,i]=(0,l.useState)(0),s=(0,l.useRef)([]),c=(0,l.useRef)(new Map),u=(0,o.Qg)().autoPlayVideo;(0,l.useEffect)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;"true"===t.getAttribute("data-user-changed-playback")||(e.isIntersecting?!c.current.get(t)&&u&&t.play().catch(e=>{console.log("Unable to autoplay prior to user interaction with the dom.",e),t.muted=!0,t.play().catch(e=>{console.error("Unable to autoplay prior to user interaction with the dom when muted.",e)})}):t.pause())})},{threshold:1});return s.current.forEach(t=>{var a;(null==(a=t.current)?void 0:a.player)&&e.observe(t.current.player)}),()=>{s.current.forEach(t=>{var a;(null==(a=t.current)?void 0:a.player)&&e.unobserve(t.current.player)})}},[a]);let d=(0,l.useCallback)(e=>{e&&!s.current.includes(e)&&(s.current.push(e),i(e=>e+1))},[]),f=(0,l.useCallback)(e=>{s.current=s.current.filter(t=>t!==e),i(e=>e+1)},[]),h=(0,l.useCallback)(e=>{var t;let{videoPlayerRef:a,showPaywall:n}=e;(null==(t=a.current)?void 0:t.player)&&c.current.set(a.current.player,n)},[]);return(0,n.Y)(r.Provider,{value:{registerVideo:d,unregisterVideo:f,updatePaywallState:h},children:t})},s=e=>{let{disable:t,showPaywall:a,videoPlayerRef:n}=e,{registerVideo:o,unregisterVideo:i,updatePaywallState:s}=(0,l.useContext)(r);(0,l.useEffect)(()=>{if(n.current&&!t)return o(n),()=>{i(n)}},[t,o,i,n]),(0,l.useEffect)(()=>{s({showPaywall:a,videoPlayerRef:n})},[a,s,n])}},8312:function(e,t,a){a.d(t,{OK:()=>c,n0:()=>u});var n=a(69277);let l="'SF Pro Display', -apple-system, system-ui, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",o=[{label:"Serif",families:[{name:"Andada Pro",weights:[600,700,800],defaultWeight:800,fallback:"sans-serif"},{name:"Besley",weights:[700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"Bitter",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"IBM Plex Serif",weights:[500,600,700],defaultWeight:700,fallback:"sans-serif"},{name:"Lora",weights:[500,600,700],defaultWeight:600,fallback:"sans-serif"},{name:"Roboto Slab",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"STIX Two Text",weights:[500,600,700],defaultWeight:700,fallback:"sans-serif"},{name:"Yrsa",weights:[500,600,700],defaultWeight:700,fallback:"sans-serif"}]},{label:"Sans Serif",families:[{name:"System",weights:[700,900],defaultWeight:700,fallback:"sans-serif",keys:{700:"sans",900:"heavy_sans"}},{name:"Fira Sans",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"Inter Tight",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"Lato",weights:[700,900],defaultWeight:900,fallback:"sans-serif"},{name:"Nunito Sans",weights:[600,700,800,900],defaultWeight:800,fallback:"sans-serif"},{name:"PT Sans",weights:[700],defaultWeight:700,fallback:"sans-serif"},{name:"Raleway",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"Roboto",weights:[600,700,800,900],defaultWeight:700,fallback:"sans-serif"},{name:"Source Sans 3",weights:[600,700,800,900],defaultWeight:800,fallback:"sans-serif"}]},{label:"Monospace",families:[{name:"Roboto Mono",weights:[500,600,700],defaultWeight:700,fallback:"monospace"}]}],r=[{name:"Lora",weights:[400],defaultWeight:400,fallback:"sans-serif"},{name:"Roboto Mono",weights:[400],defaultWeight:400,fallback:"monospace"},{name:"Roboto Slab",weights:[400],defaultWeight:400,fallback:"sans-serif"},{name:"Spectral",weights:[400],defaultWeight:400,fallback:"sans-serif"}];[...o.flatMap(e=>e.families).filter(e=>!("keys"in e)),...r];function i(e,t){if(!("keys"in t))for(let n of t.weights){var a;let l={font:t.name,weight:n,fallback:t.fallback};e[a=t.name,"".concat(a.toLowerCase().replace(/ /g,"_"),"_").concat(n)]=l}}let s=function(){let e={},t={};for(let t of o)for(let a of t.families)i(e,a);for(let e of r)i(t,e);return{heading:e,body:t}}();for(let[e,t]of Object.entries({fancy_serif:"lora_600",mono:"roboto_mono_700",slab:"roboto_slab_700"})){let a=s.heading[t];a&&(s.heading[e]=a)}for(let[e,t]of Object.entries({fancy_serif:"lora_400",classic_serif:"spectral_400",mono:"roboto_mono_400",slab:"roboto_slab_400"})){let a=s.body[t];a&&(s.body[e]=a)}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if("sans"===e)return{fontFamily:l,fontWeight:700};if("heavy_sans"===e)return{fontFamily:l,fontWeight:900};let a=s.heading[e];if(!a)return null;let o=a.font.match(" ")?"'".concat(a.font,"'"):a.font;return(0,n._)({fontFamily:t?a.fallback:[o,a.fallback].join(",")},a.weight&&{fontWeight:a.weight})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;if("sans"===e)return{fontFamily:l,fontWeight:400};let a=s.body[e];if(!a)return null;let o=a.font.match(" ")?"'".concat(a.font,"'"):a.font;return(0,n._)({fontFamily:t?a.fallback:[o,a.fallback].join(",")},a.weight&&{fontWeight:a.weight})}}}]);