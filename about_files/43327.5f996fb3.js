!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="643748ae-0260-4a6e-a0d5-560bca7d0057",e._sentryDebugIdIdentifier="sentry-dbid-643748ae-0260-4a6e-a0d5-560bca7d0057")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["43327"],{25250:function(e,r,t){t.d(r,{Ay:()=>d,BE:()=>l,Tk:()=>a.Tk,iX:()=>a.iX,uv:()=>a.uv});var n=t(17402),u=t(19888),a=t(11167);let i=n.default.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}),s={dedupe:!0},l=a.qv.defineProperty(a.BE,"defaultValue",{value:a.sb}),d=(0,a.qm)((e,r,t)=>{let{cache:l,compare:d,suspense:c,fallbackData:o,revalidateOnMount:f,revalidateIfStale:b,refreshInterval:g,refreshWhenHidden:E,refreshWhenOffline:T,keepPreviousData:R}=t,[V,y,h,k]=a.bZ.get(l),[w,p]=(0,a.lK)(e),v=(0,n.useRef)(!1),L=(0,n.useRef)(!1),_=(0,n.useRef)(w),m=(0,n.useRef)(r),C=(0,n.useRef)(t),D=()=>C.current.isVisible()&&C.current.isOnline(),[O,I,S,N]=(0,a.r9)(l,w),A=(0,n.useRef)({}).current,P=(0,a.b0)(o)?t.fallback[w]:o,F=(e,r)=>{for(let t in A)if("data"===t){if(!d(e[t],r[t])&&(!(0,a.b0)(e[t])||!d(x,r[t])))return!1}else if(r[t]!==e[t])return!1;return!0},X=(0,n.useMemo)(()=>{let e=!!w&&!!r&&((0,a.b0)(f)?!C.current.isPaused()&&!c&&(!!(0,a.b0)(b)||b):f),t=r=>{let t=(0,a.rL)(r);return(delete t._k,e)?{isValidating:!0,isLoading:!0,...t}:t},n=O(),u=N(),i=t(n),s=n===u?i:t(u),l=i;return[()=>{let e=t(O());return F(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>s]},[l,w]),q=(0,u.useSyncExternalStore)((0,n.useCallback)(e=>S(w,(r,t)=>{F(t,r)||e()}),[l,w]),X[0],X[1]),Z=!v.current,j=V[w]&&V[w].length>0,B=q.data,H=(0,a.b0)(B)?P:B,M=q.error,U=(0,n.useRef)(H),x=R?(0,a.b0)(B)?U.current:B:H,K=(!j||!!(0,a.b0)(M))&&(Z&&!(0,a.b0)(f)?f:!C.current.isPaused()&&(c?!(0,a.b0)(H)&&b:(0,a.b0)(H)||b)),Y=!!(w&&r&&Z&&K),z=(0,a.b0)(q.isValidating)?Y:q.isValidating,G=(0,a.b0)(q.isLoading)?Y:q.isLoading,J=(0,n.useCallback)(async e=>{let r,n,u=m.current;if(!w||!u||L.current||C.current.isPaused())return!1;let i=!0,s=e||{},l=!h[w]||!s.dedupe,c=()=>a.dO?!L.current&&w===_.current&&v.current:w===_.current,o={isValidating:!1,isLoading:!1},f=()=>{I(o)},b=()=>{let e=h[w];e&&e[1]===n&&delete h[w]},g={isValidating:!0};(0,a.b0)(O().data)&&(g.isLoading=!0);try{if(l&&(I(g),t.loadingTimeout&&(0,a.b0)(O().data)&&setTimeout(()=>{i&&c()&&C.current.onLoadingSlow(w,t)},t.loadingTimeout),h[w]=[u(p),(0,a.lg)()]),[r,n]=h[w],r=await r,l&&setTimeout(b,t.dedupingInterval),!h[w]||h[w][1]!==n)return l&&c()&&C.current.onDiscarded(w),!1;o.error=a.ZH;let e=y[w];if(!(0,a.b0)(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return f(),l&&c()&&C.current.onDiscarded(w),!1;let s=O().data;o.data=d(s,r)?s:r,l&&c()&&C.current.onSuccess(r,w,t)}catch(t){b();let e=C.current,{shouldRetryOnError:r}=e;!e.isPaused()&&(o.error=t,l&&c()&&(e.onError(t,w,e),(!0===r||(0,a.Tn)(r)&&r(t))&&D()&&e.onErrorRetry(t,w,e,e=>{let r=V[w];r&&r[0]&&r[0](a.bu.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return i=!1,f(),!0},[w,l]),Q=(0,n.useCallback)((...e)=>(0,a.mF)(l,_.current,...e),[]);if((0,a.Es)(()=>{m.current=r,C.current=t,(0,a.b0)(B)||(U.current=B)}),(0,a.Es)(()=>{if(!w)return;let e=J.bind(a.ZH,s),r=0,t=(0,a.aw)(w,V,(t,n={})=>{if(t==a.bu.FOCUS_EVENT){let t=Date.now();C.current.revalidateOnFocus&&t>r&&D()&&(r=t+C.current.focusThrottleInterval,e())}else if(t==a.bu.RECONNECT_EVENT)C.current.revalidateOnReconnect&&D()&&e();else if(t==a.bu.MUTATE_EVENT)return J();else if(t==a.bu.ERROR_REVALIDATE_EVENT)return J(n)});return L.current=!1,_.current=w,v.current=!0,I({_k:p}),K&&((0,a.b0)(H)||a.X3?e():(0,a.mf)(e)),()=>{L.current=!0,t()}},[w]),(0,a.Es)(()=>{let e;function r(){let r=(0,a.Tn)(g)?g(O().data):g;r&&-1!==e&&(e=setTimeout(t,r))}function t(){!O().error&&(E||C.current.isVisible())&&(T||C.current.isOnline())?J(s).then(r):r()}return r(),()=>{e&&(clearTimeout(e),e=-1)}},[g,E,T,w]),(0,n.useDebugValue)(x),c&&(0,a.b0)(H)&&w){if(!a.dO&&a.X3)throw Error("Fallback data is required when using suspense in SSR.");m.current=r,C.current=t,L.current=!1;let e=k[w];if((0,a.b0)(e)||i(Q(e)),(0,a.b0)(M)){let e=J(s);(0,a.b0)(x)||(e.status="fulfilled",e.value=!0),i(e)}else throw M}return{mutate:Q,get data(){return A.data=!0,x},get error(){return A.error=!0,M},get isValidating(){return A.isValidating=!0,z},get isLoading(){return A.isLoading=!0,G}}})}}]);