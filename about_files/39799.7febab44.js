!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7173e02d-e1ca-42fa-9da3-63a604ea61b4",e._sentryDebugIdIdentifier="sentry-dbid-7173e02d-e1ca-42fa-9da3-63a604ea61b4")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["39799"],{36092:function(e,t,n){n.d(t,{A:()=>r});let r={webContainer:"webContainer-IIk356",container:"container-hh54mh",emailWrapper:"emailWrapper-NhzydE",text:"text-Fj8WVT",title:"title-RBoKZn",button:"button-hAEuwt"}},91348:function(e,t,n){n.d(t,{A:()=>r});let r={container:"container-sfnj9V",emailWrapper:"emailWrapper-qwz6NP"}},82144:function(){},36008:function(e,t,n){n.d(t,{A:()=>r});let r={gallery:"gallery-Phxj1j",static:"static-he6Urp",edit:"edit-aqFSXY",imageCaption:"imageCaption-iHC8xR",image:"image-IE_pDY",zoom:"zoom-YdDT6p",imageRow:"imageRow-_Y6x8T","length-2":"length-2-inHdHY",length2:"length-2-inHdHY",inbox:"inbox-uLXwi5",imageGalleryWrap:"imageGalleryWrap-ICPFaM",imageWrap:"imageWrap-egM10V",small:"small-AA4Dt8",medium:"medium-ZeIdEU"}},71305:function(e,t,n){n.d(t,{A:()=>r});let r={imageBubble:"imageBubble-PUJ2WF",clickable:"clickable-z7o89Z",imageGrid:"imageGrid-TadIyX",permalink:"permalink-Zw9a6V",gutterless:"gutterless-jbL1s8","size-1":"size-1-rfav9C",size1:"size-1-rfav9C","size-2":"size-2-LosM46",size2:"size-2-LosM46","size-4":"size-4-O0kTBk",size4:"size-4-O0kTBk","size-3":"size-3-MmfJJu",size3:"size-3-MmfJJu","size-5":"size-5-cc0rFG",size5:"size-5-cc0rFG","size-6":"size-6-SP0NOv",size6:"size-6-SP0NOv",contained:"contained-GU4Fy5",preview:"preview-SSSK5E",dm:"dm-XsOsrC",shareAsset:"shareAsset-GPtbs6",diptychImage:"diptychImage-L7kJ7N",carouselImage:"carouselImage-X3Cree",imageCountOverlay:"imageCountOverlay-J0DNI5",imageGridThumbnail:"imageGridThumbnail-D4cu25",thumbnailImage:"thumbnailImage-uSyTfq",imageCarouselContainer:"imageCarouselContainer-Y1hu48",imageCarousel:"imageCarousel-s8aXY3",carouselSpacer:"carouselSpacer-yyKzy_",overscrollTransition:"overscrollTransition-FddfeV",arrowContainer:"arrowContainer-_8XYI6",left:"left-QRb4rs",right:"right-_sA6d0",arrowButton:"arrowButton-iwL13X",hidden:"hidden-YjEzYn",arrowIcon:"arrowIcon-Vpjw1u",restack:"restack-AvS7gl"}},7777:function(e,t,n){n.d(t,{A:()=>r});let r={latexWrapper:"latexWrapper-xXiahu",latexEdit:"latexEdit-CT7sNA",emptyStateWrapper:"emptyStateWrapper-SwgxAc"}},47961:function(e,t,n){n.d(t,{A:()=>r});let r={timeline:"timeline-WDyd1C",railContainer:"railContainer-W63jgB",rail:"rail-LM6nrG",draggable:"draggable-XUqwr1",draggableLeft:"draggableLeft-MDthpn",draggableRight:"draggableRight-LVVwsd",tooltip:"tooltip-ceWgga",visible:"visible-Y2jC2J",hidden:"hidden-G_OmGT",playback:"playback-UIgSL0",nonSelectable:"nonSelectable-SHHRwG",tick:"tick-RKB6b5",lgTick:"lgTick-iLU6yS",smTick:"smTick-ED2tnj",currentTick:"currentTick-xH7tpT",selection:"selection-m8n06y",selectionFadeLeft:"selectionFadeLeft-rID4fZ",selectionFadeRight:"selectionFadeRight-iIPOWk",handle:"handle-prO_Ky",storyboard:"storyboard-xsBzUl",ticks:"ticks-EA7bBQ",handles:"handles-waTdni",shadow:"shadow-wpFmkU",shadowContainer:"shadowContainer-JsGn6N"}},53076:function(e,t,n){n.d(t,{A:()=>r});let r={embed:"embed-gCEqUi"}},37316:function(e,t,n){n.d(t,{A:()=>r});let r={container:"container-AQs2b4",fill:"fill-xiDTGC",playhead:"playhead-jk5E3b"}},20004:function(e,t,n){n.d(t,{A:()=>r});let r={digestPostEmbed:"digestPostEmbed-flwiST",menu:"menu-juA09f",caption:"caption-QiPycG",captionEditor:"captionEditor-bK4vPR",smSquare:"smSquare-NGbPBa",mdSquare:"mdSquare-pPKPYa",fullWidth:"fullWidth-Ta6aEE",inheritColor:"inheritColor-WetTGJ",link:"link-HREYZo",disableLink:"disableLink-tkz2Oq",videoEmbedPlaceholder:"videoEmbedPlaceholder-AnM6Oo",videoEmbed:"videoEmbed-wAH5DW",videoOverlay:"videoOverlay-CuVkgR",alwaysVisible:"alwaysVisible-OssqWH",copyLinkButton:"copyLinkButton-FSDeif",titleLink:"titleLink-pal8_e"}},96473:function(e,t,n){n.d(t,{A:()=>r});let r={fpRecircBlock:"fpRecircBlock-HKJKYS",alignLeft:"alignLeft-WOT5JO",alignRight:"alignRight-bj2Dhz",header:"header-ie27mg",editor:"editor-V2JXka",sectionTitle:"sectionTitle-Xp9aWg",editable:"editable-oVCSpQ",titleInput:"titleInput-yIjmBm",postWrapper:"postWrapper-gPIVFt",postCard:"postCard-QEnqbK",hoverButton:"hoverButton-N0n6PV",emptySlot:"emptySlot-P_So_W",postImage:"postImage-tnGOF4",imageWrapper:"imageWrapper-mC7xPu",imagePlaceholder:"imagePlaceholder-uxRFZW",postContent:"postContent-kE5vyY",postTitle:"postTitle-WVs0I0",postAuthor:"postAuthor-Wuf0b1",tooltipContainer:"tooltipContainer-_Xo3J2",settingsButton:"settingsButton-LeI8A4",loading:"loading-HVK0LW",emptySlotContainer:"emptySlotContainer-Hjnza1",emptySlotItem:"emptySlotItem-OuTb9G",emptySlotTrigger:"emptySlotTrigger-vqGF5w",modalContainer:"modalContainer-iZuIQf",searchModal:"searchModal-ZuQoVH",searchModalTitle:"searchModalTitle-ii8cvR",searchModalInput:"searchModalInput-hXDbwI",searchModalResults:"searchModalResults-OojB5D",selected:"selected-wxI5Rb",noResults:"noResults-7fr0n7",editButtonContainer:"editButtonContainer-WIMQ0a",fpRecircBlockEmail:"fpRecircBlockEmail-bQo7e4",sectionTitleEmail:"sectionTitleEmail-OAZP1e",postTitleEmail:"postTitleEmail-HJC8Ka",postAuthorEmail:"postAuthorEmail-MsYeIm",emailLink:"emailLink-AegMn8",imageWrapperEmail:"imageWrapperEmail-yADEGT",postImageEmail:"postImageEmail-T8eGUY",imagePlaceholderEmail:"imagePlaceholderEmail-vtKzp8"}},60177:function(e,t,n){n.d(t,{A:()=>r});let r={mediaNodeView:"mediaNodeView-e5SnLi","align-left":"align-left-zBTRM0",alignLeft:"align-left-zBTRM0","align-center":"align-center-GLlHHY",alignCenter:"align-center-GLlHHY","align-right":"align-right-b0iEsr",alignRight:"align-right-b0iEsr",staticView:"staticView-rMg88c",staticImageWrap:"staticImageWrap-zeAxjE",left:"left-Pmbfny",right:"right-jUl_lm",imageContainer:"imageContainer-BFwwV8",large:"large-zd0XRW",full:"full-B7kzBg",caption:"caption-hKmpHN",placeholder:"placeholder-HWtRBz",static:"static-oTq1ez",inlineCaptionEditor:"inlineCaptionEditor-kbzlrs",horizontalResizeHandle:"horizontalResizeHandle-nC_iub",mediaControlButtons:"mediaControlButtons-lqBkgd",active:"active-jfe8JH",mediaControlTextEditor:"mediaControlTextEditor-oFhu3a",hasCaption:"hasCaption-A8cBUm",zoom:"zoom-zeAR_Z",pointer:"pointer-Hr6Xl2"}},16722:function(e,t,n){n.d(t,{A:()=>r});let r={checkbox:"checkbox-jbvy_H",tosCheckboxContainer:"tosCheckboxContainer-vfMi_Y"}},8242:function(e,t,n){n.d(t,{A:()=>r});let r={editorBorder:"editorBorder-I0g0rz",editorWrapper:"editorWrapper-HyGil8",editorHelperText:"editorHelperText-PWUmEI"}},63281:function(e,t,n){n.d(t,{A:()=>r});let r={button:"button-ultxpw",buttonDisabled:"buttonDisabled-Uxc4ZD","button-justify-content-start":"button-justify-content-start-X35nBJ",buttonJustifyContentStart:"button-justify-content-start-X35nBJ","button-size-lg":"button-size-lg-mFsNs8",buttonSizeLg:"button-size-lg-mFsNs8","button-size-md":"button-size-md-J2SsUW",buttonSizeMd:"button-size-md-J2SsUW","button-size-sm":"button-size-sm-M_QSNF",buttonSizeSm:"button-size-sm-M_QSNF","button-variant-primary":"button-variant-primary-XjvZp5",buttonVariantPrimary:"button-variant-primary-XjvZp5","button-variant-primary-accent":"button-variant-primary-accent-YDCMgj",buttonVariantPrimaryAccent:"button-variant-primary-accent-YDCMgj","button-variant-tertiary":"button-variant-tertiary-TX9xVJ",buttonVariantTertiary:"button-variant-tertiary-TX9xVJ","button-variant-inverse":"button-variant-inverse-e7GG60",buttonVariantInverse:"button-variant-inverse-e7GG60","button-variant-outline":"button-variant-outline-sYoYJU",buttonVariantOutline:"button-variant-outline-sYoYJU","button-variant-outline-accent":"button-variant-outline-accent-EBL9Rj",buttonVariantOutlineAccent:"button-variant-outline-accent-EBL9Rj","button-variant-inactive":"button-variant-inactive-A_4LkS",buttonVariantInactive:"button-variant-inactive-A_4LkS","button-variant-red-text":"button-variant-red-text-gYjIdY",buttonVariantRedText:"button-variant-red-text-gYjIdY","button-as-link":"button-as-link-Cr7op3",buttonAsLink:"button-as-link-Cr7op3","button-variant-accordion":"button-variant-accordion-qRdmQc",buttonVariantAccordion:"button-variant-accordion-qRdmQc"}},16389:function(e,t,n){n.d(t,{A:()=>r});let r={container:"container-s8tYit","preset-h1-sans":"preset-h1-sans-Qop2bo",presetH1Sans:"preset-h1-sans-Qop2bo","preset-h1-serif":"preset-h1-serif-QyYae8",presetH1Serif:"preset-h1-serif-QyYae8","preset-h1-text":"preset-h1-text-Xj6FhR",presetH1Text:"preset-h1-text-Xj6FhR","preset-h2-serif":"preset-h2-serif-IuXvG0",presetH2Serif:"preset-h2-serif-IuXvG0","preset-h3-compressed":"preset-h3-compressed-dB9FAX",presetH3Compressed:"preset-h3-compressed-dB9FAX","preset-h3-condensed":"preset-h3-condensed-kGahdt",presetH3Condensed:"preset-h3-condensed-kGahdt","preset-h4-sans-condensed":"preset-h4-sans-condensed-Reqd8Y",presetH4SansCondensed:"preset-h4-sans-condensed-Reqd8Y","preset-h4-sans-regular":"preset-h4-sans-regular-S6R6pb",presetH4SansRegular:"preset-h4-sans-regular-S6R6pb","preset-h4-sans-regular-menu":"preset-h4-sans-regular-menu-RuwXXd",presetH4SansRegularMenu:"preset-h4-sans-regular-menu-RuwXXd","preset-h4-serif":"preset-h4-serif-sMtXaD",presetH4Serif:"preset-h4-serif-sMtXaD","preset-h5-sans":"preset-h5-sans-oGxgjp",presetH5Sans:"preset-h5-sans-oGxgjp","preset-h5-sans-compressed":"preset-h5-sans-compressed-QXnWLT",presetH5SansCompressed:"preset-h5-sans-compressed-QXnWLT","preset-h5-serif":"preset-h5-serif-mY7BSm",presetH5Serif:"preset-h5-serif-mY7BSm","preset-h6-sans":"preset-h6-sans-Gi2FdE",presetH6Sans:"preset-h6-sans-Gi2FdE","preset-h6-serif":"preset-h6-serif-NHX2Ix",presetH6Serif:"preset-h6-serif-NHX2Ix","preset-h7-serif":"preset-h7-serif-qxcjrB",presetH7Serif:"preset-h7-serif-qxcjrB","preset-h7-sans":"preset-h7-sans-bXgWg2",presetH7Sans:"preset-h7-sans-bXgWg2","preset-d1-sans-regular":"preset-d1-sans-regular-HmsiTa",presetD1SansRegular:"preset-d1-sans-regular-HmsiTa","preset-d1-sans-medium":"preset-d1-sans-medium-qccA4g",presetD1SansMedium:"preset-d1-sans-medium-qccA4g","preset-d1-serif":"preset-d1-serif-eNQpMA",presetD1Serif:"preset-d1-serif-eNQpMA","preset-d2-serif":"preset-d2-serif-Zt3T9I",presetD2Serif:"preset-d2-serif-Zt3T9I","preset-d2-serif-bold":"preset-d2-serif-bold-b6ZIUk",presetD2SerifBold:"preset-d2-serif-bold-b6ZIUk","preset-d3-serif":"preset-d3-serif-RnjX7h",presetD3Serif:"preset-d3-serif-RnjX7h","preset-d3-serif-bold":"preset-d3-serif-bold-IdUurP",presetD3SerifBold:"preset-d3-serif-bold-IdUurP","preset-d4-serif":"preset-d4-serif-SEAETp",presetD4Serif:"preset-d4-serif-SEAETp","preset-d4-serif-bold":"preset-d4-serif-bold-HsJN25",presetD4SerifBold:"preset-d4-serif-bold-HsJN25","preset-st1":"preset-st1-O4T2tk",presetSt1:"preset-st1-O4T2tk","preset-st2":"preset-st2-XavWyr",presetSt2:"preset-st2-XavWyr","preset-st3":"preset-st3-mae929",presetSt3:"preset-st3-mae929","preset-st4":"preset-st4-nrV6E9",presetSt4:"preset-st4-nrV6E9","preset-body":"preset-body-JzLL5Q",presetBody:"preset-body-JzLL5Q","preset-body-link":"preset-body-link-V8UQqw",presetBodyLink:"preset-body-link-V8UQqw","preset-detail-large":"preset-detail-large-s2MDYG",presetDetailLarge:"preset-detail-large-s2MDYG","preset-detail-large-bold":"preset-detail-large-bold-cYVhri",presetDetailLargeBold:"preset-detail-large-bold-cYVhri","preset-detail-small":"preset-detail-small-mk1EbE",presetDetailSmall:"preset-detail-small-mk1EbE","preset-detail-small-bold":"preset-detail-small-bold-DhgQVM",presetDetailSmallBold:"preset-detail-small-bold-DhgQVM","preset-pullquote":"preset-pullquote-jlelFS",presetPullquote:"preset-pullquote-jlelFS","preset-article-byline":"preset-article-byline-YLd430",presetArticleByline:"preset-article-byline-YLd430","preset-timestamp":"preset-timestamp-JIzgHn",presetTimestamp:"preset-timestamp-JIzgHn","preset-caption":"preset-caption-U1Uztw",presetCaption:"preset-caption-U1Uztw","preset-misc-sans":"preset-misc-sans-y4snTd",presetMiscSans:"preset-misc-sans-y4snTd","preset-sm-preview-byline":"preset-sm-preview-byline-W4hKcb",presetSmPreviewByline:"preset-sm-preview-byline-W4hKcb","preset-lg-preview-byline":"preset-lg-preview-byline-dy8tib",presetLgPreviewByline:"preset-lg-preview-byline-dy8tib","preset-list-item-menu":"preset-list-item-menu-EiM1Es",presetListItemMenu:"preset-list-item-menu-EiM1Es","align-left":"align-left-kbuSQE",alignLeft:"align-left-kbuSQE","align-center":"align-center-UWtlhT",alignCenter:"align-center-UWtlhT","align-right":"align-right-onO3hJ",alignRight:"align-right-onO3hJ","wrap-pretty":"wrap-pretty-ejTmFK",wrapPretty:"wrap-pretty-ejTmFK","wrap-balance":"wrap-balance-jmGdbe",wrapBalance:"wrap-balance-jmGdbe",clamp:"clamp-Vi5QjU","clamp-1":"clamp-1-OfiQ1V",clamp1:"clamp-1-OfiQ1V","clamp-2":"clamp-2-_Mb9Jj",clamp2:"clamp-2-_Mb9Jj","clamp-3":"clamp-3-jYPWgo",clamp3:"clamp-3-jYPWgo","clamp-4":"clamp-4-qoVcAB",clamp4:"clamp-4-qoVcAB","clamp-5":"clamp-5-rto_2V",clamp5:"clamp-5-rto_2V","clamp-6":"clamp-6-tHjoiW",clamp6:"clamp-6-tHjoiW","color-accent":"color-accent-ACVlDT",colorAccent:"color-accent-ACVlDT","color-primary":"color-primary-NaQ4Ae",colorPrimary:"color-primary-NaQ4Ae","color-white":"color-white-MlYGuP",colorWhite:"color-white-MlYGuP","color-blue":"color-blue-MQGY4t",colorBlue:"color-blue-MQGY4t","color-tertiary":"color-tertiary-mHRDyo",colorTertiary:"color-tertiary-mHRDyo","color-disabled":"color-disabled-gVbtOK",colorDisabled:"color-disabled-gVbtOK","white-space-nowrap":"white-space-nowrap-oTjHiF",whiteSpaceNowrap:"white-space-nowrap-oTjHiF","white-space-normal":"white-space-normal-HrU_HE",whiteSpaceNormal:"white-space-normal-HrU_HE"}},18012:function(e,t,n){n.d(t,{A:()=>r});let r={buttonContainer:"buttonContainer-tH3LP9",previewOverlay:"previewOverlay-abzqK3"}},44366:function(e,t,n){n.d(t,{A:()=>r});let r={verticalMenu:"verticalMenu-iEWUZS",customThumbnailInput:"customThumbnailInput-XO3HWP",loadingPlaceholder:"loadingPlaceholder-PycMQg",videoPlaceholder:"videoPlaceholder-z7fCRh",thumbnailPicture:"thumbnailPicture-sSZ1qk",thumbnailPreviewContainer:"thumbnailPreviewContainer-VyJhWD",videoEditorMenu:"videoEditorMenu-PM9LlQ",verticalMenuLabel:"verticalMenuLabel-lDnMVg",clipIcon:"clipIcon-bRPUgg",thumbnailOptionsCarousel:"thumbnailOptionsCarousel-RN5au0",thumbnailOptionItem:"thumbnailOptionItem-TyR4Pm",thumbnailOptionItemSelected:"thumbnailOptionItemSelected-Xdrpbf",thumbnailOptionImage:"thumbnailOptionImage-RiWxv6",fullWidthButton:"fullWidthButton-E8QDEj"}},84685:function(){},8791:function(e,t,n){n.d(t,{A:()=>r});let r={livePill:"livePill-wNMCye"}},52687:function(e,t,n){n.d(t,{A:()=>r});let r={input:"input-ZGrgg4"}},2890:function(e,t,n){n.d(t,{A:()=>r});let r={avatar:"avatar-LanjdX",badge:"badge-Uvjr_O",container:"container-t1XakO",header:"header-MPtCPc",emailButton:"emailButton-TJW1DY",cta:"cta-htyRl8"}},25879:function(e,t,n){n.d(t,{A:()=>r});let r={select:"select-nGc13j",menu:"menu-T8bpIH",disabled:"disabled-Dbz4PM",focus:"focus-JiAubq",error:"error-L2xDMl",leading:"leading-o7jWpZ",size_sm:"size_sm-wP3fcB",sizeSm:"size_sm-wP3fcB",size_md:"size_md-4WlyW1",sizeMd:"size_md-4WlyW1",trailing:"trailing-ezPcro","priority_secondary-outline":"priority_secondary-outline-ZUiTkO",prioritySecondaryOutline:"priority_secondary-outline-ZUiTkO",priority_tertiary:"priority_tertiary-Y9DHgN",priorityTertiary:"priority_tertiary-Y9DHgN"}},88419:function(e,t,n){n.d(t,{A:()=>r});let r={content:"content-etG1Ty"}},33540:function(e,t,n){n.d(t,{A:()=>r});let r={toggle:"toggle-qPLOMm",content:"content-PO04C_",on:"on-oX6ZaQ",off:"off-Pr96yj",animate:"animate-Rwg7DP"}},97884:function(e,t,n){n.d(t,{A:()=>r});let r={code:"code-G_k53t",hoverChild:"hoverChild-iT6tA_",hoverTarget:"hoverTarget-UvGaad"}},97684:function(e,t,n){n.d(t,{A:()=>r});let r={input:"input-X5E9i8",inputWrapper:"inputWrapper-oU82fm",inputBox:"inputBox-sEFZlI",disabled:"disabled-E8NHVa",hasChips:"hasChips-vDsUWG",options:"options-aBXwqq",empty:"empty-DC9PME",option:"option-orqVUP",check:"check-qomjjP",button:"button-xcVawW"}},7743:function(e,t,n){n.d(t,{A:()=>r});let r={highlight:"highlight-U002IP"}},83447:function(e,t,n){n.d(t,{A:()=>r});let r={spinner:"spinner-JBla2j",transparent:"transparent-f5_dXW"}},44307:function(e,t,n){n.d(t,{A:()=>r});let r={variables:"variables-fH4ag7",containsAppPrompt:"containsAppPrompt-UMsmqt",isHidden:"isHidden-vzcyV0",page:"page-aOaH_e",miniInboxItem:"miniInboxItem-qLFrMG",newItems:"newItems-twwRBA",facepile:"facepile-BvssMQ",face:"face-P6q4PH",feedItem:"feedItem-ONDKv3",feedUnit:"feedUnit-NTpfyQ",showThreadGutter:"showThreadGutter-X3iYha",hasAvatar:"hasAvatar-XDSVUi",hasAction:"hasAction-pgoBA3",seeMoreFade:"seeMoreFade-xP5n8v",feedPermalinkUnit:"feedPermalinkUnit-JBJrHa",permalinkHeader:"permalinkHeader-bQJTnJ",seeMoreReplies:"seeMoreReplies-K4uhty",seeMoreThread:"seeMoreThread-KEnEyq",seeMoreThreadSegment:"seeMoreThreadSegment-_Apecq",top:"top-zb_BJC",hasContext:"hasContext-_DCyNJ",replyUnit:"replyUnit-tO0ejm",youtube:"youtube-AgNZc0",tiktok:"tiktok-x4gDkP",spotify:"spotify-cCmxPs",appleMusic:"appleMusic-OezLQy",polymarket:"polymarket-aVcj90",soundcloud:"soundcloud-p1bsAU",youtubeIframe:"youtubeIframe-kP47yC",tiktokIframe:"tiktokIframe-izo_uk",feedCommentBody:"feedCommentBody-UWho7S",feedCommentBodyInner:"feedCommentBodyInner-AOzMIC",smallPreview:"smallPreview-dZMrxO",underlineLink:"underlineLink-RuIQrC",disabled:"disabled-W2Bv0n",peopleYouMayKnowContainer:"peopleYouMayKnowContainer-A79AYm",peopleYouMayKnow:"peopleYouMayKnow-GCnR1N",seeMore:"seeMore-D88zkH",seeMoreText:"seeMoreText-Y5A1El",postAttachment:"postAttachment-eYV3fM",saveButton:"saveButton-BUhk5Q",commentContainer:"commentContainer-kpPRBB",vibrantHeader:"vibrantHeader-We3FVb",postImage:"postImage-L4FlO9",vibrantPostImage:"vibrantPostImage-TTXyOq",linkImage:"linkImage-i4xmRa",linkImagePlaceholder:"linkImagePlaceholder-zpM5qk",actionRow:"actionRow-T4wXed",moreButtonContainer:"moreButtonContainer-zdayXV",moreButton:"moreButton-EXZOW4",shortPostText:"shortPostText-HTEthL",large:"large-xah3K0",stat:"stat-Q5QJPb",reportModal:"reportModal-LypavT",ripple:"ripple-DknUjK",vibrant:"vibrant-Ys_KyG",saved:"saved-BzlEct",videoThumbnailImage:"videoThumbnailImage-GeQb7o",feedStatsGrid:"feedStatsGrid-lsizQ6",inlineLinkRow:"inlineLinkRow-b2tbOE",transparentLoginPrompt:"transparentLoginPrompt-sD3O95",appPrompt:"appPrompt-gZ1qj_",asParent:"asParent-gmw3iy"}},50321:function(e,t,n){n.d(t,{A:()=>r});let r={pageStack:"pageStack-_TN0zS",gap_0:"gap_0-SUYUaT",gap0:"gap_0-SUYUaT",gap_8:"gap_8-Np1Riv",gap8:"gap_8-Np1Riv",gap_16:"gap_16-KBArmz",gap16:"gap_16-KBArmz",linkRow:"linkRow-ddH7S0",isPadded:"isPadded-_aROE_",linkRowA:"linkRowA-pQXF7n",isClickable:"isClickable-EPNJTJ",isSelectable:"isSelectable-tK5w8z",isSelected:"isSelected-Up1BZ3",hoverLink:"hoverLink-g45pgX",input:"input-VtaUja",error:"error-RM8NkE",textarea:"textarea-emWDBj"}},76247:function(e,t,n){n.d(t,{A:()=>r});let r={playButton:"playButton-VfYy0S",playButtonIcon:"playButtonIcon-iVd8T6",videoIcon:"videoIcon-pEKkgy",pauseIconBar:"pauseIconBar-fixY8H",pauseIcon:"pauseIcon-bgib4b",videoPauseIconBar:"videoPauseIconBar-boRJoC",audioWaveform:"audioWaveform-K3CCe7",voiceAmplitude:"voiceAmplitude-Hp8N5A"}},98505:function(e,t,n){n.d(t,{A:()=>r});let r={text:"text-aFN1BV"}},16044:function(e,t,n){n.d(t,{A:()=>r});let r={blockContainer:"blockContainer-sGUymL",blockTitleContainer:"blockTitleContainer-_ayaxc",blockTitle:"blockTitle-p5J1JM",blockSubTitle:"blockSubTitle-b49Pjc",inlineContainer:"inlineContainer-pdOZS_",inlineText:"inlineText-mmZJjI"}},73577:function(e,t,n){n.d(t,{v:()=>a});var r=n(4006),i=n(31583),l=n(83427);let a=e=>{let{node:t}=e,{attrs:n}=t;return(0,r.Y)(i.VR,{children:(0,r.Y)(l.B,{postId:n.postId})})}},75136:function(e,t,n){n.d(t,{U:()=>C});var r=n(69277),i=n(70408),l=n(4006),a=n(69843),o=n.n(a),s=n(71464),d=n(84934),c=n(17402),u=n(84605),p=n(45378);async function h(e){return(0,p.i)(e,{imageCropAspectRatio:1,cropSelectPresetOptions:void 0,willRenderCanvas:(e,t)=>{let{utilVisibility:n,selectionRect:l,lineColor:a,backgroundColor:o}=t;if(n.crop<=0)return e;let{x:s,y:d,width:c,height:u}=l;return(0,i._)((0,r._)({},e),{interfaceShapes:[{x:s+.5*c,y:d+.5*u,rx:.5*c,ry:.5*u,opacity:n.crop,inverted:!0,backgroundColor:[...o,.5],strokeWidth:1,strokeColor:[...a]},...e.interfaceShapes]})}})}var m=n(31392),g=n(68349),f=n(24078),v=n(89490),b=n(35369),y=n(76977),Y=n(23168),w=n(46058);function C(e){let{user:t,onChangePhoto:n}=e,{iString:a}=(0,u.GO)(),[p,C]=(0,c.useState)(null),[_,E]=(0,c.useState)(null),[{isDragging:k},{openFileDialog:A,getInputProps:D,getDragProps:T}]=(0,Y.l)({accept:"image/*",multiple:!1,onFilesAdded:async e=>{let t=e[0];if(t)try{let e=t.file instanceof File?t.file:null;if(!e)return;let r=await (0,g.Sd)(e);if(!r||o()(r.url))return;let i=await h(r.url),l=await (0,g.Sd)(i);if(!l)return;let{url:a,orientation:s}=l;C(null!=s?s:null),a&&(E(a),n({photo_url:a}))}catch(e){console.error("Error processing image:",e)}}}),S=(0,c.useMemo)(()=>({transform:(0,g.FK)(p)}),[p]),{darkMode:I}=(0,m.D2)(),L=_||(0,w.pI)(t,{darkMode:I});return(0,l.FD)(v.az,(0,i._)((0,r._)({alignSelf:"start",position:"relative"},T()),{children:[(0,l.FD)(b.Nm,{resetCss:!0,onClick:A,"aria-label":a("Edit profile photo"),children:[(0,l.FD)(y.ov,{style:S,position:"relative",width:120,height:120,border:"detail",radius:"full",bg:k?"secondary":"primary",overflow:"hidden",children:[L?(0,l.Y)(f.eu,{photoUrl:L,size:120}):(0,l.Y)(s.A,{size:24}),k&&(0,l.Y)(y.ov,{position:"absolute",inset:0,style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,l.Y)(s.A,{size:24})})]}),(0,l.Y)("input",(0,r._)({},D()))]}),(0,l.Y)(v.az,{position:"absolute",className:"button-Jd7fCq",bg:"primary",radius:"full",children:(0,l.Y)(b.K0,{rounded:!0,priority:"secondary-outline",onClick:A,"aria-label":a("Edit profile photo"),children:(0,l.Y)(d.A,{size:18})})})]}))}},38305:function(e,t,n){n.d(t,{K:()=>l});var r=n(4006),i=n(84605);function l(e){let{array:t,limit:n,formatter:l=e=>e,othersFormatter:a=e=>e}=e,o=t.map(l).filter(Boolean).slice(0,n),{iString:s,iPlural:d}=(0,i.GO)(),c=s("and");if(0===o.length)return t.length?d("one person","%1 people",t.length):s("zero people");if(1===o.length)return o[0];if(2===o.length)return(0,r.FD)(r.FK,{children:[o[0]," ",c," ",o[1]]});let u=o.slice(0,-1).map(e=>(0,r.FD)(r.FK,{children:[e,", "]})),p=t.length-o.length;return p>0?(0,r.FD)(r.FK,{children:[u,c," ",a((0,r.FD)(r.FK,{children:[p+1," ",d("other","others",p+1)]}))]}):(0,r.FD)(r.FK,{children:[u,c," ",o[o.length-1]]})}},93510:function(e,t,n){n.d(t,{Q:()=>p});var r=n(4006),i=n(31583),l=n(64296),a=n(64997),o=n(84605),s=n(76977),d=n(63136),c=n(66511);let u="icon-goBaOg",p=e=>{let{}=e,{iString:t}=(0,o.GO)(),n=t("This may be a temporary error, please refresh the page to try again.");return(0,r.Y)(i.VR,{children:(0,r.FD)(s.I1,{alignItems:"center",justifyContent:"center",className:"container-njkc6x",children:[(0,r.Y)(l.A,{className:u}),(0,r.FD)(s.Ye,{alignItems:"center",gap:4,children:[(0,r.Y)(d.EY.Meta,{translated:!0,color:"accent",children:"Image not found"}),(0,r.Y)(c.m_,{text:n,children:(0,r.Y)(a.A,{size:12,className:u})})]})]})})}},36202:function(e,t,n){n.d(t,{F:()=>a});var r=n(4006),i=n(31583),l=n(21805);let a=e=>(0,r.Y)(i.VR,{className:"image-gallery-embed","data-drag-handle":"",children:(0,r.Y)(l.i_,{editor:e.editor,node:e.node})})},66443:function(e,t,n){n.d(t,{K:()=>f,_:()=>y});var r=n(4006),i=n(32485),l=n.n(i),a=n(17402),o=n(10278),s=n(72880),d=n(84565),c=n(64632),u=n(76977),p=n(63136),h=n(11510),m=n(69706),g=n(71305);function f(e){let{className:t,assets:n,readOnly:i,isRestack:s,isPreview:c,isDm:p,onClick:h,aspect:m,maxWidth:f,maxHeight:b,children:y,isContained:Y,outline:w,isPermalink:C,feedItem:_,isShareAsset:E,commentId:k,restackedPost:A,restackedPublication:D}=e,T=(0,o.Cu)(n),S=T;T.length>6&&(S=S.slice(0,6));let I="treatment"===(0,d.NQ)().getExperimentVariant("web_gutterless_feed"),[L,R]=(0,a.useState)(null);return(0,r.FD)(u.pT,{className:l()(g.A.imageGrid,g.A["size-".concat(Math.min(T.length,6))],p&&g.A.dm,c&&g.A.preview,Y&&g.A.contained,C&&g.A.permalink,s&&g.A.restack,I&&g.A.gutterless,E&&g.A.shareAsset,t),gap:4,radius:"md",overflow:"hidden",position:"relative",children:[S.map((e,t)=>{let{src:n,explicit:l,width:a,height:o,id:s}=e,d=T.length-(t+1);return(0,r.Y)(v,{asset:n,explicit:l,total:T.length,readOnly:i,aspect:m,width:a,height:o,numRemaining:t+1===6&&d>0?d:void 0,maxWidth:null!=f?f:C?568:520,maxHeight:b,outline:Y||1!==T.length?w:"detail",onClick:i?void 0:e=>{!e.defaultPrevented&&(e.preventDefault(),h&&h({attachmentId:s,attachmentType:"image"}),e.preventDefault(),R({index:t}))},children:y},n)}),!i&&(0,r.Y)(o.yx,{assets:T,imageViewer:L,setImageViewer:R,readOnly:i,feedItem:_,commentId:k,restackedPost:A,restackedPublication:D})]})}function v(e){let t,n,i,l,{asset:a,explicit:s,onClick:d,total:c,numRemaining:u,readOnly:p,aspect:f,width:v,height:y,outline:Y="none",maxWidth:w,maxHeight:C=420,children:_}=e,E=(0,h.Iu)(),k=null!=w?w:520;null!=v&&null!=y&&(y/=2,t=Math.round(Math.min(v/=2,k)),n=Math.round(y/v*t),1===c&&(t>k?(l=Math.round(n*k/t),i=k):(i=t,l=n),C&&l&&l>C&&(i=Math.round(i*C/l),l=C),E&&(l="auto")));let A=(0,r.FD)(r.FK,{children:[_,u&&(0,r.Y)(b,{count:u})]}),D={aspect:f||(1===c?"":m.Zi),smartCrop:1!==c};return(0,r.Y)(o.Vn,{asset:a,explicit:s,onClick:d,readOnly:p,width:i,height:l,maxWidth:i,className:g.A.gridImage,imageProps:D,outline:Y,flex:"grow",radius:"sm",style:{"--aspect-ratio":"".concat(t," / ").concat(n)},children:A})}function b(e){let{count:t}=e;return(0,r.Y)(u.pT,{className:g.A.imageCountOverlay,position:"absolute",justifyContent:"center",alignItems:"center",inset:0,children:(0,r.FD)(p.EY.B1,{color:"vibrance-primary",weight:"medium",children:["+",t]})})}function y(e){let{className:t,assets:n}=e,i=(0,o.Cu)(n),a=i;i.length>4&&(a=a.slice(0,4));let s=(0,o.NF)(i),{onShow:d}=(0,c.k_)(s);return(0,r.FD)(u.pT,{className:l()(g.A.imageGridThumbnail,g.A["size-".concat(Math.min(i.length,4))],t),gap:2,width:72,height:72,radius:"md",overflow:"hidden",sizing:"border-box",border:"detail",position:"relative",flex:"auto",children:[a.map(e=>{let{src:t}=e;return(0,r.Y)(Y,{asset:t,size:72},t)}),s&&(0,r.Y)(c.Np,{onShow:d})]})}function Y(e){let{asset:t,size:n=64}=e;return(0,r.Y)(u.pT,{className:g.A.thumbnailImage,bg:"secondary",overflow:"hidden",children:(0,r.Y)(s.o,{src:t,maxWidth:n,useRetinaSizing:!0,imageIsFixedWidth:!0,imageProps:{aspect:m.Zi,smartCrop:!0},width:n,height:n,loading:"lazy",ignorePicture:!0})})}},10278:function(e,t,n){n.d(t,{Cu:()=>C,NF:()=>_,Vn:()=>w,wY:()=>Y,xn:()=>b,yx:()=>y});var r=n(69277),i=n(4006),l=n(32485),a=n.n(l),o=n(17402),s=n(78865),d=n(30796),c=n(66443),u=n(52742),p=n(72880),h=n(64632),m=n(94729),g=n(12501),f=n(76977),v=n(71305);function b(e){let t=e.assets.filter(e=>"string"!=typeof e&&"number"==typeof e.width&&"number"==typeof e.height&&e.width>0&&e.height>0);return t.length<=1||e.readOnly||e.isDm?(0,i.Y)(c.K,(0,r._)({},e)):2===t.length?(0,i.Y)(d.h,(0,r._)({},e)):(0,i.Y)(s.gf,(0,r._)({},e))}function y(e){var t,n,r,l;let{assets:a,imageViewer:o,setImageViewer:s,readOnly:d,feedItem:c,commentId:p,restackedPost:h,restackedPublication:f}=e,v=!!o,b=function(e){let{commentId:t,shouldFetch:n}=e,{result:r}=(0,g.qK)(async e=>{let{signal:r}=e;return t&&n?(await (0,m.x6)("/api/v1/reader/comment/".concat(t),{signal:r})).item:null},[t,n],{auto:!!(t&&n)});return null!=r?r:null}({commentId:p,shouldFetch:!c&&v});if(d)return null;let y=a.map(e=>({attrs:{src:e.src}})),Y=null!=(t=null!=c?c:b)?t:null,w=null!=(n=null==Y?void 0:Y.post)?n:void 0,C=null!=(r=null==Y?void 0:Y.publication)?r:void 0;return(0,i.Y)(u.V,{isOpen:v,modalContent:y,onClose:()=>s(null),step:null!=(l=null==o?void 0:o.index)?l:0,feedItem:Y,post:w,publication:C,restackedPost:h,restackedPublication:f})}function Y(e,t){let[n,r]=(0,o.useState)(0);return(0,o.useLayoutEffect)(()=>{let n=new ResizeObserver(e=>{for(let n of e)r(n.contentRect.width-t)});return e.current&&n.observe(e.current),()=>{n.disconnect()}},[t,e]),n}function w(e){var t;let{asset:n,explicit:l,onClick:o,readOnly:s,width:d,height:c,children:u,className:m,imageProps:g,maxWidth:b,flex:y="auto",radius:Y,style:w,outline:C="detail"}=e,{isHidden:_,onShow:E}=(0,h.k_)(l),k=null!=(t=null!=b?b:d)?t:520;return(0,i.FD)(f.pT,{position:"relative",className:a()(v.A.imageBubble,!s&&v.A.clickable,m),flex:y,radius:Y,onClick:_?void 0:o,bg:"secondary",outline:C,style:(0,r._)({width:d,height:c},w),overflow:"hidden",draggable:!1,children:[(0,i.Y)(p.o,{src:n,maxWidth:k,useRetinaSizing:!0,imageIsFixedWidth:!0,imageProps:(0,r._)({smartCrop:!1},g),width:d,height:c,loading:"lazy",ignorePicture:!0,draggable:!1}),u,_&&(0,i.Y)(h.Np,{onShow:E})]})}function C(e){return e.map(e=>"string"==typeof e?{src:e,explicit:!1}:e)}function _(e){let t=e.some(e=>e.explicit),{isHidden:n}=(0,h.k_)(t);return n}},40410:function(e,t,n){n.d(t,{A:()=>l});var r=n(4006),i=n(17402);let l=e=>{let{min:t,max:n,step:l,value:a,onChange:o}=e,s=(0,i.useRef)(null),d=(0,i.useRef)(null),c=(0,i.useCallback)(e=>{if(!s.current)return;let{left:r,width:i}=s.current.getBoundingClientRect();o(Math.round((t+Math.max(Math.min(e.clientX-r,i),0)/i*(n-t))/l)*l)},[t,n,l,o]),u=(0,i.useCallback)(()=>{document.removeEventListener("mousemove",c)},[c]),p=()=>{document.addEventListener("mousemove",c)},h=(a-t)/(n-t)*100;return(0,r.Y)("div",{className:"range-slider-bhPvhQ",ref:s,onMouseDown:p,onMouseUp:u,onBlur:u,children:(0,r.FD)("div",{className:"range-slider__rail-P4vlSM",children:[(0,r.Y)("div",{className:"range-slider__track-Q9dod1",style:{width:"".concat(h,"%")}}),(0,r.Y)("div",{className:"range-slider__thumb-SArpZE",style:{left:"".concat(h,"%")},ref:d,onMouseDown:p})]})})}},44518:function(e,t,n){n.d(t,{S:()=>a});var r=n(38221),i=n.n(r),l=n(17402);function a(e){let{items:t,getKeys:n,sort:r=!0,sortFunc:a,deps:o}=e,s=(e,t)=>{let r=n(e),i=n(t);for(let e=0;e<Math.min(r.length,i.length);e++){let t=r[e].localeCompare(i[e]);if(0!==t)return t}return r.length-i.length},[d,c]=(0,l.useState)(""),u=(0,l.useMemo)(()=>i()(c,100),[c]),p=d.trim();return{setQuery:u,filteredItems:(0,l.useMemo)(()=>{if(!p)return t;let e=t.filter(e=>n(e).some(e=>e.toLowerCase().includes(p.toLowerCase())));return(r||a)&&(e=e.sort(a||s)),e},o?[p,...o]:[p,t]),hasFiltered:""!==p,query:p}}},4963:function(e,t,n){n.d(t,{Y:()=>o});var r=n(4006),i=n(48309),l=n(84605),a=n(31825);function o(e){let{src:t}=e,{iString:n}=(0,l.GO)();return(0,r.Y)(a.z,{href:t,download:!0,"aria-label":n("Download"),priority:"quaternary",size:"md",className:"downloadButton-dUfp2b","data-native":!0,children:(0,r.Y)(i.A,{size:20})})}},14506:function(e,t,n){n.d(t,{e:()=>s});var r=n(4006),i=n(63558),l=n(43510),a=n(84605),o=n(48625);function s(e){let{isPlaying:t,disabled:n,onClick:s,size:d="md"}=e,{iString:c}=(0,a.GO)(),u=n?"var(--color-fg-tertiary)":"var(--color-fg-primary)",p=c(t?"Pause":"Play");return(0,r.Y)(o.f,{priority:"secondary","aria-label":p,pressed:t,onPressedChange:s,size:d,disabled:n,className:"button-yhxrk8",children:e=>{let{pressed:t}=e;return t?(0,r.Y)(i.A,{size:20,fill:u}):(0,r.Y)(l.A,{size:20,fill:u})}})}},48617:function(e,t,n){n.d(t,{x:()=>c});var r=n(4006),i=n(44202),l=n(45773),a=n(84605),o=n(35369),s=n(88774);let d=[{value:1,display:"1"},{value:1.25,display:"1.25"},{value:1.5,display:"1.5"},{value:1.75,display:"1.75"},{value:2,display:"2"}];function c(e){let{onSetPlaybackRate:t,playbackRate:n}=e,{iString:c}=(0,a.GO)();return(0,r.FD)(s.W1,{placement:"top",trigger:(0,r.Y)(o.K0,{priority:"quaternary",size:"md",children:(0,r.Y)(i.A,{size:20})}),children:[(0,r.Y)(s.j,{children:c("Playback speed")}),d.map(e=>(0,r.FD)(s.Dr,{onClick:()=>t(e.value),trailing:e.value===n?(0,r.Y)(l.A,{}):null,children:[e.display,"\xd7"]},e.value))]})}},95660:function(e,t,n){n.d(t,{r:()=>b});var r=n(4006),i=n(17402),l=n(24078),a=n(35369),o=n(97515),s=n(76977),d=n(57820),c=n(81203),u=n(63136),p=n(49095),h=n(39318);let m={items:"items-SZnmh_",item:"item-VxynEz",isSelected:"isSelected-Yq6O15",showMore:"showMore-rDQFwq",badge:"badge-cOMigQ"},g=e=>{let{items:t,selectItem:n,selectedItem:i,setSelectedItem:l,selectedItemRef:a,query:o}=e;return(0,r.Y)(r.FK,{children:t.map(e=>(0,r.Y)(v,{isSelected:i&&e.id===i.id&&e.type===i.type,onClick:()=>n(e),onMouseEnter:()=>l(e),elemRef:i&&e.id===i.id&&e.type===i.type?a:void 0,children:(0,r.FD)(s.Ye,{flex:"grow",alignItems:"center",gap:12,padding:8,children:["user"===e.type&&(0,r.Y)(f,{item:e,query:o}),"pub"===e.type&&(0,r.FD)(r.FK,{children:[(0,r.Y)(c.Nq,{className:m.profileImg,logoUrl:e.photo_url||(0,h.Ji1)(e.id),size:32,publicationName:e.name}),(0,r.FD)(s.I1,{style:{maxWidth:"260px"},children:[(0,r.Y)(u.EY.B4,{weight:"semibold",color:"primary",ellipsis:!0,as:"div",children:e.name}),e.author_name&&e.author_name.length>0?(0,r.FD)(u.EY.B5,{color:"secondary",ellipsis:!0,translated:!0,children:["by ",I18N.p(e.author_name)]}):null]})]})]})},e.id+e.type))})};function f(e){var t,n,i;let{item:a}=e,o=a.publication_name;return!o&&a.publications&&a.publications.length>0&&(o=a.primary_publication_id?null==(n=a.publications.find(e=>{let{id:t}=e;return t===a.primary_publication_id})||a.publications[0])?void 0:n.name:null==(i=a.publications[0])?void 0:i.name),(0,r.FD)(r.FK,{children:[(0,r.Y)(l.eu,{className:m.avatar,photoUrl:(0,h.dJ9)(a.photo_url||(0,h.Ji1)(a.id),80),size:36}),(0,r.FD)(s.I1,{maxWidth:220,children:[(0,r.FD)(s.Ye,{gap:4,minWidth:0,children:[(0,r.Y)(u.EY.B4,{color:"primary",weight:"semibold",ellipsis:!0,children:a.name}),(0!==a.bestseller_tier||(null==(t=a.status)?void 0:t.vip))&&(0,r.Y)(p.UserStatusSymbols,{className:m.badge,tier:a.bestseller_tier,status:a.status,size:"sm",userId:a.id})]}),o&&a.handle?(0,r.FD)(u.EY.B4,{color:"secondary",ellipsis:!0,children:[a.handle," â€¢ ",o]}):o?(0,r.Y)(u.EY.B5,{color:"secondary",ellipsis:!0,children:o}):a.handle?(0,r.Y)(u.EY.B4,{color:"secondary",ellipsis:!0,children:a.handle}):null]})]})}let v=e=>{let{children:t,isSelected:n,onClick:i,onMouseEnter:l,elemRef:a,className:o}=e;return(0,r.Y)("button",{className:"".concat(m.item," ").concat(n?m.isSelected:""," ").concat(null!=o?o:""),onClick:i,onMouseEnter:l,onMouseDown:e=>{e.preventDefault();let{target:t}=e;t&&void 0!==t.focus&&t.focus()},ref:a,tabIndex:-1,children:t})},b=(0,i.forwardRef)((e,t)=>{var n;let{items:l,selectItem:c,query:u,isLoading:p,placeholderText:h,noResultsText:g,minQueryLength:f=0,language:b}=e,{iString:Y}=I18N.i(b),[w,C]=(0,i.useState)(0),[_,E]=(0,i.useState)(!1),k=l.size>1,A=Array.from(l.values()).some(e=>e.length>(k?3:6))&&!_,D=Array.from(l.values()).map(e=>_?e:e.slice(0,k?3:6)).flat(),T=(0,i.useRef)(),S=null!=(n=D[w])?n:null,I=D.length+ +!!A,L=!!A&&w===I-1,R=(0,i.useRef)(null);(0,i.useEffect)(()=>{w>=0&&T.current&&T.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[w,T]),(0,i.useEffect)(()=>{C(0),E(!1)},[l]);let x=e=>{let t=D.findIndex(t=>t.id===e.id);-1!==t?C(t):C(0)};return((0,i.useImperativeHandle)(t,()=>({getElement:()=>R.current,onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(C((w+I-1)%I),!0):"ArrowDown"===t.key?(C((w+1)%I),!0):"Enter"===t.key&&(S&&c(S),L&&E(!0),!0)}})),h&&(!u||u.length<f))?(0,r.Y)(s.I1,{className:m.items,alignItems:"center",children:(0,r.Y)(o.p,{title:h,description:Y("Start typing...")})}):(0,r.FD)("div",{className:m.items,ref:R,children:[Array.from(l.entries()).map(e=>{let[t,n]=e;return(0,r.Y)(y,{title:k?Y(t):void 0,maxItemsToDisplay:_?void 0:k?3:6,items:n,selectItem:c,selectedItem:S,setSelectedItem:x,selectedItemRef:T,query:u})}),p&&(0,r.Y)(s.I1,{padding:8,alignItems:"center",children:(0,r.Y)(d.y$,{})}),!p&&0===I&&(0,r.Y)(s.Ye,{padding:8,children:(0,r.Y)(o.p,{title:g,description:Y("Try another search...")})}),A&&(0,r.Y)(s.I1,{padding:8,children:(0,r.Y)(v,{isSelected:L,onMouseEnter:()=>C(I-1),onClick:()=>E(!0),elemRef:L?T:void 0,className:m.showMore,children:(0,r.Y)(a.$n,{priority:"secondary",flex:"grow",children:Y("Load more...")})})})]})}),y=e=>{let{title:t,maxItemsToDisplay:n,items:i,selectItem:l,selectedItem:a,setSelectedItem:o,selectedItemRef:d,query:c}=e,p=n?i.slice(0,n):i;return(0,r.FD)(r.FK,{children:[t&&(0,r.Y)(s.I1,{padding:8,children:(0,r.Y)(u.EY.Meta,{color:"secondary",weight:"semibold",children:t})}),(0,r.Y)(g,{items:p,selectItem:l,selectedItem:a,setSelectedItem:o,selectedItemRef:d,query:c})]})}},98107:function(e,t,n){n.d(t,{A:()=>c});var r=n(4006),i=n(32485),l=n.n(i),a=n(17402),o=n(15734),s=n.n(o),d=n(39318);let c=e=>{let{symbol:t,prependSymbol:n=!1,isStatic:i=!1}=e,o="/api/v1/price/".concat(t),[c,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(null),[m,g]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{(async()=>{try{let e=await s().get(o);if(e.body){if("not_found"===e.body.status)return void g(!0);u(e.body.price),h(e.body.change_pct)}}catch(e){g(!0)}})()},[o]),!n&&t.startsWith("$")&&(t=t.slice(1)),i)?(0,r.Y)("span",{children:(0,r.FD)("a",{"data-component-name":"CashtagStatic",href:"".concat((0,d.hdL)(t)),children:[t," "]})}):m?(0,r.FD)("span",{children:[t," "]}):(0,r.FD)("a",{className:l()("cashtag",{neutral:0==p,positive:p&&parseFloat(p)>0,negative:p&&0>parseFloat(p)}),target:"_blank",rel:"noopener",href:"".concat((0,d.hdL)(t)),"data-attrs":JSON.stringify({symbol:t}),"data-component-name":"Cashtag",children:["".concat(t.toUpperCase()," "),(0,r.Y)("span",{children:(0,r.Y)("span",{children:(0,r.FD)("span",{className:l()("delta"),children:["".concat(parseFloat(p||0).toFixed(2),"%"),!p||parseFloat(p)>0?String.fromCharCode(8593):String.fromCharCode(8595)]})})})]})}},73653:function(e,t,n){n.d(t,{L:()=>l});var r=n(4006),i=n(17402);let l=e=>{var t;let{attrs:n}=e,l=(0,i.useRef)(null);if((0,i.useEffect)(()=>{let e=e=>{let t;if(!l.current||e.source!==l.current.contentWindow)return;let n=e.data;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return}n&&"number"==typeof n.height?t=n.height:"number"==typeof n&&(t=n),"number"==typeof t&&t>0&&l.current&&(l.current.style.height="".concat(t,"px"))};if(null==n?void 0:n.url)return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[null==n?void 0:n.url]),!n||!n.url)return null;let a="iframe-pinterest-".concat((null==(t=n.url.split("/").pop())?void 0:t.split("?")[0])||Date.now());return(0,r.Y)("div",{class:"pinterest-embed-wrap outer","data-url":n.url,children:(0,r.Y)("iframe",{ref:l,id:a,className:"pinterest-embed-iframe",src:n.url,width:"350px",frameBorder:"0",scrolling:"no",loading:n.belowTheFold?"lazy":void 0,title:n.title||"Pinterest Pin"})})}},65113:function(e,t,n){n.d(t,{t:()=>o});var r=n(4006),i=n(17402),l=n(56778),a=n(60509);let o=e=>{let{attrs:t,postId:n}=e,o=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=e=>{!o.current||e.source===o.current.contentWindow&&e.data.iframeHeight&&"number"==typeof e.data.iframeHeight&&(o.current.style.height="".concat(e.data.iframeHeight,"px"))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]);let s=t.fullEmbedUrl,d=(0,r.Y)("div",{class:"polymarket-wrap outer","data-url":s,children:(0,r.Y)("iframe",{ref:o,class:"polymarket-iframe",src:s,width:"400px",height:"120px",frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox",loading:t.belowTheFold?"lazy":void 0})});return t.profileName||t.eventSlug?(0,r.Y)(l.A,{onFirstVisible:()=>{(0,a.E)({eventSlug:t.eventSlug,marketSlug:t.marketSlug,profileName:t.profileName,postId:n})},children:d}):d}},88161:function(e,t,n){n.d(t,{i:()=>a});var r=n(4006),i=n(31583),l=n(38893);let a=e=>{let{node:t}=e;return(0,r.Y)(i.VR,{children:(0,r.Y)(l.$g,{label:t.attrs.label,src:"/api/v1/audio/upload/".concat(t.attrs.mediaUploadId,"/src"),duration:t.attrs.duration})})}},12018:function(e,t,n){n.d(t,{y:()=>g});var r=n(69277),i=n(70408),l=n(4006),a=n(17402),o=n(74728),s=n.n(o),d=n(90616),c=n(13950),u=n(35369),p=n(76977),h=n(11587),m=n(20004);let g=e=>{let{initialCaption:t,onSave:n,onCancel:o}=e,g=t.replace(/<br\s*\/?>/gi,"\n"),[f,v]=(0,a.useState)(g);return(0,l.Y)(c.DH,{children:(0,l.FD)(p.I1,{flex:"grow",gap:8,children:[(0,l.Y)(h.T,(0,i._)((0,r._)({},d.P),{className:m.A.captionEditor,maxLength:5e3,name:"description",placeholder:"Enter a caption...",rows:6,value:f,onChange:e=>{v(e.target.value)}})),(0,l.FD)(p.pT,{gap:8,justifyContent:"end",paddingY:8,children:[(0,l.Y)(u.$n,{priority:"secondary",onClick:o,children:"Cancel"}),(0,l.Y)(u.$n,{priority:"primary",onClick:()=>{let e=f.replace(/\n/g,"<br>");n(s()(e,(0,i._)((0,r._)({},s().defaults),{allowedTags:["br"]})))},children:"Save"})]})]})})}},47074:function(e,t,n){n.d(t,{m:()=>s});var r=n(69277),i=n(70408),l=n(4006),a=n(31583),o=n(16460);let s=e=>{let{node:t,editor:n,deleteNode:s,updateAttributes:d,getPos:c}=e,u=t.attrs,p=(0,i._)((0,r._)({},u),{isEditor:!!n});return(0,l.Y)(a.VR,{className:"digestPostEmbed","data-drag-handle":"",children:(0,l.Y)(o.S,(0,i._)((0,r._)({},p),{isEditor:!0,editor:n,updateAttributes:d,deleteNode:s,getPos:c}))})}},16460:function(e,t,n){n.d(t,{S:()=>K});var r=n(69277),i=n(70408),l=n(4006),a=n(32485),o=n.n(a),s=n(17402),d=n(89230),c=n(84605),u=n(35369),p=n(16074),h=n(76977),m=n(88774),g=n(20004);let f=e=>{let{enableExtraSmallOption:t,size:n,onOpen:r,onClose:i,onEditCaption:a,onSetLayout:o,onSetShowBylines:s,showBylines:f,onConvertToLink:v,onConvertToEmbeddedPost:b,onDelete:y,showBylinesOption:Y}=e,{iString:w}=(0,c.GO)();return(0,l.Y)(h.pT,{className:g.A.menu,justifyContent:"end",children:(0,l.FD)(m.W1,{trigger:(0,l.Y)(u.K0,{priority:"secondary-outline",children:(0,l.Y)(d.A,{size:20})}),onClose:i,onOpen:r,children:[t&&(0,l.Y)(m.Dr,{disabled:"xs"===n,onClick:()=>o("xs"),children:w("Extra small display")}),(0,l.Y)(m.Dr,{disabled:"sm"===n,onClick:()=>o("sm"),children:w("Small display")}),(0,l.Y)(m.Dr,{disabled:"md"===n,onClick:()=>o("md"),children:w("Medium display")}),(0,l.Y)(m.Dr,{disabled:"lg"===n,onClick:()=>o("lg"),children:w("Large display")}),(0,l.Y)(p.c,{}),Y&&(0,l.Y)(m.Dr,{onClick:()=>s(!f),children:w(f?"Hide bylines":"Show bylines")}),("lg"===n||"md"===n)&&(0,l.Y)(m.Dr,{onClick:a,children:w("Edit caption")}),(0,l.Y)(m.Dr,{onClick:()=>b(),children:w("Convert to default")}),(0,l.Y)(m.Dr,{onClick:v,children:w("Convert to link")}),(0,l.Y)(m.Dr,{priority:"destructive",onClick:y,children:w("Remove")})]})})};var v=n(43327),b=n(47663),y=n(12988),Y=n(90616),w=n(65842);let C=e=>{let{initialValue:t,placeholder:n,onSave:a,onCancel:o}=e,{iString:d}=(0,c.GO)(),[p,m]=(0,s.useState)(t),g=(0,s.useRef)(null);return(0,s.useEffect)(()=>{g.current&&(g.current.focus(),g.current.select())},[]),(0,l.FD)(h.I1,{gap:16,children:[(0,l.Y)(w.ks,(0,i._)((0,r._)({},Y.P),{ref:g,placeholder:n,value:p,onInput:e=>{m(e.target.value)}})),(0,l.FD)(h.pT,{gap:8,justifyContent:"end",children:[(0,l.Y)(u.$n,{priority:"tertiary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==o||o()},children:d("Cancel")}),(0,l.Y)(u.$n,{priority:"primary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a(p.trim())},children:d("Save")})]})]})};var _=n(13589),E=n(85612),k=n(57753),A=n(68349),D=n(36372);let T=e=>{let{showLinks:t,feedUrl:n,disableLinks:a}=e,{iString:o}=(0,c.GO)(),[s,d]=(0,_.Mk)(),[u,p]=(0,_.Mk)(),[m,g]=(0,_.Mk)(),f=(0,D.d)(),v={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"},b=e=>{a&&e.preventDefault()};return(0,l.FD)(h.Ye,{alignItems:"center",gap:12,children:[t.spotify_url&&(0,l.Y)(h.Ye,(0,i._)((0,r._)({},d,v),{href:t.spotify_url,onClick:b,children:(0,l.Y)(E.MO,{fill:s?"#1DB954":k.Q3.mediumRed.hex,size:20})})),t.apple_podcasts_url&&(0,l.Y)(h.Ye,(0,i._)((0,r._)({},p,v),{href:t.apple_podcasts_url,onClick:b,children:(0,l.Y)(E.uv,{fill:u?"#B53CD9":k.Q3.mediumRed.hex,size:20})})),(0,l.Y)(h.Ye,(0,i._)((0,r._)({},g),{cursor:"pointer",onClick:e=>{a?e.preventDefault():(f.popToast(()=>(0,l.Y)(D.y,{text:o("RSS feed URL copied")})),(0,A.lW)(n))},children:(0,l.Y)(E.It,{fill:m?"#F88800":k.Q3.mediumRed.hex,size:20})}))]})};var S=n(56455),I=n(15894);let L=e=>{let{youtubeUrl:t,disableLinks:n}=e;return t?(0,l.Y)(h.Ye,{alignItems:"center",as:"a",gap:8,href:t,rel:"noopener noreferrer",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,l.Y)(E.$5,{fill:k.Q3.mediumRed.hex,size:24})}):null};var R=n(84297);let x=e=>{let{disableLinks:t,feedUrl:n,isEditingTitle:r,onCancelTitle:i,onEditTitle:a,onSaveTitle:o,post:s,showLinks:d,youtubeUrl:u}=e,{iString:p}=(0,c.GO)(),{title:m,canonical_url:g}=s,f=(0,R.a)(s),v="podcast"===s.type,b=!!s.video_upload_id,y=v&&(d||n),Y=b&&u,w=null;return y?w=p("Listen on"):Y&&(w=p("Watch on youtube")),(0,l.Y)(S.m,{children:(0,l.FD)(h.I1,{gap:8,children:[(0,l.Y)(I.T,{color:"accent",preset:"detail-large",children:f}),r?(0,l.Y)(h.I1,{padding:8,children:(0,l.Y)(C,{initialValue:m,placeholder:p("Edit title..."),onCancel:i,onSave:o})}):(0,l.Y)("a",{href:g,rel:"noopener",target:"_blank",onClick:e=>{t&&e.preventDefault()},children:(0,l.Y)(I.T,{className:"link-LXCHWO",preset:"h7-serif",style:{cursor:"pointer"},onClick:null!=a?a:void 0,children:m})}),(y||Y)&&w&&(0,l.Y)("div",{className:"mediaLinks-a_pTok",children:(0,l.FD)(h.Ye,{alignItems:"center",gap:8,children:[(0,l.Y)(I.T,{color:"accent",preset:"detail-large",children:w}),v&&d&&n&&(0,l.Y)(T,{disableLinks:t,feedUrl:n,showLinks:d}),b&&!y&&u&&(0,l.Y)(L,{disableLinks:t,youtubeUrl:u})]})})]})})};var O=n(12018),P=n(72880),N=n(63446);let F={button:"button-PdemLh",ctaWrapper:"ctaWrapper-tPnWzu",mediaLinks:"mediaLinks-z5OJrN"},M=e=>{let{buttonSize:t,cta:n,disableLinks:r,feedUrl:i,handleCancelCta:a,handleEditCta:o,handleSaveCta:s,href:d,isEditingCta:u,post:p,showLinks:m,youtubeUrl:g}=e,{iString:f}=(0,c.GO)(),v="podcast"===p.type,b=!!p.video_upload_id,y=v&&(m||i),Y=b&&g,w=n;return y?w=f("Listen on"):Y&&(w=f("Watch on youtube")),(0,l.Y)(h.Ye,{alignItems:"center",className:F.footerRow,justifyContent:"space-between",children:(0,l.FD)("div",{className:F.ctaWrapper,onClick:u?void 0:null!=o?o:void 0,children:[u?(0,l.Y)(C,{initialValue:n,placeholder:f("Edit CTA..."),onCancel:a,onSave:s}):(0,l.Y)(N.v,{className:F.button,href:d,justifyContent:"start",renderAsLink:!0,size:t,trailingIcon:"chevron-right",variant:"tertiary",onClick:r?e=>{e.preventDefault()}:void 0,children:w}),(y||Y)&&(0,l.FD)("div",{className:F.mediaLinks,children:[v&&m&&i&&(0,l.Y)(T,{disableLinks:r,feedUrl:i,showLinks:m}),b&&!y&&g&&(0,l.Y)(L,{disableLinks:r,youtubeUrl:g})]})]})})};var B=n(38305);let U=e=>{let{bylines:t}=e;return(null==t?void 0:t.length)?(0,l.Y)(I.T,{color:"tertiary",preset:"detail-large",children:(0,l.Y)(B.K,{array:t||[],formatter:e=>{let{name:t}=e;return t},limit:3})}):null},z=e=>{let{caption:t,cta:n,disableLinks:r,feedUrl:i,isEditingCaption:a,isEditingCta:o,isEditingTitle:s,onCancelCaption:d,onCancelCta:u,onCancelTitle:p,onEditCaption:m,onEditCta:g,onEditTitle:f,onSaveCaption:v,onSaveCta:b,onSaveTitle:y,post:Y,showBylines:w,showLinks:_,youtubeUrl:E}=e,{iString:k}=(0,c.GO)(),{publishedBylines:A,title:D,canonical_url:T,cover_image:L,cover_image_alt:R}=Y;return(0,l.Y)(S.m,{children:(0,l.FD)(h.I1,{children:[(0,l.Y)(h.I1,{paddingBottom:12,children:s?(0,l.Y)(h.I1,{padding:8,children:(0,l.Y)(C,{initialValue:D,placeholder:k("Edit title..."),onCancel:p,onSave:y})}):(0,l.Y)("a",{href:T,rel:"noopener",target:"_blank",onClick:e=>{r&&e.preventDefault()},children:(0,l.Y)(I.T,{preset:"h5-sans",onClick:null!=f?f:void 0,children:D})})}),(0,l.Y)(h.I1,{paddingBottom:12,children:w&&(0,l.Y)(U,{bylines:A})}),L&&(0,l.Y)(h.I1,{paddingBottom:16,children:(0,l.Y)("a",{href:T,rel:"noopener",target:"_blank",onClick:e=>{r&&e.preventDefault()},children:(0,l.Y)(P.o,{alt:null!=R?R:D,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:L})})}),(0,l.Y)(h.pT,{flex:"grow",paddingBottom:8,children:(0,l.Y)("div",{className:"captionContainer-e38vU2",children:a&&d&&v?(0,l.Y)(h.I1,{paddingX:8,children:(0,l.Y)(O.y,{initialCaption:t,onCancel:d,onSave:v})}):(0,l.Y)("p",{dangerouslySetInnerHTML:{__html:t},onClick:null!=m?m:void 0})})}),(0,l.Y)(M,{cta:n,disableLinks:r,feedUrl:i,handleCancelCta:u,handleEditCta:g,handleSaveCta:b,href:T,isEditingCta:o,post:Y,showLinks:_,youtubeUrl:E})]})})};var j=n(68410),G=n(69706);let H=e=>{let{cta:t,disableLinks:n,feedUrl:r,isEditingCta:i,isEditingTitle:a,onCancelCta:s,onCancelTitle:d,onEditCta:u,onEditTitle:p,onSaveCta:m,onSaveTitle:g,post:f,showBylines:v,showLinks:b,youtubeUrl:y}=e,{iString:Y}=(0,c.GO)(),{isMobile:w}=(0,j.sM)(),{publishedBylines:_,title:E,canonical_url:k,cover_image:A,cover_image_alt:D}=f;return(0,l.Y)(S.m,{children:(0,l.FD)(h.Ye,{alignItems:"stretch",gap:16,children:[A&&(0,l.Y)("a",{className:"imageLink-AC6EYn",href:k,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,l.Y)(P.o,{alt:null!=D?D:E,className:o()("image-DiWGMJ",{"imageMobile-PivMk8":w}),imageProps:{height:w?180:300,smartCrop:!0,aspect:G.Zi},maxWidth:w?180:300,src:A})}),(0,l.FD)(h.I1,{flex:"grow",gap:8,children:[a?(0,l.Y)(h.I1,{paddingRight:8,paddingY:8,children:(0,l.Y)(C,{initialValue:E,placeholder:Y("Edit title..."),onCancel:d,onSave:g})}):(0,l.Y)("a",{href:k,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,l.Y)(I.T,{preset:"h5-sans",style:n?{}:{cursor:"pointer"},onClick:null!=p?p:void 0,children:E})}),v&&(0,l.Y)(U,{bylines:_}),(0,l.Y)(M,{cta:t,disableLinks:n,feedUrl:r,handleCancelCta:s,handleEditCta:u,handleSaveCta:m,href:k,isEditingCta:i,post:f,showLinks:b,youtubeUrl:y})]})]})})},V=e=>{let{cta:t,disableLinks:n,feedUrl:r,isEditingCta:i,isEditingTitle:a,onCancelCta:o,onCancelTitle:s,onEditCta:d,onEditTitle:u,onSaveCta:p,onSaveTitle:m,post:g,showBylines:f,showLinks:v,youtubeUrl:b}=e,{iString:y}=(0,c.GO)(),{publishedBylines:Y,title:w,canonical_url:_}=g;return(0,l.Y)(S.m,{children:(0,l.FD)(h.I1,{gap:4,children:[(0,l.FD)(h.I1,{gap:8,children:[a?(0,l.Y)(h.I1,{padding:8,children:(0,l.Y)(C,{initialValue:w,placeholder:y("Edit title..."),onCancel:s,onSave:m})}):(0,l.Y)("a",{href:_,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,l.Y)(I.T,{preset:"h5-sans",onClick:null!=u?u:void 0,children:w})}),f&&(0,l.Y)(U,{bylines:Y})]}),(0,l.Y)(M,{buttonSize:"sm",cta:t,disableLinks:n,feedUrl:r,handleCancelCta:o,handleEditCta:d,handleSaveCta:p,href:_,isEditingCta:i,post:g,showLinks:v,youtubeUrl:b})]})})};var W=n(4016);let q=e=>{document.dispatchEvent(new CustomEvent("updateDigestPostEmbed",{detail:e,bubbles:!0}))},K=e=>{let{nodeId:t,caption:n,cta:a,size:d="lg",isEditor:c,showBylines:u,title:p,publishedBylines:h,post_date:m,cover_image:Y,cover_image_alt:w,canonical_url:C,section_name:_,id:E,type:k,video_upload_id:A,reaction_count:D,comment_count:T,publication_name:S,publication_logo_url:I,editor:L,updateAttributes:R,deleteNode:O,getPos:P,pub:N,youtube_url:F,show_links:M,feed_url:B}=e,[U,j]=(0,s.useState)(!1),[G,K]=(0,s.useState)(!1),[X,J]=(0,s.useState)(!1),[Z,Q]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(!1),et=(0,W.lu)({pub:N}),en={title:p,publishedBylines:h,post_date:m,cover_image:Y,cover_image_alt:w,canonical_url:C,section_name:_,id:E,type:k,video_upload_id:A,reaction_count:D,comment_count:T,publication_name:S,publication_logo_url:I},er={feedUrl:null!=B?B:void 0,showLinks:null!=M?M:null,youtubeUrl:null!=F?F:null},ei=()=>{K(!0),j(!1),q({nodeId:t,shouldDisableDrag:!0})},el={onCancelTitle:c?()=>{J(!1),q({nodeId:t,shouldDisableDrag:!1})}:null,onEditTitle:c?()=>{J(!0),j(!1),q({nodeId:t,shouldDisableDrag:!0})}:null,onSaveTitle:c?e=>{J(!1),R?R({title:e}):q({nodeId:t,title:e,shouldDisableDrag:!1})}:null,isEditingTitle:X},ea={onCancelCaption:c?()=>{K(!1),q({nodeId:t,shouldDisableDrag:!1})}:null,onEditCaption:c?ei:null,onSaveCaption:c?e=>{K(!1),R?R({caption:e}):q({nodeId:t,caption:e,shouldDisableDrag:!1})}:null,isEditingCaption:G},eo={onCancelCta:c?()=>{Q(!1),q({nodeId:t,shouldDisableDrag:!1})}:null,onEditCta:c?()=>{Q(!0),j(!1),q({nodeId:t,shouldDisableDrag:!0})}:null,onSaveCta:c?e=>{Q(!1),R?R({cta:e}):q({nodeId:t,cta:e,shouldDisableDrag:!1})}:null,isEditingCta:Z};return(0,l.Y)("div",{className:o()(g.A.digestPostEmbed),"data-component-name":"DigestPostEmbed",onMouseEnter:()=>!G&&!X&&j(!0),onMouseLeave:()=>!$&&j(!1),children:(0,l.FD)(l.FK,{children:[c&&U&&(0,l.Y)(f,{enableExtraSmallOption:et,showBylines:u,showBylinesOption:et,size:d,onClose:()=>ee(!1),onConvertToEmbeddedPost:()=>{L&&P?L.commands.convertDigestPostEmbedToEmbeddedPostV2({pos:P(),attrs:(0,r._)({url:C},en)}):document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToEmbeddedPost",{detail:{url:C},bubbles:!0}))},onConvertToLink:()=>{L&&P?L.commands.convertDigestPostEmbedToLinkV2({pos:P(),url:C}):document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToLink",{detail:{url:C},bubbles:!0}))},onDelete:()=>{O?O():document.dispatchEvent(new CustomEvent("deleteDigestPostEmbed",{bubbles:!0}))},onEditCaption:ei,onOpen:()=>ee(!0),onSetLayout:e=>{R?R({size:e}):q((0,r._)({nodeId:t,caption:n,cta:a,size:e,shouldDisableDrag:!1},en))},onSetShowBylines:e=>{R?R({showBylines:e}):q((0,r._)({nodeId:t,showBylines:e,shouldDisableDrag:!1},en))}}),"xs"===d&&(et?(0,l.Y)(x,(0,i._)((0,r._)({},el,er),{disableLinks:c,post:en})):(0,l.Y)(y.w,{disableLinks:c,post:en})),"sm"===d&&(et?(0,l.Y)(V,(0,i._)((0,r._)({},el,eo,er),{cta:a,disableLinks:c,post:en,showBylines:u})):(0,l.Y)(y.w,{disableLinks:c,post:en})),"md"===d&&(et?(0,l.Y)(H,(0,i._)((0,r._)({},el,eo,er),{cta:a,disableLinks:c,post:en,showBylines:u})):(0,l.Y)(b.T,(0,i._)((0,r._)({},ea),{caption:n,disableLinks:c,post:en}))),"lg"===d&&(et?(0,l.Y)(z,(0,i._)((0,r._)({},ea,el,eo,er),{caption:n,cta:a,disableLinks:c,post:en,showBylines:u})):(0,l.Y)(v.vV,(0,i._)((0,r._)({},ea),{caption:n,disableLinks:c,post:en})))]})})}},90616:function(e,t,n){n.d(t,{P:()=>i});let r=e=>{e.stopPropagation()},i={onKeyPress:r,onCopy:r,onPaste:r,onKeyDown:r,onMouseDown:r}},57194:function(e,t,n){n.d(t,{u:()=>p});var r=n(79785),i=n(4006),l=n(31583),a=n(27775),o=n(13950),s=n(84605),d=n(35369),c=n(76977);function u(){let e=(0,r._)(["Message ",""]);return u=function(){return e},e}let p=e=>{let{node:t}=e,n=t.attrs,{iTemplate:r}=(0,s.GO)();return(0,i.Y)(l.VR,{className:"directMessage","data-drag-handle":"",children:(0,i.Y)(o.DH,{children:(0,i.Y)(c.I1,{alignItems:"center",justifyContent:"center",flex:"grow",style:{marginBottom:"20px"},children:(0,i.Y)(d.$n,{priority:"primary",leading:(0,i.Y)(a.A,{size:20}),children:r(u(),n.userName)})})})})}},64399:function(e,t,n){n.d(t,{n:()=>s});var r=n(69277),i=n(4006),l=n(31583),a=n(18999),o=n(63136);let s=e=>{var t;let{node:n,editor:s,deleteNode:d,updateAttributes:c,getPos:u}=e,p=n.attrs,h="undefined"!=typeof window?null==(t=window._preloads)?void 0:t.pub:null;return h?(0,i.Y)(l.VR,{className:"fpRecircBlock","data-drag-handle":"",children:(0,i.Y)(a.u,(0,r._)({pub:h,isEditor:!0,editor:s,updateAttributes:c,deleteNode:d,getPos:u},p))}):(0,i.Y)(o.EY,{translated:!0,children:"Error: Publication not found"})}},81704:function(e,t,n){n.d(t,{E:()=>a});var r=n(17402),i=n(15734),l=n.n(i);let a=e=>{let{pubId:t,onSelectPost:n}=e,[i,a]=(0,r.useState)(""),[o,s]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)([]),h=(0,r.useRef)(null),m=(0,r.useCallback)(e=>{(a(e),h.current&&clearTimeout(h.current),e.trim())?(c(!0),h.current=window.setTimeout(async()=>{try{let n=await l().get("/api/v1/post/search").query({query:e,focusedPublicationId:t,numberFocused:10}),r=(n.body.focused||n.body.results||[]).map(e=>{var t,n,r;return{id:e.id,title:e.title,author_name:(null==(n=e.publishedBylines)||null==(t=n[0])?void 0:t.name)||e.author_name,author_names:null==(r=e.publishedBylines)?void 0:r.map(e=>e.name),cover_image:e.cover_image,canonical_url:e.canonical_url,post_date:e.post_date}});s(r)}catch(e){console.error("Error searching posts:",e),s([])}finally{c(!1)}},300)):s([])},[t]),g=(0,r.useCallback)(()=>{h.current&&clearTimeout(h.current),a(""),s([]),c(!1)},[]);return{searchQuery:i,searchResults:o,isSearching:d,handleSearch:m,clearSearch:g,onSelectPost:n,getLatestPostsByTag:(0,r.useCallback)(async e=>{try{c(!0);let t=((await l().get("/api/v1/archive").query({sort:"new",limit:10,post_tag_id:e})).body||[]).map(e=>{var t,n,r;return{id:e.id,title:e.title,author_name:(null==(n=e.publishedBylines)||null==(t=n[0])?void 0:t.name)||e.author_name,author_names:null==(r=e.publishedBylines)?void 0:r.map(e=>e.name),cover_image:e.cover_image,canonical_url:e.canonical_url,post_date:e.post_date}});return s(t),t}catch(e){return console.error("Error fetching posts by tag:",e),s([]),[]}finally{c(!1)}},[]),fetchAvailableTags:(0,r.useCallback)(async()=>{try{let e=(await l().get("/api/v1/publication/post-tag")).body||[];return p(e.filter(e=>!e.hidden)),e}catch(e){return console.error("Error fetching tags:",e),p([]),[]}},[]),availableTags:u}}},42455:function(e,t,n){let r;n.d(t,{_:()=>L});var i=n(4006),l=n(31583),a=n(32485),o=n.n(a),s=n(52482),d=n(4885),c=n(51745),u=n(69308),p=n(87332),h=n(92919),m=n(82853),g=n(97213),f=n(17402),v=n(52742),b=n(72880),y=n(84605),Y=n(35369),w=n(76977),C=n(37598),_=n(63136),E=n(65842),k=n(66511),A=n(39318),D=n(60177);let T={normal:"large",large:"full",full:"normal"},S=e=>{let{alt:t,onUpdateAlt:n}=e,{iString:r}=(0,y.GO)();return(0,i.Y)(w.I1,{gap:8,justifyContent:"center",className:D.A.mediaControlTextEditor,children:(0,i.FD)(w.I1,{gap:8,children:[(0,i.Y)(_.EY.B3,{translated:!0,font:"meta",color:"secondary",children:"Alt text"}),(0,i.Y)(E.ks,{value:t,onChange:e=>n(e.currentTarget.value),placeholder:r("Describe imagesâ€¦")})]})})},I=e=>{let{href:t,onSave:n}=e,[r,l]=(0,f.useState)(t||""),{iString:a}=(0,y.GO)();return(0,i.FD)(w.I1,{gap:8,justifyContent:"center",className:D.A.mediaControlTextEditor,children:[(0,i.FD)(w.I1,{gap:4,children:[(0,i.Y)(_.EY.B3,{translated:!0,font:"meta",color:"secondary",children:"URL"}),(0,i.Y)(E.ks,{placeholder:"Add image linkâ€¦",value:r,onChange:e=>l(e.currentTarget.value)})]}),(0,i.FD)(w.Ye,{gap:8,children:[t&&(0,i.Y)(Y.$n,{priority:"destructive",size:"sm",onClick:()=>n(null),children:a("Remove")}),(0,i.Y)(Y.$n,{priority:"primary",size:"sm",onClick:()=>{let e=(0,s.find)(r,"url");e.length?n(e[0].href.replace("http:","https:")):alert(a("Invalid url"))},disabled:t===r||!r.length,children:(null==t?void 0:t.length)?a("Update"):a("Save")})]})]})},L=e=>{var t;let{node:n,updateAttributes:a}=e,[s,_]=(0,f.useState)(!1),[E,L]=(0,f.useState)(0),[R,x]=(0,f.useState)(0),O=(0,f.useRef)(null),{iString:P}=(0,y.GO)();(0,f.useEffect)(()=>{let e;(e=document.querySelector(".ProseMirror"))&&x(null==e?void 0:e.clientWidth),O.current&&(O.current.onload=()=>{O.current&&L(O.current.naturalWidth/O.current.naturalHeight)})});let[N,F]=(0,f.useState)(!1),M=e=>{e.preventDefault(),setTimeout(()=>U(e))},B=()=>{F(!1),r=-1,document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",B)},U=e=>{if(-1===r)return;let{clientX:t}=e,n=r-t;if(0===n)return;let i=n>0?"left":"right";setTimeout(()=>{((e,t)=>{var n,r;if(!O.current)return console.error("Media ref is undefined|null",{resizableImg:O.current});let i={width:null==(n=O.current)?void 0:n.width,height:null==(r=O.current)?void 0:r.height},l={width:-1,height:-1};"left"===e?l.width=i.width-Math.abs(t):l.width=i.width+Math.abs(t),l.width>R&&(l.width=R),l.height=l.width/E,(e=>{let{width:t,height:n}=e;return t<50||n<50})(l)||a(l)})(i,Math.abs(n)),r=t})};return(0,i.FD)(l.VR,{as:"figure",className:o()(D.A.mediaNodeView,n.attrs.align&&D.A["align-".concat(n.attrs.align)||""]),"data-drag-handle":"",children:[(0,i.FD)(w.Ye,{className:o()(D.A.imageContainer,D.A[n.attrs.size]),children:[(0,i.FD)(w.I1,{gap:8,children:[(0,i.FD)(w.Ye,{justifyContent:"center",style:{position:"relative"},children:[(0,i.Y)(b.o,{className:D.A[n.attrs.size],src:n.attrs.src,alt:n.attrs.alt,title:n.attrs.title,style:{pointerEvents:"none"},maxWidth:(()=>{switch(n.attrs.size){case"large":return A.T$x;case"full":return window.innerWidth;default:if("100%"===n.attrs.width)return A.EZZ;return n.attrs.width}})(),imageRef:O,useRetinaSizing:!0,imageIsFixedWidth:!1}),"normal"===n.attrs.size&&(0,i.Y)("div",{className:o()(D.A.horizontalResizeHandle),title:P("Resize"),onClick:e=>{let{clientX:t}=e;r=t},onPointerDown:e=>{F(!0),r=e.clientX,setTimeout(()=>{document.addEventListener("pointermove",M),document.addEventListener("pointerup",B)})},onPointerUp:B,children:(0,i.Y)(Y.K0,{priority:"secondary",children:(0,i.Y)(d.A,{height:18,stroke:"#2b2e3b"})})})]}),(0,i.FD)(w.Ye,{justifyContent:"center",className:o()(D.A.inlineCaptionEditor,{[D.A.hasCaption]:null==(t=n.content)?void 0:t.size}),children:[(0,i.Y)(l.$p,{as:"figcaption",className:D.A.caption,contenteditable:!0}),!n.content.size&&(0,i.Y)("div",{className:o()(D.A.caption,D.A.placeholder),children:"Add captionâ€¦"})]})]}),(0,i.FD)(w.Ye,{gap:4,className:o()(D.A.mediaControlButtons),children:[(0,i.Y)(k.m_,{text:P("Toggle standard, large, full-screen"),children:(0,i.Y)(Y.K0,{priority:"tertiary",onClick:()=>{var e;let t;return t={size:e=T[n.attrs.size],width:"100%"},void("normal"!==e&&(t.height="auto",t.align="center"),"large"===e&&(t.width=A.T$x),"full"===e&&(t.width=A.YL9),a(t))},children:(0,i.Y)(c.A,{height:18,stroke:"#2b2e3b"})})}),"normal"===n.attrs.size&&(0,i.FD)(i.FK,{children:[(0,i.Y)(k.m_,{text:P("Align left"),children:(0,i.Y)(Y.K0,{priority:"tertiary",className:o()("left"===n.attrs.align&&D.A.active),onClick:()=>a({align:"left"}),children:(0,i.Y)(u.A,{height:18,stroke:"#2b2e3b"})})}),(0,i.Y)(k.m_,{text:P("Align center"),children:(0,i.Y)(Y.K0,{priority:"tertiary",className:o()("center"===n.attrs.align&&D.A.active),onClick:()=>a({align:"center"}),children:(0,i.Y)(p.A,{height:18,stroke:"#2b2e3b"})})}),(0,i.Y)(k.m_,{text:P("Align right"),children:(0,i.Y)(Y.K0,{priority:"tertiary",className:o()("right"===n.attrs.align&&D.A.active),onClick:()=>a({align:"right"}),children:(0,i.Y)(h.A,{height:18,stroke:"#2b2e3b"})})})]}),(0,i.Y)(k.m_,{text:P("Add link"),children:(0,i.Y)(C.A,{trigger:(0,i.Y)(Y.K0,{priority:"tertiary",children:(0,i.Y)(m.A,{height:18,stroke:"#2b2e3b"})}),align:"start",children:e=>{let{close:t}=e;return(0,i.Y)(I,{href:n.attrs.href,onSave:e=>{a({href:e}),t()}})}})}),(0,i.Y)(k.m_,{text:P("Edit alt text"),children:(0,i.Y)(C.A,{trigger:(0,i.Y)(Y.K0,{priority:"tertiary",children:(0,i.Y)(g.A,{height:18,stroke:"#2b2e3b"})}),align:"start",children:(0,i.Y)(S,{alt:n.attrs.alt,onUpdateAlt:e=>a({alt:e})})})})]})]}),(0,i.Y)(v.V,{isOpen:s,modalContent:[{attrs:n.attrs}],onClose:()=>_(!1),step:0})]})}},18203:function(e,t,n){n.d(t,{z:()=>A});var r=n(69277),i=n(79785),l=n(4006),a=n(32708),o=n(17402),s=n(64998),d=n(84605),c=n(25006),u=n(85478),p=n(35369),h=n(60322),m=n(76977),g=n(20500),f=n(76171),v=n(16993),b=n(94996),y=n(63136),Y=n(65842),w=n(66511);function C(){let e=(0,i._)(["Each option must be between 1 and "," characters long."]);return C=function(){return e},e}function _(){let e=(0,i._)(["The description must be less than "," characters long."]);return _=function(){return e},e}let E=(e,t)=>{let{question:n,description:r,expiry:i,audience:l,options:a}=e,{iString:o,iTemplate:s}=I18N.i(t),d=a.filter(Boolean);if(n.length<1||n.length>255)return o("The question must be between 1 and 255 characters long.");if(d.length<2||d.length>5)return o("Your poll must have 2 to 5 options.");if(d.some(e=>e.length<1||e.length>35))return s(C(),35);if(!["all_subscribers","only_paid"].includes(l))return o("Your poll audience is invalid.");if(![1,24,72,168,999999].includes(i))return o("The length of your poll is invalid.");else if(r.length>250)return s(_(),250);return null},k=e=>{let{index:t,text:n,onChange:r,onDelete:i,showDeleteButton:o,disabled:c}=e,{language:u}=(0,d.GO)();return(0,l.FD)(m.fI,{flex:"grow",gap:8,children:[(0,l.Y)(Y.ks,{disabled:c,flex:"grow",maxLength:35,placeholder:(0,s.Uf)(t,u),value:n,onChange:e=>{r(t,e.currentTarget.value)}}),o&&(0,l.Y)(p.K0,{disabled:c,priority:"tertiary",tabIndex:o?void 0:-1,onClick:()=>i(t),children:(0,l.Y)(a.A,{size:20})})]})},A=e=>{let{poll:t,isOpen:n,onClose:i,onSave:a,isPublished:s,shouldShowAudiencePicker:C}=e,_=t.options.map(e=>e.label);_.length>1?_.length<5&&_.push(""):_=["",""];let{iString:A,language:D,iPlural:T}=(0,d.GO)(),{getConfigFor:S}=(0,u.mJ)(),{payments_state:I}=(0,c.df)()||{},L=!!S("enable_description_on_polls"),R=C&&"enabled"===I?"only_paid":"all_subscribers",[x,O]=(0,o.useState)(t.question||""),[P,N]=(0,o.useState)(t.description||""),[F,M]=(0,o.useState)(_),[B,U]=(0,o.useState)(t.expiry||24),[z,j]=(0,o.useState)(t.audience||R),[G,H]=(0,o.useState)(!1),[V,W]=(0,o.useState)(t.votes_hidden||!1),[q,K]=(0,o.useState)(null),X=E({question:x,description:P,options:F,expiry:B,audience:z},D),J=(0,o.useCallback)(()=>{var e;O(t.question||""),N(t.description||""),M((null==(e=t.options)?void 0:e.map(e=>e.label))||["",""]),U(t.expiry||24),j(t.audience||R),W(t.votes_hidden||!1),K(null),i()},[t.question,t.description,t.options,t.expiry,t.audience,t.votes_hidden,R,i]),Z=(0,o.useCallback)(e=>{let{value:t}=e;["only_paid","all_subscribers"].includes(t)&&j(t)},[]),Q=(0,o.useCallback)(e=>{let{value:t}=e,n=Number(t);[1,24,72,168,999999].includes(n)&&U(n)},[]),$=(0,o.useCallback)((e,t)=>{let n=[...F];n.splice(e,1,t),e===n.length-1&&n.length<5&&n.push(""),M(n)},[F]),ee=(0,o.useCallback)(e=>{var t;if(F.length<=2||e>=F.length)return;let n=[...F];n.splice(e,1),(null==(t=n[n.length-1])?void 0:t.length)&&n.push(""),M(n)},[F]),et=Array(Math.max(2,F.length||0)).fill("").map((e,t)=>F.length>t?F[t]:e),en=q||s&&t.total_votes>0&&T("This poll is part of a post that has already been published. If you modify it, 1 existing vote will be removed.","This poll is part of a post that has already been published. If you modify it, %1 existing votes will be removed.",t.total_votes);return(0,l.FD)(v.aF,{className:"poll-editor-modal",isOpen:n,onClose:i,children:[(0,l.Y)(v.rQ,{showClose:!0,showDivider:!0,title:A("Edit poll"),onClose:i}),(0,l.Y)(v.cw,{children:(0,l.FD)(m.VP,{gap:20,children:[(0,l.FD)(Y.A0,{children:[(0,l.Y)(f.JU,{children:A("Poll question")}),(0,l.Y)(Y.ks,{disabled:G,maxLength:255,placeholder:A("Enter your question..."),value:x,onChange:e=>O(e.currentTarget.value)})]}),L&&(0,l.FD)(Y.A0,{children:[(0,l.Y)(f.JU,{children:A("Poll description")}),(0,l.Y)(Y.ks,{disabled:G,maxLength:250,placeholder:A("Enter your description..."),value:P,onChange:e=>N(e.currentTarget.value)})]}),(0,l.FD)(Y.A0,{children:[(0,l.Y)(f.JU,{children:A("Poll options")}),et.map((e,t)=>(0,l.Y)(k,{disabled:G,index:t,showDeleteButton:et.length>2&&(t<et.length-1||e&&e.length>0),text:e,onChange:$,onDelete:ee},t))]}),(0,l.FD)(Y.A0,{children:[(0,l.Y)(f.JU,{children:A("Poll duration")}),(0,l.FD)(b.I,{disabled:G,value:String(B),onChange:e=>Q({value:e.target.value}),children:[(0,l.Y)("option",{value:"1",children:A("1 hour")}),(0,l.Y)("option",{value:"24",children:A("1 day")}),(0,l.Y)("option",{value:"72",children:A("3 days")}),(0,l.Y)("option",{value:"168",children:A("1 week")}),(0,l.Y)("option",{value:"999999",children:A("Forever")})]})]}),C&&"enabled"===I&&(0,l.FD)(Y.A0,{children:[(0,l.Y)(f.JU,{children:A("Who can vote?")}),(0,l.FD)(b.I,{disabled:G,value:z,onChange:e=>Z({value:e.target.value}),children:[(0,l.Y)("option",{value:"only_paid",children:A("Only paid subscribers")}),(0,l.Y)("option",{value:"all_subscribers",children:A("All subscribers who can see this post")})]})]}),(0,l.Y)("label",{children:(0,l.FD)(m.fI,{alignItems:"center",gap:12,children:[(0,l.Y)(h.S,{checked:V,name:"votes-hidden",onChange:()=>W(!V)}),(0,l.Y)(y.EY.B3,{children:A("Hide the total vote count from readers?")})]})}),en&&(0,l.Y)(Y.A0,{children:(0,l.Y)(g.yn,{children:en})})]})}),(0,l.Y)(v.jl,{primaryButton:(0,l.Y)(w.m_,{disabled:null===X,text:null!=X?X:"",children:(0,l.Y)(p.$n,{disabled:null!==X||G,priority:"primary",onClick:async()=>{let e=E({question:x,description:P,options:F,expiry:B,audience:z},D);if(e)return void K(e);H(!0),K(null);try{await a((0,r._)({audience:z,question:x,options:F.filter(Boolean),expiry:B,votes_hidden:V},L?{description:P}:{}))}catch(e){K(A("An error occurred while saving this poll."))}finally{H(!1)}},children:A("Save")})}),secondaryButton:(0,l.Y)(p.$n,{disabled:G,priority:"secondary",onClick:J,children:A("Cancel")}),showDivider:!0})]})}},48329:function(e,t,n){n.d(t,{f:()=>s});var r=n(4006),i=n(67078),l=n(84605),a=n(76977),o=n(63136);let s=e=>{let{poll:t}=e,{iString:n}=(0,l.GO)(),s=null==t?void 0:t.audience,d=null==t?void 0:t.question,c=null==t?void 0:t.description;return(0,r.FD)(a.I1,{gap:4,children:[(0,r.Y)(a.Ye,{alignItems:"baseline",className:"poll-title",gap:4,children:"only_paid"===s?(0,r.FD)(r.FK,{children:[(0,r.Y)(i.A,{size:16}),(0,r.Y)(o.EY.Meta,{className:"subscriber-only-poll",translated:!0,children:"SUBSCRIBER-ONLY POLL"})]}):(0,r.Y)(o.EY.Meta,{translated:!0,children:"POLL"})}),(0,r.Y)(o.EY.H3,{className:"poll-question",color:"pub-primary-text",children:d||n("New Poll")}),c&&(0,r.Y)(o.EY.B3,{color:"pub-secondary-text",children:c})]})}},39232:function(e,t,n){n.d(t,{u:()=>w});var r=n(69277),i=n(70408),l=n(79785),a=n(4006),o=n(45773),s=n(17402),d=n(34206),c=n(84605),u=n(86500),p=n(35369),h=n(16993),m=n(84843),g=n(81203),f=n(63136),v=n(65842),b=n(39318),y=n(57324);function Y(){let e=(0,l._)(["Only "," to "," can vote on this poll."]);return Y=function(){return e},e}function w(e){var t;let{audience:n,isOpen:l,pollId:w,post:C,pub:_,user:E,onClose:k}=e,{iString:A,iTemplate:D}=(0,c.GO)(),[T,S]=(0,s.useState)(null!=(t=null==E?void 0:E.email)?t:"");(0,s.useEffect)(()=>{l&&(0,u.u4)(u.qY.POLL_SIGNUP_DIALOG_PRESENTED,{poll_id:w,post_id:null==C?void 0:C.id})},[l,w,null==C?void 0:C.id]);let I=()=>{(0,u.u4)(u.qY.POLL_SIGNUP_DIALOG_CLOSED,{poll_id:w,post_id:null==C?void 0:C.id}),k()},L=A("only_paid"===n?"paid subscribers":"subscribers");return(0,a.Y)(h.aF,{isOpen:l,onClose:I,children:(0,a.FD)(d.Ay,{action:(0,b.yRP)("/api/v1/free"),autoLock:!0,className:"form-G9Bs_n",loading:!1,method:"post",onSuccess:e=>{var t,n,l,a;(0,u.$5)(null==e||null==(t=e.body)?void 0:t.requires_confirmation),(0,u.u4)(u.qY.POLL_SIGNUP_DIALOG_SUBMITTED,{poll_id:w,post_id:null==C?void 0:C.id}),_.plans||_.has_recommendations?document.location.href=(0,b.eV6)(_,(0,i._)((0,r._)({utm_medium:y.Jn.web,utm_source:y.VU.pollSubscribeModal,utm_content:C&&C.id,just_signed_up:!0,requires_confirmation:(null==(n=e.body)?void 0:n.requires_confirmation)?"true":""},(null==(l=e.body)?void 0:l.subscription_id)&&{subscription_id:e.body.subscription_id},(null==(a=e.body)?void 0:a.referral_token)&&{referral_token:e.body.referral_token}),{next:(0,b.wu9)(_,C)})):document.location.reload()},children:[(0,a.Y)(h.rQ,{alignItems:"center",description:D(Y(),L,_.name),icon:_.logo_url?(0,a.Y)(g.Nq,{outline:"detail",pub:_,radius:"sm",size:48}):(0,a.Y)(m.Ud,{}),showClose:!0,title:A("Subscribe to vote"),onClose:I}),(0,a.FD)(h.cw,{children:[(0,a.Y)(v.ks,{"aria-label":A("Email"),disabled:!!E.email,name:"email",placeholder:A("Type your email..."),trailing:!!E.email&&(0,a.Y)(o.A,{size:20,stroke:"var(--color-fg-tertiary)"}),type:"email",value:T,onChange:e=>S(e.currentTarget.value)}),(0,a.Y)("input",{name:"source",type:"hidden",value:"poll-subscribe-modal"}),(0,a.Y)("div",{id:"error-container"})]}),(0,a.Y)(h.jl,{direction:"column",primaryButton:(0,a.Y)(p.$n,{priority:"primary",type:"submit",children:A("Subscribe")}),secondaryButton:E.email?void 0:(0,a.FD)(f.EY.B4,{align:"center",as:"span",color:"secondary",children:[A("Already a subscriber?")," ",(0,a.Y)(f.Yq,{color:"accent",href:(0,b.a7q)({for_pub:_.subdomain,redirect:(0,b.wu9)(_,C)}),children:A("Sign in")})]})})]})})}},15469:function(e,t,n){n.d(t,{r:()=>u});var r=n(69277),i=n(79785),l=n(4006),a=n(84605),o=n(63136);function s(){let e=(0,i._)([""," DAYS REMAINING"]);return s=function(){return e},e}function d(){let e=(0,i._)(["1 DAY REMAINING"]);return d=function(){return e},e}function c(){let e=(0,i._)([""," HOURS REMAINING"]);return c=function(){return e},e}let u=e=>{let{hasVoted:t,isExpired:n,poll:i,remainingHours:u,showResults:p,user:h,onToggleShowResults:m}=e,{iString:g,iPlural:f,language:v}=(0,a.GO)(),b=(0,r._)({is_contributor:!1,is_author:!1,is_admin:!1},h),y=b.is_contributor||b.is_admin||b.is_author,Y=f("%1 VOTE","%1 VOTES",i.total_votes),w=(e=>{let{isExpired:t,remainingHours:n,language:r}=e,{iString:i,iTemplate:l}=I18N.i(r);if(t)return i("POLL CLOSED");if(n>=168)return"";if(n>=48){let e=Math.floor(n/24);return l(s(),e)}return n>=24?l(d()):n>=2?l(c(),n):i(1==n?"1 HOUR REMAINING":"LESS THAN 1 HOUR REMAINING")})({isExpired:n,remainingHours:u,language:v});return(0,l.FD)(o.EY.Meta,{className:"poll-status",children:[(y||!i.votes_hidden)&&"".concat(Y," \xb7 "),w,y&&!t&&!n&&(0,l.FD)(l.FK,{children:[" \xb7 ",(0,l.Y)("span",{className:"poll-author-visibility-toggle",title:g("Only the author, contributors, and admins may view results before voting."),onClick:()=>{m()},children:g(p?"SHOW OPTIONS":"SHOW RESULTS")})]})]})}},39469:function(e,t,n){n.d(t,{h:()=>s});var r=n(4006),i=n(32485),l=n.n(i),a=n(44471),o=n(17402);let s=e=>{let{id:t,text:n,onVote:i,showVotes:s,currentVotes:d,totalVotes:c,myVote:u,canVote:p}=e,h=(0,o.useCallback)(async()=>{t&&p&&await i(t)},[t,i,p]),m=Math.round(100*(0===c?0:d/c));return(0,r.FD)("div",{className:l()("poll-option",{"show-votes":s,"hide-votes":!s,"can-vote":p,"my-vote":u}),onClick:h,children:[s&&(0,r.Y)("div",{className:"poll-vote-background",style:{width:"".concat(m,"%")}}),(0,r.Y)("div",{className:"poll-option-background",children:(0,r.FD)("div",{className:"poll-option-text",children:[n,s&&u&&(0,r.Y)(a.A,{className:"vote-icon"})]})}),s&&(0,r.FD)("div",{className:"poll-percentage-text",children:[m,"%"]})]})}},31245:function(e,t,n){n.d(t,{j:()=>c});var r=n(17402),i=n(15734),l=n.n(i),a=n(84605),o=n(39318),s=n(9036),d=n(82776);let c=e=>{let{isEditor:t,isVersionView:n,pollId:i,post:c,onFinishSaving:u}=e,{iString:p}=(0,a.GO)(),[h,m]=(0,r.useState)(null!=n&&n),[g,f]=(0,r.useState)(!0),[v,b]=(0,r.useState)(null),[y,Y]=(0,r.useState)(null),w=(0,r.useMemo)(()=>{let e={token:void 0,uuid:void 0};if("undefined"!=typeof window&&!t){var n;let t=(0,s.m)(window.location.href);if(t&&t.token&&(e.token=t.token),!e.token&&(null==(n=window._preloads)?void 0:n.original_url)){let t=(0,s.m)(window._preloads.original_url);t&&t.token&&(e.token=t.token)}}if("undefined"!=typeof window&&!t&&(null==c?void 0:c.is_draft)){let t=(0,o.Gn4)(window.location.href);t&&(0,d.isUUID)(t)&&(e.uuid=t)}return e},[t,null==c?void 0:c.is_draft]),C=(0,r.useCallback)(async function(){let{shouldNotSetLoading:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldNotSetLoading:!1};e||f(!0);try{let e=await l()("/api/v1/poll/".concat(i)).query(w);b(e.body),Y(null)}catch(e){Y(p("We were unable to load this poll. Please refresh the page."))}f(!1)},[i,w,p]),_=(0,r.useCallback)(async e=>{await l().put("/api/v1/poll/".concat(i)).send(e),f(!0),await C(),u()},[C,u,i]),E=(0,r.useCallback)(async e=>{if(!h){m(!0);try{await l().post("/api/v1/poll/".concat(i,"/vote")).send({poll_option_id:e}).query(w),Y(null)}catch(e){Y(p("We were unable to record your vote. Please refresh the page and try again.")),m(!1);return}await C({shouldNotSetLoading:!0}),m(!1)}},[h,C,i,w,p]);return(0,r.useEffect)(()=>{C()},[C]),{error:y,loading:g,poll:v,fetchPoll:C,savePoll:_,voteForOption:E}}},15275:function(e,t,n){n.r(t),n.d(t,{PullquoteEditor:()=>y});var r=n(4006),i=n(31583),l=n(32485),a=n.n(l),o=n(87332),s=n(69308),d=n(92919),c=n(51745),u=n(13558),p=n(17402),h=n(84605),m=n(85478),g=n(35369),f=n(76977),v=n(66511);let b={pullquoteEditor:"pullquoteEditor-fRQrlk",alignmentControls:"alignmentControls-E2LyCJ",active:"active-EsdG2H",divider:"divider-QIm1sR",colorButtonText:"colorButtonText-pvxKIk"},y=e=>{let{node:t,updateAttributes:n}=e,{iString:l}=(0,h.GO)(),{getConfigFor:y}=(0,m.mJ)(),[Y,w]=(0,p.useState)(!1),C=y("thefp_enable_pullquote_alignment"),_=y("thefp_enable_pullquote_color"),E=e=>{n({align:e})},k=e=>{n({color:e})};return(0,r.FD)(i.VR,{className:a()("pullquote","center"===t.attrs.align&&"pullquote-align-center","left"===t.attrs.align&&"pullquote-align-left","right"===t.attrs.align&&"pullquote-align-right","wide"===t.attrs.align&&"pullquote-align-wide",t.attrs.color&&"pullquote-color-".concat(t.attrs.color),b.pullquoteEditor),"data-drag-handle":"",onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[(0,r.Y)(i.$p,{}),Y&&(C||_)&&(0,r.FD)(f.Ye,{gap:4,className:b.alignmentControls,children:[C&&(0,r.FD)(r.FK,{children:[(0,r.Y)(v.m_,{text:l("Center"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("center"===t.attrs.align&&b.active),onClick:()=>E("center"),children:(0,r.Y)(o.A,{height:16})})}),(0,r.Y)(v.m_,{text:l("Float left"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("left"===t.attrs.align&&b.active),onClick:()=>E("left"),children:(0,r.Y)(s.A,{height:16})})}),(0,r.Y)(v.m_,{text:l("Float right"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("right"===t.attrs.align&&b.active),onClick:()=>E("right"),children:(0,r.Y)(d.A,{height:16})})}),(0,r.Y)(v.m_,{text:l("Wide"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("wide"===t.attrs.align&&b.active),onClick:()=>E("wide"),children:(0,r.Y)(c.A,{height:16})})})]}),C&&_&&(0,r.Y)("div",{className:b.divider}),_&&(0,r.FD)(r.FK,{children:[(0,r.Y)(v.m_,{text:l("Default color"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()(!t.attrs.color&&b.active),onClick:()=>k(null),children:(0,r.Y)(u.A,{height:16})})}),(0,r.Y)(v.m_,{text:l("Red"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("red"===t.attrs.color&&b.active,b.colorButton),onClick:()=>k("red"),style:{color:"red"},children:(0,r.Y)("span",{className:b.colorButtonText,children:"R"})})}),(0,r.Y)(v.m_,{text:l("Black"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("black"===t.attrs.color&&b.active,b.colorButton),onClick:()=>k("black"),style:{color:"black"},children:(0,r.Y)("span",{className:b.colorButtonText,children:"K"})})}),(0,r.Y)(v.m_,{text:l("Blue"),children:(0,r.Y)(g.K0,{priority:"tertiary",size:"sm",className:a()("blue"===t.attrs.color&&b.active,b.colorButton),onClick:()=>k("blue"),style:{color:"blue"},children:(0,r.Y)("span",{className:b.colorButtonText,children:"U"})})})]})]})]})}},21533:function(e,t,n){n.d(t,{L:()=>a});var r=n(4006),i=n(31583),l=n(42114);let a=e=>{let{node:t}=e;return(0,r.Y)(i.VR,{children:(0,r.Y)(l.i,{mediaUploadId:t.attrs.mediaUploadId,isEditor:!0,post:null,pub:null})})}},27402:function(e,t,n){n.d(t,{A:()=>i});var r=n(17402);let i=function(e,t){(0,r.useEffect)(()=>{function n(n){let r=n.target;r instanceof Element&&null!==r.closest('[role="dialog"]')||e.current&&!e.current.contains(r)&&t()}function r(e){("Escape"===e.key||27===e.keyCode)&&t()}return document.addEventListener("mousedown",n),document.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",r)}},[e,t])}},92057:function(e,t,n){n.d(t,{A:()=>l});var r=n(17402),i=n(68349);let l=e=>{let t=(0,r.useRef)(!1),n=(0,r.useRef)();(0,r.useEffect)(()=>{if(!e||!(0,i.nr)())return;let r=()=>{n.current&&clearTimeout(n.current),t.current=!0},l=()=>{t.current&&(e.pause(),n.current=setTimeout(()=>{t.current=!1},150))},a=()=>{t.current&&e.pause()};return e.addEventListener("seeking",r),e.addEventListener("seeked",l),e.addEventListener("play",a),()=>{e.removeEventListener("seeking",r),e.removeEventListener("seeked",l),e.removeEventListener("play",a),n.current&&clearTimeout(n.current)}},[e])}},27437:function(e,t,n){n.r(t),n.d(t,{ProfileHoverCard:()=>o});var r=n(4006),i=n(7358),l=n(65824),a=n(30192);function o(e){let{trigger:t,subject:n,disabled:o,utmSource:s}=e;return(0,l.nL)(n)?(0,r.Y)(a.j,{trigger:t,disabled:o,children:(0,r.Y)(i.a,{subject:n,utmSource:s,trackOnShow:!0})}):(0,r.Y)(r.FK,{children:t})}},84777:function(e,t,n){n.d(t,{m:()=>a});var r=n(4006),i=n(92825),l=n(30192);let a=e=>{let{pubId:t,trigger:n,utmSource:a,disabled:o}=e;return(0,r.Y)(l.j,{trigger:n,disabled:o,children:(0,r.Y)(i.S,{pubId:t,utmSource:a,trackOnShow:!0})})}},82519:function(e,t,n){n.d(t,{A:()=>s});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(97731);let s=e=>{var{size:t=18,color:n="var(--color-fg-primary)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,a.Y)(o.A,(0,i._)((0,r._)({},d),{name:"DropdownIcon",svgParams:{viewBox:"0 0 20 20"},stroke:"none",width:t,height:t,fill:n,className:s,children:(0,a.Y)("path",{d:"M5.72845 8.252C5.25083 7.59067 5.72336 6.6665 6.53913 6.6665H13.461C14.2767 6.6665 14.7493 7.59067 14.2716 8.25199L10.8107 13.044C10.4116 13.5967 9.58852 13.5967 9.18936 13.044L5.72845 8.252Z",stroke:"none"})}))}},7147:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.FD)(a.A,(0,i._)((0,r._)({},e),{name:"EmojiPickerIcon",svgParams:{height:15,width:14,viewBox:"0 0 15 14",fill:"none",stroke:"none"},children:[(0,l.Y)("path",{d:"M12.7474 7.25708C12.3309 7.37462 11.8916 7.4375 11.4375 7.4375C8.77963 7.4375 6.625 5.28287 6.625 2.625C6.625 2.17094 6.68788 1.73156 6.80542 1.31511C6.74549 1.31337 6.68535 1.3125 6.625 1.3125C3.24226 1.3125 0.5 4.05476 0.5 7.4375C0.5 10.8202 3.24226 13.5625 6.625 13.5625C10.0077 13.5625 12.75 10.8202 12.75 7.4375C12.75 7.37715 12.7491 7.31701 12.7474 7.25708ZM5.75 5.25C5.75 5.97487 5.16237 6.5625 4.4375 6.5625C3.71263 6.5625 3.125 5.97487 3.125 5.25C3.125 4.52513 3.71263 3.9375 4.4375 3.9375C5.16237 3.9375 5.75 4.52513 5.75 5.25ZM10.125 8.3125C10.125 10.2455 8.558 11.8125 6.625 11.8125C4.692 11.8125 3.125 10.2455 3.125 8.3125H10.125Z",fill:"#808080",fillRule:"evenodd",clipRule:"evenodd"}),(0,l.Y)("path",{d:"M12.0938 0H10.7812V1.96875L8.8125 1.96875V3.28125H10.7812V5.25H12.0938V3.28125H14.0625V1.96875L12.0938 1.96875V0Z",fill:"#808080",fillRule:"evenodd",clipRule:"evenodd"})]}))},68104:function(e,t,n){n.d(t,{A:()=>s});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(97731);let s=e=>{var{size:t=20,color:n="var(--color-fg-primary)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,a.Y)(o.A,(0,i._)((0,r._)({},d),{name:"FilledCircleCrossIcon",svgParams:{viewBox:"0 0 20 20"},stroke:"none",width:t,height:t,fill:n,className:s,children:(0,a.Y)("path",{d:"M10 18.6646C8.80469 18.6646 7.68408 18.4377 6.63818 17.9839C5.59229 17.5356 4.6709 16.9131 3.87402 16.1162C3.08268 15.3249 2.46289 14.409 2.01465 13.3687C1.56641 12.3228 1.34229 11.2021 1.34229 10.0068C1.34229 8.81152 1.56641 7.69092 2.01465 6.64502C2.46289 5.59912 3.08268 4.6805 3.87402 3.88916C4.6709 3.09229 5.59229 2.46973 6.63818 2.02148C7.68408 1.57324 8.80469 1.34912 10 1.34912C11.1953 1.34912 12.3159 1.57324 13.3618 2.02148C14.4077 2.46973 15.3263 3.09229 16.1177 3.88916C16.909 4.6805 17.5288 5.59912 17.9771 6.64502C18.4308 7.69092 18.6577 8.81152 18.6577 10.0068C18.6577 11.2021 18.4308 12.3228 17.9771 13.3687C17.5288 14.409 16.909 15.3249 16.1177 16.1162C15.3263 16.9131 14.4077 17.5356 13.3618 17.9839C12.3159 18.4377 11.1953 18.6646 10 18.6646ZM7.31885 13.543C7.5734 13.543 7.78646 13.46 7.95801 13.2939L10.0083 11.2354L12.0669 13.2939C12.2274 13.46 12.4321 13.543 12.6812 13.543C12.9246 13.543 13.1294 13.46 13.2954 13.2939C13.4614 13.1279 13.5444 12.9232 13.5444 12.6797C13.5444 12.4417 13.4587 12.2425 13.2871 12.082L11.2202 10.0151L13.2954 7.94824C13.4614 7.77669 13.5444 7.57747 13.5444 7.35059C13.5444 7.1071 13.4614 6.90511 13.2954 6.74463C13.1349 6.57861 12.9357 6.49561 12.6978 6.49561C12.4543 6.49561 12.2495 6.57861 12.0835 6.74463L10.0083 8.81152L7.94141 6.75293C7.76986 6.58691 7.56234 6.50391 7.31885 6.50391C7.08089 6.50391 6.87891 6.58691 6.71289 6.75293C6.55241 6.91341 6.47217 7.1154 6.47217 7.35889C6.47217 7.58577 6.55518 7.78223 6.72119 7.94824L8.79639 10.0151L6.72119 12.0903C6.55518 12.2563 6.47217 12.4528 6.47217 12.6797C6.47217 12.9232 6.55241 13.1279 6.71289 13.2939C6.87891 13.46 7.08089 13.543 7.31885 13.543Z",stroke:"none"})}))}},18468:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.Y)(a.A,(0,i._)((0,r._)({strokeLinecap:"round",strokeLinejoin:"round"},e),{name:"LucideStarIcon",svgParams:{height:24,width:24},children:(0,l.Y)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}))},85796:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.Y)(a.A,(0,i._)((0,r._)({},e),{name:"NoteReplyIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,l.Y)("path",{d:"M22 11.4445C22.0038 12.911 21.6612 14.3577 21 15.6667C20.216 17.2353 19.0108 18.5546 17.5194 19.477C16.0279 20.3993 14.3091 20.8882 12.5555 20.8889C11.089 20.8927 9.64234 20.5501 8.33332 19.8889L2 22L4.11111 15.6667C3.44992 14.3577 3.10729 12.911 3.11111 11.4445C3.11179 9.69086 3.60068 7.97208 4.52302 6.48064C5.44536 4.98919 6.76472 3.78399 8.33332 3.00003C9.64234 2.33884 11.089 1.99621 12.5555 2.00003H13.1111C15.427 2.1278 17.6145 3.10532 19.2546 4.74543C20.8947 6.38553 21.8722 8.57297 22 10.8889V11.4445Z","stroke-linecap":"round","stroke-linejoin":"round"})}))},64955:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.Y)(a.A,(0,i._)((0,r._)({},e),{name:"PauseIconRounded",svgParams:{height:16,width:16},stroke:"none",children:(0,l.Y)("path",{d:"M3.43396 16C2.47491 16 1.99064 15.5157 2.00014 14.5757V1.42433C2.00014 0.484273 2.48441 0 3.43396 0L5.7034 0C6.65296 0.00949555 7.13723 0.465282 7.13723 1.42433V14.5757C7.13723 15.5157 6.65296 16 5.7034 16H3.43396ZM10.831 16C9.87195 16 9.40666 15.5157 9.40666 14.5757V1.42433C9.40666 0.484273 9.89094 0 10.831 0L13.1004 0C14.05 0 14.5343 0.465282 14.5343 1.42433V14.5757C14.5343 15.5157 14.05 16 13.1004 16H10.831Z"})}))},95931:function(e,t,n){n.d(t,{A:()=>s});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(97731);let s=e=>{var{fill:t="white"}=e,n=(0,l._)(e,["fill"]);return(0,a.FD)(o.A,(0,i._)((0,r._)({},n),{name:"PodcastEmbedPauseIcon",svgParams:{width:13,height:16,viewBox:"0 0 13 16",stroke:"none",fill:t},children:[(0,a.Y)("path",{d:"M4 0H1C0.447715 0 0 0.447715 0 1V15C0 15.5523 0.447715 16 1 16H4C4.55228 16 5 15.5523 5 15V1C5 0.447715 4.55228 0 4 0Z"}),(0,a.Y)("path",{d:"M11.9998 0H8.99976C8.44747 0 7.99976 0.447715 7.99976 1V15C7.99976 15.5523 8.44747 16 8.99976 16H11.9998C12.552 16 12.9998 15.5523 12.9998 15V1C12.9998 0.447715 12.552 0 11.9998 0Z"})]}))}},46129:function(e,t,n){n.d(t,{A:()=>s});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(97731);let s=e=>{var{fill:t="white"}=e,n=(0,l._)(e,["fill"]);return(0,a.Y)(o.A,(0,i._)((0,r._)({},n),{name:"PodcastEmbedPlayIcon",svgParams:{width:14,height:16,viewBox:"0 0 14 16",stroke:"none",fill:t},children:(0,a.Y)("path",{d:"M12.8563 6.71384C13.8273 7.29645 13.8273 8.70372 12.8563 9.28632L2.27174 15.637C1.27196 16.2369 1.11076e-07 15.5167 1.62041e-07 14.3508L7.17238e-07 1.64937C7.68203e-07 0.483426 1.27196 -0.236744 2.27174 0.363129L12.8563 6.71384Z"})}))}},74217:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.FD)(a.A,(0,i._)((0,r._)({},e),{name:"ShareFbIcon",svgParams:{height:24,width:24,stroke:"none"},children:[(0,l.FD)("g",{"clip-path":"url(#clip0_2063_103618)",children:[(0,l.Y)("circle",{cx:"12",cy:"12",r:"12",fill:"white",stroke:"none"}),(0,l.Y)("path",{d:"M9.101 23.647V15.667H6.627V12H9.101V10.42C9.101 6.335 10.949 4.442 14.959 4.442C15.36 4.442 15.914 4.484 16.427 4.545C16.8112 4.58454 17.1924 4.64968 17.568 4.74V8.065C17.3509 8.04475 17.133 8.03274 16.915 8.029C16.6707 8.02266 16.4264 8.01966 16.182 8.02C15.475 8.02 14.923 8.116 14.507 8.329C14.2273 8.46931 13.9922 8.68468 13.828 8.951C13.57 9.371 13.454 9.946 13.454 10.703V12H17.373L16.987 14.103L16.7 15.667H13.454V23.912C19.396 23.194 24 18.135 24 12C24 5.373 18.627 0 12 0C5.373 0 0 5.373 0 12C0 17.628 3.874 22.35 9.101 23.647Z",fill:"#0866FF",stroke:"none"})]}),(0,l.Y)("defs",{children:(0,l.Y)("clipPath",{id:"clip0_2063_103618",children:(0,l.Y)("rect",{width:"24",height:"24",fill:"white",stroke:"none"})})})]}))},43003:function(e,t,n){n.d(t,{A:()=>o});var r=n(69277),i=n(70408),l=n(4006),a=n(97731);let o=e=>(0,l.FD)(a.A,(0,i._)((0,r._)({},e),{name:"ShareLinkedinIcon",svgParams:{height:24,width:24,stroke:"none"},children:[(0,l.Y)("g",{"clip-path":"url(#clip0_2099_103632)"}),(0,l.Y)("rect",{x:"1",y:"1",width:"22",height:"22",fill:"white",stroke:"none"}),(0,l.Y)("path",{d:"M20.447 20.452H16.893V14.883C16.893 13.555 16.866 11.846 15.041 11.846C13.188 11.846 12.905 13.291 12.905 14.785V20.452H9.351V9H12.765V10.561H12.811C13.288 9.661 14.448 8.711 16.181 8.711C19.782 8.711 20.448 11.081 20.448 14.166L20.447 20.452ZM5.337 7.433C4.193 7.433 3.274 6.507 3.274 5.368C3.274 4.23 4.194 3.305 5.337 3.305C6.477 3.305 7.401 4.23 7.401 5.368C7.401 6.507 6.476 7.433 5.337 7.433ZM7.119 20.452H3.555V9H7.119V20.452ZM22.225 0H1.771C0.792 0 0 0.774 0 1.729V22.271C0 23.227 0.792 24 1.771 24H22.222C23.2 24 24 23.227 24 22.271V1.729C24 0.774 23.2 0 22.222 0H22.225Z",fill:"#0A66C2",stroke:"none"}),(0,l.Y)("defs",{children:(0,l.Y)("clipPath",{id:"clip0_2099_103632",children:(0,l.Y)("rect",{width:"24",height:"24",fill:"white",style:{fill:"white",fillOpacity:1}})})})]}))},70357:function(e,t,n){n.d(t,{A:()=>s});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(97731);let s=e=>{var{size:t=24,fill:n="var(--color-fg-primary)",className:s}=e,d=(0,l._)(e,["size","fill","className"]);return(0,a.FD)(o.A,(0,i._)((0,r._)({},d),{name:"SubstackIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,stroke:"none",className:s,children:[(0,a.Y)("path",{d:"M1.96484 0.624512H18.0354V2.70052H1.96484V0.624512Z",stroke:"none"}),(0,a.Y)("path",{d:"M1.96484 4.77655H18.0354V6.85254H1.96484V4.77655Z",stroke:"none"}),(0,a.Y)("path",{d:"M1.96484 8.92857V19.9505L10.0001 14.6347L18.0354 19.9505V8.92857H1.96484Z",stroke:"none"})]}))}},85612:function(e,t,n){n.d(t,{$5:()=>s,It:()=>o,MO:()=>l,uv:()=>a});var r=n(4006),i=n(57753);let l=e=>{let{fill:t=i.Q3.mediumRed.hex,size:n=24,className:l}=e;return(0,r.FD)("svg",{className:l,fill:"none",height:n,viewBox:"0 0 48 48",width:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("g",{clipPath:"url(#fp-spotify-clip)",children:(0,r.Y)("path",{d:"M24.0004 0C10.7456 0 0 10.7454 0 24.0001C0 37.2555 10.7456 48 24.0004 48C37.2567 48 48.0011 37.2555 48.0011 24.0001C48.0011 10.7462 37.2567 0.00114638 24.0001 0.00114638L24.0004 0ZM35.0069 34.6151C34.577 35.3201 33.6541 35.5437 32.9491 35.1109C27.3141 31.6689 20.2202 30.8893 11.8659 32.7981C11.0609 32.9815 10.2584 32.4771 10.075 31.6718C9.89072 30.8664 10.3931 30.0639 11.2002 29.8805C20.3426 27.7918 28.1847 28.6911 34.5111 32.5573C35.2161 32.9901 35.4396 33.9101 35.0069 34.6151ZM37.9445 28.0801C37.4028 28.9605 36.2507 29.2385 35.3708 28.6969C28.9196 24.7315 19.0856 23.5831 11.455 25.8994C10.4653 26.1983 9.42013 25.6406 9.11978 24.6527C8.82172 23.6631 9.37972 22.6199 10.3676 22.319C19.0839 19.6743 29.9198 20.9553 37.3283 25.5079C38.2081 26.0496 38.4861 27.2014 37.9445 28.0801ZM38.1967 21.2752C30.4615 16.6808 17.6993 16.2583 10.314 18.4998C9.12809 18.8595 7.87394 18.19 7.51455 17.004C7.15516 15.8175 7.82408 14.5642 9.01087 14.2037C17.4887 11.6301 31.582 12.1273 40.4877 17.4142C41.5567 18.0473 41.9064 19.4249 41.273 20.4902C40.6425 21.5569 39.2611 21.9086 38.1978 21.2752H38.1967Z",fill:t})}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"fp-spotify-clip",children:(0,r.Y)("rect",{fill:"white",height:"48",width:"48"})})})]})},a=e=>{let{fill:t=i.Q3.mediumRed.hex,size:n=24,className:l}=e;return(0,r.Y)("svg",{className:l,fill:"none",height:n,viewBox:"0 0 48 48",width:n,xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M31.521 34.967L30.3181 44.591C30.0745 46.5385 28.4189 48 26.4563 48H22.9493C20.9865 48 19.3309 46.5385 19.0875 44.5908L17.8845 34.9668C17.3717 30.8657 20.5695 27.2432 24.7027 27.2432C21.4837 27.2432 18.8649 24.6244 18.8649 21.4054C18.8649 18.1864 21.4837 15.5676 24.7027 15.5676C27.9217 15.5676 30.5405 18.1864 30.5405 21.4054C30.5405 24.6244 27.9217 27.2432 24.7027 27.2432C28.8359 27.2432 32.0337 30.8657 31.521 34.967ZM24.7027 11.6757C18.6224 11.6757 13.6757 16.6224 13.6757 22.7027C13.6757 24.8942 14.321 26.9367 15.4277 28.6551C14.6322 30.0069 14.1423 31.5165 13.9908 33.0752C11.3883 30.3885 9.78378 26.7298 9.78378 22.7027C9.78378 14.4764 16.4764 7.78378 24.7027 7.78378C32.929 7.78378 39.6216 14.4764 39.6216 22.7027C39.6216 26.7298 38.0171 30.3885 35.4147 33.0754C35.2632 31.5165 34.7732 30.007 33.9779 28.6552C35.0845 26.9367 35.7297 24.8942 35.7297 22.7027C35.7297 16.6224 30.783 11.6757 24.7027 11.6757ZM34.4114 43.2218L35.0104 38.4298C40.1277 35.0645 43.5135 29.2721 43.5135 22.7027C43.5135 12.3304 35.075 3.89189 24.7027 3.89189C14.3304 3.89189 5.89189 12.3304 5.89189 22.7027C5.89189 29.2721 9.27771 35.0645 14.395 38.4298L14.994 43.2218C7.31944 39.5757 2 31.7493 2 22.7027C2 10.1844 12.1844 0 24.7027 0C37.221 0 47.4054 10.1844 47.4054 22.7027C47.4054 31.7493 42.086 39.5757 34.4114 43.2218Z",fill:t})})},o=e=>{let{fill:t=i.Q3.mediumRed.hex,size:n=24,className:l}=e;return(0,r.FD)("svg",{className:l,fill:"none",height:n,viewBox:"0 0 48 48",width:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("path",{d:"M32.3208 15.6622C24.7895 8.1309 14.7688 3.98315 4.10449 3.98315V11.8297C12.6729 11.8297 20.7233 15.1611 26.7726 21.2105C32.8219 27.2599 36.1535 35.3103 36.1535 43.8787H44C43.9999 33.2144 39.8521 23.1935 32.3208 15.6622Z",fill:t}),(0,r.Y)("path",{d:"M4.02344 17.2612V25.1077C14.3737 25.1077 22.7944 33.5283 22.7944 43.8788H30.6409C30.6409 29.2018 18.7005 17.2612 4.02344 17.2612Z",fill:t}),(0,r.Y)("path",{d:"M9.59452 44.0969C12.6983 44.0969 15.2144 41.5808 15.2144 38.477C15.2144 35.3732 12.6983 32.8571 9.59452 32.8571C6.49073 32.8571 3.97461 35.3732 3.97461 38.477C3.97461 41.5808 6.49073 44.0969 9.59452 44.0969Z",fill:t})]})},s=e=>{let{fill:t=i.Q3.mediumRed.hex,size:n=24,className:l}=e;return(0,r.Y)("svg",{className:l,fill:"none",height:n,viewBox:"0 0 48 48",width:n,xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{clipRule:"evenodd",d:"M39.231 6.36788C47.031 6.89888 47.94 11.6299 48 23.9989C47.94 36.3889 47.022 41.0989 39.228 41.6299C32.019 42.1219 15.966 42.1189 8.769 41.6299C0.969 41.0989 0.06 36.3679 0 23.9989C0.06 11.6089 0.977999 6.89888 8.772 6.36788C15.969 5.87888 32.022 5.87588 39.231 6.36788ZM33.999 23.9839L18 15.9979V31.9999L33.999 23.9839Z",fill:t,fillRule:"evenodd"})})}},60294:function(e,t,n){n.d(t,{D:()=>o});var r=n(4006),i=n(56455),l=n(15894),a=n(76977);let o=e=>{let{poll:t}=e;return(0,r.Y)(i.m,{children:(0,r.FD)(a.I1,{gap:16,children:[(0,r.Y)(l.T,{preset:"h5-sans",children:(null==t?void 0:t.question)||"New Poll"}),(null==t?void 0:t.description)&&(0,r.Y)(l.T,{preset:"d2-serif",children:t.description})]})})}},49386:function(e,t,n){n.d(t,{h:()=>o});var r=n(4006),i=n(56455),l=n(15894),a=n(84605);let o=e=>{let{hasVoted:t,poll:n,user:o}=e,{iPlural:s}=(0,a.GO)();return(!n.votes_hidden||o.is_contributor)&&(t||o.is_contributor)?(0,r.Y)(i.m,{children:(0,r.Y)(l.T,{color:"tertiary",preset:"detail-large",children:s("%1 VOTE","%1 VOTES",n.total_votes)})}):null}},66710:function(e,t,n){n.d(t,{H:()=>h});var r=n(4006),i=n(32485),l=n.n(i),a=n(45773),o=n(17402),s=n(56455),d=n(15894),c=n(76977);let u="text-QBNtOV",p=["#7491e3","#f69227","#f74701","#f3c82e","#2db750","#0366f3","#bebdb8"],h=e=>{let{currentVotes:t,hasVoted:n,id:i,index:h,myVote:m,showVotes:g,text:f,totalVotes:v,onVote:b}=e,y=Math.round(100*(0===v?0:t/v)),Y=p[h%p.length],w=(0,o.useCallback)(async()=>{!n&&i&&await b(i)},[n,i,b]);return(0,r.Y)(s.m,{children:(0,r.FD)(c.Ye,{className:l()("container-ZEro8t",{"containerCanVote-zhAHHo":!n}),cursor:n?void 0:"pointer",justifyContent:n?"space-between":"center",padding:16,position:"relative",onClick:w,children:[g&&(0,r.Y)("div",{className:"percentageBackground-AahPjX",style:{width:"".concat(y,"%"),backgroundColor:Y}}),(0,r.Y)(d.T,{className:u,preset:"detail-large",children:f}),g&&(0,r.FD)(c.Ye,{alignItems:"center",gap:8,children:[m&&(0,r.Y)(c.Ye,{alignItems:"center",className:u,children:(0,r.Y)(a.A,{size:16})}),(0,r.FD)(d.T,{className:u,preset:"detail-large",children:[y,"%"]})]})]})})}},84297:function(e,t,n){n.d(t,{a:()=>r});let r=e=>e.video_upload_id?"Watch":"podcast"===e.type?"Listen":"Read"},42114:function(e,t,n){n.d(t,{i:()=>Y});var r=n(4006),i=n(32485),l=n.n(i),a=n(17402),o=n(41873),s=n(84605),d=n(29797),c=n(60005),u=n(66714),p=n(68349),h=n(68410),m=n(22602),g=n(56007),f=n(13348),v=n(39318),b=n(49807);let y={editVideoEmbedWrap:"editVideoEmbedWrap-UANbdz",imageGallery:"imageGallery-W5xlEs",editVideoEmbed:"editVideoEmbed-nRUXQD",videoPlaceholder:"videoPlaceholder-F7Lub5",videoScrollTarget:"videoScrollTarget-SzB20Y",video:"video-P2qgwZ",videoPlayer:"videoPlayer-vlcedM",videoEmbed:"videoEmbed-_FycLU",videoPlaceholderSilhouette:"videoPlaceholderSilhouette-XopYyA"},Y=e=>{var t,n,i,Y,w;let{mediaUploadId:C,pub:_,post:E,isEditor:k=!1}=e,A=(0,a.useRef)(),{iString:D}=(0,s.GO)(),{isMobile:T}=(0,h.sM)(),{mediaUpload:S,loading:I,error:L,refetch:R}=(0,u.X)({mediaUploadId:C}),[x,O]=(0,a.useState)(!1),[P,N]=(0,a.useState)(!1),[F,M]=(0,a.useState)(!1),[B,U]=(0,a.useState)(!1),[z,j]=(0,a.useState)(null);(0,a.useEffect)(()=>()=>{"undefined"!=typeof window&&z&&window.clearTimeout(z)},[z]);let G=()=>{var e;R(),S&&(0,p.NN)((0,v.Pzx)(S)),(null==(e=A.current)?void 0:e.player)&&A.current.player.load(),O(!1)};return(0,a.useEffect)(()=>{var e;let t=e=>{e.preventDefault()};return"undefined"!=typeof window&&(null==(e=A.current)?void 0:e.player)&&x&&window.document.addEventListener("dragstart",t),()=>{var e;"undefined"!=typeof window&&(null==(e=A.current)?void 0:e.player)&&window.document.removeEventListener("dragstart",t)}},[x,A]),(0,r.Y)("div",{"data-component-name":"VideoEmbedPlayer",id:(0,b.eX$)({mediaUploadId:C}),className:y.videoScrollTarget,onMouseEnter:()=>{z&&(clearTimeout(z),j(null)),N(!0)},onMouseLeave:()=>{"undefined"!=typeof window&&j(window.setTimeout(()=>{N(!1)},0))},children:I?(0,r.Y)(m.O,{width:"100%",height:400}):L||!S?(0,r.Y)("div",{className:y.videoPlaceholder,children:D("Could not load video.")}):(0,r.Y)(r.FK,{children:(0,r.FD)("div",{className:l()(y.videoEmbed,k&&y.canEdit),children:[(0,r.Y)(o.A,{ref:A,mediaUpload:S,className:l()({[null!=(n=y.canEdit)?n:"undefined"]:k}),pub:_,noPreview:x,renderPlayButton:()=>(0,r.Y)(f.ro,{isPlaying:!1,size:T?56:72}),stopPropagation:!0,videoType:"embed",videoPlayerClassName:y.videoPlayer,videoClassName:y.video,surface:k?"editor":"post",entityKey:String(null!=(i=null==E?void 0:E.id)?i:S.post_id),entityType:"post",contentType:"embed"}),k&&(P||x||F||B)&&(0,r.FD)(g.tE,{children:[(0,r.Y)(c.A,{videoPlayer:null!=(Y=A.current)?Y:null,pub:null,postId:null!=(w=null==E?void 0:E.id)?w:null,mediaUpload:S,onOpenThumbnail:()=>O(!0),onOpenSettings:null,onThumbnailUpdated:G,onOpenFreePreview:null,onRemoveFreePreview:null,onRemoveMedia:null,active:!x,onSelected:e=>e?M(!0):M(!1),onDownloadStarted:()=>U(!0),onDownloadFinished:()=>U(!1)},C),x&&(null==(t=A.current)?void 0:t.player)&&(0,r.Y)(d.A,{videoPlayerRef:A.current.player,videoUpload:S,active:x,onCancel:G,onUpdate:G})]})]})})})}},773:function(e,t,n){n(4006),(0,n(17402).createContext)(void 0).displayName="CustomEmailTemplatesContext"},17744:function(e,t,n){n.d(t,{m:()=>s});var r,i,l=n(17402);let a="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.freeSignup)&&i,o=(0,l.createContext)(a);function s(){return(0,l.useContext)(o)}o.displayName="FreeSignupContext"},29797:function(e,t,n){n.d(t,{A:()=>Y});var r=n(4006),i=n(15734),l=n.n(i),a=n(79785),o=n(17402),s=n(70090),d=n(92057),c=n(84605),u=n(35369),p=n(76977),h=n(57820),m=n(63136),g=n(65842),f=n(92967);function v(){let e=(0,a._)(["time format must be 0:00.0"]);return v=function(){return e},e}function b(e){let{videoPlayerRef:t,onCancel:n,onSubmit:i,onSubmitLabel:l,initialTime:a}=e,[b,y]=(0,o.useState)(null!=a?a:0),[Y,w]=(0,o.useState)((0,f.kq)(b)),[C,_]=(0,o.useState)(),[E,k]=(0,o.useState)(!1),A=(0,f.i)(Y),{iString:D,iTemplate:T}=(0,c.GO)(),S=(0,s.A)(t);(0,d.A)(t),(0,o.useEffect)(()=>{t&&setTimeout(()=>{t.currentTime=null!=a?a:0},0)},[]),(0,o.useEffect)(()=>{(0,f.wG)(Y)!==b&&w((0,f.kq)(b,!0)),_(void 0)},[b]),(0,o.useEffect)(()=>{y(S)},[S]);let I=(0,o.useCallback)(e=>{(0,f.P6)(e)&&(w(e),((0,f.i)(e)?(y((0,f.wG)(e)),0):(_(T(v())),1))||!t||(t.currentTime=(0,f.wG)(e)))},[Y]),L=async()=>{k(!0),await i({time:b}),k(!1)};if(!t)return null;let R=!!C;return(0,r.FD)(p.I1,{border:"detail",className:"container-dENihb",flex:"grow",gap:16,paddingY:12,paddingX:12,radius:"sm",children:[(0,r.FD)(p.Ye,{gap:8,justifyContent:"space-between",alignItems:"center",children:[E?(0,r.Y)(p.Ye,{justifyContent:"center",alignItems:"center",children:(0,r.FD)(p.Ye,{justifyContent:"center",alignItems:"center",gap:8,children:[(0,r.Y)(h.y$,{}),(0,r.Y)(m.EY.B4,{weight:"medium",color:"secondary",translated:!0,children:"Saving..."})]})}):(0,r.Y)(p.Ye,{gap:16,alignItems:"center",children:(0,r.Y)(g.ks,{error:!A,value:Y,onChange:e=>I(e.currentTarget.value)})}),(0,r.FD)(p.Ye,{gap:8,children:[!E&&(0,r.Y)(u.$n,{priority:"secondary",onClick:n,children:D("Cancel")}),(0,r.Y)(u.$n,{priority:"primary",onClick:L,disabled:R,loading:E,children:l})]})]}),C&&(0,r.Y)(p.I1,{children:(0,r.Y)(p.Ye,{children:(0,r.Y)(m.EY.B4,{weight:"medium",color:"error",children:C})})})]})}var y=n(36372);let Y=e=>{var t;let{videoPlayerRef:n,videoUpload:i,active:a,onCancel:o,onUpdate:s}=e,d=(0,y.d)(),{iString:u}=(0,c.GO)(),p=async e=>{n&&setTimeout(()=>n.pause(),100);try{let t={thumbnail_time:e.time},n=await l().put("/api/v1/video/upload/".concat(i.id,"/thumbnail_time")).send(t);return s(n.body),d.popToast(()=>(0,r.Y)(y.y,{text:u("Thumbnail successfully updated")})),e}catch(e){console.error(e),d.popToast(()=>(0,r.Y)(y.y,{text:u("Error setting thumbnail")}))}},h=(null!=(t=i.thumbnail_id)?t:0)/100;return a?(0,r.Y)(b,{videoPlayerRef:n,onCancel:o,onSubmit:p,onSubmitLabel:u("Set thumbnail"),initialTime:h}):null}},69380:function(e,t,n){n.r(t),n.d(t,{ImageActions:()=>d});var r=n(4006),i=n(63324),l=n(76673),a=n(35369),o=n(76977);let s="icon-noB79L";function d(e){let{size:t}=e;return(0,r.FD)(o.fI,{gap:8,children:[(0,r.Y)(a.Nm,{resetCss:!0,className:"icon-container restack-image",children:(0,r.Y)(l.A,{size:t,className:s})}),(0,r.Y)(a.Nm,{resetCss:!0,className:"icon-container view-image",children:(0,r.Y)(i.A,{size:t,className:s})})]})}},60005:function(e,t,n){n.d(t,{A:()=>ee});var r=n(69277),i=n(70408),l=n(4006),a=n(32485),o=n.n(a),s=n(16858),d=n(56195),c=n(81143),u=n(59612),p=n(54718),h=n(48309),m=n(98188),g=n(32708),f=n(46110),v=n(17402),b=n(15734),y=n.n(b),Y=n(23623),w=n(78865),C=n(72880),_=n(41873),E=n(84605),k=n(85478),A=n(73484),D=n(84810),T=n(79994),S=n(90827),I=n(26289),L=n(86500),R=n(94729),x=n(74049),O=n(13022),P=n(12501),N=n(68349),F=n(47885),M=n(89490),B=n(35369),U=n(16074),z=n(76977),j=n(44552),G=n(88774),H=n(57820),V=n(63136),W=n(36372),q=n(95187),K=n(13348),X=n(39318),J=n(69706),Z=n(44366);let Q=(0,M.I4)({position:"relative",alignItems:"center"}),$=(0,M.I4)({display:"flex",overflowX:"auto",scrollBar:"hidden",cursor:"grab",gap:8}),ee=e=>{var t,n,a,b,ee;let{videoPlayer:et,pub:en,postId:er,mediaUpload:ei,audioExtractMediaUpload:el,onOpenThumbnail:ea,onThumbnailUpdated:eo,onOpenFreePreview:es,onRemoveFreePreview:ed,onOpenSettings:ec,onRemoveMedia:eu,active:ep,onSelected:eh,onDownloadStarted:em,onDownloadFinished:eg,onOpenVideoSettings:ef}=e,[ev,eb]=(0,v.useState)(),[ey,eY]=(0,v.useState)(!1),ew=(0,v.useRef)(null),{iString:eC}=(0,E.GO)(),{setIsPodcastDrawerOpen:e_,isPodcastDrawerOpen:eE,setInitialTab:ek}=(0,D.L)(),{setIsDrawerOpen:eA}=(0,A.gJ)(),{getConfigFor:eD}=(0,k.mJ)(),eT=(0,N.rr)(),eS=(0,W.d)(),eI=(0,x.k)(ei),eL=(0,I.sY)(et),{postMediaComposition:eR}=(0,T.X)(),[ex,eO]=(0,v.useState)(!1),[eP,eN]=(0,v.useState)(!1),[eF,eM]=(0,v.useState)(null),eB=(0,v.useRef)(null),eU=(0,j.h9)(eB),{state:ez,handleArrowClick:ej}=(0,q.jA)(eB),eG=!!ei.live_stream_id,{result:eH,isLoading:eV}=(0,P.st)({pathname:"/api/v1/video/upload/".concat(ei.id,"/thumbnail_selection_options"),auto:eG,deps:[ei.id]}),eW=null!=(n=null==eH?void 0:eH.options)?n:[],eq=eW.length>0;(0,v.useEffect)(()=>{eq&&"thumbnail"===ev&&(0,L.u4)(L.qY.LIVE_STREAM_AUTO_THUMBNAIL_OPTIONS_VIEWED,{media_upload_id:ei.id,live_stream_id:ei.live_stream_id,post_id:ei.post_id,option_count:eW.length})},[eq,ev,ei.id,ei.live_stream_id,ei.post_id,eW.length]),(0,v.useEffect)(()=>{null==eh||eh(ev)},[eh,ev]),(0,v.useEffect)(()=>{100===eI.downloadPercentage&&(null==eg||eg())},[eI.downloadPercentage,eg]);let eK=()=>{if(null==et?void 0:et.player){let e=et.player;e.pause(),e.currentTime=0;let t=e.src;e.src="",e.load(),e.src=t}},eX=async()=>{var e,t;if((0,L.u4)(L.qY.EDITOR_MEDIA_SET_THUMBNAIL_UPLOAD_IMAGE_CLICKED,{media_upload_id:ei.id,post_id:ei.post_id}),!(null==ew||null==(t=ew.current)||null==(e=t.files)?void 0:e.length)||!ew.current.files[0])return;let n=ew.current.files[0];eY(!0),await eJ(n),eY(!1)},eJ=async e=>{let t=Math.round(new Date().getTime()/1e3);try{await y().put("/api/v1/video/upload/".concat(ei.id,"/thumbnail_id")).send({thumbnail_id:t,custom_thumbnail:!0});let n=await y().post("/api/v1/video/upload/".concat(ei.id,"/thumbnail_upload_url")).query({fileType:e.type,fileSize:e.size,thumbnail_id:t}),l=n.body.thumbnail_upload_url;await y().put(l).set("content-type",e.type).send(e),(0,N.NN)((0,X.H10)(n.body.mediaUpload)),eo((0,i._)((0,r._)({},n.body.mediaUpload),{updated_at:new Date})),eK()}catch(e){console.error(e);return}},eZ=async e=>{eN(!0);try{let t=await (0,R.x6)("/api/v1/video/upload/".concat(ei.id,"/thumbnail_selection"),{method:"PATCH",json:{thumbnail_selection_s3_key:e}});eo((0,i._)((0,r._)({},ei),{thumbnail_id:t.thumbnail_id,updated_at:new Date})),eK(),eS.popToast(()=>(0,l.Y)(W.y,{text:eC("Thumbnail updated")})),(0,L.u4)(L.qY.LIVE_STREAM_AUTO_THUMBNAIL_APPLIED,{media_upload_id:ei.id,live_stream_id:ei.live_stream_id,post_id:ei.post_id,thumbnail_id:t.thumbnail_id,thumbnail_s3_key:e})}catch(e){console.error(e),eS.popToast(()=>(0,l.Y)(W.y,{text:eC("Failed to update thumbnail")}))}finally{eN(!1),null==eh||eh(void 0),eM(null)}},eQ=(0,X.dJ9)(null!=(a=(0,X.H10)(ei))?a:"",720,{aspect:J.fo,crop:"fill",gravity:"auto"}),e$=async()=>{if(el){null==em||em(),eO(!0);try{await fetch("/api/v1/audio/upload/".concat(el.id,"/src?download=true")).then(async e=>{var t,n,r;let i=null==(r=e.headers.get("Content-Disposition"))||null==(n=r.split("filename="))||null==(t=n[1])?void 0:t.replace(/"/g,"");return{blob:await e.blob(),filename:i}}).then(e=>{let{blob:t,filename:n}=e,r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=n?decodeURIComponent(n):"audio.mp3",document.body.appendChild(i),i.click(),i.remove()})}catch(e){alert((0,N.uX)(e))}finally{eO(!1),null==eg||eg()}}},e0=!!(null==(t=ei.liveStream)?void 0:t.is_rtmp);return ep?(0,l.FD)(Y.a,{children:[(0,l.Y)("div",{className:Z.A.verticalMenu,children:(0,l.FD)(z.I1,{gap:8,alignItems:"end",children:[!ev&&ec&&(0,l.Y)(S.P,{label:eC("Clips"),children:(0,l.Y)(S.X,{onClick:()=>{e_({isOpen:!eE}),eE||(ek("clips"),null==ec||ec({tab:"clips"}))},children:(0,l.FD)(l.FK,{children:[(0,l.Y)(C.o,{src:(0,X.Pzx)(ei),maxWidth:40,radius:"full",imageProps:{height:40,smartCrop:!0},style:{border:"2px solid white"},className:Z.A.clipIcon}),(0,l.Y)(z.pT,{position:"absolute",children:(0,l.Y)(s.A,{size:16,stroke:"white"})})]})})},"".concat(ei.id,"_clips")),(!ev||"settings"===ev)&&ec&&(0,l.Y)(S.P,{label:eC("Open Settings"),children:(0,l.Y)(S.X,{onClick:()=>{eD("video_editor_full_screen")?eA({drawerId:"videoEditor",isOpen:!0}):(e_({isOpen:!eE}),eE||ec())},children:(0,l.Y)(d.A,{size:16})})},"".concat(ei.id,"_settings")),(!ev||"preview"===ev)&&es&&ed&&(0,l.Y)(S.P,{label:eC("Free preview"),children:ei.preview_duration?(0,l.Y)(G.W1,{onClose:()=>eb(void 0),onOpen:()=>eb("preview"),trigger:(0,l.Y)(S.X,{children:(0,l.Y)(c.A,{size:16})}),children:(0,l.FD)(z.I1,{gap:8,padding:8,justifyContent:"center",children:[(0,l.Y)(z.Ye,{className:Z.A.videoPlaceholder,justifyContent:"center",alignItems:"center",children:(0,l.FD)("div",{className:o()("video-editor-menu",Z.A.videoEditorMenu),children:[(0,l.Y)(_.A,{mediaUpload:ei,pub:en,autoPlay:!1,usePreview:!0,surface:"editor",contentType:"post",videoType:"post",entityKey:String(null!=er?er:null==ei?void 0:ei.post_id),entityType:"post",renderPlayButton:()=>(0,l.Y)(K.ro,{isPlaying:!1,size:eT?40:56})}),(0,l.Y)(F.Y,{duration:ei.preview_duration})]})}),(0,l.FD)(v.Fragment,{children:[(0,l.Y)(B.$n,{priority:"secondary",onClick:()=>{es(),eb(void 0)},children:eC("Edit preview")}),(0,l.Y)(B.$n,{priority:"destructive",disabled:!ei.preview_duration,onClick:()=>{ed(),eb(void 0)},children:eC("Remove preview")})]})]})}):(0,l.Y)(S.X,{onClick:es,children:(0,l.Y)(c.A,{size:16})})},"".concat(ei.id,"_preview")),(!ev||"thumbnail"===ev)&&(0,l.Y)(S.P,{label:eC("Edit thumbnail"),children:(0,l.Y)(G.W1,{placement:"bottom-end",onClose:()=>{eb(void 0),eM(null)},onOpen:()=>eb("thumbnail"),trigger:(0,l.Y)(S.X,{children:(0,l.Y)(u.A,{size:16})}),children:(0,l.FD)(z.I1,{gap:8,padding:8,justifyContent:"center",children:[(0,l.FD)(z.I1,{gap:8,children:[(0,l.Y)(M.az,{position:"relative",className:Z.A.thumbnailPreviewContainer,children:ey||eP?(0,l.Y)(z.Ye,{className:Z.A.loadingPlaceholder,justifyContent:"center",alignItems:"center",children:(0,l.Y)(H.y$,{})}):(0,l.Y)("img",{className:Z.A.thumbnailPicture,src:eF?eF.imginary_url:eQ})}),eq&&(0,l.Y)(B.$n,{priority:"primary",size:"md",disabled:!eF||eP,loading:eP,onClick:()=>{eF&&eZ(eF.s3_key)},className:Z.A.fullWidthButton,children:eC("Apply")})]}),eq&&(0,l.Y)(O.XA,{configKey:"use_thumbnail_selection_workflow",value:!0,children:(0,l.FD)(z.I1,{gap:4,children:[(0,l.Y)(V.EY.B5,{color:"secondary",weight:"medium",children:eC("Auto-generated options")}),eV?(0,l.Y)(z.Ye,{justifyContent:"center",padding:8,children:(0,l.Y)(H.y$,{})}):(0,l.FD)(Q,{children:[(0,l.Y)($,(0,i._)((0,r._)({ref:eB},eU.props),{className:Z.A.thumbnailOptionsCarousel,children:eW.map(e=>{let t=(null==eF?void 0:eF.s3_key)===e.s3_key;return(0,l.Y)(M.az,{as:"button",type:"button",radius:"sm",overflow:"hidden",border:t?"accent":"detail",cursor:"pointer",onClick:()=>{eM(e),(0,L.u4)(L.qY.LIVE_STREAM_AUTO_THUMBNAIL_PREVIEWED,{media_upload_id:ei.id,live_stream_id:ei.live_stream_id,post_id:ei.post_id,thumbnail_s3_key:e.s3_key})},className:o()(Z.A.thumbnailOptionItem,t&&Z.A.thumbnailOptionItemSelected),children:(0,l.Y)("img",{src:e.imginary_url,alt:"",className:Z.A.thumbnailOptionImage})},e.s3_key)})})),(0,l.Y)(w.mA,{direction:"left",visible:ez.showLeft,onClick:ej(-1)}),(0,l.Y)(w.mA,{direction:"right",visible:ez.showRight,onClick:ej(1)})]})]})}),(0,l.FD)(z.I1,{gap:8,children:[(0,l.FD)(B.$n,{priority:"secondary",disabled:ey||eP,children:[eC("Upload image"),(0,l.Y)("input",{type:"file",accept:"image/*",className:Z.A.customThumbnailInput,onChange:()=>eX(),ref:ew})]}),(0,l.Y)(B.$n,{priority:"secondary",disabled:ey||eP,onClick:()=>{(0,L.u4)(L.qY.EDITOR_MEDIA_SET_THUMBNAIL_FROM_TIMELINE_CLICKED,{media_upload_id:ei.id,post_id:ei.post_id}),ea(),eb(void 0)},children:eC("Select from timeline")})]})]})})},"".concat(ei.id,"_thumbnail")),(0,l.Y)(S.P,{label:eC("More"),children:(0,l.FD)(G.W1,{placement:"bottom-end",onOpen:()=>eb("more"),onClose:()=>eb(void 0),trigger:(0,l.Y)(S.X,{disabled:eI.downloadPercentage>0||ex,children:eI.downloadPercentage>0||ex?(0,l.FD)(z.pT,{position:"relative",justifyContent:"center",alignItems:"center",children:[eI.downloadPercentage>0?(0,l.Y)(z.pT,{position:"absolute",justifyContent:"center",alignItems:"center",children:(0,l.FD)(V.EY.Digit,{color:"white",children:[eI.downloadPercentage.toFixed(0),"%"]})}):null,(0,l.Y)(z.pT,{position:"absolute",justifyContent:"center",alignItems:"center",children:(0,l.Y)(H.y$,{size:32})})]}):(0,l.Y)(p.A,{size:16})}),children:[(0,l.Y)(G.Dr,{leading:(0,l.Y)(h.A,{}),onClick:()=>{eI.startDownload(),null==em||em()},children:eC("Download video")}),el&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(h.A,{}),onClick:e$,children:eC("Download audio")}),(0,l.Y)(O.XA,{configKey:"use_livestream_post_media_composition",value:!0,children:eR&&ef&&!e0&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(m.A,{size:16}),onClick:()=>{null==ef||ef()},children:eC("Edit video")})}),eR&&ef&&(0,l.Y)(U.c,{paddingY:4}),eu&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(g.A,{}),priority:"destructive",onClick:()=>{(0,L.u4)(L.qY.EDITOR_MEDIA_REMOVE_CLICKED,{media_upload_id:ei.id,post_id:ei.post_id}),eu()},children:eC("Delete video")})]})},"".concat(ei.id,"_more"))]})}),!eL&&(0,l.Y)(F.Y,{duration:null!=(b=ei.duration)?b:0,icon:ei.preview_duration?(0,l.Y)(c.A,{stroke:"white",size:12}):null,previewDuration:null!=(ee=ei.preview_duration)?ee:null},"".concat(ei.id,"_duration")),(0,l.Y)(O.XA,{configKey:"use_livestream_post_media_composition",value:!0,children:eR&&ef&&!e0&&(0,l.Y)(z.pT,{position:"absolute",style:{left:16,top:16},children:(0,l.Y)(B.$n,{size:"sm",priority:"secondary",leading:(0,l.Y)(f.A,{size:16}),onClick:()=>{null==ef||ef()},children:eC("Edit video effects")})})})]},"".concat(ei.id,"_container")):null}},77003:function(e,t,n){n.d(t,{i:()=>g});var r=n(4006),i=n(31583),l=n(33727),a=n(57820);let o="container-SyNQnp";function s(){return(0,r.Y)(l.Z,{height:200,elevated:!1,alignItems:"center",justifyContent:"center",shadow:"none",sizing:"border-box",className:o,children:(0,r.Y)(a.y$,{})})}var d=n(76977),c=n(22602);function u(){return(0,r.FD)(l.Z,{gap:12,padding:16,shadow:"none",elevated:!1,className:o,children:[(0,r.FD)(d.fI,{gap:12,alignItems:"center",children:[(0,r.Y)(c.O,{width:40,height:40,radius:"full"}),(0,r.FD)(d.VP,{gap:8,flex:"grow",children:[(0,r.Y)(c.O,{width:120,height:12}),(0,r.Y)(c.O,{width:80,height:12})]})]}),(0,r.Y)(c.O,{width:"100%"}),(0,r.Y)(c.O,{width:"90%"}),(0,r.Y)(c.O,{width:"60%"}),(0,r.Y)(d.VP,{paddingY:4,children:(0,r.Y)(c.O,{width:"100%",height:1})}),(0,r.FD)(d.fI,{gap:12,alignItems:"center",children:[(0,r.Y)(c.O,{width:"10%",height:12}),(0,r.Y)(c.O,{width:"10%",height:12})]})]})}var p=n(42985),h=n(17768),m=n(13625);function g(e){let{node:t}=e,{url:n}=t.attrs;return n&&((0,m.hq)(n)||(0,h.Ys)(n)||(0,p.XB)(n))?(0,r.Y)(i.VR,{"data-drag-handle":"",children:(0,r.Y)(u,{})}):(0,r.Y)(i.VR,{"data-drag-handle":"",children:(0,r.Y)(s,{})})}},4364:function(e,t,n){n.d(t,{A:()=>p});var r=n(4006),i=n(26469),l=n(62095),a=n(17402),o=n(9472),s=n(18742);let d=new i.hs("substack-placeholder");class c extends i.k_{add(e,t,n){t=t||e.state.selection.from,n=n||s.rd;let r={},i=e.state.tr;return i.setMeta(u,{add:{id:r,pos:t,url:n}}),e.dispatch(i),r}addFile(e,t,n){let{name:r,type:i}=n;t=t||e.state.selection.from;let l={},a=e.state.tr;return a.setMeta(u,{addFile:{id:l,pos:t,name:r,type:i}}),e.dispatch(a),l}remove(e,t){let n=u.getState(e.state).find(null,null,e=>e.id==t);if(n.length){let r=n[0].from,i=e.state.tr;return i.setMeta(u,{remove:{id:t}}),e.dispatch(i),r}return null}replace(e,t,n){let r=this.remove(e,t);return null!==r&&(e.dispatch(e.state.tr.insert(r-1,n)),!0)}}let u=new c({state:{init:()=>l.zF.empty,apply(e,t){t=t.map(e.mapping,e.doc);let n=e.getMeta(d);if(n&&n.add){let r=document.createElement("a");r.className="image-link placeholder",r.href="javascript:void(0)";let i=document.createElement("img");i.src=n.add.url,r.appendChild(i),r.ondrop=r.ondragstart=r.onmousedown=()=>!1;let a=l.NZ.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[a])}else if(n&&n.addFile){let{name:i,type:s}=n.addFile,d=document.createElement("div");(0,a.render)((0,r.Y)(o.g,{filename:i,filetype:s}),d);let c=l.NZ.widget(n.addFile.pos,d,{id:n.addFile.id});t=t.add(e.doc,[c])}else n&&n.remove&&(t=t.remove(t.find(void 0,void 0,e=>e.id==n.remove.id)));return t}},key:d,props:{decorations(e){return this.getState(e)}}}),p=u},6611:function(e,t,n){n.d(t,{Kj:()=>d,Kx:()=>l});let r=e=>{var t;let n=document.createElement("div");return n.innerHTML=e,{dom:null!=(t=n.querySelector("svg"))?t:document.createElement("div")}},i=(e,t)=>{if(!("dom"in e)||!e.dom)return{dom:document.createElement("div")};let n=document.createElement("div");n.className="dropdown-item-container";let r=document.createElement("span");r.innerText=t;let i=document.createElement("div");return i.className="dropdown-item-svg",i.appendChild(e.dom),n.appendChild(i),n.appendChild(r),{dom:n}};r('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M7.33334 4L3.33334 8L7.33334 12" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M11.3333 19H15.8182C17.2809 19 18.6837 18.4205 19.718 17.3891C20.7523 16.3576 21.3333 14.9587 21.3333 13.5C21.3333 12.0413 20.7523 10.6424 19.718 9.61091C18.6837 8.57946 17.2809 8 15.8182 8H4.33334" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.3334 4L21.3334 8L17.3334 12" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13.3334 19H8.84853C7.38582 19 5.98302 18.4205 4.94873 17.3891C3.91443 16.3576 3.33337 14.9587 3.33337 13.5C3.33337 12.0413 3.91443 10.6424 4.94873 9.61091C5.98302 8.57946 7.38582 8 8.84853 8H20.3334" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.80005 5.60059H13.2C14.0487 5.60059 14.8627 5.93773 15.4628 6.53784C16.0629 7.13796 16.4 7.95189 16.4 8.80059C16.4 9.64928 16.0629 10.4632 15.4628 11.0633C14.8627 11.6634 14.0487 12.0006 13.2 12.0006H6.80005V5.60059Z" strokeWidth="3" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M6.80005 12H14C14.8487 12 15.6627 12.3371 16.2628 12.9373C16.8629 13.5374 17.2 14.3513 17.2 15.2C17.2 16.0487 16.8629 16.8626 16.2628 17.4627C15.6627 18.0629 14.8487 18.4 14 18.4H6.80005V12Z" strokeWidth="3" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M17.2671 6.10059H10.0671" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13.2659 18.8994H6.06592" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M14.0666 6.10059L9.2666 18.9006" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path fill="none" d="M14.866 5.60059H9.266C8.88195 5.60038 8.50345 5.69236 8.1623 5.86878C7.82116 6.04519 7.52734 6.30091 7.30552 6.61443C7.0837 6.92796 6.94036 7.29014 6.88755 7.67055C6.83473 8.05096 6.87399 8.43849 7.00201 8.80059" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M13.2667 12C14.1154 12 14.9293 12.3371 15.5294 12.9373C16.1296 13.5374 16.4667 14.3513 16.4667 15.2C16.4667 16.0487 16.1296 16.8626 15.5294 17.4627C14.9293 18.0629 14.1154 18.4 13.2667 18.4H6.8667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M4.1665 12L19.1665 12" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.6667 16.5L21.6667 12.5L17.6667 8.5" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 8.5L1.66675 12.5L5.66675 16.5" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M14.1667 4.5L9.16675 20.5" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n');let l=r('\n<svg class="link-item" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<g clip-path="url(#clip1)">\n<path d="M10.0671 13.3006C10.4107 13.7599 10.849 14.1399 11.3524 14.4149C11.8557 14.6899 12.4123 14.8535 12.9845 14.8944C13.5566 14.9354 14.1308 14.8529 14.6682 14.6524C15.2056 14.4519 15.6936 14.1382 16.0991 13.7326L18.4991 11.3326C19.2278 10.5781 19.6309 9.56774 19.6218 8.51895C19.6127 7.47017 19.192 6.46692 18.4504 5.72528C17.7088 4.98365 16.7055 4.56298 15.6567 4.55386C14.608 4.54475 13.5975 4.94793 12.8431 5.67656L11.4671 7.04456" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13.2677 11.7008C12.9242 11.2415 12.4859 10.8614 11.9825 10.5864C11.4791 10.3114 10.9225 10.1479 10.3504 10.1069C9.7783 10.0659 9.20407 10.1485 8.66666 10.3489C8.12925 10.5494 7.64125 10.8631 7.23574 11.2688L4.83574 13.6688C4.10711 14.4232 3.70393 15.4336 3.71304 16.4824C3.72216 17.5312 4.14283 18.5344 4.88446 19.276C5.6261 20.0177 6.62935 20.4383 7.67813 20.4475C8.72692 20.4566 9.73733 20.0534 10.4917 19.3248L11.8597 17.9568" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</g>\n');r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M7.66675 6.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 12.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 18.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 6.5H2.67633" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 12.5H2.67633" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 18.5H2.67633" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none">\n<path d="M9.66675 6.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 12.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 18.5H20.6667" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 6.5H4.66675V10.5" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 10.5H5.66675" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 18.4999H3.66675C3.66675 17.4999 5.66675 16.4999 5.66675 15.4999C5.66675 14.4999 4.66675 13.9999 3.66675 14.4999" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n');let a=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M5 15.5L5 18.5C5 19.0304 5.21071 19.5391 5.58579 19.9142C5.96086 20.2893 6.46957 20.5 7 20.5L18 20.5C18.5304 20.5 19.0391 20.2893 19.4142 19.9142C19.7893 19.5391 20 19.0304 20 18.5L20 7.5C20 6.96957 19.7893 6.46086 19.4142 6.08579C19.0391 5.71071 18.5304 5.5 18 5.5L16 5.5" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M9.5 10.5L12.5 7.5L9.5 4.5" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M5.5 4.5L2.5 7.5L5.5 10.5" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),o=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.7143 15C14.7143 14.4696 14.9401 13.9609 15.3419 13.5858C15.7438 13.2107 16.2888 13 16.8571 13C17.4255 13 17.9705 13.2107 18.3724 13.5858C18.7742 13.9609 19 14.4696 19 15C19 15.5304 18.7742 16.0391 18.3724 16.4142C17.9705 16.7893 17.4255 17 16.8571 17C16.2888 17 15.7438 16.7893 15.3419 16.4142C14.9401 16.0391 14.7143 15.5304 14.7143 15ZM14.7143 15L16.8571 7M5.5 15C5.5 14.4696 5.72577 13.9609 6.12763 13.5858C6.52949 13.2107 7.07454 13 7.64286 13C8.21118 13 8.75622 13.2107 9.15809 13.5858C9.55995 13.9609 9.78571 14.4696 9.78571 15C9.78571 15.5304 9.55995 16.0391 9.15809 16.4142C8.75622 16.7893 8.21118 17 7.64286 17C7.07454 17 6.52949 16.7893 6.12763 16.4142C5.72577 16.0391 5.5 15.5304 5.5 15ZM5.5 15L7.64286 7" strokeLinecap="round" stroke-linejoin="round"/>\n<circle cx="8" cy="15" r="1"strokeLinecap="round" stroke-linejoin="round"/>\n<circle cx="17" cy="15" r="1"strokeLinecap="round" stroke-linejoin="round"/>\n<circle cx="7.5" cy="15.5" r="0.5"strokeLinecap="round" stroke-linejoin="round"/>\n<circle cx="16.5" cy="15.5" r="0.5"strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n');r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.66699 8L2.66699 12L6.66699 16" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M22 6H11" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M22 12L16 12" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M22 18H11" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M2.66699 8L6.66699 12L2.66699 16" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M21 12L15 12" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M21 6H10" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M21 18H10" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n');let s=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" clip-path="url(#clip0_6402:84637)">\n<path d="M5.74356 7.80138L1.55483 19.3174" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M5.74212 7.80082L9.92942 19.3177" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13.0703 7.80493V19.3212" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M8.35986 16.1787H3.12519" strokeLinecap="round" stroke-linejoin="round"/>\n<ellipse cx="15.9501" cy="15.6565" rx="2.87907" ry="3.66427" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L21.4465 10.9463" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L19.3528 6.23506" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),d=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M8.5 10C9.32843 10 10 9.32843 10 8.5C10 7.67157 9.32843 7 8.5 7C7.67157 7 7 7.67157 7 8.5C7 9.32843 7.67157 10 8.5 10Z" strokeLinecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M21 15L16 10L5 21" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),c=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 13H21" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),u=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 1V23" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H12" fill="none" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M6 19H14.5C15.4283 19 16.3185 18.6313 16.9749 17.9749C17.6313 17.3185 18 16.4283 18 15.5C18 14.5717 17.6313 13.6815 16.9749 13.0251C16.3185 12.3687 15.4283 12 14.5 12H12" fill="none" strokeLinecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),p=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18 9L18 6C18 5.46957 17.7893 4.96086 17.4142 4.58579C17.0391 4.21072 16.5304 4 16 4L5 4C4.46957 4 3.96086 4.21071 3.58579 4.58579C3.21071 4.96086 3 5.46957 3 6L3 13C3 13.5304 3.21071 14.0391 3.58578 14.4142C3.96086 14.7893 4.46957 15 5 15L7 15" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M9.03906 9.35059L14.0391 21.3506L15.8131 16.1246L21.0391 14.3506L9.03906 9.35059Z" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M16.1104 16.4214L20.3534 20.6644" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n'),h=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19 12L12 5L15 2L22 9L19 12Z" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13 6L5.5 7.5L2 22L16.5 18.5L18 11L13 6Z"strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M2 22L9.586 14.414" strokeLinecap="round" stroke-linejoin="round"/>\n<path d="M13 13C13 11.8954 12.1046 11 11 11C9.89543 11 9 11.8954 9 13C9 14.1046 9.89543 15 11 15C12.1046 15 13 14.1046 13 13Z" strokeLinecap="round" stroke-linejoin="round"/>\n</svg>\n');i(p,"Buttons..."),i(a,"Code block"),i(s,"Footnote"),i(c,"Divider"),i(u,"Paywall"),i(h,"Poetry block"),i(o,"Pullquote")},87166:function(e,t,n){n.d(t,{S:()=>T});var r=n(69277),i=n(70408),l=n(79785),a=n(26469),o=n(83673),s=n.n(o),d=n(38221),c=n.n(d),u=n(4364),p=n(6611),h=n(32526),m=n(9129),g=n(86500),f=n(68349),v=n(21577),b=n(97966),y=n(70084),Y=n(30131),w=n(33333);function C(){let e=(0,l._)(["Link ","K"]);return C=function(){return e},e}function _(){let e=(0,l._)(["Thereâ€™s a fancier way to share Substack links with your readers:"]);return _=function(){return e},e}function E(){let e=(0,l._)(["Convert your link into an embed"]);return E=function(){return e},e}let k=new Set,A=c()((e,t,n)=>{let r=t.trim();(0,y.JA)(r).then(i=>{i&&(k.add(r),t===e.target.value&&n.classList.add("has-substack-link"))})},250,{maxWait:1e3});function D(e,t){if("target"in e&&e.target&&"className"in e.target&&"url-input"===e.target.className&&"value"in e.target){let{value:n}=e.target,r=n.trim();if(k.has(r)||(0,b.iO)(r)||(0,v.lL)(r))return void t.classList.add("has-substack-link");if((0,Y.zN)(r))return void t.classList.add("has-opensea-link");(0,y.oI)(r)&&A(e,n,t),t.classList.remove("has-substack-link"),t.classList.remove("has-opensea-link")}}function T(e){let{scrollParent:t,publication:n,language:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{iString:o,iTemplate:d}=I18N.i(null!=l?l:"en"),c=d(C(),(0,f.Q2)());return new h.Lz({class:"mark-menu-item",title:c,icon:p.Kx,active(t){let n=[];return t.schema.nodes.image2?n.push(t.schema.nodes.image2):console.warn("image2 node type not found in schema"),t.schema.nodes.image3?n.push(t.schema.nodes.image3):console.warn("image3 node type not found in schema"),!!((0,w.f$)(t,n)?(0,w.Ao)(t):(0,w.OB)(t,e))||(0,h.yb)(t,e)},enable:()=>!0,run(p,C,A){let T,S,I,L,R=(0,w.OB)(p,e);R?(T=R.pos,S=R,I=(0,w.JK)(p,R.pos.from,R.pos.to,{allowedMarks:[e]}),L=R.node.textContent):(T=p.selection,S=(0,w.jp)(p,e),I=(0,w.zl)(p,{allowedMarks:[e]}),L=p.doc.textBetween(p.selection.from,p.selection.to));let x=(0,w.f$)(p,s()([p.schema.nodes.captionedImage,p.schema.nodes.image2,p.schema.nodes.image3,p.schema.nodes.caption]).filter(Boolean)),O=x?(0,w.Ao)(p):null;I=I&&!x;let P=A.dom.parentNode,N={className:"create-link-menu",submitText:o("Link"),parent:c,title:o("Create a link"),fields:{},root:P,scrollParent:t,position:(e,t)=>(0,w.Q7)(A,T,e,t),onInput:D,language:l};I&&N.fields&&(N.fields.text=new h.A_({label:o("Enter textâ€¦"),className:"text-input",value:L,required:!0})),N.fields&&(N.fields.href=new h.PN(S,O,l)),N.onSubmit=t=>{let n=p.tr;if(x)(0,w.fD)(p,n,t.href);else if(p.selection.empty&&!R){let r=p.selection.from,i=r+t.text.length;n.insertText(t.text),n.addMark(r,i,e.create(t)),n.setSelection(a.U3.create(n.doc,r,i))}else t.text&&t.text!==L?(n.insertText(t.text,T.from),n.setSelection(a.U3.create(n.doc,T.from,T.from+t.text.length)),n.deleteRange(T.from+t.text.length,T.to+t.text.length),n.addMark(T.from,T.from+t.text.length,e.create(t))):n.addMark(T.from,T.to,e.create(t));if(C)return A.dispatch(n),!0},N.onClose=()=>{A.focus()};let F=async e=>{let t;e.preventDefault();let l=document.querySelector(".create-link-menu .url-input");if(!l)return void console.warn("could not find input for creating link menu selecting for ['.create-link-menu .url-input']");let a=l.value.trim();(0,h.dG)(N);let s=u.A.add(A,T.pos,m.e4);try{if((0,g.u4)(g.qY.EMBED_URL_ATTEMPTED,{url:a,source:"link-menu"}),(0,Y.zN)(a))t=await (0,Y.yJ)(a,{customSchema:A.state.schema});else if(k.has(a))t=await (0,y.t2)(a);else if((0,v.lL)(a)&&A.state.schema.nodes.digestPostEmbed)try{let e=await (0,v.TG)(a);t=A.state.schema.nodes.digestPostEmbed.create((0,i._)((0,r._)({},e),{isEditorNode:!0,nodeId:(0,f.QT)()}))}catch(e){console.error(e),alert(o("Failed to find post. Please check the link and try again."))}else t=await (0,b.Xs)(a,{customSchema:A.state.schema,language:null==n?void 0:n.language});if((0,g.u4)(g.qY.EMBED_URL_SUCCEEDED,{url:a,source:"link-menu"}),t)u.A.replace(A,s,t);else throw u.A.remove(A,s),Error("No embed found")}catch(e){(0,g.u4)(g.qY.EMBED_URL_FAILED,{url:a,source:"link-menu"}),alert(o("Embed failed. Please check the url and try again."))}},M=document.createElement("div");M.className="create-link-menu-footer";let B=new DocumentFragment;B.append(document.createTextNode(d(_())));let U=document.createElement("a");U.innerText=d(E()),U.href="#",U.addEventListener("click",F),B.append(U),M.append(B),N.footer=M;let z=document.createElement("div");z.className="opensea-embed-footer";let j=new DocumentFragment,G=document.createElement("b");G.textContent="Tip: ",j.append(G),j.append(document.createTextNode("You can also "));let H=document.createElement("a");H.innerText="embed your OpenSea NFT",H.href="#",H.addEventListener("click",F),j.append(H),j.append(document.createTextNode(" to give your readers a visual preview.")),z.append(j),N.openseaEmbedFooter=z,(0,h.Rh)(N)}},"link")}},29896:function(e,t,n){n.d(t,{T:()=>r});function r(e,t){var n;let r=[],i=null!=(n=null==t?void 0:t.max_line_width)?n:84,l=new Set(".!?,;:");return e.forEach(e=>{let t=!0,n=e.start,a=e.end,o=e.words,s=[],d=0;if(e.text.length<=1.25*i)return void r.push(e);let c=()=>{var e,i,l,a;let o=t?n:null!=(l=null==(e=s[0])?void 0:e.start)?l:n,d=null!=(a=null==(i=s[s.length-1])?void 0:i.end)?a:o+.1,c=s.map(e=>e.word.trim()).join(" ");r.push({start:o,end:d,text:c,words:s})};if(o.forEach(e=>{var n;let r=e.word,a=r.length;if((null!=(n=r[r.length-1])?n:"")in l){s.push(e),c(),t=!1,s=[],d=0;return}d+a>i?(s.length&&(c(),t=!1),s=[e],d=a):(s.push(e),d+=a)}),s.length){var u,p;r.push({start:null!=(p=null==(u=s[0])?void 0:u.start)?p:n,end:a,text:s.map(e=>e.word).join(" ").trim(),words:s})}}),r}},57051:function(e,t,n){let r,i;n(4006),n(56542),(0,n(17402).createContext)(void 0).displayName="PostContextForEmail",n(25006),n(32485),n(16291),n(39318),n(85688),n(10956),n(6049),n(49807);var l=n(83787);let a=new Set(["if","else","endif"]),o=new Set([]);n(4016),n(56262),n(82776),r=new l.HX({strictFilters:!0,strictVariables:!1,trimTagLeft:!1,trimTagRight:!1,trimOutputLeft:!1,trimOutputRight:!1,root:[],layouts:[],partials:[]}),i={parse(e){throw Error('Tag "'.concat(e.name,'" is disabled for security. Only conditional logic is allowed.'))},render(){throw Error("Tag rendering is disabled for security.")}},Object.keys(r.tags).forEach(e=>{a.has(e)||r.registerTag(e,i)}),Object.keys(r.filters).forEach(e=>{o.has(e)||r.registerFilter(e,function(){throw Error('Filter "'.concat(e,'" is disabled for security. Only safe output filters are allowed.'))})})},35465:function(e,t,n){var r=n(69277),i=n(32641),l=n(4006),a=n(45994),o=n(32485),s=n.n(o),d=n(95977),c=n(84605),u=n(8609);n(6049),n(86500);n(63136),n(98111),n(39318),n(82776),n(57324)},56305:function(e,t,n){n(4006),n(56542),n(50172),n(45994),n(32485),n(773),n(25006),n(8609),n(57051),n(4016),n(82776),n(84685),n(35465)},89607:function(e,t,n){n.d(t,{T:()=>g,w:()=>f});var r=n(69277),i=n(70408),l=n(4006),a=n(78659),o=n.n(a),s=n(83673),d=n.n(s),c=n(25714),u=n(99662),p=n(63136),h=n(11993),m=n(44307);function g(e){let{content:t,isHidden:n,hiddenText:r,attachedLinks:i}=e;return t?(0,l.FD)(p.EY.B4,{className:m.A.feedCommentBodyInner,children:[n&&r,t&&(0,l.Y)(f,{content:t,attachedLinks:i})]}):null}function f(e){var t,n,a,s,m,g,v;let{content:b,onLinkClicked:y,attachedLinks:Y,isFirstElement:w=!0,isLastElement:C=!1}=e;if("text"===b.type){let e=null==(t=b.marks)?void 0:t.find(e=>"link"===e.type),o=null==e||null==(n=e.attrs)?void 0:n.href,s=b.text;if(o){let e=(0,h.H)(o),t=w||C?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t.length)return e;for(let n of t){let t=(0,h.H)(n);if(e.includes(t))return null}return e}(e,Y):e;s=null!=t?t:void 0}if(!s)return null;let d=(0,l.Y)(l.FK,{children:s});if(b.marks)for(let e of b.marks)"link"===e.type?d=(0,l.Y)(p.Yq,(0,i._)((0,r._)({decoration:"hover-underline",style:{color:"var(--color-link-fg)"}},e.attrs),{target:(0,u.y)()?"_blank":null==(a=e.attrs)?void 0:a.target,onClick:()=>y&&y(),children:d})):"bold"===e.type?d=(0,l.Y)("strong",{children:d}):"italic"===e.type?d=(0,l.Y)("em",{children:d}):"strike"===e.type?d=(0,l.Y)("s",{children:d}):"code"===e.type?d=(0,l.Y)("code",{children:d}):"mark"===e.type&&(d=(0,l.Y)("mark",{className:"note-highlight",children:d}));return d}if("substack_mention"===b.type){let{id:e,label:t,mentionType:n,url:r}=null!=(s=b.attrs)?s:{};return e&&t?(0,l.Y)(c.P,{id:e,label:t,type:n,url:r}):null}let _=d()(null!=(m=b.content)?m:[]).map((e,t,n)=>(0,l.Y)(f,{content:e,onLinkClicked:y,attachedLinks:Y,isFirstElement:0===t,isLastElement:t===n.length-1}));if("doc"===b.type)return(0,l.Y)("div",{className:"ProseMirror FeedProseMirror",children:_});if("paragraph"===b.type)return(0,l.Y)("p",{children:_});if("heading"===b.type){let e="h".concat(o()((null!=(v=null==(g=b.attrs)?void 0:g.level)?v:1)+1,2,6));return(0,l.Y)(e,{children:_})}return"blockquote"===b.type?(0,l.Y)("blockquote",{children:_}):"codeBlock"===b.type?(0,l.Y)("pre",{children:(0,l.Y)("code",{children:_})}):"orderedList"===b.type?(0,l.Y)("ol",{children:_}):"bulletList"===b.type?(0,l.Y)("ul",{children:_}):"listItem"===b.type?(0,l.Y)("li",{children:_}):null}},47970:function(e,t,n){n.d(t,{H:()=>T});var r=n(4006),i=n(72170),l=n(17402),a=n(43427),o=n(58299),s=n(85796),d=n(13950),c=n(46271),u=n(42686),p=n(89607),h=n(95282),m=n(67024),g=n(27332),f=n(58292),v=n(60897),b=n(94729),y=n(12501),Y=n(82772),w=n(76977),C=n(22602),_=n(63136),E=n(504),k=n(49095),A=n(49807);let D="note-Biuyq7";function T(e){let{commentId:t}=e,{isLoading:n,error:i,result:l}=(0,y.st)({pathname:"/api/v1/reader/comment/".concat(t),auto:!0,deps:[t]});return i instanceof b.fk?(0,r.Y)(r.FK,{children:i.getMessage()}):!l||n?(0,r.Y)(L,{}):(0,r.Y)(S,{feedItem:l.item})}function S(e){var t,n,m,b,y;let{feedItem:C}=e,{comment:T,parentComments:S}=C,{truncatedBodyJson:L,isTruncated:R}=(0,v.A)(T),x=S[S.length-1],O=null==(t=T.attachments)?void 0:t.find(e=>"image"!==e.type),P=null==(n=T.attachments)?void 0:n.filter(e=>"image"===e.type),N=(0,c.Jd)(),F=(0,l.useRef)(null);return(0,Y.S8)(F,()=>(0,E.Q$)(C,"post-embed",{extraEventProps:{isTruncated:R},isLoggedIn:!!N}),{threshold:.2}),(0,r.Y)(w.I1,{justifyContent:"center",alignItems:"center",paddingX:20,className:"container-g1JaM7",children:(0,r.Y)(d.DH,{children:(0,r.FD)(w.pT,{as:"a",target:"_blank",href:(0,A.Zgx)(T),gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},className:D,ref:F,children:[(0,r.Y)(w.pT,{flex:"auto",children:(0,r.Y)(f.bB,{user:T})}),(0,r.FD)(w.I1,{minWidth:0,gap:8,flex:"grow",children:[(0,r.FD)(w.I1,{minWidth:0,flex:"grow",children:[(0,r.FD)(g.X6,{children:[(0,r.Y)(_.EY,{color:"primary",as:"span",weight:"semibold",children:T.name}),(0,r.Y)(k.UserStatusSymbols,{tier:T.user_bestseller_tier,size:"sm"}),(0,r.Y)(f.iE,{timestamp:T.date})]}),x&&(0,r.FD)(_.EY.B5,{color:"secondary",children:["Replying to ",x.name]}),(0,r.FD)(w.I1,{gap:12,flex:"grow",children:[(0,r.Y)(f.Wz,{children:L&&(0,r.Y)(p.w,{content:L,attachedLinks:(0,h.MT)(T)})}),(0,r.Y)(u.ti,{attachments:O?[O]:P||[],readOnly:!0,onAttachmentClick:function(){let{commentId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,E.Qb)(C,"post-embed","attachment",{extraEventProps:{commentId:e}})},item:C,utm_content:C.entity_key})]})]}),(0,r.FD)(w.pT,{justifyContent:"space-between",alignItems:"center",children:[(0,r.Y)(I,{icon:(0,r.Y)(a.A,{height:16,fill:"none",strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!=(m=T.reaction_count)?m:0}),(0,r.Y)(I,{icon:(0,r.Y)(s.A,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!=(b=T.children_count)?b:0}),(0,r.Y)(I,{icon:(0,r.Y)(o.A,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!=(y=T.restacks)?y:0}),(0,r.Y)(I,{icon:(0,r.Y)(i.A,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:0})]})]})]})})})}function I(e){let{icon:t,count:n}=e;return(0,r.FD)(w.pT,{gap:8,paddingTop:6,flex:"grow",alignItems:"center",children:[t,(0,r.Y)(_.EY.Digit,{color:"secondary",children:n>0&&(0,m.Z)(n)})]})}function L(){return(0,r.Y)(d.DH,{children:(0,r.Y)(w.I1,{justifyContent:"center",alignItems:"center",paddingX:20,style:{margin:"20px 0"},"data-component-name":"CommentViewPlaceholder",children:(0,r.FD)(w.pT,{gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},flex:"grow",className:D,children:[(0,r.Y)(C.O,{radius:"full",width:48,height:48}),(0,r.FD)(w.I1,{gap:12,flex:"grow",children:[(0,r.Y)(C.O,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.Y)(C.O,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.Y)(C.O,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.Y)(C.O,{height:16,width:"".concat(80*Math.random()+20,"%")})]})]})})})}},64632:function(e,t,n){n.d(t,{Np:()=>v,f9:()=>f,k_:()=>g});var r=n(79785),i=n(4006),l=n(93540),a=n(17402),o=n(23623),s=n(84605),d=n(66453),c=n(35369),u=n(76977),p=n(63136),h=n(39318);function m(){let e=(0,r._)(["This "," was automatically hidden by your content settings."]);return m=function(){return e},e}function g(e){let t=(0,d.a)(),[n,r]=(0,a.useState)(e&&!t);return{isHidden:n,onShow:()=>r(!1)}}function f(e){let{onShow:t,itemName:n,radius:r}=e,{iString:l,iTemplate:a}=(0,s.GO)(),d=a(m(),n||"item");return(0,i.Y)(v,{onShow:t,radius:r,children:(0,i.FD)(o.a,{children:[(0,i.FD)(u.I1,{gap:4,alignItems:"center",justifyContent:"center",children:[(0,i.Y)(p.EY.B4,{align:"center",color:"vibrance-primary",weight:"semibold",translated:!0,children:"May contain explicit content"}),(0,i.Y)(p.EY.B4,{align:"center",color:"vibrance-secondary",children:d})]}),(0,i.FD)(u.Ye,{gap:8,alignItems:"center",wrap:"wrap",justifyContent:"center",children:[(0,i.Y)(c.$n,{priority:"primary-mono",children:l("Show anyway")}),(0,i.Y)(c.$n,{priority:"secondary-outline",href:(0,h.tFi)({section:"privacy"}),newTab:!0,children:l("Adjust settings")})]})]})})}function v(e){let{onShow:t,children:n,radius:r}=e;return(0,i.FD)(u.I1,{justifyContent:"center",alignItems:"center",position:"absolute",inset:0,bg:"glass-inverted-thick",gap:16,padding:16,cursor:"pointer",onClick:e=>{e.preventDefault(),t()},radius:r,children:[(0,i.Y)(l.A,{size:24,stroke:"var(--color-utility-white)"}),n]})}},8103:function(e,t,n){n.d(t,{S:()=>_});var r=n(69277),i=n(70408),l=n(4006),a=n(32485),o=n.n(a),s=n(72880),d=n(84605),c=n(2675),u=n(27332),p=n(53594),h=n(89490),m=n(35369),g=n(76977),f=n(81203),v=n(63136),b=n(2548),y=n(39318),Y=n(49807),w=n(69706),C=n(95836);function _(e){var t;let{publication:n,readOnly:r,onClick:i}=e,a=null!=(t=n.logoPalette)?t:null;return(0,l.Y)(E,{readOnly:r,onClick:i,publication:n,palette:a,children:(0,l.FD)(g.VP,{children:[(0,l.Y)(k,{pub:n,palette:a,readOnly:r}),(0,l.Y)(D,{pub:n,readOnly:r,palette:a,onClick:i})]})})}let E=e=>{let{readOnly:t,onClick:n,publication:r,palette:i,children:a}=e,s=(0,c.Uo)(i);return(0,l.Y)(g.VP,{as:t?"div":"a",className:o()(C.A.attachment,t&&C.A.readOnly),position:"relative",bg:"secondary",radius:"md",target:"_blank",rel:"noopener noreferrer",minWidth:0,onClick:n,href:t?void 0:(0,y.fOI)(r),draggable:!1,showFocus:!0,animate:!0,style:s,children:a})};function k(e){var t;let{pub:n,palette:a,readOnly:o}=e,s=a?(0,r._)({},(0,p.Vu)({palette:a,defaultColor:"var(--color-dark-bg-primary)"})):void 0,d=a?"vibrance-primary":"primary",c=a?"vibrance-secondary":"secondary",u=function(e){var t;if(!(null==(t=e.contributors)?void 0:t.length))return null;let n=e.contributors.find(e=>e.owner);return!n||e.contributors.length>1?null:n}(n);return(0,l.FD)(g.VP,{gap:12,paddingX:16,paddingTop:32,paddingBottom:16,className:C.A.header,sizing:"border-box",position:"relative",alignItems:"center",style:(0,i._)((0,r._)({},s),{"--glow-color":(0,p.iL)(null==a||null==(t=a.Vibrant)?void 0:t.rgb,.5)}),overflow:"hidden",children:[(0,l.Y)(h.az,{className:C.A.logoContainer,radius:"sm",children:(0,l.Y)(f.Nq,{pub:n,size:80,outline:"detail",shadow:"lg"})}),(0,l.FD)(g.VP,{gap:4,className:C.A.pubDetails,alignItems:"center",children:[(0,l.Y)(v.EY.B2,{clamp:2,color:d,weight:"bold",align:"center",children:n.name}),u&&(o?(0,l.Y)(v.EY.B4,{color:c,align:"center",weight:"medium",children:u.name}):(0,l.Y)(b.IE,{href:(0,Y.gYq)(u),draggable:!1,children:(0,l.Y)(v.EY.B4,{color:c,align:"center",weight:"medium",children:u.name})})),n.hero_text&&(0,l.Y)(v.EY.B4,{clamp:2,align:"center",color:d,children:n.hero_text})]}),(0,l.Y)(A,{pub:n})]})}function A(e){var t;let{pub:n}=e;return(0,l.Y)(s.o,{imageProps:{aspect:w.d8,crop:"fill"},src:null!=(t=n.logo_url)?t:"",maxWidth:568,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1,className:C.A.bgImage})}function D(e){let{pub:t,readOnly:n,onClick:r,palette:i}=e,a=t.rankingDetailFreeSubscriberCount,o=(0,y.EWE)(t);return(0,l.FD)(g.pT,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",borderTop:"detail",children:[(0,l.Y)(v.EY.B4,{color:i?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,flex:"grow",weight:"medium",children:a||o}),!n&&(0,l.Y)(T,{pub:t,onClick:r,palette:i})]})}function T(e){let{pub:t,onClick:n,palette:r}=e,{iString:i}=(0,d.GO)(),{isSubscribed:a,handleClick:o}=(0,u.GZ)({publication:t});return t?(0,l.Y)(m.$n,{size:"sm",priority:a?"secondary-outline":"primary",disabled:a,className:C.A.button,style:r?{"--color-button-disabled-bg":"rgba(255, 255, 255, 0.1)","--color-button-disabled-fg":"var(--vibrance-secondary)"}:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation(),a||(o(e),null==n||n())},children:i(a?"Subscribed":"Subscribe")}):null}},22858:function(e,t,n){n.d(t,{L:()=>m,h:()=>h});var r=n(69277),i=n(70408),l=n(4006),a=n(15977),o=n(78649),s=n(10278),d=n(2675),c=n(17028),u=n(81929),p=n(41301);function h(e){let{parent:t,item:n,attachment:r,onClick:i,readOnly:a,isRestack:d,isPermalink:c,isDm:u,isShareAsset:h}=e,{post:f,publication:v,postImageSelection:b}=r;return(0,l.Y)(o.Q,{children:(0,l.Y)(s.xn,{parent:t,readOnly:a,assets:[g(b,f)],feedItem:n,onClick:i,isRestack:d,isPermalink:c,isDm:u,isShareAsset:h,restackedPost:f,restackedPublication:v,children:(0,l.Y)(m,{post:f,publication:v,readOnly:a,onClick:i,className:p.A.tag})})})}function m(e){let{post:t,publication:n,readOnly:o,onClick:s,className:p}=e,h=(0,d.vZ)({post:t,publication:n,readOnly:o,onClick:s});return(0,l.Y)(u.Jq,{priority:"primary",onClick:o?void 0:h,leading:(0,l.Y)(c.ov,{width:16,height:16,children:(0,l.Y)(a.A,(0,i._)((0,r._)({},u.Oi),{size:11}))}),title:t.title,className:p,children:t.title})}let g=(e,t)=>{var n;return{id:e.id,src:e.img_src,explicit:null!=(n=t.explicit)&&n,width:e.img_width||e.width,height:e.img_height||e.height}}},75840:function(e,t,n){n.d(t,{P:()=>i,T:()=>l});var r=n(17402);let i=(0,r.createContext)(void 0);function l(){return(0,r.useContext)(i)}},88325:function(e,t,n){n.d(t,{u:()=>r});function r(e){var t;return null!=(t=({embed:"post","feed-sidebar":"feed","note-related":"feed",permalink:"feed","post-embed":"post","post-page-restacks-list":"post",suggestions:"feed"})[e])?t:e}},67024:function(e,t,n){n.d(t,{Z:()=>i,q:()=>a});let r=Intl.NumberFormat(void 0,{maximumSignificantDigits:4});function i(e){return r.format(e)}let l=new Intl.NumberFormat(void 0,{maximumSignificantDigits:3,notation:"compact"});function a(e){return l.format(e)}},60064:function(e,t,n){n.d(t,{F0:()=>r,P2:()=>i,hx:()=>a,tS:()=>l});let r=32,i=18,l=40,a=20},60897:function(e,t,n){n.d(t,{A:()=>a});var r=n(17402),i=n(98949),l=n(17031);function a(e){let{truncationProfile:t="medium"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.useMemo)(()=>(0,l.D)(e,{truncationProfile:t,isMobile:(0,i.Fr)()}),[null==e?void 0:e.body,null==e?void 0:e.body_json])}},88711:function(e,t,n){n.d(t,{v:()=>p});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),d=n(17402),c=n(33727);let u={container:"container-KfNFl_"};function p(e){var{children:t,selected:n}=e,o=(0,l._)(e,["children","selected"]);let p=function(){let[e,t]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{t("1"===getComputedStyle(document.documentElement).getPropertyValue("--theme_bg_is_dark").trim())},[]),e}();return(0,a.Y)(c.Z,(0,i._)((0,r._)({className:s()(u.container,n&&u.selected,p&&"theme-bg-dark"),elevated:!1,radius:"sm"},o),{children:t}))}},88160:function(e,t,n){n.r(t),n.d(t,{HighlightedCodeBlockEditor:()=>k});var r=n(4006),i=n(31583),l=n(17402),a=n(32708),o=n(35369);function s(e){let{editor:t,getPos:n}=e,i=(0,l.useCallback)(()=>{let e=n();void 0!==e&&(t.commands.setNodeSelection(e),t.commands.deleteSelection())},[t,n]);return(0,r.Y)(o.K0,{priority:"quaternary",onClick:i,size:"sm",children:(0,r.Y)(a.A,{size:18})})}var d=n(21436);function c(){return(0,r.Y)(o.K0,{priority:"quaternary",size:"sm",cursor:"grab",className:"grabber-Z1OkWY",children:(0,r.Y)(d.A,{size:18})})}var u=n(84605),p=n(74038),h=n(75177),m=n(61084);let g="auto";function f(e){var t,n;let{value:i,onChange:l,isAutoDetectActive:a,detectedLanguage:o}=e,{iString:s}=(0,u.GO)(),d=s("Auto-detect");return(0,r.FD)(m.eB,{label:a?o&&"plaintext"!==o&&(null==(n=p.Fc.find(e=>e.value===o))?void 0:n.label)||d:(null==(t=p.Fc.find(e=>e.value===i))?void 0:t.label)||"Plain Text",size:"sm",children:[(0,r.Y)(m.Jm,{onClick:()=>l(g),selected:a,children:d},g),(0,r.Y)(h.N,{}),p.Fc.map(e=>(0,r.Y)(m.Jm,{onClick:()=>l(e.value),selected:!a&&i===e.value,children:e.label},e.value))]})}var v=n(76977),b=n(82286);function y(e){let{language:t,onLanguageChange:n,editor:i,getPos:a,isAutoDetectActive:o,detectedLanguage:d}=e,u=(0,l.useCallback)(()=>{let e=a();void 0!==e&&i.chain().setNodeSelection(e).focus().run()},[i,a]);return(0,r.Y)(v.fI,{contentEditable:!1,padding:8,userSelect:"none",justifyContent:"end",alignItems:"center",borderBottom:"detail",onClick:u,cursor:"pointer",children:(0,r.FD)(v.fI,{gap:12,onClick:e=>e.stopPropagation(),children:[(0,r.Y)(f,{value:t,onChange:n,isAutoDetectActive:o,detectedLanguage:d}),(0,r.FD)(b.Xn,{children:[(0,r.Y)(s,{editor:i,getPos:a}),(0,r.Y)(c,{})]})]})})}var Y=n(88711),w=n(38221),C=n.n(w);let _=[{language:"php",patterns:[/<\?php/],highConfidence:!0},{language:"dockerfile",patterns:[/^FROM\s+[\w./:@-]+/m,/^(RUN|CMD|ENTRYPOINT|COPY|ADD|WORKDIR|ENV|EXPOSE)\s/m],highConfidence:!0},{language:"xml",patterns:[/<\?xml\s+version/,/<\/?\w+:\w+[\s>]/],highConfidence:!0},{language:"bash",patterns:[/^#!.*\b(bash|sh|zsh)\b/m,/\b(then|fi|elif|esac|done)\b/,/\$\{?\w+\}?/,/\[\[\s.*\s\]\]/]},{language:"shell",patterns:[/^#!.*\b(bash|sh|zsh)\b/m,/\b(then|fi|elif|esac|done)\b/,/\$\(\s*\w+/]},{language:"rust",patterns:[/\bfn\s+\w+\s*[<(]/,/\blet\s+mut\b/,/\bimpl\s+(<.*>)?\s*\w+/,/\b(pub\s+)?(struct|enum|trait)\s+\w+/,/->.*\{/,/::new\(\)/,/\bmatch\s+\w+\s*\{/]},{language:"go",patterns:[/^package\s+\w+/m,/\bfunc\s+(\(\w+\s+\*?\w+\)\s+)?\w+\s*\(/,/\w+\s*:=/,/\btype\s+\w+\s+(struct|interface)\s*\{/,/\bgo\s+\w+\(/,/\bdefer\s+/]},{language:"python",patterns:[/^(import|from)\s+\w+/m,/\bdef\s+\w+\s*\([^)]*\)\s*(->.*)?:/,/^\s*class\s+\w+.*:/m,/^\s*@\w+/m,/\bself\./,/\bprint\s*\(/,/:\s*$/m]},{language:"typescript",patterns:[/:\s*(string|number|boolean|void|any|never|unknown)\b/,/\binterface\s+\w+/,/\btype\s+\w+\s*=/,/<[A-Z]\w*>/,/\bas\s+(string|number|boolean|any|const)\b/,/\w+\?\s*:/,/\bReadonly<|Partial<|Record</]},{language:"tsx",patterns:[/:\s*(string|number|boolean|void|any)\b/,/\binterface\s+\w+/,/<[A-Z]\w+[^>]*\/>/,RegExp("<[A-Z]\\w+[^>]*>.*<\\/[A-Z]\\w+>","s")]},{language:"jsx",patterns:[/<[A-Z]\w+[^>]*\/>/,RegExp("<[A-Z]\\w+[^>]*>.*<\\/[A-Z]\\w+>","s"),/\bReact\./,/\buseState\s*\(/,/\buseEffect\s*\(/]},{language:"javascript",patterns:[/\bfunction\s+\w+\s*\(/,/\b(const|let|var)\s+\w+\s*=/,/=>\s*[{(]/,/\bclass\s+\w+(\s+extends\s+\w+)?\s*\{/,/\bmodule\.exports\b/,/\brequire\s*\(/,/\bexport\s+(default\s+)?(function|class|const)/]},{language:"html",patterns:[/<!DOCTYPE\s+html>/i,/<html[\s>]/i,/<\/?(head|body|div|span|p|a|script|style)[\s>]/i,/<meta\s+/i,/<link\s+/i]},{language:"css",patterns:[/[.#][\w-]+\s*\{/,/@(media|keyframes|import|font-face)\b/,/\b(display|margin|padding|color|background|font-size|width|height):\s*[^;]+;/]},{language:"json",patterns:[/^\s*\{[\s\S]*"\w+":\s*["\d[{ntf]/,/^\s*\[[\s\S]*\{[\s\S]*"\w+"/]},{language:"yaml",patterns:[/^---\s*$/m,/^\s*[\w-]+:\s*[|>]?\s*$/m,/^\s*-\s+\w+:/m]},{language:"toml",patterns:[/^\s*\[\w+\]\s*$/m,/^\s*\w+\s*=\s*["'\d[]/m]},{language:"sql",patterns:[/\b(SELECT|INSERT\s+INTO|UPDATE|DELETE\s+FROM|CREATE\s+TABLE|ALTER\s+TABLE)\b/i,/\bFROM\s+\w+\s+(WHERE|JOIN|ORDER\s+BY)/i]},{language:"graphql",patterns:[/\b(type|query|mutation|fragment|subscription)\s+\w+/,/\{\s*\w+\s*[({]/]},{language:"markdown",patterns:[/^#{1,6}\s+\w+/m,/\[.+\]\(.+\)/,/^\s*[-*+]\s+\w+/m,/```\w*\n/]},{language:"java",patterns:[/\bpublic\s+(static\s+)?class\s+\w+/,/\bpublic\s+static\s+void\s+main\s*\(/,/\bpackage\s+[\w.]+;/,/\bimport\s+[\w.]+;/,/@Override\b/]},{language:"csharp",patterns:[/\bnamespace\s+[\w.]+/,/\bpublic\s+(partial\s+)?class\s+\w+/,/\busing\s+[\w.]+;/,/\basync\s+Task</,/\bvar\s+\w+\s*=/]},{language:"c",patterns:[/^#include\s*<[\w.]+>/m,/\bint\s+main\s*\(/,/\bprintf\s*\(/,/\bmalloc\s*\(/]},{language:"cpp",patterns:[/^#include\s*<[\w.]+>/m,/\bstd::/,/\bcout\s*<</,/\btemplate\s*</,/\bclass\s+\w+\s*:\s*(public|private|protected)/]},{language:"ruby",patterns:[/\bdef\s+\w+/,/\bend\b/,/\bclass\s+\w+(\s*<\s*\w+)?/,/@\w+\s*=/,/\battr_(reader|writer|accessor)\b/,/\brequire\s+['"]/]},{language:"swift",patterns:[/\bfunc\s+\w+\s*\([^)]*\)\s*(->|{)/,/\b(let|var)\s+\w+:\s*\w+/,/\bguard\s+let\b/,/\bif\s+let\b/,/\bstruct\s+\w+:\s*\w+/]},{language:"kotlin",patterns:[/\bfun\s+\w+\s*\(/,/\b(val|var)\s+\w+:\s*\w+/,/\bdata\s+class\b/,/\bobject\s+\w+/,/\bcompanion\s+object\b/]},{language:"scala",patterns:[/\bdef\s+\w+\s*[[(]/,/\bcase\s+class\b/,/\bobject\s+\w+/,/\btrait\s+\w+/,/=>\s*\{/]},{language:"r",patterns:[/<-\s*/,/\bc\s*\(/,/\blibrary\s*\(/,/\bfunction\s*\(/,/\bdata\.frame\s*\(/]}];var E=n(97884);function k(e){let{node:t,updateAttributes:n,selected:a,editor:o,getPos:s}=e,d=t.attrs.language||"plaintext",c=(0,l.useCallback)(e=>n({language:e}),[n]),{isAutoDetectActive:u,detectedLanguage:h,effectiveLanguage:m,handleLanguageSelect:g}=function(e){let{content:t,nodeLanguage:n,onLanguageChange:r}=e,[i,a]=(0,l.useState)("plaintext"===n),[o,s]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),u=(0,l.useRef)(t),p=i?o||"plaintext":n,h=(0,l.useCallback)((e,t)=>{let n=function(e){let t=e.trim();if(!t)return"plaintext";let n={};for(let{language:e,patterns:r,highConfidence:i}of _){let l=0;for(let e of r)e.test(t)&&l++;if(l>0){if(i&&l>=1)return e;n[e]=(n[e]||0)+l}}let r=Object.entries(n);if(0===r.length)return null;r.sort((e,t)=>t[1]-e[1]);let i=r[0];if(!i)return null;let[l,a]=i;return a<2?null:"javascript"===l&&n.typescript&&n.typescript>=2?"typescript":l}(e.slice(0,500));s(n),n&&(c(!0),n!==t&&r(n))},[r]),m=(0,l.useMemo)(()=>C()(h,300),[h]);return(0,l.useEffect)(()=>()=>{m.cancel()},[m]),(0,l.useEffect)(()=>{if(!i)return;let e=u.current;if(u.current=t,t.length<20){d&&(c(!1),s(null));return}d&&function(e,t){if(e===t)return!1;let n=Math.abs(t.length-e.length);if(e.length>0&&n>.5*e.length)return!0;let r=Math.min(20,e.length,t.length);return!!(r>0)&&e.slice(0,r)!==t.slice(0,r)}(e,t)&&c(!1),d||m(t,n)},[t,n,i,d,m]),{isAutoDetectActive:i,detectedLanguage:o,effectiveLanguage:p,handleLanguageSelect:(0,l.useCallback)(e=>{"auto"===e?(a(!0),c(!1),t.length>=20?h(t,n):s(null)):(a(!1),s(null),c(!1),r(e))},[t,n,r,h])}}({content:t.textContent,nodeLanguage:d,onLanguageChange:c});return(0,l.useEffect)(()=>{m&&"plaintext"!==m&&(0,p.rI)(m).catch(console.error)},[m]),(0,r.Y)(i.VR,{"data-drag-handle":"",spellcheck:!1,children:(0,r.FD)(Y.v,{selected:a,padding:0,children:[(0,r.Y)(y,{language:m,onLanguageChange:g,editor:o,getPos:s,isAutoDetectActive:u,detectedLanguage:h}),(0,r.Y)(v.VP,{className:E.A.code,padding:20,children:(0,r.Y)(i.$p,{as:"code",className:"language-".concat(m),style:{whiteSpace:"pre"}})})]})})}},74038:function(e,t,n){let r,i;n.d(t,{EQ:()=>v,Fc:()=>Y,Gz:()=>y,kS:()=>f,rI:()=>b});var l=n(88285),a=n(83673),o=n.n(a),s=n(63375),d=n.n(s),c=n(55716),u=n(48541),p=n(74596),h=n(5035);let m=new Set,g=new Set;function f(){return r}async function v(e){return!(!r||r.getLoadedThemes().includes(e)||g.has(e))&&e in c.Z&&(g.add(e),await r.loadTheme(e),g.delete(e),!0)}async function b(e){return!(!r||r.getLoadedLanguages().includes(e)||m.has(e))&&e in u.el&&(m.add(e),await r.loadLanguage(e),m.delete(e),!0)}async function y(e){let{doc:t,defaultTheme:n,defaultLanguage:a,themeModes:s}=e,m=(0,l.xe)(t,e=>e.type.name===h._1),g=d()(o()([...m.map(e=>e.node.attrs.language),a])),f=[n];if(s&&(s.light&&!f.includes(s.light)&&f.push(s.light),s.dark&&!f.includes(s.dark)&&f.push(s.dark)),r)await Promise.all([...f.map(e=>v(e)),...g.map(e=>!!e&&b(e))]);else{let e=function(e){if(!r&&!i){let t=e.themes.filter(e=>!!e&&e in c.Z),n=e.languages.filter(e=>!!e&&e in u.el);return i=(0,p.O_)({themes:t,langs:n}).then(e=>{r=e}).catch(e=>{console.error("Failed to load highlighter:",e),i=void 0})}if(i)return i}({languages:g,themes:f});await e}}let Y=[{value:"plaintext",label:"Plain Text"},{value:"javascript",label:"JavaScript"},{value:"typescript",label:"TypeScript"},{value:"jsx",label:"JSX"},{value:"tsx",label:"TSX"},{value:"python",label:"Python"},{value:"css",label:"CSS"},{value:"html",label:"HTML"},{value:"json",label:"JSON"},{value:"bash",label:"Bash"},{value:"markdown",label:"Markdown"},{value:"sql",label:"SQL"},{value:"yaml",label:"YAML"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"java",label:"Java"},{value:"c",label:"C"},{value:"cpp",label:"C++"},{value:"csharp",label:"C#"},{value:"php",label:"PHP"},{value:"ruby",label:"Ruby"},{value:"swift",label:"Swift"},{value:"kotlin",label:"Kotlin"},{value:"scala",label:"Scala"},{value:"r",label:"R"},{value:"shell",label:"Shell"},{value:"graphql",label:"GraphQL"},{value:"dockerfile",label:"Dockerfile"},{value:"xml",label:"XML"},{value:"toml",label:"TOML"}]},50820:function(e,t,n){n.r(t),n.d(t,{CodeBlockPlugin:()=>c});var r=n(88285),i=n(26469),l=n(62095),a=n(74038),o=n(5035);function s(e){return Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,":").concat(n)}).join(";")}function d(e){let{doc:t,defaultTheme:n,defaultLanguage:i,themes:d}=e,c=[];return(0,r.xe)(t,e=>e.type.name===o._1).forEach(e=>{var t,r;let o=e.pos+1,u=e.node.attrs.language||i,p=e.node.attrs.theme||n,h=(null==(t=e.node.attrs.themes)?void 0:t.light)||(null==d?void 0:d.light),m=(null==(r=e.node.attrs.themes)?void 0:r.dark)||(null==d?void 0:d.dark),g=(0,a.kS)();if(!g)return;g.getLoadedLanguages().includes(u)||(u="plaintext");let f=e=>g.getLoadedThemes().includes(e)?e:g.getLoadedThemes()[0];for(let t of(d?g.codeToTokens(e.node.textContent,{lang:u,themes:{light:f(h),dark:f(m)}}):g.codeToTokens(e.node.textContent,{lang:u,theme:f(p)})).tokens){for(let e of t){let t=o+e.content.length,n="";n=d?s(e.htmlStyle||{}):s({color:e.color||"inherit"});let r=l.NZ.inline(o,t,{style:n});c.push(r),o=t}o+=1}}),l.zF.create(t,c)}function c(e){let{defaultLanguage:t,defaultTheme:n,themes:s}=e,c=new i.k_({key:new i.hs("codeBlockHighlighter"),view:e=>new class{update(){this.checkUndecoratedBlocks()}destroy(){}async initDecorations(){let r=e.state.doc;await (0,a.Gz)({doc:r,defaultLanguage:t,defaultTheme:n,themeModes:s});let i=e.state.tr.setMeta("codeBlockPluginForceDecoration",!0);e.dispatch(i)}async checkUndecoratedBlocks(){let t=(0,r.xe)(e.state.doc,e=>e.type.name===o._1);if((await Promise.all(t.flatMap(e=>(e=>{let t=[(0,a.rI)(e.node.attrs.language)];if(s){var n,r;t.push((0,a.EQ)((null==(n=e.node.attrs.themes)?void 0:n.light)||s.light)),t.push((0,a.EQ)((null==(r=e.node.attrs.themes)?void 0:r.dark)||s.dark))}else t.push((0,a.EQ)(e.node.attrs.theme));return t})(e)))).includes(!0)){let t=e.state.tr.setMeta("codeBlockPluginForceDecoration",!0);e.dispatch(t)}}constructor(){this.initDecorations()}},state:{init:(e,r)=>{let{doc:i}=r;return d({doc:i,defaultLanguage:t,defaultTheme:n,themes:s})},apply:(e,i,l,a)=>{let c=l.selection.$head.parent.type.name,u=a.selection.$head.parent.type.name,p=(0,r.xe)(l.doc,e=>e.type.name===o._1),h=(0,r.xe)(a.doc,e=>e.type.name===o._1),m=e.docChanged&&([c,u].includes(o._1)||h.length!==p.length||e.steps.some(e=>{let{from:t,to:n}=e;return void 0!==t&&void 0!==n&&p.some(e=>e.pos>=t&&e.pos+e.node.nodeSize<=n)}));return e.getMeta("codeBlockPluginForceDecoration")||m?d({doc:e.doc,defaultLanguage:t,defaultTheme:n,themes:s}):i.map(e.mapping,e.doc)}},props:{decorations(e){var t;return null!=(t=c.getState(e))?t:l.zF.empty}}});return c}},27069:function(e,t,n){n.d(t,{v:()=>r});function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Promise.all([n.e("50551"),n.e("19565")]).then(n.bind(n,35132)).then(n=>{let{Sentry:r}=n;r.captureException(e,{extra:t})})}},60509:function(e,t,n){n.d(t,{E:()=>r});let r=async e=>{let{eventSlug:t,marketSlug:n,profileName:r,postId:i}=e;try{await fetch("/api/v1/polymarket/track-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventSlug:t,marketSlug:n,profileName:r,postId:i})})}catch(e){console.error("Failed to track Polymarket embed view:",e)}}},56804:function(e,t,n){n.d(t,{o:()=>o,z:()=>s});var r=n(69277),i=n(70408),l=n(99862),a=n(68349);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.defaultPrevented||(e.preventDefault(),s(t,(0,i._)((0,r._)({},n),{newTab:n.newTab||e.metaKey||e.ctrlKey||1===e.button})))}function s(e){let{native:t=!1,newTab:n=!1,replace:r,state:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n?Object.assign(document.createElement("a"),{target:"_blank",rel:"noopener",href:e}).click():t||(0,a.EW)(e)!==(0,a.EW)(window.location.href)?window.location.assign(e):"react-router"===window.__SUBSTACK_ROUTER_TYPE__?window.__reactRouterNavigate(d(e),{replace:r,state:i}):((0,l.route)(d(e),r),void 0!==i&&history.replaceState(i,""))}function d(e){try{let{pathname:t,search:n,hash:r}=new URL(e);return"".concat(t).concat(n).concat(r)}catch(t){return e}}},35840:function(e,t,n){n(4006),n(34206),n(79909),n(35369)},49660:function(e,t,n){n(99851),n(69277),n(4006);var r=n(50172),i=n(69843),l=n(71086);n(42250),n(34206),n(94729),n(68349),n(38093),n(35369),n(76977),n(63136),n(92525),n(39318),n(41086),n(52687),r.Component},8149:function(e,t,n){n.d(t,{N:()=>c});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(26424);n(17402);var s=n(76977),d=n(23382);function c(e){var{children:t,open:n,defaultOpen:c,disabled:u,onOpenChange:p,trigger:h,className:m}=e,g=(0,l._)(e,["children","open","defaultOpen","disabled","onOpenChange","trigger","className"]);if(!t)return null;let f=(0,a.Y)(o.UC,{asChild:!0,children:(0,a.Y)(s.VP,{overflow:"hidden",className:d.A.content,children:t})}),v=(0,r._)({open:n,defaultOpen:c,disabled:u,onOpenChange:p},g);return h?(0,a.Y)(o.bL,(0,i._)((0,r._)({},v),{asChild:!0,children:(0,a.FD)(s.VP,{overflow:"hidden",padding:4,pullY:4,pullX:4,className:m,children:[(0,a.Y)(o.l9,{asChild:!0,children:h}),f]})})):(0,a.Y)(o.bL,(0,i._)((0,r._)({},v),{asChild:!0,children:(0,a.Y)(s.VP,{overflow:"hidden",className:m,children:f})}))}},97515:function(e,t,n){n.d(t,{X:()=>f,p:()=>g});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(17402),s=n(89490),d=n(35369),c=n(33727),u=n(76977),p=n(63136);let h={size:20,color:"var(--color-fg-secondary)"},m={size:"sm",priority:"secondary-outline"};function g(e){var t,n,{icon:s,title:c,description:u,button:p,children:g}=e,f=(0,l._)(e,["icon","title","description","button","children"]);return(0,a.FD)(v,(0,i._)((0,r._)({},f),{children:[s?(t=s)&&(0,o.isValidElement)(t)?(0,o.cloneElement)(t,(0,r._)({},h,t.props)):t:null,(0,a.FD)(Y,{children:[(0,a.Y)(b,{children:c}),u&&(0,a.Y)(y,{children:u})]}),p?(n=p)&&(0,o.isValidElement)(n)&&n.type===d.$n?(0,o.cloneElement)(n,(0,r._)({},m,n.props)):n:null,g]}))}function f(e){return(0,a.Y)(c.Z,{padding:20,justifyContent:"center",alignItems:"center",flex:"grow",children:(0,a.Y)(g,(0,r._)({},e))})}function v(e){var{children:t}=e,n=(0,l._)(e,["children"]);return(0,a.Y)(u.VP,(0,i._)((0,r._)({flex:"grow",alignItems:"center",justifyContent:"center",gap:12,padding:20,textAlign:"center",sizing:"border-box"},n),{children:t}))}function b(e){let{children:t}=e;return(0,a.Y)(p.EY.B4,{weight:"medium",color:"primary",children:t})}function y(e){let{children:t}=e;return(0,a.Y)(p.EY.B4,{color:"secondary",children:t})}let Y=(0,s.I4)({display:"flex",direction:"column",gap:2,maxWidth:400})},31825:function(e,t,n){n.d(t,{z:()=>p});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),d=n(17402),c=n(35369),u=n(78340);let p=(0,d.forwardRef)(function(e,t){var{className:n,children:o,priority:d="primary",size:p="md",rounded:h,leading:m,trailing:g,loading:f,native:v}=e,b=(0,l._)(e,["className","children","priority","size","rounded","leading","trailing","loading","native"]);return(0,a.FD)("a",(0,i._)((0,r._)({},b),{className:s()("pencraft",u.A.buttonBase,(0,c.C3)({className:n,priority:d,size:p,rounded:h,leading:m,trailing:g,loading:f})),ref:t,"aria-busy":f?"true":void 0,"data-native":v?"":void 0,children:[f&&(0,a.Y)(c.az,{priority:d}),m,o,g]}))})},95477:function(e,t,n){n.d(t,{s:()=>p});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),d=n(89490),c=n(76977);let u={container:"container-WYWNQ7",enabled:"enabled-FrokEl",checked:"checked-qUvq71",unchecked:"unchecked-YpAQwg",disabled:"disabled-w7hZI3",nub:"nub-XpaYD_",theme_accent:"theme_accent-eoXELK",themeAccent:"theme_accent-eoXELK",theme_success:"theme_success-my5UzI",themeSuccess:"theme_success-my5UzI",theme_error:"theme_error-Uoe9a5",themeError:"theme_error-Uoe9a5",theme_select:"theme_select-TR6faD",themeSelect:"theme_select-TR6faD",theme_highlight:"theme_highlight-sw2S4n",themeHighlight:"theme_highlight-sw2S4n",theme_dark:"theme_dark-m15H85",themeDark:"theme_dark-m15H85",input:"input-b61VGF"},p=e=>{var{checked:t,disabled:n,theme:o="accent",id:p}=e,h=(0,l._)(e,["checked","disabled","theme","id"]);return(0,a.FD)(c.pT,{height:20,width:20,position:"relative",radius:"full",sizing:"border-box",className:s()(u.container,t?u.checked:u.unchecked,n?u.disabled:u.enabled,u["theme_".concat(o)]),justifyContent:"center",alignItems:"center",flex:"auto",children:[(0,a.Y)("input",(0,i._)((0,r._)({},h),{id:p,checked:t,disabled:n,type:"radio",className:s()(u.input,n?u.disabled:u.enabled,u["theme_".concat(o)])})),(0,a.Y)(d.az,{as:"span",radius:"full","aria-hidden":"true",className:s()(u.nub,t?u.checked:u.unchecked,n?u.disabled:u.enabled,u["theme_".concat(o)])})]})}},40837:function(e,t,n){n.d(t,{D:()=>v});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),d=n(98445),c=n(48697),u=n(17402),p=n(84605),h=n(35369),m=n(76977),g=n(65842),f=n(22674);let v=(0,u.forwardRef)((e,t)=>{var n,{className:o,error:v=!1,placeholder:b="Search...",showIcon:y=!0,showClear:Y=!0,flex:w="auto",onChange:C}=e,_=(0,l._)(e,["className","error","placeholder","showIcon","showClear","flex","onChange"]);let{iString:E}=(0,p.GO)(),[k,A]=(0,u.useState)(null!=(n=_.defaultValue)?n:"");return(0,a.Y)(m.I1,{position:"relative",flex:w,children:(0,a.Y)(g.ks,(0,i._)((0,r._)({},_),{leading:y?(0,a.Y)(d.A,{size:16}):null,trailing:Y&&k?(0,a.Y)(h.K0,{size:"xs",onClick:()=>{A(""),C&&C("")},"aria-label":E("Clear"),priority:"quaternary",children:(0,a.Y)(c.A,{size:16})}):null,className:s()(o,f.A.searchInput),error:v,disabled:_.disabled,placeholder:b,value:k,ref:t,flex:w,type:"search",onInput:e=>{let t=e.currentTarget.value;A(t),C&&C(t.trim())}}))})})},11587:function(e,t,n){n.d(t,{T:()=>u,u:()=>p});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),d=n(17402),c=n(24311);let u=(0,d.forwardRef)((e,t)=>{var{className:n,error:o=!1,rows:d=4,maxlength:u,unstyled:p=!1}=e,h=(0,l._)(e,["className","error","rows","maxlength","unstyled"]);return(0,a.Y)("textarea",(0,i._)((0,r._)((0,i._)((0,r._)({},h),{rows:d}),void 0!==u?{maxlength:u}:{}),{className:s()("pencraft",n,c.A.textarea,c.A.inputText,o&&c.A.error,h.disabled&&c.A.disabled,h.readOnly&&c.A.readOnly,p&&c.A.unstyled),ref:t}))});function p(e){let{value:t,onChange:n}=e,[r,i]=(0,d.useState)(t||"");return(0,d.useEffect)(()=>{t!==r&&i(null!=t?t:"")},[t]),{value:r,setValue:i,handleChange:e=>{i(e.currentTarget.value),null==n||n(e)}}}},36372:function(e,t,n){n.d(t,{d:()=>o.dj,y:()=>s});var r=n(4006),i=n(28001),l=n(40612),a=n(51637),o=n(56007);function s(e){let{text:t,description:n,cta:o,Icon:s,href:d,localNavigation:c,onAccept:u,onOpenChange:p}=e;return(0,r.Y)(i.bL,{className:a.A.toast,onOpenChange:p,children:(0,r.Y)(l.i,{text:t,description:n,cta:o,Icon:s,href:d,localNavigation:c,onAccept:u})})}},48625:function(e,t,n){n.d(t,{f:()=>m});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(67502),s=n(32485),d=n.n(s),c=n(17402),u=n(35369),p=n(76977),h=n(33540);let m=(0,c.forwardRef)((e,t)=>{var{pressed:n,defaultPressed:s=!1,onPressedChange:c,showAnimation:m=!0,children:g,disabled:f,className:v}=e,b=(0,l._)(e,["pressed","defaultPressed","onPressedChange","showAnimation","children","disabled","className"]);let y="function"==typeof g;return(0,a.Y)(o.b,{pressed:n,defaultPressed:s,onPressedChange:c,disabled:f,className:d()(h.A.toggle,m&&h.A.animate,v),asChild:!0,children:(0,a.Y)(u.K0,(0,i._)((0,r._)({},b),{ref:t,children:y?(0,a.FD)(a.FK,{children:[(0,a.Y)(p.ov,{className:d()(h.A.content,h.A.on),children:g({pressed:!0})}),(0,a.Y)(p.ov,{className:d()(h.A.content,h.A.off),children:g({pressed:!1})})]}):(0,a.Y)(p.ov,{className:h.A.content,children:g})}))})});m.displayName="Toggle"},24914:function(e,t,n){n.d(t,{DT:()=>f,Oo:()=>g,TO:()=>Y,gn:()=>w,jO:()=>b,vS:()=>y});var r=n(79785),i=n(4006),l=n(71619),a=n(67535),o=n(37455),s=n(45773),d=n(82519),c=n(84605),u=n(17028),p=n(63136),h=n(97684);function m(){let e=(0,r._)(['Create "','"']);return m=function(){return e},e}let g={placement:"bottom-start",strategy:"fixed",whileElementsMounted:l.ll,middleware:[(0,a.cY)(4),(0,a.UU)(),(0,a.Ej)({padding:0,elementContext:"floating",altBoundary:!1,rootBoundary:"viewport",apply(e){let{elements:t,rects:n}=e;Object.assign(t.floating.style,{minWidth:"".concat(n.reference.width,"px")})}})]},f=200;function v(){return(0,i.Y)(u.ov,{className:h.A.check,position:"absolute",children:(0,i.Y)(s.A,{size:20,stroke:"var(--color-link-fg)"})})}function b(e){let{option:t,isDisabled:n,isSelected:r}=e;return(0,i.FD)(o.G.Option,{className:h.A.option,value:t.value,disabled:n,children:[(0,i.Y)(p.EY.B3,{color:n?"secondary":"primary",children:t.label}),r&&(0,i.Y)(v,{})]},String(t.value))}function y(e){let{inputString:t}=e,{iTemplate:n}=(0,c.GO)();return(0,i.Y)(o.G.Option,{className:h.A.option,value:{isNew:!0,label:t},children:(0,i.Y)(p.EY.B3,{color:"secondary",children:n(m(),t)})})}function Y(){return(0,i.Y)(o.G.Button,{className:h.A.button,children:e=>{let{disabled:t}=e;return(0,i.Y)(d.A,{color:t?"var(--color-fg-tertiary)":void 0})}})}function w(e){return"object"==typeof e&&null!==e&&"isNew"in e&&!0===e.isNew&&"label"in e&&"string"==typeof e.label}},21258:function(e,t,n){n.d(t,{K:()=>b});var r=n(69277),i=n(70408),l=n(4006),a=n(38314),o=n(37455),s=n(32485),d=n.n(s),c=n(17402),u=n(68104),p=n(65915),h=n(24914),m=n(12815),g=n(17028),f=n(97684),v=n(24311);function b(e){let{options:t,value:n,onChange:s,placeholder:b,max:Y,disabled:w,onCreate:C,isCreateOptionValid:_}=e,E=null!=Y&&n.length>=Y,{inputValue:k,trimmedInputValue:A,filteredOptions:D,handleInputChange:T,showCreateOption:S,noResults:I,processSelectionValue:L}=(0,m.B)({options:t,onCreate:C,isCreateOptionValid:_,hasReachedMax:E}),{refs:R,floatingStyles:x,context:O}=(0,a.we)(h.Oo),P=(0,a.iQ)(O),{getReferenceProps:N,getFloatingProps:F}=(0,a.bv)([P]),M=(0,c.useRef)(null),B=new Map(t.map(e=>[e.value,e.label])),U=new Set(n),z=n.length>0,j=e=>{let t=""===k&&n.length>0;"Backspace"===e.key&&t&&(e.preventDefault(),s(n.slice(0,-1)))},G=async e=>{null!=Y&&e.length>Y||L(e[e.length-1],t=>{null!==t&&s(e.filter(e=>!(0,h.gn)(e)))})};return(0,l.Y)(o.G,{multiple:!0,value:n,onChange:G,disabled:w,children:e=>{let{open:t}=e;return(0,l.FD)(g.fI,{position:"relative",children:[(0,l.FD)(g.fI,(0,i._)((0,r._)({ref:R.setReference},N()),{flex:"grow",alignItems:"center",className:d()(f.A.inputBox,v.A.input,v.A.inputText,z&&f.A.hasChips,w&&f.A.disabled),onClick:()=>{var e;null==(e=M.current)||e.focus()},children:[n.map(e=>(0,l.Y)(y,{children:(0,l.Y)(p.v,{onClick:()=>{var t;s(n.filter(t=>e!==t)),null==(t=M.current)||t.focus()},trailing:(0,l.Y)(u.A,{color:"var(--color-fg-tertiary)"}),disabled:w,children:B.get(e)})},String(e))),(0,l.Y)(o.G.Input,{ref:M,className:d()("pencraft",f.A.input,w&&f.A.disabled),onChange:T,onKeyDown:j,value:k,placeholder:z?void 0:b}),(0,l.Y)(h.TO,{})]})),t&&(0,l.FD)(o.G.Options,(0,i._)((0,r._)({ref:R.setFloating,style:x},F()),{static:!0,className:d()(f.A.options,I&&f.A.empty),children:[D.slice(0,h.DT).map(e=>{let t=E&&!U.has(e.value),n=U.has(e.value);return(0,l.Y)(h.jO,{option:e,isDisabled:t,isSelected:n},String(e.value))}),S&&(0,l.Y)(h.vS,{inputString:A})]}))]})}})}let y=(0,g.I4)({display:"flex",alignItems:"center",maxHeight:20})},12815:function(e,t,n){n.d(t,{B:()=>l});var r=n(17402),i=n(24914);function l(e){var t;let{options:n,onCreate:l,isCreateOptionValid:a,hasReachedMax:o=!1}=e,[s,d]=(0,r.useState)(""),c=s.trim(),u=()=>{d("")},p=c?n.filter(e=>e.label.toLowerCase().includes(c.toLowerCase())):n,h=null==(t=null==a?void 0:a(c,n))||t,m=!n.some(e=>e.label.toLowerCase()===c.toLowerCase()),g=c&&l&&h&&m&&!o,f=0===p.length&&!g,v=async e=>{l&&(await l(e.label),u())};return{inputValue:s,trimmedInputValue:c,handleInputChange:e=>{d(e.currentTarget.value)},filteredOptions:p,getDisplayValue:e=>{if(null===e)return"";let t=n.find(t=>t.value===e);return(null==t?void 0:t.label)||""},showCreateOption:g,noResults:f,processSelectionValue:(e,t)=>{(0,i.gn)(e)?v(e):(t(e),u())}}}},308:function(e,t,n){n.d(t,{a:()=>s});var r=n(69277),i=n(70408),l=n(32485),a=n.n(l),o=n(17402);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return(0,o.forwardRef)((l,s)=>(0,o.createElement)(t,(0,i._)((0,r._)({},n,l),{ref:s,className:a()(e,null==l?void 0:l.className)})))}},44552:function(e,t,n){n.d(t,{h9:()=>l});var r=n(17402),i=n(40719);function l(e){var t;let n,l=(0,r.useRef)({isDragging:!1,didDrag:!1,startX:0,startY:0,startTime:0,scrollLeft:0,velX:0,pointerId:0,momentumId:null,overscrollX:0}),{handleOverscroll:a,resetOverscroll:o}=(t=e,{handleOverscroll:(e,t,r)=>{let l=e.scrollWidth-e.clientWidth,a=r;i.A.overscrollTransition&&e.classList.remove(i.A.overscrollTransition);let o=t=>{let n=-t/5;return e.style.transform="translateX(".concat(n,"px)"),n};return t<0?(e.scrollLeft=0,a=o(t)):t>l?(e.scrollLeft=l,a=o(t-l)):(a=0,n(),e.scrollLeft=t),a},resetOverscroll:n=()=>(t.current&&i.A.overscrollTransition&&(t.current.classList.add(i.A.overscrollTransition),t.current.style.transform="",setTimeout(()=>{t.current&&i.A.overscrollTransition&&t.current.classList.remove(i.A.overscrollTransition)},200)),0)}),s=()=>{null!==l.current.momentumId&&(cancelAnimationFrame(l.current.momentumId),l.current.momentumId=null)},d=()=>{if(!e.current)return;let t=l.current;e.current.scrollLeft+=t.velX,t.velX*=.9,Math.abs(t.velX)>.5&&(t.momentumId=requestAnimationFrame(d))},c=()=>{let t=e.current;return!!t&&t.scrollWidth>t.clientWidth},u=t=>{let n=l.current;if(!n.isDragging||t.pointerId!==n.pointerId)return;window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",u),n.didDrag&&t.preventDefault(),n.isDragging=!1,n.overscrollX=o();let r=e.current;if(r&&(r.releasePointerCapture(t.pointerId),n.didDrag)){let e=e=>{e.preventDefault(),e.stopImmediatePropagation()};r.addEventListener("click",e,{capture:!0,once:!0}),setTimeout(()=>{r.removeEventListener("click",e,{capture:!0})},100),n.didDrag=!1}s(),l.current.momentumId=requestAnimationFrame(d)};return{props:{onPointerDown:t=>{if("mouse"!==t.pointerType||0!==t.button||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||!c()||!e.current)return;t.preventDefault();let n=l.current;n.isDragging=!0,n.didDrag=!1,n.startX=t.pageX,n.startY=t.pageY,n.startTime=Date.now(),n.scrollLeft=e.current.scrollLeft,n.pointerId=t.pointerId,s(),window.addEventListener("pointerup",u),window.addEventListener("pointercancel",u)},onPointerMove:t=>{var n,r,i,o,s;let d,u,p,h=l.current;if(!h.isDragging||!e.current||t.pointerId!==h.pointerId||!c())return;t.preventDefault(),!h.didDrag&&(n=t.pageX,r=t.pageY,i=h.startX,o=h.startY,s=h.startTime,d=Math.abs(n-i),u=Math.abs(r-o),p=Date.now()-s,d>2||u>2||p>50)&&(e.current.setPointerCapture(t.pointerId),h.didDrag=!0);let m=t.pageX-h.startX,g=e.current.scrollLeft,f=h.scrollLeft-m;h.overscrollX=a(e.current,f,h.overscrollX),h.velX=e.current.scrollLeft-g},onLostPointerCapture:u},didDrag:()=>l.current.didDrag,hasOverflow:c}}},49207:function(e,t,n){n.d(t,{W:()=>h,w:()=>p});var r=n(69277),i=n(70408),l=n(32641),a=n(4006),o=n(15871),s=n(43627),d=n(74979),c=n(89490);let u={opacity:.5,zIndex:1e3};function p(e){let{children:t,items:n,onReorder:r}=e,i=(0,o.FR)((0,o.MS)(o.AN,{activationConstraint:{distance:2}}),(0,o.MS)(o.uN,{coordinateGetter:s.JR}));return(0,a.Y)(o.Mp,{sensors:i,collisionDetection:o.fp,onDragEnd:e=>{let{active:t,over:i}=e;if(!i||t.id===i.id)return;let l=n.findIndex(e=>"item-".concat(e)===t.id),a=n.findIndex(e=>"item-".concat(e)===i.id);r((0,s.be)(n,l,a))},autoScroll:!1,children:(0,a.Y)(s.gB,{items:n.map(e=>"item-".concat(e)),strategy:s.kL,children:t})})}function h(e){var{item:t}=e,n=(0,l._)(e,["item"]);return(0,a.Y)(m,(0,r._)({id:"item-".concat(t)},n))}let m=e=>{let{children:t,id:n,useDragHandle:l=!1}=e,{listeners:o,setNodeRef:p,transform:h,transition:m,isDragging:g}=(0,s.gl)({id:n});return(0,a.Y)(c.az,(0,i._)((0,r._)({ref:e=>p(e),style:(0,r._)({transform:d.Ks.Translate.toString(h),transition:m},g?u:{})},l?{}:(0,r._)({},o)),{children:"function"==typeof t?t({listeners:o}):t}))}},75313:function(e,t,n){n.d(t,{A1:()=>r,R:()=>a,TJ:()=>i,k:()=>l});let r=500,i=250,l=8,a=.975},56542:function(e,t,n){n(50172),n(17402)},42831:function(e,t,n){n.d(t,{d:()=>s});var r=n(69277),i=n(70408),l=n(94090),a=n(94729),o=n(70486);function s(e){let{entityType:t,publication:n}=e,a=(0,l.uc)(),s=(0,o.wA)();return(e,l)=>{a({onSubmit:n=>s("communityPost"===t?d((0,i._)((0,r._)({},n),{id:e})):c((0,i._)((0,r._)({},n),{id:e}))),canReportToAdmins:!!(n&&l&&n.moderation_enabled),pub:null!=n?n:void 0})}}let d=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:i}=e;return async e=>{e({type:"posts-flag_post",payload:{id:t}});let l=await u({id:t,details:n,reportCategory:r,reportedToSubstack:i});l instanceof Error&&console.warn("error flagging post",l)}},c=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:i}=e;return async e=>{e({type:"comments-flag_comment",payload:{id:t}});let l=await p({id:t,details:n,reportCategory:r,reportedToSubstack:i});l instanceof Error&&console.warn("error flagging comment",l)}};async function u(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:i}=e;try{return await (0,a.x6)("/api/v1/community/posts/".concat(t,"/reports"),{method:"POST",json:{postId:t,details:n,reportCategory:r,reportedToSubstack:i}})}catch(e){return e}}async function p(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:i}=e;try{return await (0,a.x6)("/api/v1/community/comments/".concat(t,"/reports"),{method:"POST",json:{commentId:t,details:n,reportCategory:r,reportedToSubstack:i}})}catch(e){return e}}},24216:function(e,t,n){n.d(t,{a:()=>r.a});var r=n(308)},83629:function(e,t,n){n.d(t,{Z:()=>l});var r=n(99662),i=n(92636);let l=document.location.origin===i.Pm&&!(0,r.y)()},28958:function(e,t,n){n.d(t,{f:()=>p});var r=n(79785),i=n(4006),l=n(43954),a=n(84605),o=n(76977),s=n(16993),d=n(84843),c=n(63136);function u(){let e=(0,r._)(["We've sent an email to ",". Click the magic link inside to continue."]);return u=function(){return e},e}function p(e){let{email:t,onRetry:n}=e,{iString:r,iTemplate:p}=(0,a.GO)();return(0,i.FD)(i.FK,{children:[(0,i.Y)(d.rQ,{title:r("Check your email to continue"),showClose:!1,icon:(0,i.Y)(d.qx,{icon:(0,i.Y)(l.A,{size:20})}),alignItems:"center",description:p(u(),t.length>0?t:r("your address"))}),(0,i.Y)(s.q1,{}),(0,i.Y)(o.VP,{padding:16,borderTop:"detail",children:(0,i.FD)(c.EY.B4,{as:"span",color:"secondary",align:"center",children:[r("Didn't get the email? "),(0,i.Y)(c.Yq,{color:"substack",decoration:"hover-underline",onClick:n,cursor:"pointer",children:r("Try again")})]})})]})}},54768:function(e,t,n){n.d(t,{D:()=>s});var r=n(4006),i=n(84605),l=n(20500),a=n(63136),o=n(65842);function s(e){let{email:t,onEmailChange:n,onBlur:s,signInUrl:d,showUserExistsError:c=!1}=e,{iString:u}=(0,i.GO)();return(0,r.FD)(o.A0,{children:[(0,r.Y)(o.ks,{type:"email",name:"email","aria-label":"Email",placeholder:u("Your email"),value:t,onChange:e=>{n(e.currentTarget.value)},onBlur:s}),c&&(0,r.FD)(l.yn,{children:[u("This email is already registered with Substack. "),(0,r.Y)(a.Yq,{decoration:"underline",href:d,native:!0,children:u("Sign in")})]})]})}},42535:function(e,t,n){n.d(t,{v:()=>m});var r=n(4006),i=n(47963),l=n(52820),a=n(84605),o=n(86500),s=n(35369),d=n(16993),c=n(84843),u=n(48239),p=n(78979),h=n(57324);function m(){let{iString:e}=(0,a.GO)(),{getExperimentVariant:t,exposeExperiment:n}=(0,l.Wk)(),{goToStep:m,entry:g,user:f,pub:v}=(0,u.zz)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.rQ,{title:e("Get the Substack app"),description:e("Scan the code below to download for iOS or Android."),showClose:!1,alignItems:"center",showDivider:!0,icon:(0,r.Y)(c.Ud,{})}),(0,r.Y)(d.cw,{children:(0,r.Y)(i.gF,{utm_campaign:h._9.readerOnboarding,utm_source:h.VU.substack,size:180,padding:0})}),(0,r.Y)(d.jl,{showDivider:!0,direction:"column",primaryButton:(0,r.Y)(s.$n,{onClick:()=>{((0,o.u4)(o.qY.READER_ONBOARDING_APP_UPSELL_CONTINUED,{entry:g}),"reader2"!==g||(null==f?void 0:f.has_publication)||v||(n("creator_onboarding_checklist_experiment_web"),"treatment"!==t("creator_onboarding_checklist_experiment_web")))?m(p.dn.WELCOME):m(p.dn.CREATOR_CHOICE)},children:e("Next")})})]})}},7196:function(e,t,n){n.d(t,{Z:()=>k});var r=n(79785),i=n(4006),l=n(418),a=n(17402),o=n(84605),s=n(86500),d=n(12501),c=n(35369),u=n(97515),p=n(16993),h=n(84843),m=n(57820),g=n(48239),f=n(32485),v=n.n(f),b=n(76977);function y(e){let{categories:t,categoryIds:n,onCategoryClicked:r}=e,[l,o]=(0,a.useState)(new Set),s=e=>{o(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,i.Y)(b.fI,{flex:"grow",wrap:"wrap",gap:8,children:t.map(e=>(0,i.Y)(Y,{category:e,categoryIds:n,isExpanded:l.has(e.id),onCategoryClicked:r,onToggle:s},e.id))})}function Y(e){let{category:t,categoryIds:n,isExpanded:r,onCategoryClicked:l,onToggle:a}=e,o=C(t.id,n),s=t.subcategories&&t.subcategories.length>0,d=r&&s?t.subcategories:null;return(0,i.FD)(i.FK,{children:[(0,i.Y)(w,{isSelected:o,onClick:()=>{l({categoryId:t.id}),s&&a(t.id)},children:t.name}),null==d?void 0:d.map(e=>(0,i.Y)(w,{isSubcategory:!0,isSelected:C(e.id,n),onClick:()=>{l({categoryId:e.id})},children:e.name},e.id))]})}function w(e){let{isSubcategory:t,isSelected:n,onClick:r,children:l}=e;return(0,i.Y)(c.$n,{size:"sm",className:v()(n&&"selected-huGt2R",t&&"subcategory-FLrEhm"),"data-testid":n?"active":"inactive",priority:n?"secondary-accent":"secondary-outline",onClick:r,children:l})}let C=(e,t)=>{var n;return null!=(n=null==t?void 0:t.includes(e))&&n};var _=n(78979);function E(){let e=(0,r._)(["Select "," more to continue"]);return E=function(){return e},e}function k(){let{goToStep:e,pub:t,entry:n,setStepData:r}=(0,g.zz)(),[l,o]=(0,a.useState)([]),{result:c,isLoading:u}=(0,d.st)({pathname:"/api/v1/categories/recommended",auto:!0}),h=null==c?void 0:c.categories;return(0,i.FD)(i.FK,{children:[t?(0,i.Y)(D,{}):(0,i.Y)(A,{}),(0,i.Y)(p.cw,{children:u?(0,i.Y)(T,{}):h?(0,i.Y)(y,{categories:h,categoryIds:l,onCategoryClicked:e=>{let{categoryId:t}=e;if(l.includes(t)){var n;let e=null==h||null==(n=h.find(e=>(null==e?void 0:e.id)===t))?void 0:n.subcategories;o(l.filter(n=>n!==t&&!(null==e?void 0:e.some(e=>e.id===n))))}else o([...l,t])}}):(0,i.Y)(S,{})}),(0,i.Y)(p.jl,{showDivider:!0,direction:"column",primaryButton:(0,i.Y)(I,{selectedCategoryIds:l,onClick:()=>{for(let e of((0,s.u4)(s.qY.READER_ONBOARDING_CATEGORIES_FINALIZED,{entry:n,numberOfCategories:l.length}),l))(0,s.u4)(s.qY.READER_ONBOARDING_CATEGORY_REQUESTED,{entry:n,categoryId:e});r(_.dn.CATEGORIES,{publications:[],selectedCategoryIds:l}),e(_.dn.CATEGORIES_SUGGESTIONS)}})})]})}function A(){let{iString:e}=(0,o.GO)();return(0,i.Y)(p.rQ,{title:e("Select 3 topics"),description:e("We'll recommend Substacks that fit your interests."),showClose:!1,alignItems:"center",icon:(0,i.Y)(h.Ud,{})})}function D(){let{iString:e}=(0,o.GO)();return(0,i.Y)(p.rQ,{title:e("You're subscribed!"),description:e("Next, select a few topics to discover more."),showClose:!1,alignItems:"center"})}function T(){return(0,i.Y)(m.y$,{flex:"grow",minHeight:320})}function S(){let{iString:e}=(0,o.GO)();return(0,i.Y)(u.p,{title:e("Something went wrong."),description:e("Please try again later."),icon:(0,i.Y)(l.A,{})})}function I(e){let{selectedCategoryIds:t,onClick:n}=e,{iString:r,iTemplate:l}=(0,o.GO)(),a=t.length<3,s=a?l(E(),3-t.length):r("Continue");return(0,i.Y)(c.$n,{onClick:n,disabled:a,children:s})}},99039:function(e,t,n){n.d(t,{V:()=>P});var r=n(4006),i=n(17402),l=n(15734),a=n.n(l),o=n(42250),s=n(84605),d=n(86500),c=n(12501),u=n(35369),p=n(76977),h=n(20500),m=n(16993),g=n(84843),f=n(65842),v=n(37946),b=n(57423),y=n(89490),Y=n(57820),w=n(63136);function C(e){let{value:t,isValid:n,isValidating:i,errors:l,onChange:a}=e,{iString:o}=(0,s.GO)(),d=l.length>0;return(0,r.FD)(f.A0,{children:[(0,r.FD)(p.fI,{gap:12,alignItems:"center",children:[(0,r.Y)(f.ks,{type:"text",name:"subdomain",id:"subdomain",flex:"grow",value:t,autofocus:!0,autocomplete:"off",onInput:e=>{a(e.target.value)},placeholder:o("Enter your URL"),error:d,trailing:(0,r.Y)(_,{value:t,isValid:n,isValidating:i,errors:l})}),(0,r.Y)(w.EY.B3,{color:"secondary",children:".substack.com"})]}),d?l.map(e=>(0,r.Y)(h.yn,{children:e.msg},e.msg)):(0,r.Y)(y.az,{height:20})]})}function _(e){let{value:t,isValid:n,isValidating:i,errors:l}=e;return 0===t.length?null:i?(0,r.Y)(E,{}):l.length>0?(0,r.Y)(k,{}):n?(0,r.Y)(A,{}):null}function E(){return(0,r.Y)(Y.Oy,{padding:0,size:20})}function k(){return(0,r.Y)(v.A,{size:16,stroke:"var(--color-semantic-error-fg-primary) !important"})}function A(){return(0,r.Y)(b.A,{size:16,stroke:"var(--color-semantic-success-fg-primary) !important"})}var D=n(69277),T=n(70408),S=n(94729);function I(e){var t;let n=[];return null==e||null==(t=e.errors)||t.forEach(t=>{!t.msg||e.errors&&e.errors.length>1&&"Please enter a valid web URL (letters and numbers only)"===t.msg||n.push({msg:t.msg})}),(null==e?void 0:e.error)&&n.push({msg:e.error}),n}var L=n(48239),R=n(61554),x=n(78979),O=n(82776);function P(){let{user:e,goToStep:t,entry:n,setStepData:l}=(0,L.zz)(),{iString:v}=(0,s.GO)(),b=(0,i.useRef)(null),[y,Y]=(0,i.useState)(""),[w,_]=(0,i.useState)([]),[E,k]=(0,i.useState)(!1),{isValid:A,errors:P,isValidating:N}=function(e){let[t,n]=(0,i.useState)({isValid:!1,errors:[],isValidating:!1}),{refetch:r}=(0,c.st)({pathname:"/api/v1/check_subdomain",auto:!1,deps:[]}),l=(0,i.useRef)(r);l.current=r;let a=(0,i.useRef)(e);return a.current=e,(0,i.useEffect)(()=>{if(0===e.length)return void n({isValid:!1,errors:[],isValidating:!1});n(e=>(0,T._)((0,D._)({},e),{isValidating:!0}));let t=setTimeout(async()=>{if(a.current!==e)return void n(e=>(0,T._)((0,D._)({},e),{isValidating:!1}));try{let t=await l.current({query:{subdomain:e}});if(a.current!==e)return void n(e=>(0,T._)((0,D._)({},e),{isValidating:!1}));if(t instanceof Error){let e=t instanceof S.fk?t.body:null;n({isValid:!1,errors:I(e),isValidating:!1})}else(null==t?void 0:t.available)?n({isValid:!0,errors:[],isValidating:!1}):n({isValid:!1,errors:[{msg:"This URL is taken. Please try another."}],isValidating:!1})}catch(t){a.current===e&&n({isValid:!1,errors:[],isValidating:!1})}},500);return()=>clearTimeout(t)},[e]),t}(y),{result:F,hasLoadedOnce:M}=(0,c.st)({pathname:"/api/v1/publication/suggestion",auto:!0,deps:[]});(0,i.useEffect)(()=>{M&&(null==F?void 0:F.subdomain)&&Y(F.subdomain)},[M,F]);let B=[...P,...w],U=A&&0===w.length,z=async()=>{var r,i,o,s,c,u;try{let o=(await a().post("/api/v1/publication").send({name:"".concat((0,O.guessFirstName)(null!=(i=null==e?void 0:e.name)?i:null)||"My"," Publication"),subdomain:y,hero_text:"Welcome to my publication",tos:!0,captcha_response:E&&(null==b||null==(r=b.current)?void 0:r.getResponse())})).body;(0,d.u4)(d.qY.READER_ONBOARDING_CREATE_PUBLICATION_STEP_COMPLETED,{entry:n,subdomain:y}),l(x.dn.CREATE_PUBLICATION,{createdPub:o}),t(x.dn.CREATE_PUBLICATION_SUCCESS)}catch(e){if((0,d.u4)(d.qY.READER_ONBOARDING_CREATE_PUBLICATION_STEP_ERROR,{entry:n,message:null!=(c=e.message)?c:"Unknown error"}),(null==(o=e.response)?void 0:o.statusCode)===401){k(!0),_([]);return}_(I(null!=(u=null==(s=e.response)?void 0:s.body)?u:null))}};return(0,r.FD)(r.FK,{children:[(0,r.Y)(g.rQ,{title:v("Claim your URL"),description:v("Choose a home for your new Substack."),icon:(0,r.Y)(g.Ud,{}),showClose:!1,alignItems:"center"}),(0,r.FD)(m.cw,{gap:20,paddingTop:40,children:[(0,r.Y)(C,{value:y,isValid:U,isValidating:N,errors:B,onChange:e=>{Y(e),_([])}}),E&&(0,r.FD)(f.A0,{children:[(0,r.Y)(o.A,{ref:b}),(0,r.Y)(h.yn,{children:v("Please complete the captcha to continue")})]})]}),(0,r.Y)(m.jl,{direction:"column",showDivider:!0,primaryButton:(0,r.Y)(u.$n,{onClick:z,disabled:!U,children:v("Continue")}),secondaryButton:(0,r.Y)(p.VP,{children:(0,r.Y)(R.U,{includeCheckbox:!1,addPublisherPreamble:!0,color:"secondary",textAlign:"center"})})})]})}},78856:function(e,t,n){n.d(t,{E:()=>y});var r=n(4006),i=n(17402),l=n(8853),a=n(84605),o=n(46271),s=n(86500),d=n(94729),c=n(35369),u=n(33727),p=n(76977),h=n(16993),m=n(84843),g=n(95477),f=n(63136),v=n(48239),b=n(78979);function y(){let{entry:e,goToStep:t,setStepData:n}=(0,v.zz)(),{iString:l}=(0,a.GO)(),[u,g]=(0,i.useState)("consumer"),{changeSetting:f}=(0,o.ur)(),y=t=>{(0,s.u4)(s.qY.READER_ONBOARDING_INTENT_SELECTED,{entry:e,intent:t}),g(t)},C=async()=>{if((0,s.u4)(s.qY.READER_ONBOARDING_INTENT_STEP_COMPLETED,{entry:e,intent:u}),"consumer"===u)t(b.dn.WELCOME);else{let[e,r]=await Promise.all([f("hasSelfIdentifiedAsCreator",!0,"bool"),(0,d.x6)("/api/v1/publication_user/get_or_create_primary",{method:"POST",json:{personal_pub_trigger:"onboarding_creator_intent"}})]);"primary_pub"in r?(n(b.dn.CREATOR_CHOICE,{primaryPub:r.primary_pub}),t(b.dn.CREATOR_WELCOME)):(console.error("Failed to create a primary pub for creator onboarding",{createPubResponse:r}),t(b.dn.WELCOME))}};return(0,r.FD)(r.FK,{children:[(0,r.Y)(h.rQ,{title:l("Where do you want to start?"),description:l("We'll tailor your setup experience accordingly."),showClose:!1,icon:(0,r.Y)(m.Ud,{}),alignItems:"center"}),(0,r.Y)(h.cw,{children:(0,r.FD)(p.VP,{gap:12,children:[(0,r.Y)(Y,{title:l("Discover"),description:l("Find ideas that inspire you."),value:"consumer",currentValue:u,onClick:y,image:(0,r.Y)(w,{src:"/img/onboarding/onboarding-compass.png",alt:"Discover"})}),(0,r.Y)(Y,{title:l("Create"),description:l("Share your work with the world."),value:"creator",currentValue:u,onClick:y,image:(0,r.Y)(w,{src:"/img/onboarding/onboarding-brush.png",alt:"Create"})})]})}),(0,r.Y)(h.jl,{direction:"column",primaryButton:(0,r.Y)(c.$n,{onClick:C,children:l("Continue")})})]})}function Y(e){let{title:t,description:n,image:i,value:l,currentValue:a,onClick:o}=e,s=a===l;return(0,r.Y)(u.Z,{as:"label",direction:"row",padding:16,gap:12,cursor:"pointer",pressable:"lg",tabIndex:0,showFocus:!0,elevated:!0,animate:!0,alignItems:"center",userSelect:"none",onClick:e=>{o(l),e.preventDefault()},children:(0,r.FD)(p.fI,{flex:"grow",gap:12,alignItems:"center",children:[(0,r.Y)(p.ov,{flex:"auto",children:i}),(0,r.FD)(p.VP,{gap:2,flex:"grow",children:[(0,r.Y)(f.EY.B3,{weight:"medium",children:t}),(0,r.Y)(f.EY.B4,{color:"secondary",children:n})]}),(0,r.Y)(g.s,{value:l,checked:s})]})})}function w(e){let{src:t,alt:n}=e;return(0,r.Y)(l.c,{aspectRatio:"square",src:t,width:48,alt:n,radius:"sm",outline:"detail"})}},65253:function(e,t,n){n.d(t,{J:()=>f});var r=n(4006),i=n(17402),l=n(72880),a=n(84605),o=n(86500),s=n(68349),d=n(35369),c=n(76977),u=n(16993),p=n(84843),h=n(48239),m=n(78979),g=n(39318);function f(){var e;let{iString:t}=(0,a.GO)(),{goToStep:n,trackSuccessfulCompletion:f,entry:v,state:b}=(0,h.zz)(),y=null==(e=b.previousStepData[m.dn.CREATOR_CHOICE])?void 0:e.primaryPub,Y=(0,i.useCallback)(()=>{if(!y)return;(0,o.u4)(o.qY.READER_ONBOARDING_CREATOR_WELCOME_CTA_CLICKED,{entry:v,action:"go_to_dashboard"}),f();let e=(0,g.Z96)(y,{addBase:!0});(0,s.V2)(e)},[v,y,f]),w=(0,i.useCallback)(()=>{(0,o.u4)(o.qY.READER_ONBOARDING_CREATOR_WELCOME_CTA_CLICKED,{entry:v,action:"maybe_later"}),n(m.dn.EXIT)},[v,n]);return y?(0,r.FD)(r.FK,{children:[(0,r.Y)(p.Io,{showClose:!1,image:(0,r.Y)(c.ov,{children:(0,r.Y)(l.o,{src:(0,g.dJ9)("/img/reader_onboarding/car.png",264),maxWidth:200,useRetinaSizing:!0,imageIsFixedWidth:!0})})}),(0,r.Y)(p.rQ,{title:t("You're all set!"),description:t("Next, head to your dashboard to tell the world about your new Substack."),alignItems:"center",showClose:!1}),(0,r.Y)(u.q1,{}),(0,r.Y)(u.jl,{direction:"column",primaryButton:(0,r.Y)(d.$n,{onClick:Y,children:t("Visit dashboard")}),secondaryButton:(0,r.Y)(d.$n,{priority:"secondary",onClick:w,children:t("Maybe later")})})]}):(console.error("A primary pub is required for the CREATOR_WELCOME step"),n(m.dn.WELCOME),null)}},59849:function(e,t,n){n.d(t,{n:()=>m});var r=n(79785),i=n(4006),l=n(84605),a=n(86500),o=n(35369),s=n(16993),d=n(84843),c=n(48239),u=n(78979);function p(){let e=(0,r._)(["Posts from "," and others you subscribe to will now appear in your inbox."]);return p=function(){return e},e}function h(){let e=(0,r._)(["Posts from "," and others you subscribe to will now appear in your inbox."]);return h=function(){return e},e}function m(){let{pub:e,profile:t,entry:n,goToStep:r}=(0,c.zz)(),{iString:m,iTemplate:g}=(0,l.GO)(),f=t?g(p(),t.name):e?g(h(),e.name):m("Posts from the people you subscribe to will now appear in your inbox.");return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.rQ,{title:m("You're all set!"),description:f,showClose:!1,alignItems:"center",icon:(0,i.Y)(d.Ud,{})}),(0,i.Y)(s.q1,{}),(0,i.Y)(s.jl,{direction:"column",primaryButton:(0,i.Y)(o.$n,{onClick:()=>{(0,a.u4)(a.qY.READER_ONBOARDING_START_READING_CLICKED,{entry:n}),r(u.dn.EXIT)},children:m("Done")})})]})}},31623:function(e,t,n){n.d(t,{z:()=>p});var r=n(4006),i=n(418),l=n(84605),a=n(86500),o=n(35369),s=n(16993),d=n(84843),c=n(48239),u=n(78979);function p(){let{goToStep:e,entry:t}=(0,c.zz)(),{iString:n}=(0,l.GO)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.rQ,{title:n("Oops, something went wrong"),description:n("Please exit and try again later."),showClose:!1,alignItems:"center",icon:(0,r.Y)(d.qx,{bg:"accent-red",icon:(0,r.Y)(i.A,{stroke:"var(--color-semantic-error-fg-primary)"})})}),(0,r.Y)(s.q1,{}),(0,r.Y)(s.jl,{showDivider:!0,direction:"column",primaryButton:(0,r.Y)(o.$n,{priority:"secondary",onClick:()=>{(0,a.u4)(a.qY.READER_ONBOARDING_ERROR_STEP_DISMISSED,{entry:t}),e(u.dn.EXIT)},children:n("Done")})})]})}},78394:function(e,t,n){n.d(t,{e:()=>p});var r=n(4006),i=n(5109),l=n(84605),a=n(46271),o=n(86500),s=n(16993),d=n(84843),c=n(48239),u=n(78979);function p(){let{user:e,goToStep:t,entry:n,redirectAfterProfile:p}=(0,c.zz)(),{iString:h}=(0,l.GO)(),{setUser:m}=(0,a.ur)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.rQ,{title:h("Tell us about yourself"),description:h("Add your name, a profile picture, and a bit more about who you are."),showClose:!1,alignItems:"center",icon:(0,r.Y)(d.Ud,{})}),(0,r.Y)(s.cw,{children:(0,r.Y)(i.dx,{className:"updater-QKNUYI",pageTitle:null,user:e,freeSignup:!0,optionalPhoto:!0,onSuccess:e=>{(0,o.u4)(o.qY.READER_ONBOARDING_PROFILE_SETUP_COMPLETED,{entry:n});let r=null==e?void 0:e.body;r&&m(r),p?t(u.dn.EXIT):t(u.dn.APP_UPSELL)},complete:!0,text:h("Continue")})})]})}},55556:function(e,t,n){n.d(t,{U:()=>T});var r=n(69277),i=n(79785),l=n(4006),a=n(17402),o=n(84605),s=n(46271),d=n(92905),c=n(86500),u=n(1683),p=n(12501),h=n(35369),m=n(76977),g=n(87834),f=n(12601),v=n(84843),b=n(81203),y=n(63136),Y=n(28958),w=n(54768),C=n(48239),_=n(61554),E=n(40659),k=n(78979),A=n(39318);function D(){let e=(0,i._)(["Subscribe to ",""]);return D=function(){return e},e}function T(){let{pub:e,user:t,profile:n,goToStep:i,entry:T,skipCategories:S}=(0,C.zz)(),{iString:I,iTemplate:L}=(0,o.GO)(),{setUser:R}=(0,s.ur)(),x=(0,E.rG)(),[O,P]=(0,a.useState)(""),[N,F]=(0,a.useState)(!1),[M,B]=(0,a.useState)(!1),[U,z]=(0,a.useState)(!1),{isLoading:j,refetch:G}=(0,p.st)({pathname:"/api/v1/reader/signup/pub",method:"POST",auto:!1,deps:[]}),{trackInputFilled:H,trackSubmitPressed:V,trackError:W}=(0,d.a)("Reader Onboarding Pub Signup Form");if(!e)return null;let q=async n=>{n.preventDefault(),V(),B(!1);let l=(0,r._)({email:O,source:"".concat(T,"-reader-onboarding"),publication_id:String(e.id),noWelcomeEmail:"true",first_url:u.R9,first_referrer:u.b7,first_session_url:u.K0,first_session_referrer:u.OG,current_url:u.AT||"",current_referrer:u.uC||""},x),a=await G({json:l});a instanceof Error?W(a):a.user_exists?B(!0):(!t&&a.user&&R(a.user),a.requires_confirmation?((0,c.u4)(c.qY.READER_ONBOARDING_PUB_SIGNUP_FAILED,{reason:"requires_confirmation",entry:T}),z(!0)):((0,c.u4)(c.qY.READER_ONBOARDING_PUB_SIGNUP_SUCCEEDED,{entry:T}),i(S?k.dn.PROFILE:k.dn.CATEGORIES)))};return U?(0,l.Y)(Y.f,{email:O,onRetry:()=>z(!1)}):(0,l.FD)(l.FK,{children:[(0,l.Y)(v.rQ,{title:n?I("Sign up to subscribe"):L(D(),e.name),description:(0,l.FD)(l.FK,{children:[I("Already have an account? "),(0,l.Y)(y.Yq,{color:"substack",decoration:"hover-underline",href:(0,A.a7q)({for_pub:e.subdomain}),native:!0,children:I("Sign in")})]}),showClose:!1,alignItems:"center",icon:(0,l.Y)(b.Nq,{pub:e,size:48})}),(0,l.FD)("form",{onSubmit:q,children:[(0,l.FD)(g.c,{gap:20,children:[(0,l.Y)(w.D,{email:O,onEmailChange:P,onBlur:H,signInUrl:(0,A.a7q)({for_pub:e.subdomain,email:O}),showUserExistsError:M}),(0,l.Y)(m.VP,{children:(0,l.Y)(_.U,{checked:N,onCheckboxChange:F,addSignupPreamble:!0})})]}),(0,l.Y)(f.jl,{direction:"column",primaryButton:(0,l.Y)(h.$n,{disabled:!N||!O,loading:j,type:"submit",priority:"primary",children:I("Subscribe")})})]})]})}},52943:function(e,t,n){n.d(t,{V:()=>g});var r=n(4006),i=n(72880),l=n(84605),a=n(86500),o=n(68349),s=n(35369),d=n(76977),c=n(16993),u=n(84843),p=n(48239),h=n(78979),m=n(39318);function g(){let{goToStep:e,trackSuccessfulCompletion:t,entry:n,state:g}=(0,p.zz)(),{previousStepData:f}=g,{iString:v}=(0,l.GO)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(u.Io,{showClose:!1,image:(0,r.Y)(d.ov,{children:(0,r.Y)(i.o,{src:(0,m.dJ9)("/img/reader_onboarding/car.png",264),maxWidth:200,useRetinaSizing:!0,imageIsFixedWidth:!0})})}),(0,r.Y)(u.rQ,{title:v("You're all set!"),description:v("Next, head to your dashboard to tell the world about your new Substack."),alignItems:"center",showClose:!1}),(0,r.Y)(c.q1,{}),(0,r.Y)(c.jl,{direction:"column",primaryButton:(0,r.Y)(s.$n,{onClick:()=>{var e;(0,a.u4)(a.qY.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_COMPLETED,{entry:n});let r=null==(e=f[h.dn.CREATE_PUBLICATION])?void 0:e.createdPub;if(r){t();let e=(0,m.Z96)(r,{addBase:!0});(0,o.V2)(e)}},children:v("Visit dashboard")}),secondaryButton:(0,r.Y)(s.$n,{priority:"secondary",onClick:()=>{(0,a.u4)(a.qY.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_SKIPPED,{entry:n}),e(h.dn.APP_UPSELL)},children:v("Maybe later")})})]})}},23576:function(e,t,n){n.d(t,{a:()=>m});var r=n(4006),i=n(72880),l=n(84605),a=n(86500),o=n(35369),s=n(76977),d=n(16993),c=n(84843),u=n(48239),p=n(78979),h=n(39318);function m(){let{goToStep:e,entry:t}=(0,u.zz)(),{iString:n}=(0,l.GO)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(c.Io,{showClose:!1,image:(0,r.Y)(s.ov,{children:(0,r.Y)(i.o,{src:(0,h.dJ9)("/img/reader_onboarding/jobpage_penholder.png",264),maxWidth:200,useRetinaSizing:!0,imageIsFixedWidth:!0})})}),(0,r.Y)(c.rQ,{title:n("Want to start writing on Substack?"),description:n("Write posts, grow your audience, and make money on Substack"),alignItems:"center",showClose:!1}),(0,r.Y)(d.q1,{}),(0,r.Y)(d.jl,{direction:"column",primaryButton:(0,r.Y)(o.$n,{onClick:()=>{(0,a.u4)(a.qY.READER_ONBOARDING_START_WRITING_STEP_CONTINUED,{entry:t}),e(p.dn.CREATE_PUBLICATION)},children:n("Create my publication")}),secondaryButton:(0,r.Y)(o.$n,{priority:"secondary",onClick:()=>{(0,a.u4)(a.qY.READER_ONBOARDING_START_WRITING_STEP_SKIPPED,{entry:t}),e(p.dn.APP_UPSELL)},children:n("Skip for now")})})]})}},67749:function(e,t,n){n.d(t,{n:()=>k});var r=n(4006),i=n(17402),l=n(15734),a=n.n(l),o=n(52820),s=n(84605),d=n(46271),c=n(92905),u=n(86500),p=n(12501),h=n(35369),m=n(76977),g=n(87834),f=n(12601),v=n(84843),b=n(63136),y=n(28958),Y=n(54768),w=n(48239),C=n(61554),_=n(78979),E=n(39318);function k(){var e;let{user:t,goToStep:n,entry:l,state:k,skipCategories:A}=(0,w.zz)(),{previousStepData:D}=k,{iString:T}=(0,s.GO)(),{setUser:S}=(0,d.ur)(),{refreshExperimentVariants:I}=(0,o.Wk)(),[L,R]=(0,i.useState)(""),[x,O]=(0,i.useState)(!1),[P,N]=(0,i.useState)(!1),[F,M]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t&&!D[_.dn.CATEGORIES]&&n(_.dn.CATEGORIES)},[t,n,D]);let{isLoading:B,refetch:U}=(0,p.st)({pathname:"/api/v1/reader/signup/just_email",method:"POST",auto:!1,deps:[]}),{trackInputFilled:z,trackSubmitPressed:j,trackError:G}=(0,c.a)("Reader Onboarding Signup Form"),H=D[_.dn.CATEGORIES]&&(null==(e=D[_.dn.CATEGORIES])?void 0:e.publications.length),V=async e=>{var r,i,o,s,d;e.preventDefault(),j(),N(!1);let c=null!=(o=null==(r=D[_.dn.CATEGORIES])?void 0:r.publications)?o:[],p=null!=(s=null==(i=D[_.dn.CATEGORIES])?void 0:i.selectedCategoryIds)?s:[],h={email:L,publicationIds:c.join(","),selectedCategoryIds:p.join(",")},m=await U({json:h});if(m instanceof Error)return void G(m);if(m.userExists)return void N(!0);if(m.emailConfirmationRequired)return void M(!0);try{await I()}catch(e){}if((0,u.u4)(u.qY.READER_ONBOARDING_SIGNUP_SUCCEEDED,{entry:l}),!t&&m.user&&S(m.user),D[_.dn.CATEGORIES]){m.userExists?n(_.dn.APP_UPSELL):n(_.dn.PROFILE);let e=null==(d=D[_.dn.CATEGORIES])?void 0:d.publications;(null==e?void 0:e.length)?(await a().post("/api/v1/bulk_signup").send({publications:e,source:"".concat(l,"-reader-onboarding"),email:L}),(0,u.u4)(u.qY.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:l,numberOfSubscriptions:e.length,recommendationsFrom:"categories"})):(0,u.u4)(u.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:l,recommendationsFrom:"categories"})}else A?n(_.dn.PROFILE):n(_.dn.CATEGORIES)};return F?(0,r.Y)(y.f,{email:L,onRetry:()=>M(!1)}):(0,r.FD)(r.FK,{children:[(0,r.Y)(v.rQ,{title:T("Sign up to subscribe"),description:(0,r.FD)(r.FK,{children:[T("Already have an account? "),(0,r.Y)(b.Yq,{color:"substack",decoration:"hover-underline",href:(0,E.fxv)(),native:!0,children:T("Sign in")})]}),showClose:!1,alignItems:"center",icon:(0,r.Y)(v.Ud,{})}),(0,r.FD)("form",{onSubmit:V,children:[(0,r.FD)(g.c,{gap:20,children:[(0,r.Y)(Y.D,{email:L,onEmailChange:R,onBlur:z,signInUrl:(0,E.fxv)(),showUserExistsError:P}),(0,r.Y)(m.VP,{children:(0,r.Y)(C.U,{checked:x,onCheckboxChange:O,addSignupPreamble:!0})})]}),(0,r.Y)(f.jl,{direction:"column",primaryButton:(0,r.Y)(h.$n,{disabled:!x||!L,loading:B,type:"submit",priority:"primary",children:T(H?"Sign up and Subscribe":"Sign up")})})]})]})}},44407:function(e,t,n){n.d(t,{_:()=>S});var r=n(4006),i=n(418),l=n(17402),a=n(15734),o=n.n(a),s=n(52820),d=n(84605),c=n(86500),u=n(12501),p=n(35369),h=n(97515),m=n(16993),g=n(84843),f=n(57820),v=n(48239),b=n(82772),y=n(60322),Y=n(16074),w=n(76977),C=n(81203),_=n(63136);function E(e){let{pubs:t,selected:n,setSelected:i,onRecommendationsFirstVisible:a,showSelectAll:o=!0}=e,{iString:s}=(0,d.GO)();return(0,r.FD)(w.VP,{children:[o&&(0,r.Y)(w.fI,{justifyContent:"end",paddingBottom:12,pullX:6,children:(0,r.Y)(p.$n,{priority:"quaternary",size:"xs",onClick:()=>{n.length<t.length?i(t.map(e=>{let{id:t}=e;return t})):i([]),(0,c.u4)(c.qY.ALL_ONBOARDING_PUBLICATIONS_TOGGLED,{surface:"reader_onboarding",action:n.length<t.length?"select_all":"unselect_all",pubIds:t.map(e=>{let{id:t}=e;return t})})},children:s(n.length<t.length?"Select all":"Deselect all")})}),(0,r.Y)(w.VP,{children:t.map((e,t)=>(0,r.FD)(l.Fragment,{children:[t>0&&(0,r.Y)(Y.c,{}),(0,r.Y)(k,{pub:e,index:t,selected:n.includes(e.id),toggleSelected:()=>{var t;let r;return t=e.id,r=!1,void(n.includes(t)?i(n.filter(e=>e!==t)):(i([...n,t]),r=!0),(0,c.u4)(c.qY.READER_ONBOARDING_RECOMMENDED_PUB_TOGGLED,{surface:"reader_onboarding",publication_id:t,added:r}))},onRecommendationsFirstVisible:a})]},e.id))})]})}function k(e){var t;let{pub:n,selected:i,index:a,toggleSelected:o,onRecommendationsFirstVisible:s}=e,d=(0,l.useRef)(null);return(0,b.S8)(d,()=>{s&&s(n,a)},{threshold:.5}),(0,r.FD)(w.fI,{ref:d,as:"label",flex:"grow",hover:!0,pressable:"lg",cursor:"pointer",userSelect:"none",alignItems:"start",paddingY:12,justifyContent:"space-between",gap:12,children:[(0,r.Y)(C.Nq,{pub:n,logoUrl:n.imageUrl,publicationName:n.name}),(0,r.FD)(w.VP,{justifyContent:"start",alignItems:"start",gap:2,flex:"grow",children:[(0,r.Y)(_.EY.B3,{weight:"medium",children:n.name}),(0,r.Y)(_.EY.B4,{color:"secondary",children:null==(t=n.subtitle)?void 0:t.replace(/^by /,"")}),n.description&&(0,r.Y)(_.EY.B4,{color:"secondary",textAlign:"left",children:n.description})]}),(0,r.Y)(y.S,{checked:i,onChange:o,size:"sm"})]})}var A=n(78979),D=n(38018),T=n(74167);function S(){var e,t;let{goToStep:n,handleError:i,entry:a,user:p,setStepData:h,state:f}=(0,v.zz)(),{previousStepData:b}=f,{iString:y}=(0,d.GO)(),{getExperimentVariant:Y,exposeExperiment:w}=(0,s.Wk)(),C="treatment"===Y("onboarding_show_all_suggestions_web"),_=null!=(t=null==b||null==(e=b.CATEGORIES)?void 0:e.selectedCategoryIds)?t:[],[k,T]=(0,l.useState)([]),[S,O]=(0,l.useState)([]),[P,N]=(0,l.useState)(!1),{result:F,isLoading:M,refetch:B}=(0,u.st)({pathname:"/api/v1/onboarding/recommended",auto:!1});(0,l.useEffect)(()=>{_.length>0&&B({query:{categoryIds:JSON.stringify(_)}}).catch(e=>{i(e,{ignore:!0})})},[]),(0,l.useEffect)(()=>{if(F&&!M){let e=x(F,C?1e3:D.l);0===e.length&&(0,c.u4)(c.qY.READER_ONBOARDING_CATEGORIES_ERROR,{entry:a,error:"No recommendations found"}),T(e),e.some(e=>737237===e.id)&&O([737237]),w("onboarding_show_all_suggestions_web")}},[F,M,a,C,w]);let U=async()=>{let e=p?p.profile_set_up_at?p.has_publication?A.dn.APP_UPSELL:A.dn.START_WRITING:A.dn.PROFILE:A.dn.SIGNUP;if(S.length>0)try{N(!0),(0,c.u4)(c.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SELECTED_IN_UI,{entry:a,numberOfSubscriptions:S.length,recommendationsFrom:"model"}),p?(await o().post("/api/v1/bulk_signup").send({publications:S,source:"reader2-onboarding-modal"}),(0,c.u4)(c.qY.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:a,numberOfSubscriptions:S.length,recommendationsFrom:"model"})):h(A.dn.CATEGORIES,{publications:S,selectedCategoryIds:_}),n(e)}catch(e){(0,c.u4)(c.qY.READER_ONBOARDING_CATEGORIES_ERROR,{entry:a,error:e}),i(e,{ignore:!1})}finally{N(!1)}else p?(0,c.u4)(c.qY.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:a,recommendationsFrom:"model"}):h(A.dn.CATEGORIES,{publications:[],selectedCategoryIds:_}),n(e)};return(0,r.FD)(r.FK,{children:[(0,r.Y)(m.rQ,{title:y("Subscribe to a few Substacks"),description:y("We recommend starting with at least 3 subscriptions."),showClose:!1,alignItems:"center",icon:(0,r.Y)(g.Ud,{})}),(0,r.Y)(m.cw,{children:M?(0,r.Y)(I,{}):k.length>0?(0,r.Y)(E,{pubs:k,selected:S,setSelected:O,onRecommendationsFirstVisible:(e,t)=>{(0,c.u4)(c.qY.READER_ONBOARDING_PUB_RECOMMENDED,{entry:a,publication_id:e.id,suggestion_rank:t,recommendationFrom:"model"})},showSelectAll:!C}):(0,r.Y)(L,{})}),!M&&(0,r.Y)(m.jl,{showDivider:!0,direction:"column",primaryButton:(0,r.Y)(R,{selectedPubs:S,onClick:U,loading:P})})]})}function I(){return(0,r.Y)(f.y$,{flex:"grow",minHeight:320})}function L(){let{iString:e}=(0,d.GO)();return(0,r.Y)(h.p,{title:e("Error loading recommendations"),description:e("Please try again later."),icon:(0,r.Y)(i.A,{})})}function R(e){let{selectedPubs:t,onClick:n,loading:i}=e,{iString:l,iPlural:a}=(0,d.GO)(),o=0===t.length,s=o?l("Continue without subscribing"):a("Subscribe and continue","Subscribe to %1 and continue",t.length);return(0,r.Y)(p.$n,{priority:o?"secondary-accent":"primary",onClick:n,loading:i,children:s})}let x=function(e){var t,n,r,i,l;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.l,o=[],s=new Set,d=null==e||null==(t=e.collections.find(e=>(null==e?void 0:e.title)===T.w))?void 0:t.publications;if(d&&(o=d.slice(0,a)).forEach(e=>s.add(e.id)),o.length<a){let t=(null==e||null==(n=e.collections)?void 0:n.length)||0;if(t>=3){let t=0;for(;o.length<a;){let n=!1;for(let i=0;i<3;i++){let l=null==e?void 0:e.collections[i],d=null==l||null==(r=l.publications)?void 0:r[t];if(d&&!s.has(d.id)&&(o.push(d),n=!0,s.add(d.id),o.length>=a))break}if(!n)break;t++}}else{let n=0;for(;o.length<a;){let r=Math.floor(n/t),a=null==e||null==(i=e.collections)?void 0:i[n%t],d=null==a||null==(l=a.publications)?void 0:l[r];if(!d)break;!s.has(d.id)&&(o.push(d),s.add(d.id),n++)}}}return o}},66929:function(e,t,n){n.d(t,{w:()=>o});var r=n(4006),i=n(17159),l=n.n(i),a=n(53448);function o(e){var t,n,i,o,s,d,c,u,p,h,m;let{recipe:g,postInfo:f}=e,v={"@context":"https://schema.org/","@type":"Recipe",name:g.name,image:g.image_url?[g.image_url]:[],author:{"@type":"Person",name:(null==(t=f.publishedBylines)?void 0:t.filter(e=>e.name).map(e=>e.name).join(", "))||""},datePublished:f.post_date,description:(null==(n=g.metadata)?void 0:n.description)||void 0,recipeIngredient:g.ingredients||[],recipeInstructions:(g.steps||[]).map((e,t)=>({"@type":"HowToStep",text:(0,a.J9)(e),position:t+1}))};g.metadata.prepTime>0&&(v.prepTime=(0,a.Xn)(g.metadata.prepTime)),g.metadata.cookTime>0&&(v.cookTime=(0,a.Xn)(g.metadata.cookTime)),g.metadata.totalTime>0&&(v.totalTime=(0,a.Xn)(g.metadata.totalTime)),(null==(i=g.metadata)?void 0:i.recipeYield)&&(v.recipeYield=(0,a.jQ)(g.metadata.recipeYield));let b=null!=(u=null==(o=g.metadata)?void 0:o.keywords)?u:[];b.length>0&&(v.keywords=b.join(", "));let y=null!=(p=null==(s=g.metadata)?void 0:s.category)?p:[];y.length>0&&(v.recipeCategory=y.join(", "));let Y=null!=(h=null==(d=g.metadata)?void 0:d.cuisine)?h:[];Y.length>0&&(v.recipeCuisine=Y.join(", "));let w=null!=(m=null==(c=g.metadata)?void 0:c.diet)?m:[];return 1===w.length?v.suitableForDiet="https://schema.org/".concat(w[0]):w.length>1&&(v.suitableForDiet=w.map(e=>"https://schema.org/".concat(e))),Object.keys(v).forEach(e=>{void 0===v[e]&&delete v[e]}),(0,r.Y)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:l()(v,{json:!0,isSecureContext:!0})}})}},8321:function(e,t,n){n.d(t,{Y:()=>a});var r=n(4006),i=n(31583),l=n(13086);let a=e=>(0,r.Y)(i.VR,{"data-drag-handle":"",children:(0,r.Y)(l.R,{node:e.node,staticData:e.staticData})})},13086:function(e,t,n){n.d(t,{g:()=>eY,R:()=>ef});var r=n(69277),i=n(70408),l=n(4006),a=n(17402),o=n(84605),s=n(12501),d=n(89490),c=n(33727),u=n(16074),p=n(76977),h=n(57820),m=n(63136),g=n(21258),f=n(76171),v=n(65842),b=n(97213),y=n(66511);function Y(e){let{title:t,text:n}=e;return(0,l.Y)(y.m_,{title:t,text:n,children:(0,l.Y)(d.az,{cursor:"pointer",children:(0,l.Y)(b.A,{size:16,stroke:"var(--color-fg-tertiary)"})})})}function w(e){let{values:t,setValues:n,initialOptions:r=[]}=e;return{options:(0,a.useMemo)(()=>{let e=new Map;return r.forEach(t=>e.set(C(t.value),t)),t.forEach(t=>{e.has(C(t))||e.set(C(t),{value:t,label:t})}),Array.from(e.values())},[r,t]),handleCreate:e=>{t.some(t=>C(t)===C(e))||n([...t,e])},handleChange:e=>{n(e)}}}let C=e=>e.toLowerCase();var _=n(53448);function E(e){let{category:t,setCategory:n}=e,{iString:r}=(0,o.GO)(),i=(0,_.BB)(),a=null!=t?t:[],{options:s,handleCreate:d,handleChange:c}=w({values:a,setValues:n,initialOptions:i});return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.FD)(p.fI,{justifyContent:"space-between",children:[(0,l.Y)(f.JU,{htmlFor:"category",children:r("Category")}),(0,l.Y)(Y,{title:r("Category"),text:r("The type of meal or course your recipe is about. Note that only the first category will be used for SEO.")})]}),(0,l.Y)(g.K,{options:s,value:a,onChange:c,placeholder:r("e.g. Appetizers, desserts"),onCreate:d})]})}function k(e){let{cuisine:t,setCuisine:n}=e,{iString:r}=(0,o.GO)(),i=(0,_.rU)(),a=null!=t?t:[],{options:s,handleCreate:d,handleChange:c}=w({values:a,setValues:n,initialOptions:i});return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.FD)(p.fI,{justifyContent:"space-between",children:[(0,l.Y)(f.JU,{htmlFor:"cuisine",children:r("Cuisine")}),(0,l.Y)(Y,{title:r("Cuisine"),text:r("The region(s) associated with your recipe")})]}),(0,l.Y)(g.K,{options:s,value:a,onChange:c,placeholder:r("e.g. Italian, Thai"),onCreate:d})]})}var A=n(47784);function D(e){let{description:t,setDescription:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(v.A0,{children:[(0,l.Y)(f.JU,{htmlFor:"description",children:r("Description")}),(0,l.Y)(A.A,{id:"description",value:t,onChange:e=>n(e.currentTarget.value),placeholder:r("Add a description"),defaultRows:4})]})}function T(e){let{diet:t,setDiet:n}=e,{iString:r}=(0,o.GO)(),i=(0,_.fb)(),a=null!=t?t:[],{options:s,handleCreate:d,handleChange:c}=w({values:a,setValues:n,initialOptions:i});return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.FD)(p.fI,{justifyContent:"space-between",children:[(0,l.Y)(f.JU,{htmlFor:"diet",children:r("Diet")}),(0,l.Y)(Y,{title:r("Diet"),text:r("Dietary restrictions or guidelines for which this recipe is suitable")})]}),(0,l.Y)(g.K,{options:s,value:a,onChange:c,placeholder:r("Select or create a diet"),onCreate:d})]})}var S=n(35369),I=n(32708),L=n(21436),R=n(75303);let x=e=>{let{item:t,setItem:n,removeItem:r,placeholder:i,dragListeners:a,canDelete:o=!0}=e;return(0,l.FD)(N,{children:[(0,l.Y)(P,{listeners:a}),(0,l.Y)(A.A,{value:t,onChange:e=>n(e.currentTarget.value),placeholder:i,defaultRows:1}),o&&(0,l.Y)(O,{onClick:r})]})};function O(e){let{onClick:t}=e;return(0,l.Y)(S.K0,{onClick:t,priority:"quaternary",children:(0,l.Y)(I.A,{size:16})})}function P(e){let{listeners:t}=e;return(0,l.Y)(p.ov,(0,i._)((0,r._)({width:40,height:40,cursor:"grab",flex:"auto"},t),{children:(0,l.Y)(L.A,{size:20,stroke:"var(--color-fg-tertiary)"})}))}let N=(0,R.I4)({display:"flex",direction:"row",gap:8,alignItems:"start"});function F(e){let{onClick:t,label:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(N,{children:[(0,l.Y)(M,{}),(0,l.Y)(S.$n,{onClick:t,priority:"secondary-outline",children:null!=n?n:r("Add item")})]})}function M(){return(0,l.Y)(d.az,{width:40,height:40})}var B=n(68349),U=n(49207);function z(e){return e.map(e=>({uuid:(0,B.QT)(),value:e}))}let j=(0,a.memo)(e=>{let{items:t,setItems:n,placeholder:o}=e,[s,d]=(0,a.useState)(()=>z(t));(0,a.useEffect)(()=>{d(e=>t.length===e.length?e:!(t.length<=e.length)&&e.every((e,n)=>e.value===t[n])?[...e,...z(t.slice(e.length))]:z(t))},[t.length]);let c=e=>{d(e),n(e.map(e=>e.value))};return(0,l.Y)(U.w,{items:s.map(e=>e.uuid),onReorder:e=>{let t=new Map(s.map(e=>[e.uuid,e]));c(e.map(e=>t.get(e)).filter(e=>void 0!==e))},children:(0,l.Y)(G,{children:s.map((e,t)=>{let{uuid:n,value:a}=e;return(0,l.Y)(U.W,{item:n,index:t,useDragHandle:!0,children:e=>{let{listeners:t}=e;return(0,l.Y)(x,{item:a,setItem:e=>c(s.map(t=>t.uuid===n?(0,i._)((0,r._)({},t),{value:e}):t)),removeItem:()=>{s.length>1&&c(s.filter(e=>e.uuid!==n))},placeholder:o,dragListeners:t,canDelete:s.length>1})}},n)})})})}),G=(0,d.I4)({display:"flex",direction:"column",gap:8});function H(e){let{steps:t,setSteps:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(eY,{children:[(0,l.Y)(j,{items:t,setItems:n,placeholder:r("Add a step...")}),(0,l.Y)(F,{onClick:()=>n([...t,""]),label:r("Add step")})]})}function V(e){let{equipment:t,setEquipment:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.Y)(f.JU,{htmlFor:"equipment",children:r("Equipment")}),(0,l.Y)(A.A,{id:"equipment",value:t,onChange:e=>{var t;return n(null==(t=e.currentTarget)?void 0:t.value)},placeholder:r("e.g. Stand mixer, rolling pin"),defaultRows:1})]})}var W=n(23681),q=n(71464),K=n(72880),X=n(82100),J=n(97515),Z=n(20500),Q=n(23168);function $(e){let{imageURL:t,onImageChange:n}=e;return(0,l.Y)(v.A0,{children:t?(0,l.Y)(ee,{imageURL:t,onImageRemove:()=>n("")}):(0,l.Y)(et,{onImageChange:n})})}function ee(e){let{imageURL:t,onImageRemove:n}=e;return(0,l.FD)(ei,{children:[(0,l.Y)(K.o,{src:t,maxWidth:686,useRetinaSizing:!0,imageIsFixedWidth:!1}),(0,l.Y)(en,{onImageRemove:n})]})}function et(e){let{onImageChange:t}=e,{iString:n}=(0,o.GO)(),[{isDragging:i,errors:a},{openFileDialog:s,getInputProps:d,getDragProps:c,clearFiles:u}]=(0,Q.l)({accept:"image/*",onFilesAdded:async e=>{var n;(null==(n=e[0])?void 0:n.file)instanceof File&&(t(await (0,B.YK)(e[0].file)),u())}});return(0,l.FD)(l.FK,{children:[(0,l.FD)(X.Q,{isDragging:i,dragProps:c(),elevated:!1,children:[(0,l.Y)(S.Nm,{onClick:s,resetCss:!0,children:(0,l.Y)(J.p,{icon:i?(0,l.Y)(W.A,{}):(0,l.Y)(q.A,{}),title:n("Drop your image here or click to browse"),description:n("JPG, PNG, GIF, etc."),style:{aspectRatio:"16/9"}})}),(0,l.Y)("input",(0,r._)({},d()))]}),(0,l.Y)(er,{errors:a})]})}function en(e){let{onImageRemove:t}=e,{iString:n}=(0,o.GO)();return(0,l.Y)(S.Bj,{size:"sm",onClick:t,"aria-label":n("Remove image"),className:"remove-K9RvDf",leading:(0,l.Y)(I.A,{size:16}),children:n("Remove image")})}function er(e){let{errors:t}=e;return 0===t.length?null:(0,l.Y)(Z.yn,{role:"alert",align:"center",children:t[0]})}let ei=(0,d.I4)({position:"relative",outline:"detail",radius:"sm",overflow:"hidden"});function el(e){let{ingredients:t,setIngredients:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(eY,{children:[(0,l.Y)(j,{items:t,setItems:n,placeholder:r("Add an ingredient...")}),(0,l.Y)(F,{onClick:()=>n([...t,""]),label:r("Add ingredient")})]})}function ea(e){let{keywords:t,setKeywords:n}=e,{iString:r}=(0,o.GO)(),{options:i,handleCreate:a,handleChange:s}=w({values:t||[],setValues:n});return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.FD)(p.fI,{justifyContent:"space-between",children:[(0,l.Y)(f.JU,{htmlFor:"keywords",children:r("Keywords")}),(0,l.Y)(Y,{title:r("Keywords"),text:r("Other terms for your recipe such as a season, holiday, or other descriptors. For better SEO, do not use keywords that overlap with your cuisine or category.")})]}),(0,l.Y)(g.K,{options:i,value:t||[],onChange:s,placeholder:r("e.g. Stews, healthy"),onCreate:a})]})}function eo(e){var t,n,l;return(0,i._)((0,r._)({},e),{prepTime:null!=(t=null==e?void 0:e.prepTime)?t:0,cookTime:null!=(n=null==e?void 0:e.cookTime)?n:0,totalTime:null!=(l=null==e?void 0:e.totalTime)?l:0})}function es(e,t){switch(t.type){case"LOAD_RECIPE":return{originalRecipe:t.payload,name:t.payload.name,metadata:eo(t.payload.metadata),ingredients:t.payload.ingredients&&t.payload.ingredients.length>0?t.payload.ingredients:[""],steps:t.payload.steps&&t.payload.steps.length>0?t.payload.steps:[""],imageURL:t.payload.image_url};case"SET_NAME":return(0,i._)((0,r._)({},e),{name:t.payload});case"SET_METADATA":return(0,i._)((0,r._)({},e),{metadata:eo(t.payload)});case"UPDATE_METADATA":return(0,i._)((0,r._)({},e),{metadata:eo((0,r._)({},e.metadata,t.payload))});case"SET_INGREDIENTS":return(0,i._)((0,r._)({},e),{ingredients:t.payload});case"SET_STEPS":return(0,i._)((0,r._)({},e),{steps:t.payload});case"SET_IMAGE_URL":return(0,i._)((0,r._)({},e),{imageURL:t.payload});default:return e}}function ed(e){let{recipeYield:t,setRecipeYield:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.Y)(f.JU,{htmlFor:"serves",children:r("Serves")}),(0,l.Y)(v.ks,{id:"serves",value:t||"",onChange:e=>n(e.currentTarget.value),placeholder:r("e.g. 4, 4-6")})]})}function ec(e){let{id:t,label:n,time:r,setTime:i}=e,{iString:a}=(0,o.GO)();return(0,l.FD)(v.A0,{flex:"grow",children:[(0,l.Y)(f.JU,{htmlFor:t,children:n}),(0,l.Y)(v.ks,{id:t,type:"number",value:r,placeholder:"0",onChange:e=>{var t;i((null==(t=e.currentTarget)?void 0:t.value)?Math.max(0,Number(e.currentTarget.value)):0)},flex:"grow",trailing:(0,l.Y)(v.RB,{text:a("minutes")}),style:{paddingInlineEnd:"88px"}})]})}function eu(e){let{name:t,setName:n}=e,{iString:r}=(0,o.GO)();return(0,l.FD)(v.A0,{children:[(0,l.Y)(f.JU,{htmlFor:"title",children:r("Title")}),(0,l.Y)(v.ks,{id:"title",value:t,onChange:e=>{var t;return n(null==(t=e.currentTarget)?void 0:t.value)},placeholder:r("Add a title")})]})}var ep=n(94729);let eh={imageURL:"image_url"},em=["name","metadata","ingredients","steps","imageURL"];var eg=n(66929);function ef(e){var t,n,d,c,p,m,g,f,v,b,y,Y,w;let C,{node:_,staticData:A}=e,{iString:S}=(0,o.GO)(),[I,L]=(0,a.useReducer)(es,{originalRecipe:w=A||null,name:null==w?void 0:w.name,metadata:eo(null==w?void 0:w.metadata),ingredients:(null==w?void 0:w.ingredients)&&w.ingredients.length>0?w.ingredients:[""],steps:(null==w?void 0:w.steps)&&w.steps.length>0?w.steps:[""],imageURL:null==w?void 0:w.image_url}),R=null==_||null==(t=_.attrs)?void 0:t.id;C=(0,a.useRef)(null),(0,a.useEffect)(()=>{if(C.current&&clearTimeout(C.current),!R||!I.originalRecipe)return;let e=function(e){let{originalRecipe:t}=e;if(!t)return null;let n={};for(let i of em){var r;let l=null!=(r=eh[i])?r:i,a=e[i],o=t[l];a===o||(null==a||null==o?a===o:typeof a==typeof o&&("object"!=typeof a?a===o:JSON.stringify(a)===JSON.stringify(o)))||(n[l]=a)}return Object.keys(n).length>0?n:null}(I);if(e)return C.current=setTimeout(async()=>{try{await (0,ep.x6)("/api/v1/recipe/".concat(R),{method:"POST",json:e})}catch(e){console.error("Failed to autosave recipe:",e)}},1e3),()=>{C.current&&clearTimeout(C.current)}},[I,R]);let{result:x,isLoading:O}=(0,s.st)({pathname:R?"/api/v1/recipe/".concat(R):void 0,auto:!!R,initialResult:A?{recipe:A,postInfo:null}:void 0,deps:[R]});(0,a.useEffect)(()=>{(null==x?void 0:x.recipe)&&L({type:"LOAD_RECIPE",payload:x.recipe})},[null==x?void 0:x.recipe]);let P=I.originalRecipe?(0,i._)((0,r._)({},I.originalRecipe),{name:null!=(v=I.name)?v:I.originalRecipe.name,metadata:I.metadata,ingredients:null!=(b=I.ingredients)?b:I.originalRecipe.ingredients,steps:null!=(y=I.steps)?y:I.originalRecipe.steps,image_url:null!=(Y=I.imageURL)?Y:I.originalRecipe.image_url}):null;return O?(0,l.Y)(ev,{children:(0,l.Y)(h.y$,{flex:"grow"})}):(0,l.FD)(l.FK,{children:[P&&(null==x?void 0:x.postInfo)?(0,l.Y)(eg.w,{recipe:P,postInfo:x.postInfo}):null,(0,l.FD)(ev,{children:[(0,l.Y)($,{imageURL:I.imageURL,onImageChange:e=>L({type:"SET_IMAGE_URL",payload:e})}),(0,l.FD)(eb,{children:[(0,l.Y)(eu,{name:I.name,setName:e=>L({type:"SET_NAME",payload:e})}),(0,l.Y)(D,{description:null==(n=I.metadata)?void 0:n.description,setDescription:e=>L({type:"UPDATE_METADATA",payload:{description:e}})}),(0,l.FD)(ew,{children:[(0,l.Y)(ec,{id:"prepTime",label:S("Prep time"),time:I.metadata.prepTime,setTime:e=>{let t=e+I.metadata.cookTime;L({type:"UPDATE_METADATA",payload:{prepTime:e,totalTime:t}})}}),(0,l.Y)(ec,{id:"cookTime",label:S("Cook time"),time:I.metadata.cookTime,setTime:e=>{let t=I.metadata.prepTime+e;L({type:"UPDATE_METADATA",payload:{cookTime:e,totalTime:t}})}})]}),(0,l.FD)(ew,{children:[(0,l.Y)(ed,{recipeYield:null==(d=I.metadata)?void 0:d.recipeYield,setRecipeYield:e=>L({type:"UPDATE_METADATA",payload:{recipeYield:e}})}),(0,l.Y)(V,{equipment:null==(c=I.metadata)?void 0:c.tools,setEquipment:e=>L({type:"UPDATE_METADATA",payload:{tools:e}})})]})]}),(0,l.Y)(u.c,{}),(0,l.FD)(eb,{children:[(0,l.Y)(ey,{title:S("Ingredients")}),(0,l.Y)(el,{ingredients:I.ingredients||[""],setIngredients:e=>L({type:"SET_INGREDIENTS",payload:e})})]}),(0,l.Y)(u.c,{}),(0,l.FD)(eb,{children:[(0,l.Y)(ey,{title:S("Directions")}),(0,l.Y)(H,{steps:I.steps||[""],setSteps:e=>L({type:"SET_STEPS",payload:e})})]}),(0,l.Y)(u.c,{}),(0,l.FD)(eb,{children:[(0,l.Y)(ey,{title:S("Metadata")}),(0,l.FD)(ew,{children:[(0,l.Y)(E,{category:null==(p=I.metadata)?void 0:p.category,setCategory:e=>L({type:"UPDATE_METADATA",payload:{category:e}})}),(0,l.Y)(ea,{keywords:null==(m=I.metadata)?void 0:m.keywords,setKeywords:e=>L({type:"UPDATE_METADATA",payload:{keywords:e}})})]}),(0,l.FD)(ew,{children:[(0,l.Y)(k,{cuisine:null==(g=I.metadata)?void 0:g.cuisine,setCuisine:e=>L({type:"UPDATE_METADATA",payload:{cuisine:e}})}),(0,l.Y)(T,{diet:null==(f=I.metadata)?void 0:f.diet,setDiet:e=>L({type:"UPDATE_METADATA",payload:{diet:e}})})]})]})]})]})}function ev(e){let{children:t}=e;return(0,l.Y)(c.Z,{gap:20,padding:20,radius:"md",elevated:!1,className:"container-uIPReA",children:t})}function eb(e){let{children:t}=e;return(0,l.Y)(p.VP,{gap:12,children:t})}function ey(e){let{title:t}=e;return(0,l.Y)(m.EY.H4,{weight:"bold",paddingTop:12,paddingBottom:4,children:t})}function eY(e){let{children:t}=e;return(0,l.Y)(p.VP,{gap:8,children:t})}let ew=(0,d.I4)({display:"flex",direction:"row",gap:20,wrap:"wrap"})},90292:function(e,t,n){n.d(t,{q:()=>l});var r=n(4006);n(45994);var i=n(93576);let l=e=>{let{children:t}=e;return(0,r.Y)(i.A,{version:3,config:{loader:{load:["ui/safe"]}},children:t})}},50395:function(e,t,n){n.d(t,{V:()=>a});var r=n(4006),i=n(31583),l=n(78622);function a(e){let{node:t}=e,n=t.attrs;return(0,r.Y)(i.VR,{"data-drag-handle":"",children:(0,r.Y)(l.K,{attrs:n})})}},78622:function(e,t,n){n.d(t,{K:()=>z});var r=n(4006),i=n(32485),l=n.n(i),a=n(33727),o=n(13892),s=n(20956),d=n(38685),c=n(24078),u=n(89490),p=n(63136);function h(e){let{name:t}=e;return t?(0,r.Y)(p.EY,{as:"span",weight:"semibold",children:t}):null}function m(e){let{username:t}=e;return t?(0,r.FD)(p.EY,{as:"span",color:"secondary",children:["@",t]}):null}var g=n(5955);function f(e){var t;let{username:n,name:i,profile_image_url:l,belowTheFold:a}=e;return(0,r.FD)(v,{children:[(0,r.Y)(c.eu,{photoUrl:null!=(t=null==l?void 0:l.replace("_normal",""))?t:"",alt:(0,g.sK)(n),size:40,loading:a?"lazy":void 0}),(0,r.FD)(b,{children:[(0,r.Y)(h,{name:i}),(0,r.Y)(m,{username:n})]}),(0,r.Y)(d.A,{size:20})]})}let v=(0,u.I4)({display:"flex",direction:"row",gap:12,alignItems:"center"}),b=(0,u.I4)({display:"flex",direction:"column",flex:"grow"});var y=n(82853),Y=n(8853),w=n(76977);function C(e){let{expandedUrl:t}=e,{title:n,domain:i,image:l}=t,o="string"==typeof l?l:null==l?void 0:l.url;return(0,r.FD)(a.Z,{direction:"row",shadow:"none",radius:"sm",padding:12,gap:12,children:[(0,r.FD)(w.VP,{gap:2,flex:"grow",minWidth:0,children:[i&&(0,r.Y)(p.EY.B4,{color:"secondary",ellipsis:!0,children:i}),n&&(0,r.Y)(p.EY.B3,{clamp:2,weight:"medium",children:n})]}),o?(0,r.Y)(_,{imageUrl:o}):(0,r.Y)(E,{})]})}function _(e){let{imageUrl:t}=e;return(0,r.Y)(w.ov,{radius:"md",outline:"detail",overflow:"hidden",children:(0,r.Y)(Y.c,{src:t,width:64,height:64,options:{smartCrop:!0}})})}function E(){return(0,r.Y)(w.ov,{width:64,height:64,bg:"secondary",radius:"md",outline:"detail",children:(0,r.Y)(y.A,{size:24,stroke:"var(--color-fg-secondary)"})})}var k=n(66443);function A(e){let{photos:t,belowTheFold:n}=e;if(!t||0===t.length)return null;let i=t.map(e=>({src:e.img_url,explicit:!1,alt_text:e.alt_text}));return 1===i.length&&i[0]?(0,r.Y)(D,{children:(0,r.Y)("img",{src:i[0].src,alt:i[0].alt_text,className:"image-c_FmAR",loading:n?"lazy":void 0})}):(0,r.Y)(k.K,{assets:i,readOnly:!0,maxHeight:320})}let D=(0,u.I4)({overflow:"hidden",radius:"sm",outline:"detail",bg:"black",className:"container-aGHQ9p"});function T(e){var t;let{quotedTweet:n}=e;return(0,r.FD)(S,{children:[n.username&&(0,r.Y)(c.eu,{size:20,photoUrl:null==(t=n.profile_image_url)?void 0:t.replace("_normal",""),alt:(0,g.sK)(n.username)}),(0,r.FD)(p.EY.B4,{children:[(0,r.Y)(h,{name:n.name})," ",(0,r.Y)(m,{username:n.username})]})]})}let S=(0,u.I4)({display:"flex",direction:"row",gap:8,alignItems:"center"});var I=n(74728),L=n.n(I),R=n(69277),x=n(70408),O=n(98505);let P={allowedTags:L().defaults.allowedTags.concat(["img"]),allowedAttributes:(0,x._)((0,R._)({},L().defaults.allowedAttributes),{"*":["href","style","id","data-*","itemprop","class","align","alt","center","bgcolor"]})};function N(e){let{text:t}=e,n=L()(t,P);return(0,r.Y)(p.EY.B3,{className:O.A.text,dangerouslySetInnerHTML:{__html:n}})}function F(e){let{text:t}=e,n=L()(t,P);return(0,r.Y)(p.EY.B3,{className:O.A.text,dangerouslySetInnerHTML:{__html:n}})}function M(e){let{quotedTweet:t}=e;return(null==t?void 0:t.full_text)?(0,r.FD)(a.Z,{shadow:"none",radius:"sm",gap:8,padding:12,children:[(0,r.Y)(T,{quotedTweet:t}),(0,r.Y)(F,{text:t.full_text})]}):null}function B(e){let{src:t}=e;return(0,r.Y)(U,{children:(0,r.Y)("video",{className:"video-CPD2rN",controls:!0,src:t,preload:"auto"})})}let U=(0,u.I4)({display:"flex",direction:"column",overflow:"hidden",radius:"sm",outline:"detail",bg:"black",className:"container-_J9cse"});function z(e){let{attrs:t}=e,{url:n,full_text:i,username:o,name:d,profile_image_url:c,date:u,photos:p,quoted_tweet:h,reply_count:m,retweet_count:g,like_count:v,video_url:b,expanded_url:y,belowTheFold:Y,impression_count:w}=t,_=null!=b,E=!_&&p&&p.length>0,k=h&&Object.keys(h).length>0;return(0,r.Y)(j,{href:n,children:(0,r.FD)(a.Z,{gap:12,padding:16,font:"text",elevated:!1,className:l()("tweet-fWkQfo","twitter-embed"),"data-attrs":JSON.stringify(t),pressable:"lg",children:[(0,r.Y)(f,{username:o,name:d,profile_image_url:c,belowTheFold:Y}),(0,r.Y)(N,{text:i}),E?(0,r.Y)(A,{photos:p,belowTheFold:Y}):_?(0,r.Y)(B,{src:b}):null,!_&&!E&&!k&&null!=y&&(0,r.Y)(C,{expandedUrl:y}),(0,r.Y)(M,{quotedTweet:h}),(0,r.Y)(s.x,{date:u,replyCount:m,retweetCount:g,likeCount:v,impressionCount:w})]})})}function j(e){let{href:t,children:n}=e;return(0,r.Y)(o.A,{href:t,target:"_blank",rel:"noopener noreferrer","data-component-name":"Twitter2ToDOM",children:n})}},20437:function(e,t,n){n.d(t,{PH:()=>v,R8:()=>y,di:()=>b,wF:()=>f});var r=n(69277),i=n(4006),l=n(45994),a=n(41873),o=n(46271),s=n(64632),d=n(68349),c=n(68410),u=n(89490),p=n(76977),h=n(68391),m=n(13348),g=n(1218);function f(e,t){let[n,r]=(0,l.J0)(null);return(0,l.vJ)(()=>{let n=new ResizeObserver(e=>{if(!e||0===e.length)return;let n=e[0];if(n&&n.target){let{width:e}=n.contentRect;t?r(Math.min(e,t)):r(e)}}),i=e.current;return i&&n.observe(i),()=>{n.disconnect()}},[e]),n}let v=295,b=520;function y(e){let{mediaUpload:t,composing:n,maxWidth:y,videoPlayerProps:w,tag:C}=e,_=(0,o.Qg)().autoPlayVideo,{isMobile:E}=(0,c.sM)(),k=(0,l.li)(null),A=(0,l.li)(null),D=f(A,y);(0,h.C4)({videoPlayerRef:k,showPaywall:!1,disable:!1});let{isHidden:T,onShow:S}=(0,s.k_)(!!t.explicit),I=null;null!==t.width&&null!==t.height&&(I=t.width/t.height);let L={};if(E){let e=null!=D?D:v;L=I?I>1?{width:"".concat(e,"px"),height:"".concat(e/I,"px")}:{height:"".concat(400,"px"),width:"".concat(400*I,"px")}:{}}else if(I){let e=null!=D?D:b;if(I>1)L={width:"".concat(e,"px"),height:"".concat(e/I,"px")};else{let e=Math.max(400*I,360*!!(0,d.nr)());L={width:"".concat(e,"px"),height:"".concat(400,"px")}}}return(0,i.Y)(p.I1,{ref:A,children:(0,i.FD)(p.I1,{style:L,radius:"md",overflow:"hidden",position:"relative",className:g.A.videoPlayerContainer,children:[(0,i.Y)(a.A,(0,r._)({ref:k,mediaUpload:t,startMuted:_,autoPlay:_&&n,renderPlayButton:()=>(0,i.Y)(m.ro,{isPlaying:!1,size:E?40:56}),pub:null,videoPlayerClassName:g.A.videoPlayer,videoClassName:g.A.video,omitBackgroundColor:!0,stopPropagation:!0,noKeyboardShortcuts:!0,noPictureInPicture:!0},w)),!n&&T&&(0,i.Y)(s.f9,{radius:"md",onShow:S,itemName:"video"}),(0,i.Y)(u.az,{position:"absolute",inset:0,radius:"md",outline:"detail",pointerEvents:"none"}),C&&(0,i.Y)(Y,{children:C})]})})}let Y=(0,u.I4)({display:"flex",padding:8,position:"absolute",alignItems:"start",justifyContent:"start"})},78979:function(e,t,n){n.d(t,{dn:()=>r,pq:()=>l});let r={SIGNUP:"SIGNUP",PUB_SIGNUP:"PUB_SIGNUP",CATEGORIES:"CATEGORIES",CATEGORIES_SUGGESTIONS:"CATEGORIES_SUGGESTIONS",PROFILE:"PROFILE",START_WRITING:"START_WRITING",CREATOR_CHOICE:"CREATOR_CHOICE",CREATOR_WELCOME:"CREATOR_WELCOME",CREATE_PUBLICATION:"CREATE_PUBLICATION",CREATE_PUBLICATION_SUCCESS:"CREATE_PUBLICATION_SUCCESS",WELCOME:"WELCOME",ERROR:"ERROR",EXIT:"EXIT",APP_UPSELL:"APP_UPSELL"},i=["CREATE_PUBLICATION_SUCCESS","CREATOR_WELCOME","EXIT","WELCOME"],l=e=>i.includes(e)},38018:function(e,t,n){n.d(t,{l:()=>r});let r=7},82455:function(e,t,n){n.d(t,{W:()=>d});var r=n(98111),i=n(17460),l=n(39318),a=n(49807),o=n(82776),s=n(57324);function d(e,t){var n,d;let{pub:c,post:u,user:p,sendMedium:h}=t,m=e;return u&&p&&(m=m.replace(RegExp(r.T.COMMENTS_URL,"g"),(0,l.Erh)(c,u)).replace(RegExp(r.T.HALF_MAGIC_COMMENTS_URL,"g"),(0,l.Erh)(c,u))),m.replace(RegExp(r.T.POST_ID,"g"),(null==u?void 0:u.id.toString())||"").replace(RegExp(r.T.SEND_MEDIUM,"g"),h||"").replace(RegExp(r.T.CHECKOUT_URL,"g"),(0,o.escapeNewlines)((0,l.my9)(c))).replace(RegExp(r.T.FOUNDING_CHECKOUT_URL,"g"),(0,o.escapeNewlines)((0,l.WY0)(c))).replace(RegExp(r.T.ACCOUNT_URL,"g"),(0,o.escapeNewlines)((0,a.FCy)(c,{addBase:!0}))).replace(RegExp(r.T.ARCHIVE_URL,"g"),(0,o.escapeNewlines)((0,l.Xt9)(c,{addBase:!0,params:null}))).replace(RegExp(r.T.PUBLICATION_NAME,"g"),(0,o.escapeNewlines)((0,i.A)(c.name||""))).replace(RegExp(r.T.PUBLICATION_HERO_TEXT,"g"),(0,o.escapeNewlines)((0,i.A)(c.hero_text||""))).replace(RegExp(r.T.AUTHOR_NAME,"g"),(0,o.escapeNewlines)((0,i.A)(c.author_name||""))).replace(RegExp(r.T.AUTHOR_FIRST_NAME,"g"),(0,o.escapeNewlines)((0,i.A)((0,o.guessFirstName)(c.author_name)||""))).replace(RegExp(r.T.AUTHOR_BIO,"g"),(0,o.escapeNewlines)((0,i.A)(c.author_bio||""))).replace(RegExp(r.T.SHARE_URL,"g"),"").replace(RegExp(r.T.SHARE_PUB_URL,"g"),(0,l.aJp)(c)).replace(RegExp(r.T.PODCAST_SETUP_URL,"g"),(0,l.wpu)(c,{addBase:!0,noSection:!0,params:null,section:null,user:null,startAtSubscribeFlow:!1})).replace(RegExp(r.T.PERSONAL_PODCAST_SETUP_URL,"g"),(0,l.wpu)(c,{addBase:!0,noSection:!0,params:null,section:null,user:null,startAtSubscribeFlow:!1})).replace(RegExp(r.T.ALL_PODCASTS_SETUP_URL,"g"),(0,l.t77)(c,{startAtSubscribeFlow:!0,utm_source:s.VU.allPodcastsSetupButton})).replace(RegExp(r.T.HOME_LINK,"g"),(0,a.$_T)(c)).replace(RegExp(r.T.THREAD_URL,"g"),(0,a.xWO)({pubKey:c.subdomain})).replace(RegExp(r.T.CHAT_URL,"g"),(0,a.xWO)({pubKey:c.subdomain})).replace(RegExp(r.T.PREACT_COMPAT_HTML_COMMENT_OPEN,"g"),"\x3c!--").replace(RegExp(r.T.PREACT_COMPAT_HTML_COMMENT_CLOSE,"g"),"--\x3e").replace(RegExp(r.T.DASHBOARD_URL,"g"),(0,a.Z96)(c,{addBase:!0})).replace(RegExp(r.T.AUTHOR_PHOTO_URL,"g"),c.author_photo_url||"").replace(RegExp(r.T.MEETINGS_URL,"g"),(0,a.SJN)(c,{addBase:!0})||"").replace(RegExp(r.T.PUBLICATION_URL,"g"),(0,a.$_T)(c)).replace(RegExp(r.T.LEADERBOARD_URL,"g"),(0,a.tLs)(c,void 0,{addBase:!0})).replace(RegExp(r.T.ACTIVITY_PAGE_URL,"g"),"".concat((0,a.Ewe)(),"/activity")).replace(RegExp(r.T.FOLLOW_PROFILE_URL,"g"),p?(0,a.gYq)(p,{utm_source:s.VU.email,extraParams:{r:null!=(n=(0,o.userReferralKey)(p))?n:"",followPrompt:!0}}):(0,a.yRP)((0,a.Ewe)(),{utm_source:s.VU.email,followPrompt:!0})).replace(RegExp(r.T.FOLLOW_POST_URL,"g"),p?(0,a.wu9)(c,u,{urlParams:{utm_source:s.VU.email,r:null!=(d=(0,o.userReferralKey)(p))?d:"",followPrompt:!0}}):(0,a.yRP)((0,a.Ewe)(),{utm_source:s.VU.email,followPrompt:!0}))}},74167:function(e,t,n){n.d(t,{w:()=>r});let r="\uD83D\uDC64ï¸ For you"},83873:function(e,t,n){n.d(t,{Y:()=>r});let r={CompletedAdult:"completed_adult",CompletedUnderage:"completed_underage",NotCompleted:"not_completed"}},37855:function(e,t,n){n.d(t,{c:()=>r});let r={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"div[data-callout]",priority:100},{tag:"div.callout-block",priority:99}],toDOM:()=>["div",{class:"callout-block","data-callout":"true"},0],toDOMStatic:()=>["div",{class:"callout-block","data-callout":"true"},0]}},75371:function(e,t,n){n.d(t,{o:()=>a,u:()=>o});var r=n(26469),i=n(33333),l=n(8221);function a(e){let{paragraph:t,ordered_list:n,bullet_list:r,blockquote:l,orderedList:a,bulletList:o}=e.schema.nodes;return(0,i.WS)(e,[t,n,r,l,a,o])}function o(e,t){if(!a(e))return!1;let{schema:n}=e;if(!n.nodes.footnote)return console.warn("Footnote node type is not defined in the schema."),!1;if(!n.nodes.footnoteAnchor)return console.warn("FootnoteAnchor node type is not defined in the schema."),!1;if(!n.nodes.paragraph)return console.warn("Paragraph node type is not defined in the schema."),!1;let i=n.nodes.footnote.create({number:1},n.nodes.paragraph.create()),o=n.nodes.footnoteAnchor.create({number:1}),s=e.tr,d=(0,l.Di)({tr:s,schema:n});if(null===d)return console.warn("Could not determine position to insert footnote."),!1;s.replaceWith(d,d,i),s.replaceSelectionWith(o),(0,l.TD)({tr:s,schema:n});try{s.setSelection(r.U3.create(s.doc,d+2,d+2)).scrollIntoView()}catch(e){return console.error("could not set footnote text selection"),!1}return t&&t(s),!0}},11993:function(e,t,n){n.d(t,{H:()=>i});var r=n(82776);function i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];e.match(/^([a-z]+:)?\/\//i)||(e="http://".concat(e));try{t=new URL(e)}catch(t){return console.error("Failed to parse URL",e,t),e}t.hostname=t.hostname.replace(/^www\./,""),t.pathname=t.pathname.replace(/\/+$/,""),t.hash="";let l=new Set;t.hostname.includes("youtube")&&l.add("v"),t.searchParams.forEach((e,n)=>{l.has(n)||t.searchParams.delete(n)});let a=t.toString().replace(/^\w+:\/\//,"").replace(/\/+$/,"");return a?i?(0,r.truncateText)(a,n):a:e}},88420:function(e,t,n){n.d(t,{b:()=>r});let r=["listItem","codeBlock","heading","paragraph"]},66151:function(e,t,n){n.d(t,{K:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"audioInsert",addCommands:()=>({insertAudio:e=>{let{label:t,mediaUploadId:n,duration:r,downloadable:l}=e;return e=>{let{state:a,dispatch:o}=e;return(e=>{let{label:t,mediaUploadId:n,duration:r,downloadable:l}=e;return(e,a)=>(a&&a((0,i.DL)(e,e.schema.nodes.audio.create({label:t,mediaUploadId:n,duration:r,downloadable:l,isEditorNode:!0}))),!0)})({label:t,mediaUploadId:n,duration:r,downloadable:l})(a,o)}}})})},32365:function(e,t,n){n.d(t,{$:()=>d});var r=n(88285),i=n(10591),l=n(49807),a=n(57324),o=n(33333),s=n(4518);let d=r.YY.create({name:"buttonCustom",addCommands:()=>({insertSubscribeButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.Si)(e)(n,r)},insertSubscribeButtonWithPreamble:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.WK)(e)(n,r)},insertCaptionedShareButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.U4)(e)(n,r)},insertSpecialOfferButton:e=>{let{couponPub:t,scrollParent:n,parentClass:r,get_coupons:l,insert_coupon:a,SelectField:o,openPrompt:s,closePrompt:d,getNetworkErrorMessage:c}=e;return e=>{let{state:u,dispatch:p,view:h}=e;return(0,i.XU)({couponPub:t,scrollParent:n,parentClass:r,get_coupons:l,insert_coupon:a,SelectField:o,openPrompt:s,closePrompt:d,getNetworkErrorMessage:c})(u,p,h)}},insertGroupSubscriptionButton:e=>{let{publication:t}=e;return e=>{let{state:n,dispatch:r}=e;return(0,i.yt)({publication:t})(n,r)}},insertDonateButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.pv)(e)(n,r)},insertReferralButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.nd)(e)(n,r)},insertCaptionedWriterReferralButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.N_)({writerReferralCode:e.writerReferralCode,publication:e.publication,postId:e.postId})(n,r)},insertGiftButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.eH)(e)(n,r)},insertCommentsButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.mh)(e)(n,r)},insertSurveyButton:(e,t,n)=>r=>{let{state:l,dispatch:a}=r;return(0,i.ce)(e,t,n)(l,a)},insertSharePubButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.yj)(e)(n,r)},insertSharePostButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.TH)(e)(n,r)},insertCustomButton:e=>{let{scrollParent:t,parentClass:n,TextField:r,openPrompt:l,publication:a}=e;return e=>{let{state:o,dispatch:s,view:d}=e;return(0,i.ju)({scrollParent:t,parentClass:n,TextField:r,openPrompt:l,publication:a})(o,s,d)}},insertVisitThreadButton:e=>t=>{let{state:n,dispatch:r}=t;return((t,n)=>{if(!t.schema.nodes.communityChat)return console.error("insertCommunityChatEmbed: schema is missing communityChat node"),!1;if(!(0,s.c)(t,t.schema.nodes.communityChat))return!1;if(n){var r,i;n((0,o.DL)(t,t.schema.nodes.communityChat.create({url:(0,l.xWO)({pubKey:e.subdomain,utm_source:a.VU.chatEmbed}),subdomain:e.subdomain,pub:{id:e.id,name:e.name,author_name:null!=(r=e.primary_profile_name)?r:e.author_name,author_photo_url:null!=(i=e.primary_profile_photo_url)?i:e.author_photo_url}})))}return!0})(n,r)}})})},92678:function(e,t,n){n.d(t,{q:()=>a});var r=n(88285),i=n(39318),l=n(33333);let a=r.YY.create({name:"embedContentCustom",addCommands:()=>({insertInstallSubstackAppEmbed:e=>t=>{let{state:n,dispatch:r}=t;return((t,n)=>{let r=(0,i.$_T)(e);return n&&n((0,l.DL)(t,t.schema.nodes.install_substack_app.create({logo_url:e.logo_url||"".concat(r,"/img/substack.png"),author_name:e.author_name,publication_subdomain:e.subdomain,publication_name:e.name,language:e.language}))),!0})(n,r)}})})},66347:function(e,t,n){n.d(t,{I:()=>s});var r=n(88285),i=n(26469),l=n(37575),a=n(68349);let o=e=>{e.preventDefault()},s=r.YY.create({name:"digestPostEmbedExtension",addCommands:()=>({updateDigestPostEmbed:(e,t)=>n=>{let r,{state:i,dispatch:l,view:a}=n;return(r=!!t,(t,n,i)=>{if(n){let a,s;if(t.doc.descendants((t,n)=>{if(t.attrs.nodeId===e.nodeId)return a=t,s=n,!1}),a&&void 0!==s){let d=t.tr;d.setNodeMarkup(s,a.type,Object.assign({},a.attrs,e));var l=e.nodeId;let c=i.dom;if(c){let e=c.querySelector('[data-attrs*=\'{"nodeId":"'.concat(l,"\"']"));e&&(r?e.addEventListener("dragstart",o):e.removeEventListener("dragstart",o))}n(d)}}return!0})(i,l,a)},convertDigestPostEmbedToLink:e=>t=>{let{state:n,dispatch:r}=t;return(e=>{let{url:t}=e;return(e,n)=>{if(n){let r=e.tr,l=e.selection.from,a=l+t.length;r.deleteSelection(),r.insertText(t,l),r.addMark(l,a+1,e.schema.marks.link.create({text:t,href:t})),r.setSelection(i.U3.create(r.doc,l,a+1)),n(r)}return!0}})(e)(n,r)},convertDigestPostEmbedToEmbeddedPost:e=>t=>{let{state:n,dispatch:r,view:i}=t;return(e=>{let{url:t}=e;return(e,n,r)=>{if(n){let[,i]=(0,l._R)(t,e.schema,{forceAllowOwnPub:!0});if(!i)return!0;(0,l.H2)(i,r,e.schema,{forceAllowOwnPub:!0}).catch(e=>alert((0,a.uX)(e))),n(e.tr.replaceSelectionWith(i))}return!0}})(e)(n,r,i)},deleteDigestPostEmbed:()=>e=>{let t,n,{state:r,dispatch:i}=e;return t=r,(n=i)&&n(t.tr.deleteSelection()),!0}})})},64287:function(e,t,n){n.d(t,{t:()=>l});var r=n(88285),i=n(75371);let l=r.YY.create({name:"footnoteCustom",addCommands:()=>({insertFootnote:()=>e=>{let{state:t,dispatch:n}=e;return(0,i.u)(t,n)}})})},89909:function(e,t,n){n.d(t,{H:()=>o});var r=n(88285),i=n(6611),l=n(32526),a=n(33333);let o=r.YY.create({name:"imageInsert",addCommands:()=>({insertImage:e=>t=>{let{state:n,dispatch:r,view:a}=t;return n.schema.nodes.image2?(r&&(function(e,t){let{insertImageFile:n}=t,r=document.createElement("input");return r.type="file",r.accept="image/*,.heic,.heif",r.style.cssText="display:none;",r.onchange=()=>{r.files&&r.files.length>0&&r.files[0]&&n(r.files[0]),r.value=""},r.className="insert-image-menu-item-input",document.body.appendChild(r),new l.Lz({title:"Insert image",icon:i.Kj,active:()=>!1,enable:t=>(0,l.cz)(t,e),run(){setTimeout(()=>{r.click()},0)}},"image")})(n.schema.nodes.image2,{insertImageFile:e}).spec.run(n,r,a,void 0),!0):(console.error("image2 node not enabled"),!1)},insertUnsplashImage:e=>t=>{let{state:n,dispatch:r}=t;return(e=>{let{url:t,width:n,height:r,description:i,userName:l,userHref:o}=e;return(e,s)=>{let d=e.schema,c={alt:i,src:t,height:r,width:n,type:"image/jpg"},u=d.marks.link;if(!u)return!0;let p=d.text("Photo by "),h=d.text(l,"string"==typeof o?[u.create({title:l,href:o})]:null),m=d.text(" on "),g=d.text("Unsplash",[u.create({title:"Unsplash",href:"https://unsplash.com"})]);if(!d.nodes.captionedImage)return console.warn("captionedImage node not found in schema"),!0;if(!d.nodes.image2)return console.warn("image2 node not found in schema"),!0;if(!d.nodes.caption)return console.warn("caption node not found in schema"),!0;let f=d.nodes.captionedImage.create(c,[d.nodes.image2.create(c),d.nodes.caption.create(null,[p,h,m,g])]);return s&&s((0,a.DL)(e,f)),!0}})(e)(n,r)},insertImageGallery:e=>t=>{let{state:n,dispatch:r}=t;return(e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.DL)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)})(e)(n,r)},updateImageGallery:e=>t=>{let{state:n,dispatch:r}=t;return(e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.Z3)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)})(e)(n,r)},insertImageFromUrl:e=>{let{url:t,caption:n,width:r,height:i}=e;return e=>{let{state:l,dispatch:o}=e;return(e=>{let{url:t,caption:n,width:r,height:i}=e;return(e,l)=>{if(!l)return!1;let o=e.schema;if(!o.nodes.image2||!o.nodes.captionedImage||!o.nodes.caption)return!1;let s=o.nodes.image2.create({src:t,imageSize:"normal",height:null!=i?i:512,width:null!=r?r:512});if(n){let t=o.nodes.caption.create(null,o.text(n)),r=o.nodes.captionedImage.create({},[s,t]);l((0,a.DL)(e,r))}else l((0,a.DL)(e,s));return!0}})({url:t,caption:n,width:r,height:i})(l,o)}},insertTradingViewImageFromUrl:e=>{let{url:t,width:n,height:r}=e;return e=>{let{state:i,dispatch:l}=e;return(e=>{let{url:t,width:n,height:r}=e;return(e,i)=>{let l=e.schema,o={alt:"TradingView chart",src:t,height:r,width:n,type:"image/jpg"};if(!l.nodes.image2||!l.nodes.captionedImage||!l.nodes.caption||!l.marks.link)return!1;let s=l.text("Created with "),d=l.text("TradingView",[l.marks.link.create({title:"TradingView",href:"https://tradingview.com"})]),c=l.nodes.captionedImage.create(o,[l.nodes.image2.create(o),l.nodes.caption.create(null,[s,d])]);return i&&i((0,a.DL)(e,c)),!0}})({url:t,width:n,height:r})(i,l)}}})})},43146:function(e,t,n){n.d(t,{W:()=>a});var r=n(88285),i=n(78598),l=n(33333);let a=r.YY.create({name:"latexInsert",addCommands:()=>({insertLatex:e=>{let{expression:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{expression:t}=e;return(e,n)=>{let r=(0,i.$C)();return n&&n((0,l.DL)(e,e.schema.nodes.latex_block.create({persistentExpression:t,id:r}))),!0}})({expression:t})(n,r)}}})})},28072:function(e,t,n){n.d(t,{N:()=>o});var r=n(88285),i=n(39318),l=n(49807),a=n(33333);let o=r.YY.create({name:"meetingInsert",addCommands:()=>({insertMeeting:e=>{let{publication:t,meetingsConfig:n,usePublicationName:r}=e;return e=>{let{state:o,dispatch:s}=e;return(e=>{let{publication:t,meetingsConfig:n,usePublicationName:r}=e;return(e,o)=>{let s=(0,i.pIF)({id:n.user_id,photo_url:n.user_profile_photo_url});return r&&t.logo_url&&(s=(0,l.dJ9)(t.logo_url,112)),o&&o((0,a.DL)(e,e.schema.nodes.meeting.create({name:r?t.name:n.user_name,avatarUrl:s,url:(0,l.SJN)(t,{addBase:!0,params:{source:"embed"}}),isEditorNode:!0}))),!0}})({publication:t,meetingsConfig:n,usePublicationName:r})(o,s)}}})})},5113:function(e,t,n){n.d(t,{p:()=>l});var r=n(88285),i=n(10933);let l=r.YY.create({name:"paywallCustom",addCommands:()=>({addPaywall:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.kI)(e)(n,r)}})})},96208:function(e,t,n){n.d(t,{k:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"pinterestInsert",addCommands:()=>({insertPinterest:e=>{let{url:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{url:t}=e;return(e,n)=>{if(n){if(!e.schema.nodes.pinterest)return console.error("pinterest node not defined"),!1;n((0,i.DL)(e,e.schema.nodes.pinterest.create({url:t})))}return!0}})({url:t})(n,r)}}})})},93692:function(e,t,n){n.d(t,{P:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"pollInsert",addCommands:()=>({insertPoll:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{id:t}=e;return(e,n)=>(n&&n((0,i.DL)(e,e.schema.nodes.poll.create({id:t}))),!0)})({id:t})(n,r)}}})})},56456:function(e,t,n){n.d(t,{c:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"recipeInsert",addCommands:()=>({insertRecipe:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{id:t}=e;return(e,n)=>(n&&n((0,i.DL)(e,e.schema.nodes.recipe.create({id:t}))),!0)})({id:t})(n,r)}}})})},28177:function(e,t,n){n.d(t,{S:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"sponsorshipCampaignInsert",addCommands:()=>({insertSponsorshipCampaign:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{id:t}=e;return(e,n)=>{var r,l;return n&&(null==e||null==(l=e.schema)||null==(r=l.nodes)?void 0:r.sponsorshipCampaign)&&n((0,i.DL)(e,e.schema.nodes.sponsorshipCampaign.create({id:t}))),!0}})({id:t})(n,r)}}})})},36986:function(e,t,n){n.d(t,{T:()=>l});var r=n(88285),i=n(33333);let l=r.YY.create({name:"videoInsert",addCommands:()=>({insertVideo:e=>{let{mediaUploadId:t}=e;return e=>{let{state:n,dispatch:r}=e;return(e=>{let{mediaUploadId:t}=e;return(e,n)=>(n&&n((0,i.DL)(e,e.schema.nodes.video.create({mediaUploadId:t,isEditorNode:!0}))),!0)})({mediaUploadId:t})(n,r)}}})})},5035:function(e,t,n){n.d(t,{E6:()=>u,_1:()=>d,c:()=>c});var r=n(69277),i=n(70408),l=n(88285),a=n(31583),o=n(68349),s=n(78495);let d="highlighted_code_block",c={content:"text*",group:"block",code:!0,defining:!0,isolating:!0,draggable:!0,selectable:!0,marks:"",attrs:{language:{default:"plaintext"},nodeId:{default:null}},parseDOM:[{tag:"div.".concat(d),preserveWhitespace:"full",getAttrs:e=>{let t=(0,s.t)(e);return(0,i._)((0,r._)({},t||{}),{nodeId:(0,o.QT)()})},contentElement:"code"},{tag:"pre.shiki",preserveWhitespace:"full",getAttrs:()=>({nodeId:(0,o.QT)()}),contentElement:"code"}],toDOM:e=>["div",{class:d,"data-attrs":JSON.stringify(e.attrs),"data-component-name":"HighlightedCodeBlockToDOM"},["pre",{class:"shiki"},["code",{class:"language-".concat(e.attrs.language)},0]]],toDOMStatic:e=>["div",{class:d,"data-attrs":JSON.stringify((0,i._)((0,r._)({},e.attrs),{isEmail:!0})),"data-component-name":"HighlightedCodeBlockToDOMStatic"},["pre",["code",{class:"language-".concat(e.attrs.language)},0]]]},u=l.bP.create({name:d,priority:1e3,group:c.group,content:c.content,code:c.code,defining:c.defining,isolating:c.isolating,marks:c.marks,draggable:c.draggable,selectable:c.selectable,addOptions:()=>({isStatic:!1,HTMLAttributes:{}}),addAttributes:()=>({language:{default:"plaintext",parseHTML:p},nodeId:{default:null}}),parseHTML:()=>c.parseDOM,renderHTML(e){let{node:t}=e;return this.options.isStatic&&c.toDOMStatic?c.toDOMStatic(t):c.toDOM(t)},addNodeView(){let{HighlightedCodeBlockEditor:e}=n(88160);return(0,a.gu)(e)},addKeyboardShortcuts(){return{"Mod-a":e=>{let{editor:t}=e;return function(e,t){let{$from:n}=e.state.selection;for(let r=n.depth;r>0;r--)if(n.node(r).type.name===t)return e.commands.setTextSelection({from:n.start(r),to:n.end(r)}),!0;return!1}(t,this.name)},Tab:e=>{let{editor:t}=e;return function(e,t){let{$from:n}=e.state.selection;for(let r=n.depth;r>0;r--)if(n.node(r).type.name===t)return e.commands.insertContent("  ");return!1}(t,this.name)}}},addCommands(){return{insertHighlightedCodeBlock:e=>t=>{let{chain:n,state:r}=t;return function(e,t,n,r){let{$from:i}=t.selection,l=i.end();return e().setTextSelection(l).insertContent({type:n,attrs:{language:(null==r?void 0:r.language)||"plaintext",nodeId:(0,o.QT)()}}).run()}(n,r,this.name,e)},toggleHighlightedCodeBlock:()=>e=>{let{commands:t,state:n,view:r}=e;return function(e,t,n,r){let{selection:i}=t;return i.$head.parent.type.name===r?e.setNode("paragraph"):e.setNode(r,{language:"plaintext",nodeId:(0,o.QT)()})}(t,n,0,this.name)},setHighlightedCodeBlockLanguage:e=>t=>{let{commands:n}=t;return n.updateAttributes(this.name,{language:e})}}},addProseMirrorPlugins(){let{CodeBlockPlugin:e}=n(50820);return[e({defaultLanguage:"typescript",defaultTheme:"github-light-default",themes:{light:"github-light-default",dark:"github-dark-default"}})]}});function p(e){let t=e.querySelector("code");if(t){let e=Array.from(t.classList).find(e=>e.startsWith("language-"));return e?e.replace("language-",""):"plaintext"}try{let t=e.getAttribute("data-attrs");if(t)return JSON.parse(t).language||"plaintext"}catch(e){console.error("Failed to parse language from element:",e)}return"plaintext"}},8283:function(e,t,n){n.d(t,{I:()=>r});let r='!function(){"use strict";window.addEventListener("message",(function(e){if(void 0!==e.data["datawrapper-height"]){var t=document.querySelectorAll("iframe");for(var a in e.data["datawrapper-height"])for(var r=0;r<t.length;r++){if(t[r].contentWindow===e.source)t[r].style.height=e.data["datawrapper-height"][a]+"px"}}}))}();'},65112:function(e,t,n){n.d(t,{lh:()=>l});var r=n(44383),i=n.n(r);let l=e=>{let{attrs:t}=e,n={};for(let[e,r]of Object.entries(t))n[e]=i()(r,["default"]);return n}},69866:function(e,t,n){n.d(t,{U:()=>l,c:()=>i});var r=n(99851);let i={attrs:{},inline:!1,group:"block",atom:!0,selectable:!0,isolating:!1,defining:!1,draggable:!0,parseDOM:[{tag:".paywall-jump"}],toDOM:()=>["div",{class:"paywall-jump","data-component-name":"PaywallToDOM"}]};class l{constructor(){var e,t,n;(0,r._)(this,"dom",void 0);const i="undefined"!=typeof window&&null!=(n=null==(t=window._preloads)||null==(e=t.pub)?void 0:e.language)?n:"en",{iString:l}=I18N.i(i),a=document.createElement("div");a.className="paywall-editor",a.appendChild(document.createElement("hr"));const o=document.createElement("div");o.className="paywall-editor-pill";const s=document.createElement("span");s.innerText=l("Paid content below this line");const d=document.createElement("div");d.className="paywall-editor-pill-icon-container",d.innerHTML='\n<svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8.75439 4.33398V14.834" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.50439 9.58398L8.7544 14.834L14.0044 9.58398" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',o.appendChild(s),o.appendChild(d),a.appendChild(o),a.appendChild(document.createElement("hr")),this.dom=a}}},54958:function(e,t,n){n.d(t,{A:()=>l});var r=n(65768),i=n(8037);let l=new r.Ay({actionButtonAttr:"raw_href",substackType:"pdf",mimeTypesToSignature:i.mw,actionButtonText:"Download"})},91809:function(e,t,n){n.d(t,{e:()=>i});var r=n(39318);let i=function(e,t,n,i){let{targetUrl:l}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=["td",{class:"audio-details","data-component-name":"AudioEmbedStatic"},["p",{class:"title"},t],["p",{class:"subtitle"},n]];i&&(a=[...a,["p",{class:"metadata"},i]]);let o=["table",{class:"audio-embed-static",cellspacing:"12","data-component-name":"AudioEmbedStaticTable"},["tr",{},["td",{class:"thumbnail-container"},["div",{class:"play-container"},["img",{class:"play",src:(0,r.dJ9)("/img/thumbnail-play.png",72),height:36,width:36}]],["img",{class:"thumbnail",src:(0,r.dJ9)(e,160),height:80,width:80}]],a]];return l?["a",{class:"audio-embed-static-outer",href:l,target:"_blank","data-component-name":"AudioEmbedStaticLink"},o]:o}},25187:function(e,t,n){n.d(t,{o:()=>r});let r={parseDOM:[{tag:"del"},{tag:"s"}],toDOM:()=>["s",0]}},90565:function(e,t,n){n.d(t,{i:()=>r});let r={parseDOM:[{tag:"sub"}],toDOM:()=>["sub",0]}},54544:function(e,t,n){n.d(t,{L:()=>r});let r={parseDOM:[{tag:"sup"}],toDOM:()=>["sup",0]}},75237:function(e,t,n){n.d(t,{A:()=>function* e(t){if(yield t,t.content)for(let n of t.content)yield*e(n)}})},4518:function(e,t,n){n.d(t,{c:()=>r});let r=(e,t)=>{if(!t)return!1;let n=e.selection.$from;for(let e=n.depth;e>=0;e--){let r=n.index(e);if(n.node(e).canReplaceWith(r,r,t))return!0}return!1}},29496:function(e,t,n){n.d(t,{C:()=>i});var r=n(88285);let i=e=>{let{name:t,nodeSpec:n,addNodeView:i,addCommands:l}=e;return r.bP.create({name:t,content:n.content,marks:n.marks,group:n.group,inline:n.inline,atom:n.atom,selectable:n.selectable,draggable:n.draggable,code:n.code,whitespace:n.whitespace,defining:n.defining,isolating:n.isolating,addNodeView:i,addCommands:l,renderHTML(e){return this.options.isStatic&&n.toDOMStatic?n.toDOMStatic(e.node):n.toDOM(e.node)},parseHTML:()=>n.parseDOM,addAttributes:()=>(e=>{let{attrs:t}=e,n={};if(!t)return n;for(let[e,i]of Object.entries(t)){var r;n[e]={default:null!=(r=i.default)?r:null,keepOnSplit:!1}}return n})({attrs:n.attrs})})}},90032:function(e,t,n){n.d(t,{c:()=>function e(t,n){if(!t||((0,r.M5)(t)||(0,r.rQ)(t))&&!n(t))return null;if((0,r.M5)(t)&&t.content&&t.content.length>0){if(t.content=t.content.filter(t=>e(t,n)),0===t.content.length)return null}else if((0,r.rQ)(t)){let i=(0,r.p0)({fragment:t.content});if(i.length>0){let l=i.filter(t=>e(t,n));if(0===l.length)return null;(0,r.x6)({fragment:t.content,content:l})}}return t}});var r=n(60597)},68530:function(e,t,n){n.d(t,{i:()=>l});var r=n(88285),i=n(579);let l=e=>{let{doc:t,extensions:n,customDocument:l}=e,a=(0,r._w)(n),o=i.bP.fromJSON(a,t),s=document.createElement("div");return i.ZF.fromSchema(a).serializeFragment(o.content,{document:l},s),s.innerHTML}},78495:function(e,t,n){n.d(t,{t:()=>r});let r=e=>{try{if("string"!=typeof e){let t=e.getAttribute("data-attrs");if(t)return JSON.parse(t)}}catch(e){}return!1}},72385:function(e,t,n){n.d(t,{A:()=>l});var r=n(65768),i=n(8037);let l=new r.Ay({actionButtonAttr:null,substackType:"xlsx",mimeTypesToSignature:i.f9,actionButtonText:null})},61522:function(){},26506:function(){},67792:function(){},89705:function(){},60624:function(){},62463:function(){},51902:function(){},21638:function(){}}]);