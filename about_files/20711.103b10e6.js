!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var l=(new e.Error).stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="2af58277-bb28-4eec-8311-0b81b35f1474",e._sentryDebugIdIdentifier="sentry-dbid-2af58277-bb28-4eec-8311-0b81b35f1474")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["20711"],{34746:function(e,l,t){if(t.d(l,{EH:()=>q,Qy:()=>G,pU:()=>P}),t(99851),!/^(52101|90887)$/.test(t.j))var a=t(69277);if(!/^(52101|90887)$/.test(t.j))var n=t(32641);var i=t(79785),s=t(4006),r=t(32485),c=t.n(r),o=t(17402),u=t(15734),d=t.n(u),p=t(47963),m=t(97432),h=t(79391),b=t(41873),f=t(84605),y=t(86500),_=t(68349),w=t(24078),v=t(35369),Y=t(76977),g=t(16993),k=t(63136),N=t(11510),U=t(98111),C=t(56458),S=t(39318),E=t(41086),A=t(57324),F=t(73683);function D(){let e=(0,i._)(["Available now for iOS and Android"]);return D=function(){return e},e}function V(){let e=(0,i._)(["Upgrade to ",""]);return V=function(){return e},e}function T(){let e=(0,i._)(["Upgrade to ",""]);return T=function(){return e},e}function I(){let e=(0,i._)(["Already in the "," plan?"]);return I=function(){return e},e}function O(){let e=(0,i._)(["Already in the Founding Member plan?"]);return O=function(){return e},e}let P=e=>{var l,t;let a,{className:n=null,title:i,subtitle:r=null,reauthenticationTitle:u,publication:b,post:v,user:g,freeSignup:U=null,freeSignupEmail:C=null,email_form:F=!1,autoFocus:V=!1,isStatic:T=!1,coupon:I=null,showPostUnlockPrompt:O=!1,magicToken:P=null,onPostUnlockError:K=null,isUnsubscribedPostUnlockUpsell:R,onOpenPostUnlockModal:B=null,hasCompletedUnsubscribedUnlock:J=!1}=e,q=null==g?void 0:g.reader_installed_at,{iString:H,iTemplate:W}=(0,f.GO)(),{modal:X,open:Q}=(0,p.El)({utm_campaign:A._9.paywallPostUnlockPrompt,utm_source:A.VU.substack,overrideCTA:q?H("Open in app"):void 0,overrideTitle:H(q?"Unlock your free post in the Substack app":"Get the free Substack app to unlock this post"),subTitle:W(D()),openUrl:null!=(l=q&&(0,S.XV8)(b.subdomain,v.slug))?l:void 0}),$=g&&g.email||C||null,z=!!((null==g?void 0:g.is_subscribed)&&(null==g?void 0:g.is_magic)),M=(null==v?void 0:v.audience)==="founding",Z=!!((null==g?void 0:g.is_free_subscribed)||U),ee=(0,S.wu9)(b,v),el=(0,N.Iu)(),et=(0,o.useCallback)(async e=>{if(e||(0,y.u4)(y.qY.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:v.id,publication_id:b.id,from_email:e,source:"paywall"}),R&&B)J&&el?(0,_.V2)((0,S.XV8)(b.subdomain,v.slug,{redirect:"app-store",params:{utm_campaign:A._9.paywallPostUnlockPrompt,utm_source:A.VU.paywall}})):B();else try{await d().post("/api/v1/post_unlock_token").send({post_id:v.id,token:P}),el?(0,_.V2)((0,S.XV8)(b.subdomain,v.slug,{redirect:"app-store",params:{utm_campaign:A._9.paywallPostUnlockPrompt,utm_source:A.VU.paywall}})):Q()}catch(e){null==K||K()}},[v.id,v.slug,b.id,b.subdomain,P,q,Q,K,el,R,B,J]),ea=(0,o.useCallback)(()=>et(!0),[et]),en=(0,o.useCallback)(()=>et(!1),[et]);(0,o.useEffect)(()=>{O&&(0,y.u4)(y.qY.PAYWALL_UNLOCK_CTA_VIEWED,{publication_id:b.id,post_id:v.id})},[v.id,b.id,O]),(0,o.useEffect)(()=>{(0,E.y)("launch_post_unlock_offer")&&(ea(),window.history.replaceState({},document.title,(0,S.oRR)({launch_post_unlock_offer:null})))},[ea]);let ei=!!I&&!!I.id&&!M&&!O;return a=ei?H((null==v?void 0:v.type)==="podcast"?"Listen to this episode with a 7-day free trial":(null==v?void 0:v.type)==="video"?"Watch with a 7-day free trial":"Keep reading with a 7-day free trial"):z?u:i,(0,s.FD)("div",{className:c()("paywall",n),"data-testid":"paywall","data-component-name":"Paywall",role:"region","aria-label":H("Paywall"),children:[O&&(0,s.Y)(w.eu,{photoUrl:null!=(t=b.author_photo_url)?t:void 0,size:64,className:T?"paywall-unlock-avatar-static":"paywall-unlock-avatar"}),$&&!O&&(0,s.FD)(k.EY,{translated:!0,as:"div",className:"paywall-intro",paddingBottom:8*!!O,children:["Hi ",(0,s.Y)("b",{children:I18N.p($)})]}),(0,s.Y)("h2",{className:c()("paywall-title",O&&"unlock-treatment-new"),children:a}),r&&!ei&&(0,s.Y)("p",{className:"paywall-subtitle",children:r}),ei&&(0,s.FD)("div",{className:"paywall-free-trial-subtitle",children:[(null==v?void 0:v.type)==="podcast"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to listen to this post and get 7 days of free access to the full post archives."]}),(null==v?void 0:v.type)==="video"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to watch this video and get 7 days of free access to the full post archives."]}),(null==v?void 0:v.type)==="newsletter"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{as:"span",weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to keep reading this post and get 7 days of free access to the full post archives."]}),(null==v?void 0:v.type)==="adhoc_email"&&(0,s.FD)(k.EY,{translated:!0,as:"p",className:"paywall-subtitle",children:["Subscribe to"," ",(0,s.Y)(k.EY,{weight:"bold",fontStyle:"italic",children:I18N.p(b.name)})," ","to keep reading this email and get 7 days of free access to the full post archives."]})]}),F?!Z&&(0,s.Y)(Y.Ye,{paddingTop:24,justifyContent:"center",children:(0,s.Y)(m.A,{autoFocus:null==V||V,email:$,freeSignup:U,freeSignupEmail:C,onAccentBackground:!0,pub:b,source:"post-unlock",submitButtonText:H((null==v?void 0:v.type)==="podcast"?"Start listening":(null==v?void 0:v.type)==="video"?"Start watching":"Start reading"),user:g,onSuccess:()=>document.location.reload()})}):O?(0,s.FD)(s.FK,{children:[X,(0,s.Y)(j,{isStatic:T,onClick:en,btnClassName:c()(O&&"paywall-cta-icon"),isUnsubscribedPostUnlockUpsell:R,children:H(R&&J?"Open the app":"Claim my free post")})]}):(0,s.Y)(L,{coupon:I,email:$,isStatic:T,post:v,postUrl:ee,publication:b,useCoupon:ei,user:g}),O&&(0,s.Y)(x,{isStatic:T,publication:b,post:v,postUrl:ee,coupon:I,useCoupon:ei,children:R?(0,s.Y)(s.FK,{children:H("Or purchase a paid subscription.")}):(0,s.FD)(s.FK,{children:[H("Or upgrade your subscription.")," ",(0,s.Y)("b",{children:(0,s.Y)(h.n,{pub:b,user:g,isStatic:!0})})]})}),!z&&!T&&!O&&(0,s.Y)("div",{className:"paywall-login",children:(0,s.FD)("a",{href:(0,S.a7q)({for_pub:b.subdomain,change_user:!!$}),"data-native":!0,children:[G({post:v,publication:b,isPaid:!F})," ",(0,s.Y)("b",{children:H($?"Switch accounts":"Sign in")})]})})]})},L=e=>{var l,t;let{coupon:a,email:n,isStatic:i,post:r,postUrl:c,publication:o,useCoupon:u,user:d}=e,p=!!(null==d?void 0:d.is_founding),m=!!(null==d?void 0:d.is_subscribed),b=!!((null==d?void 0:d.is_subscribed)&&(null==d?void 0:d.is_magic)),y=(null==r?void 0:r.audience)==="founding",{iString:_,iTemplate:w}=(0,f.GO)();if(i){if(!o.plans)return null;let e=y?U.T.FOUNDING_CHECKOUT_URL:U.T.CHECKOUT_URL,t=u?"&coupon=".concat(null==a?void 0:a.id):"",n=y?w(V(),null!=(l=(0,C.m4)(o))?l:""):u?_("Start trial"):(0,s.Y)(h.n,{pub:o,user:d,isStatic:i});return(0,s.Y)(K,{href:"".concat(e,"simple=true&utm_source=").concat(A.VU.paywall,"&utm_medium=").concat(A.Jn.email,"&utm_content=").concat(r.id,"&next=").concat(c).concat(t),children:n})}return!p&&y?o.plans?(0,s.Y)(R,{href:(0,S.my9)(o,{simple:!0,next:document.location.href,utm_source:A.VU.paywall,utm_medium:A.Jn.web,utm_content:r?r.id:null,plan:"founding"}),children:w(T(),null!=(t=(0,C.m4)(o))?t:"")}):null:m?b?(0,s.Y)(R,{href:(0,S.a7q)({for_pub:o.subdomain,email:n}),children:_("Click here to sign in")}):null:o.plans?(0,s.Y)(R,{href:(0,S.my9)(o,{simple:!0,next:document.location.href,utm_source:u?A.VU.paywallFreeTrial:A.VU.paywall,utm_medium:i?A.VU.email:A.VU.web,utm_content:r?r.id:null,coupon:u?null==a?void 0:a.id:null}),children:u?_("Start trial"):(0,s.Y)(h.n,{pub:o,user:d,isStatic:i})}):null},K=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{className:"button primary subscribe-btn",href:t,children:(0,s.Y)("span",{children:l})})})},R=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{href:t,"data-native":!0,children:(0,s.Y)(v.Nm,{resetCss:!0,className:c()("subscribe-btn",F.A.subscribeButton),children:l})})})},x=e=>{let{post:l,isStatic:t,publication:a,onClick:n,children:i,postUrl:r,coupon:c,useCoupon:o}=e,u=(0,S.my9)(a,{simple:!0,next:document.location.href,utm_source:A.VU.paywall,utm_medium:t?A.Jn.email:A.Jn.web,utm_content:l?l.id:null,just_signed_up:!1});n=async()=>{(0,_.V2)(u)};let d=o?"&coupon=".concat(null==c?void 0:c.id):"",p="".concat(u,"simple=true&utm_source=").concat(A.VU.paywall,"&utm_medium=").concat(A.Jn.email,"&utm_content=").concat(l.id,"&next=").concat(r).concat(d);return t?(0,s.Y)(B,{href:p,children:i}):(0,s.Y)(J,{onClick:n,href:p,children:i})},B=e=>{let{children:l,href:t}=e;return(0,s.Y)("div",{className:"paywall-secondary-cta",children:(0,s.Y)("a",{href:t,children:l})})},J=e=>{let{children:l,href:t,onClick:a}=e;return(0,s.Y)("div",{className:"paywall-secondary-cta",children:(0,s.Y)("a",{onClick:a,href:t,"data-native":!0,children:l})})},j=e=>{let{isStatic:l,onClick:t,children:a,btnClassName:n,disabled:i,isUnsubscribedPostUnlockUpsell:r}=e;return l?(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{className:c()("button","primary",n),href:"".concat(U.T.POST_URL).concat(r?"&launch_post_unlock_offer=true&bypass_subscription_check=true":"&launch_post_unlock_offer=true"),children:a})}):(0,s.Y)("div",{className:"paywall-cta",children:(0,s.Y)("a",{onClick:t,"data-native":!0,children:(0,s.Y)(v.Nm,{resetCss:!0,className:c()("subscribe-btn",F.A.subscribeButton,n),disabled:i,children:a})})})};function q(e){let{isOpen:l,onClose:t}=e,i=(0,n._)(e,["isOpen","onClose"]);return(0,s.FD)(g.aF,{isOpen:l,onClose:t,children:[(0,s.Y)(g.rQ,{showClose:!0,onClose:t}),(0,s.Y)(P,(0,a._)({className:"modal-paywall"},i))]})}function G(){let{post:e,publication:l,isPaid:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{iString:a,iTemplate:n}=I18N.i(l?{pub:l}:"en");if(!t)return a("Already a subscriber?");if((null==e?void 0:e.audience)==="founding"){var i;return(0,C.m4)(l)?n(I(),null!=(i=(0,C.m4)(l))?i:""):n(O())}return a("Already a paid subscriber?")}b.A}}]);