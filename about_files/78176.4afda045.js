!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="817e7561-21b5-4f3f-af23-d1994ebb75e1",e._sentryDebugIdIdentifier="sentry-dbid-817e7561-21b5-4f3f-af23-d1994ebb75e1")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["78176"],{91093:function(e,t,a){a.d(t,{A:()=>n});let n={queue:"queue-EZRP7x",cardWrapper:"cardWrapper-qR0zV5",smallCardWrapper:"smallCardWrapper-GidLX3",archived:"archived-tVgnOK",arrow:"arrow-M1xp9f",disabled:"disabled-C1q6TH",link:"link-gPxpTf",highlight:"highlight-khGgmH",border:"border-Sobc4n",playButtonContainer:"playButtonContainer-SkXFOr",playButton:"playButton-NfBL9x",logoContainerShadow:"logoContainerShadow-MadM6a",cornerLogo:"cornerLogo-sq79Zv",vibranceTertiaryIcon:"vibranceTertiaryIcon-FMLmJq",vibranceSecondaryText:"vibranceSecondaryText-mI5k5T",vibranceTertiaryBg:"vibranceTertiaryBg-dway6D",closeButton:"closeButton-dm0qJO",closeIcon:"closeIcon-dUQ0_l",card:"card-DZvXCa",smallCard:"smallCard-QlKXKt",cardBg:"cardBg-Vnz3e5",cardTop:"cardTop-qa11Ls",bigCardTop:"bigCardTop-xISBuI",smallCardTop:"smallCardTop-YuCbBT",gifPreview:"gifPreview-jTpyu3",coverImage:"coverImage-h44eo2",audioWaveform:"audioWaveform-QTkNO2",audioLogoContainer:"audioLogoContainer-yUWOV3",cardBottom:"cardBottom-KjkXaq",smallCardRight:"smallCardRight-A8Afqo",titleContainerMinHeight:"titleContainerMinHeight-QKOvED",title:"title-EwaRJw",smallCardAuthor:"smallCardAuthor-MXnD06",iconButton:"iconButton-g5L_4l",isSaved:"isSaved-Ml5fNZ",newIconButton:"newIconButton-AH4esm",livePreview:"livePreview-t_LWyR",blur:"blur-Q0P53N",explicitIcon:"explicitIcon-otqJ1H"}},70828:function(e,t,a){a.d(t,{A:()=>n});let n={container:"container-fi9IrN",nav:"nav-ptYSWX"}},72035:function(e,t,a){a(4006),a(97731)},13918:function(e,t,a){a.d(t,{Dq:()=>z,d2:()=>J,u3:()=>V});var n=a(99851),i=a(69277),o=a(70408),r=a(4006),s=a(32485),c=a.n(s),l=a(83673),d=a.n(l),u=a(17402),p=a(34615),m=a(27437),h=a(17436),g=a(54158),b=a(89839),_=a(18325),f=a(59821),Y=a(26184),v=a(53868),y=a(97683),C=a(11333),k=a(41935),S=a(55136),w=a(84605),N=a(85478),B=a(6049),T=a(86500),A=a(12501),E=a(24078),D=a(22057),M=a(76977),I=a(63136),P=a(83629),L=a(16291),F=a(41232),x=a(98111),W=a(56458),R=a(56262),q=a(39318),O=a(70189),U=a(49807),Z=a(82776),H=a(57324);class K extends u.Component{componentWillUnmount(){this.unmounted=!0}render(){let{pub:e,post:t,showAuthor:a,showPhoto:n,fromPostPage:s}=this.props;return(0,k.AS)({pub:e,post:t,showAuthor:a,showPhoto:n})||(0,k.o$)({pub:e,post:t,showAuthor:a})||(0,k.Bq)({pub:e,post:t,showAuthor:a})?this.withAuthorLine(this.props,this.state):(0,r.Y)(Q,(0,o._)((0,i._)({},this.props),{className:"alternative-meta",isMobileWidth:this.state.isMobileWidth,actionBarStyle:s?"post-header-compact":"post-preview"}))}constructor(e,t){var a;if(super(e,t),(0,n._)(this,"unmounted",void 0),(0,n._)(this,"withAuthorLine",(e,t)=>{let{pub:a,post:n,showAuthor:i,showPhoto:o,getConfigFor:s,isAppMode:l}=e,d="adhoc_email"===n.type,u=(0,Z.getBylineUsers)(n).length,p=1===u&&(0,Z.getBylineUsers)(n)[0],m=p&&p.is_guest&&!s("dont_show_guest_byline")&&!d,h=e.showDate||e.showDatetime,g=!n.is_published&&!e.inThreadHead&&h&&!d,b=e.isFreePreview&&e.showAudience&&h&&!d,_=(0,R.isFoundingAudience)(n.audience)&&e.showAudience&&!b&&h&&!d&&!(0,W.Ed)({post:n}),f=(0,R.isPaidAudience)(n.audience)&&e.showAudience&&!_&&!b&&h&&!d&&!(0,W.Ed)({post:n}),Y=(0,k.AS)({pub:a,post:n,showAuthor:i,showPhoto:o});return(0,r.Y)(B.h2,{width:"100%",className:c()("post-meta"),children:(0,r.FD)("tr",{children:[(0,r.Y)("td",{children:(0,r.FD)(B.jJ,{children:[(0,r.Y)(B.ZB,{gap:4,children:(0,r.Y)(I.EY.Meta,{color:"primary",className:F.A.postAuthor,children:u>0?(0,Z.oxfordComma)((0,Z.getBylineUsers)(n).map(e=>(0,r.Y)(I.EY.Meta,{as:"a",href:l?(0,U.gTK)({user_id:e.id,user_name:e.name,redirect:"app-store-no-desktop"}):(0,q.laT)(e,a),color:"primary",style:{textDecoration:"none"},children:e.name}))):(0,Z.getPrintedByline)(a,n)})}),(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:(e.showDate||e.showDatetime)&&n.post_date&&(0,r.Y)("time",{dateTime:(0,L.A)(n.post_date).toISOString(),children:(0,L.A)(n.post_date).locale(this.context.language).standardDate()})}),f&&(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:"∙"}),(0,r.Y)(I.EY.Meta,{color:"paid",translated:!0,children:"Paid"})]}),_&&(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:"∙"}),(0,r.Y)(I.EY.Meta,{color:"paid",children:this.context.iString((0,W.G8)(a,n))})]}),b&&(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:"∙"}),(0,r.Y)(I.EY.Meta,{color:"paid",translated:!0,children:"Preview"})]}),m&&(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:"∙"}),(0,r.Y)(I.EY.Meta,{translated:!0,children:"Guest post"})]}),g&&(0,r.FD)(B.ZB,{gap:4,children:[(0,r.Y)(I.EY.Meta,{children:"∙"}),(0,r.Y)(I.EY.Meta,{translated:!0,children:"Draft"})]})]})]})}),Y&&(0,r.Y)("td",{align:"right",children:(0,r.Y)(B.ZB,{gap:4,children:u>0&&(0,Z.getBylineUsers)(n).map((e,t)=>{var n;return t<4&&(0,r.Y)("a",{href:l?(0,U.gTK)({user_id:e.id,user_name:e.name,redirect:"app-store-no-desktop"}):(0,q.laT)(e,a),children:(0,r.Y)(B.Kb,{src:null!=(n=e.photo_url)?n:"",size:u>1?32:40})})})})})]})})}),"undefined"!=typeof window&&(null==(a=window)?void 0:a.matchMedia)){const e=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:e.matches};const t=e=>{this.unmounted||this.setState({isMobileWidth:e.matches})};e.addEventListener?e.addEventListener("change",t):e.addListener&&e.addListener(t)}}}(0,n._)(K,"contextType",w.OW);let V=(0,N.P_)(K);function J(e){var t,a;let{pub:n,post:o,user:s,reactors:c,secondaryFaces:l,mediaClipId:d}=e,[m,h]=(0,u.useState)(null),[g,b]=(0,u.useState)(!1),_=(0,A.st)({pathname:"primary"===m?"/api/v1/post/".concat(o.id,"/reactors"):"/api/v1/".concat(d?"media_clip":"post","/").concat(null!=d?d:o.id,"/restackers"),auto:!!m,deps:[o.id,m]}),f=G(c,s,!!o.reaction,n),Y=G(l,s,!!o.restacked,n),v=f.concat(Y.filter(e=>!!e.photo_url&&!f.find(t=>t.id===e.id))),y=Math.max(null!=(t=o.reactions["❤"])?t:0,(null!=f?f:[]).length),C=n.hide_post_restacks?0:null!=(a=o.restacks)?a:0,k=y>0?(0,Z.pluralize)(y,"Like"):"",S="";return C>0&&(S="".concat((0,Z.pluralize)(C,"Restack"))),(0,r.FD)(r.FK,{children:[(0,r.FD)(M.fI,{gap:16,alignItems:"center",color:"secondary",children:[(0,r.Y)(D.Z,{users:v,renderAvatar:e=>(0,r.Y)(E.tp,(0,i._)({},e)),direction:"rtl",renderCount:()=>(0,r.Y)(u.Fragment,{})}),(0,r.Y)(I.EY.B4,{color:"secondary",children:(0,r.FD)(M.fI,{gap:4,alignItems:"center",children:[(0,r.Y)(X,{label:k,onClick:()=>{y&&((0,T.u4)(T.qY.POST_REACTIONS_MODAL_VIEWED,{post_id:o.id}),h("primary"),b(!0))}}),k&&S&&"∙",(0,r.Y)(j,{post:o,label:S})]})})]}),_.result&&(0,r.Y)(p.K,{isOpen:g,modalLabel:k,faces:_.result,totalCount:y,onClose:()=>{b(!1),h(null)},utmSource:"post-reactions-modal"})]})}let X=e=>{let{label:t,onClick:a}=e;return(0,r.Y)(I.Yq,{onClick:a,color:"secondary",cursor:"pointer",children:t})},j=e=>{let{label:t,post:a}=e;return(0,r.Y)(I.EY.B4,{color:"secondary",children:(0,r.Y)(I.Yq,{href:(0,O.so)(a.id,{noBase:P.Z,urlParams:{utm_source:H.VU.substack,utm_content:H.fL.facepileRestacks}}),color:"secondary",children:t})})};function z(e){var t,a;let{post:n,user:o,pub:s,mediaClipId:c}=e,l=(0,A.st)({pathname:"/api/v1/post/".concat(n.id,"/facepile"),auto:!0,deps:[n.id,c],query:{media_clip_id:c}});return(0,r.Y)(J,(0,i._)({reactors:G(null==(t=l.result)?void 0:t.reactors,o,!!n.reaction,s),secondaryFaces:G(null==(a=l.result)?void 0:a.restackers,o,!!n.restacked,s)},e))}function G(e,t,a,n){if(!e)return[];if(t){let i=e.findIndex(e=>e.id===t.id);a&&("private"!==t.subscription_visibility||46438===n.id)&&t.activity_likes_enabled&&i<0?e.splice(0,0,{id:t.id,name:t.name,photo_url:t.photo_url}):!a&&i>=0&&e.splice(i,1)}return e}function Q(e){var t;let a,{additionalCommentCount:n=0,className:i,user:o,pub:s,post:l,showAudience:u=!1,showDate:p=!1,showEmailSent:b=!1,showDatetime:w=!1,showReactions:N=!0,showComments:B=!0,showShare:T=!1,showRestack:A=!1,showPublicationName:E=!1,hidePinning:D=!1,reaction_token:M,onClick:P,onChange:F,isStatic:W=!1,isFreePreview:O=!1,allowSendEmail:U=!1,allowEdit:K=!1,shareTooltipText:V,showPins:J,sharedShareDialog:X,onClickCommentButton:j,showAuthor:z,showPhoto:G,fromPostPage:Q,isMobileWidth:ee,actionBarStyle:et="post-header-compact"}=e,ea=s.id===l.publication_id?s:void 0,en="post-footer"===et,ei=en?20:"post-preview"===et?14:18,eo="post-header-large"===et?20:"post-preview"===et?16:"thread-head"===et||en?14:18;a=l.comment_url_override?l.comment_url_override:W?"".concat(x.T.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(H.VU.substack,"&utm_medium=").concat(H.Jn.email):(0,q.wu9)(s,l,{comments:!0});let er=n+(null!=(t=l.comment_count)?t:0),es=B&&!O&&(0,Z.showCommentsOnPost)({publication:s,post:l})&&"restack"!==l.type,ec=N&&!O&&!["adhoc_email","restack"].includes(l.type),el=(p||w)&&l.post_date&&!l.is_draft,ed=b?!!l.email_sent_at:null,eu=d()([b&&ed&&{className:"email-sent",title:"This post was sent as an email",content:(0,r.Y)(h.A,{className:"post-meta-icon",height:ei,isStatic:W})},J&&l.is_section_pinned&&{className:"icon pinned",content:(0,r.Y)(Y.A,{className:"post-meta-icon",isStatic:W})},"adhoc_email"===l.type?{className:"audience-adhoc",content:(0,r.Y)(v.A,{className:"post-meta-icon",isStatic:W})}:u&&(0,R.isPaidAudience)(l.audience)&&{className:"audience-lock",content:(0,r.Y)(g.A,{color:"#666666",height:ei,isStatic:W})},(0,k.uC)({pub:s,post:l,showAuthor:z,showPhoto:G,isMobileWidth:ee})&&{className:"author",content:(0,Z.getBylineUsers)(l).length>0?(0,Z.oxfordComma)((0,Z.getBylineUsers)(l).map(e=>(0,r.Y)(m.ProfileHoverCard,{disabled:W,subject:e,utmSource:"byline",trigger:(0,r.Y)("a",{href:(0,q.laT)(e,s),onClick:e=>e.stopPropagation(),children:e.name})}))):(0,Z.getPrintedByline)(s,l)},E&&{className:"post-publication-name",content:s.name},K&&!W&&o&&o.is_contributor&&{className:"post-meta-item icon edit-icon",onClick:e=>e.stopPropagation(),content:(0,r.Y)(y.B,{pub:s,post:l,iconHeight:ei,hidePinning:D,user:o,emailSent:ed,allowSendEmail:U})},el&&{className:"post-date",title:(0,L.A)(l.post_date).toISOString(),content:(0,r.Y)(I.EY.Meta,{children:(0,r.Y)("time",{dateTime:(0,L.A)(l.post_date).toISOString(),children:(0,k.sq)({post:l,showDatetime:w,isStatic:W,fromPostPage:Q,showReactions:ec})})})},(null==ea?void 0:ea.community_enabled)&&l.slug&&ec&&!l.is_draft&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,r.Y)(S.cy,{user:o,pub:s,post:l,token:M,onChange:e=>{null==F||F(e)},height:eo,isStatic:W,buttonStyle:en,className:"post-meta-icon like-reaction-button",hideReactionCount:en&&!W})},o&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,r.Y)($,{post:l,isPostFooter:en,isStatic:W,lucideIconHeight:eo,onChange:F})},(null==ea?void 0:ea.community_enabled)&&l.slug&&es&&!l.is_draft&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,r.FD)("a",{className:en?"post-meta-button button":"",href:a,"data-native":ea&&(0,q.dVy)(document.location.pathname)?"":void 0,onClick:j,children:[(0,r.Y)(_.A,{className:"comment-icon post-meta-icon",isStatic:W,height:eo,alt:"Comment",stroke:"#757575",fill:"transparent",strokeWidth:W?1:1.5,ampProps:{layout:"fixed"}}),!er&&en&&(0,r.Y)("span",{className:"meta-button-label",children:"Comment"}),er>0&&(0,r.Y)("span",{className:"comment-count",children:(0,Z.numberToString)(er)})]})},A&&!en&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,r.FD)("a",{href:x.T.RESTACK_URL,className:en?"button post-meta-button":void 0,children:[(0,r.Y)(f.A,{className:"recommend-icon post-meta-icon",isStatic:W,height:eo,alt:"Recommend",stroke:"#757575",fill:"transparent",strokeWidth:W?1:1.5,ampProps:{layout:"fixed"}}),en&&(0,r.Y)("span",{className:"meta-button-label",children:"Recommend"})]})},T&&"only_free"!==l.audience&&!l.is_draft&&!O&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,r.FD)(C._,{user:o,pub:ea,post:l,reaction_token:M,height:eo,onChange:F,isStatic:W,sharedShareDialog:X,position:"post-footer"===et?"post-footer":"post-header",linkClassName:en?"button post-meta-button":void 0,children:[en&&(0,r.Y)("span",{className:"meta-button-label",children:"Share"}),V&&(0,r.Y)("div",{className:"share-tooltip-wrap",children:(0,r.Y)("div",{className:"share-tooltip",children:V})})]})}]);return W?(0,r.Y)("table",{className:c()("post-meta custom",{big:en},i),cellpadding:"0",cellspacing:"0",onClick:P,children:(0,r.Y)("tr",{children:eu.map(e=>{let{className:t,title:a,onClick:n,content:i}=e;return(0,r.Y)("td",{className:c()("post-meta-item",t),title:a,onClick:n,children:i})})})}):(0,r.Y)("div",{className:c()("post-meta post-meta-actions-web custom",{big:en},i),onClick:P,children:eu.map(e=>{let{className:t,title:a,onClick:n,content:i}=e;return(0,r.Y)("div",{className:c()("post-meta-item",t),title:a,onClick:n,children:i})})})}function $(e){let{post:t,isPostFooter:a,isStatic:n,lucideIconHeight:s,onChange:l}=e,{onSave:d,isSaved:u}=(0,k.Jj)({post:t,isSaved:t.is_saved});return(0,r.FD)("a",{className:c()("post-meta-save-button",a?"post-meta-button button":"",{isSaved:u}),href:n&&x.T.SAVE_POST_URL||void 0,onClick:()=>{let e=d();null==l||l({post:(0,o._)((0,i._)({},t),{is_saved:e})})},children:[(0,r.Y)(b.A,{isStatic:n,height:s,stroke:"#757575",strokeWidth:n?1:1.5}),a&&(0,r.Y)("span",{className:"meta-button-label",children:"Save"})]})}},70690:function(e,t,a){function n(e,t){return e.startsWith(t.replace(/\?.*$/,""))}function i(e,t){return e.replace(/\?.*$/,"")===t.replace(/\?.*$/,"")}a.d(t,{W:()=>n,y:()=>i})}}]);