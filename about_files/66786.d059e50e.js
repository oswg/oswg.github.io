!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};t.SENTRY_RELEASE={id:"substack@af5f699"};var e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="d4df3986-d158-4c47-8fba-ef7ec05d12f0",t._sentryDebugIdIdentifier="sentry-dbid-d4df3986-d158-4c47-8fba-ef7ec05d12f0")}catch(t){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["66786"],{84985:function(t,e,i){i.d(e,{A:()=>n});let n={visitedSurfacesIFrame:"visitedSurfacesIFrame-yy8AJL"}},96917:function(t,e,i){i.d(e,{A:()=>f});var n=i(69277),o=i(70408),a=i(4006),s=i(17402),r=i(86500),l=i(17186),d=i(68349),u=i(39318),c=i(49807);let h="".concat(c.Pmx,"/fedcm/config.json");(0,c.Ewe)(),(0,u.a7q)();var m=i(41086);let p="domain-redirect-time";class f extends s.Component{componentDidMount(){(0,d.qm)("triedSigningIn");let t="undefined"!=typeof window&&window.location.pathname.endsWith("/listen");(this.loadedWithLikelyLoggedInParam()||t)&&!this.shouldBlockLoginRedirect()?this.attemptLoginRedirect({source:"param"}):(this.useFedCm()&&this.initiateFedCmFlow(),this.useIframe()&&window.addEventListener("message",t=>this.handleFrameMessage(t)))}useFedCm(){var t;return!!(null==(t=this.state.pub)?void 0:t.custom_domain)&&!this.state.user&&"undefined"!=typeof window&&"IdentityCredential"in window}async initiateFedCmFlow(){let t=await navigator.credentials.get({identity:{providers:[{configURL:h,clientId:"substack_custom_domain"}]}});(null==t?void 0:t.token)==="redirect-to-login"&&this.attemptLoginRedirect({source:"fedcm"})}shouldBlockLoginRedirect(){var t;let e=parseInt((0,l.xm)(p,0));return this.state.block_auto_login||!(null==(t=this.state.pub)?void 0:t.custom_domain)||this.state.user||"undefined"==typeof window||Date.now()-e<=864e5||this.state.triedSigningIn}handleFrameMessage(t){var e,i,n;if((null==(e=t.data)?void 0:e.type)!=="frame-state")return;let o=!this.shouldBlockLoginRedirect()&&(null==(i=t.data)?void 0:i.loggedInAtSubstack);(0,r.u4)(r.qY.FRAME_MESSAGE_HANDLED,{loggedInAtSubstack:null==(n=t.data)?void 0:n.loggedInAtSubstack,loggedInAtCustomDomain:!!this.state.user,attemptRedirect:o}),o&&this.attemptLoginRedirect({source:"cookie"})}attemptLoginRedirect(){var t;let{source:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.u4)(r.qY.CUSTOM_DOMAIN_LOGIN_REDIRECT_ATTEMPTED,{fromParam:"param"===e,source:e}),(0,l.X3)(p,"".concat(Date.now()));let i=(0,u.RY1)({useOriginalUrl:!0});this.props.initialData.hide_intro_popup&&(i=(0,u.oRR)(i,{hide_intro_popup:!0})),location.href=(0,u.a7q)({for_pub:null==(t=this.state.pub)?void 0:t.subdomain,justTrying:!0,redirect:i})}loadedWithLikelyLoggedInParam(){return"undefined"!=typeof window&&window._preloads.original_url&&!!(0,m.y)(window._preloads.original_url,"lli")}useIframe(){var t,e,i;return!("undefined"==typeof window||this.loadedWithLikelyLoggedInParam()||!(null==(t=this.state.pub)?void 0:t.custom_domain)||(0,u.P1Q)(null==(i=window)||null==(e=i.location)?void 0:e.href))}render(){return this.useIframe()?(0,a.Y)("iframe",{src:"".concat((0,u.Ewe)(),"/channel-frame"),className:"channel-frame",width:"0",height:"0"}):null}constructor(t,e){var i;super(t,e),this.state=(0,o._)((0,n._)({},t.initialData),{triedSigningIn:null!=(i=(0,m.y)("triedSigningIn"))?i:void 0})}}},56778:function(t,e,i){i.d(e,{A:()=>d});var n=i(99851),o=i(4006),a=i(32485),s=i.n(a),r=i(17402),l=i(68349);class d extends r.Component{async componentDidMount(){"undefined"!=typeof window&&(this.ref||await new Promise(t=>setTimeout(t,0)),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))}componentWillUnmount(){"undefined"!=typeof window&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render(){let{className:t,children:e}=this.props;return(0,o.Y)("div",{ref:this.assignRef,className:s()("visibility-check",t),children:e})}constructor(...t){super(...t),(0,n._)(this,"ref",void 0),(0,n._)(this,"assignRef",t=>{this.ref=t}),(0,n._)(this,"checkVisibility",()=>{if(!this.ref)return;let t=this.ref.getBoundingClientRect(),e=this.props.threshold||0,i=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),n=!(t.bottom<0-e||t.top>=i+e);(0,l.qr)(this,async(t,e)=>{if(t.isVisible!==n)this.setState({isVisible:n});else if(!e.noDedupe)return;let i=n?"hadFirstVisible":"hadFirstInvisible",o=!t[i];o&&this.setState({[i]:!0}),(await Promise.all([n&&e.onVisible&&e.onVisible(),n&&e.onFirstVisible&&o&&e.onFirstVisible(),!n&&e.onInvisible&&e.onInvisible(),!n&&e.onFirstInvisible&&o&&e.onFirstInvisible()])).reduce((t,e)=>!0===e||t)&&this.checkVisibility()})})}}},82203:function(t,e,i){i.d(e,{K:()=>u});var n=i(4006),o=i(32485),a=i.n(o),s=i(95977),r=i(41232),l=i(39891),d=i(87300);function u(t){let{src:e,size:i,framed:o,alt:u}=t;return(0,n.Y)(s.A,{className:a()(r.A.avatar,d.A.avatar,o&&d.A.framed),src:(0,l.dJ)(e),alt:u,style:{width:i,height:i,minWidth:i,minHeight:i,objectFit:"cover",margin:0,display:"inline",borderRadius:"50%"},width:i,height:i})}},76528:function(t,e,i){i.d(e,{AA:()=>l,OU:()=>r});var n=i(69277),o=i(32641),a=i(25250),s=i(94729);function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;var{deps:r,auto:l=!0,massage:d=async t=>t,shouldRevalidate:u=!0}=e,c=(0,o._)(e,["deps","auto","massage","shouldRevalidate"]);return(0,a.Ay)(l?r?[...r,t]:t:null,()=>(0,s.x6)(t,c).then(d),(0,n._)({},u?null:{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1},i))}function l(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{deps:i}=e,n=(0,o._)(e,["deps"]);(0,a.uv)(i?[...i,t]:t,()=>(0,s.x6)(t,n))}},24777:function(t,e,i){i.d(e,{A:()=>m,d:()=>h});var n=i(69277),o=i(70408),a=i(32641),s=i(4006),r=i(39651),l=i(32485),d=i.n(l);i(17402);var u=i(84605),c=i(77700);function h(t){var{size:e="md",theme:i="accent",onChange:l}=t,h=(0,a._)(t,["size","theme","onChange"]);let{iString:m}=(0,u.GO)();return(0,s.Y)(r.bL,(0,o._)((0,n._)({onCheckedChange:l,"aria-label":h["aria-label"]||m("Toggle setting"),className:d()(c.A.root,c.A[e],c.A["theme_".concat(i)])},h),{children:(0,s.Y)(r.zi,{className:d()(c.A.thumb,c.A[e])})}))}let m=h},67734:function(t,e,i){i.d(e,{id:()=>n,oW:()=>o}),i(90128),i(16291),i(82776);let n=(t,e)=>{let i;if(e&&e!==t.currency){var n,o,a;if(!(null==(n=t.currency_options)?void 0:n[e]))return;i=null!=(a=null==(o=t.currency_options[e])?void 0:o.unit_amount)?a:null}else i="object"in t&&"price"===t.object?t.unit_amount:t.amount;return null!=i?i:0},o=(t,e)=>{var i;return e&&e!==t.currency?null==(i=t.metadata.minimum_local)?void 0:i[e]:t.metadata.minimum}},47851:function(t,e,i){i.d(e,{mn:()=>n});let n={comp_one_month:"1 month comp",comp_three_months:"3 month comp",comp_six_months:"6 month comp",comp_nine_months:"9 month comp",comp_twelve_months:"12 month comp",custom:"Custom"}},46058:function(t,e,i){i.d(e,{D0:()=>d,Ji:()=>r,VL:()=>l,cp:()=>u,pI:()=>a,w3:()=>s});var n=i(92636),o=i(49807);function a(t,e){let i=s(t,e);return i||((null==e?void 0:e.darkMode)?u:d)}function s(t){let{preferAuthorPhoto:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&(null==t?void 0:t.author_photo_url)&&(0,o.dJ9)(t.author_photo_url)?(0,o.dJ9)(t.author_photo_url):(null==t?void 0:t.photo_url)&&(0,o.dJ9)(t.photo_url)?(0,o.dJ9)(t.photo_url):(null==t?void 0:t.id)!=null?r(t.id):null}function r(t){return"".concat((0,n.Ew)(),"/img/avatars/").concat(["purple","yellow","orange","green","black"][t%5],".png")}function l(t){return t.startsWith("".concat((0,n.Ew)(),"/img/avatars/"))}let d="".concat((0,n.Ew)(),"/img/avatars/default-light.png"),u="".concat((0,n.Ew)(),"/img/avatars/default-dark.png")}}]);