!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8ee55655-ff92-4b70-9479-d89ea9cb0254",e._sentryDebugIdIdentifier="sentry-dbid-8ee55655-ff92-4b70-9479-d89ea9cb0254")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["43718"],{37749:function(e,t,n){n.d(t,{A:()=>i});let i={chrome:"chrome-_LLvs8",hidden:"hidden-wHbbPQ",spinner:"spinner-Ti9Gdl",left:"left-YVRGou",right:"right-pvXhar",top:"top-deZX1P",bottom:"bottom-D60oFA",middle:"middle-DqhMOs",img:"img-nwpk1x",loading:"loading-UuPN_c"}},12791:function(e,t,n){n.d(t,{W:()=>f});var i=n(4006),r=n(63950),o=n.n(r),l=n(76977);function a(e){let{children:t}=e;return(0,i.Y)(l.fI,{justifyContent:"center",alignItems:"center",onClick:e=>e.stopPropagation(),paddingBottom:{desktop:12,mobile:0},className:"container-H9iqVx",children:t})}var u=n(75189),c=n(45854);function s(e){let{item:t,comment:n}=e;return(0,i.Y)(a,{children:(0,i.Y)(c.t,{children:(0,i.Y)(u.b,{item:t,comment:n,priority:"primary"})})})}var d=n(59339);function p(e){let{isLoading:t=!1,publication:n,post:r,onLike:o}=e;return(0,i.Y)(a,{children:(0,i.Y)(c.t,{children:(0,i.Y)(d.u,{isLoading:t,publication:n,post:r,onLike:o})})})}function f(e){let{post:t,publication:n,feedItem:r,onLike:l}=e;if(r&&"comment"===r.type)return(0,i.Y)(s,{item:r,comment:r.comment});if(t&&n){var a,u;return(0,i.Y)(p,{publication:null!=(a=null==r?void 0:r.publication)?a:n,post:null!=(u=null==r?void 0:r.post)?u:t,onLike:null!=l?l:o()})}return null}},19008:function(e,t,n){n.d(t,{h:()=>v});var i=n(4006),r=n(35426),o=n(38390),l=n(23623),a=n(90460);function u(e){let{onClose:t}=e;return(0,i.Y)(o.hJ,{forceMount:!0,className:"backdrop-SPBUoO",onClick:()=>t()})}var c=n(17402);let s=(0,c.forwardRef)((e,t)=>{let{children:n}=e;return(0,i.Y)(o.UC,{forceMount:!0,ref:t,className:"panel-vMauWo",onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onPointerDownOutside:e=>{e.preventDefault()},children:n})}),d="transition-Dki0wq",p="from-b7KIRm",f="to-np0fky",m=e=>{let{children:t}=e;return(0,i.Y)(r.e.Child,{as:c.Fragment,enter:d,enterFrom:p,enterTo:f,leave:d,leaveFrom:f,leaveTo:p,children:t})};var h=n(80988),b=n(45346);function v(e){let{isOpen:t,onClose:n=()=>void 0,children:c}=e;return(0,a.h)(t),(0,i.Y)(o.bL,{open:t,onOpenChange:e=>{e||n()},children:(0,i.Y)(o.ZL,{forceMount:!0,children:(0,i.Y)(r.e.Root,{show:t,children:(0,i.FD)(h.k,{children:[(0,i.Y)(b.B,{children:(0,i.Y)(u,{onClose:n})}),(0,i.Y)(l.a,{children:(0,i.Y)(m,{children:(0,i.Y)(s,{children:c})})})]})})})})}},59339:function(e,t,n){n.d(t,{u:()=>y});var i=n(4006),r=n(17402),o=n(58398),l=n(46271),a=n(3228),u=n(48226),c=n(52347),s=n(99978),d=n(69277),p=n(70408),f=n(82634);function m(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(u.c,{disabled:!1,priority:"primary"}),(0,i.Y)(a.k,{disabled:!1,priority:"primary"}),(0,i.Y)(f.Q,{disabled:!1,priority:"primary"}),(0,i.Y)(s.w,{disabled:!1,priority:"primary"})]})}var h=n(49807),b=n(82776),v=n(57324);function y(e){let{isLoading:t=!1,publication:n,post:f,onLike:y}=e,k=(0,l.Jd)(),[Y,g]=(0,r.useState)(!1),{isLiked:w,likeCount:_,handleLike:C}=function(e,t){let[n,i]=(0,r.useState)(()=>!!(null==e?void 0:e.reaction)),[o,l]=(0,r.useState)(()=>{var t;return null!=(t=null==e?void 0:e.reactions["❤"])?t:0});(0,r.useEffect)(()=>{if(e){var t;i(!!e.reaction),l(null!=(t=e.reactions["❤"])?t:0)}},[e]);let a=(0,r.useCallback)(()=>{if(!e)return;let r=!n;i(r),l(e=>e+(r?1:-1)),t(e.id,r)},[t,e,n]);return{isLiked:n,likeCount:o,handleLike:a}}(f,y),{handleRestack:D,postWithRestackState:F}=function(e){let[t,n]=(0,r.useState)(()=>!!(null==e?void 0:e.restacked)),[i,o]=(0,r.useState)(()=>{var t;return null!=(t=null==e?void 0:e.restacks)?t:0});return(0,r.useEffect)(()=>{if(e){var t;n(!!e.restacked),o(null!=(t=e.restacks)?t:0)}},[null==e?void 0:e.id]),{handleRestack:(0,r.useCallback)(e=>{n(t=>t!==e?(o(t=>t+(e?1:-1)),e):t)},[]),postWithRestackState:(0,r.useMemo)(()=>e?(0,p._)((0,d._)({},e),{restacked:t,restacks:i}):null,[e,t,i])}}(f);if(t)return(0,i.Y)(m,{});if(!n||!f)return null;let I=!k||!n.community_enabled,S=(0,b.showCommentsOnPost)({publication:n,post:f}),R="profile"===n.homepage_type?(0,h.q$n)(n,f):(0,h.wu9)(n,f,{comments:!0,urlParams:{utm_source:v.VU.substack,utm_medium:v.Jn.web,utm_campaign:v._9.postViewer}});return(0,i.FD)(i.FK,{children:[(0,i.Y)(u.c,{onClick:C,count:_,active:w,disabled:I,priority:"primary"}),(0,i.Y)(a.k,{href:R,count:f.comment_count,newTab:"profile"!==n.homepage_type,disabled:I||!S,priority:"primary"}),(0,i.Y)(c.H,{pub:n,post:F,priority:"primary",onRestack:D}),(0,i.Y)(s.w,{priority:"primary",onClick:()=>{g(!0)}}),(0,i.Y)(o.Z,{isOpen:Y,onClose:()=>g(!1),medium:"post viewer",utm_campaign:"post-expanded-share",user:k,post:f,pub:n})]})}},45854:function(e,t,n){n.d(t,{t:()=>o});var i=n(4006),r=n(76977);function o(e){let{children:t}=e;return(0,i.Y)(r.fI,{justifyContent:"space-between",alignItems:"center",sizing:"border-box",gap:32,className:"layout-Pwsidg",children:t})}},70568:function(e,t,n){function i(e){var t,n,i,r,o,l,a,u,c;let s=null==(t=e.attachments)?void 0:t.find(e=>["post","comment","link","publication"].includes(e.type)),d=null!=(l=null==(n=e.attachments)?void 0:n.filter(e=>"image"===e.type))?l:[],p=null!=(a=null==(i=e.attachments)?void 0:i.filter(e=>"video"===e.type))?a:[];return{linkAttachment:s,imageAttachments:d,videoAttachments:p,quoteAttachments:null!=(u=null==(r=e.attachments)?void 0:r.filter(e=>"post"===e.type&&!!e.postSelection))?u:[],imageRestackAttachments:null!=(c=null==(o=e.attachments)?void 0:o.filter(e=>"post"===e.type&&!!e.postImageSelection))?c:[]}}n.d(t,{B:()=>i}),n(4006),n(10278),n(42686),n(2675),n(8103),n(22858),n(78479),n(89490),n(93812),n(39318)}}]);