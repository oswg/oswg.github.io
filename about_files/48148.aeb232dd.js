!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f838f1ef-c85a-4732-ac8d-176b8e24c7ca",e._sentryDebugIdIdentifier="sentry-dbid-f838f1ef-c85a-4732-ac8d-176b8e24c7ca")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["48148"],{72458:function(e,r,n){n.d(r,{A:()=>i});let i={avatar:"avatar-u8q6xB",ltr:"ltr-qDBmby",rtl:"rtl-zsi3Q8",overlap:"overlap-q75iOo",last:"last-JfNEJ_"}},39957:function(e,r,n){n.d(r,{A:()=>i});let i={content:"content-uWImTJ",open:"open-sYnXMa",close:"close-nDLxeI"}},7358:function(e,r,n){n.d(r,{a:()=>el,N:()=>eo});var i=n(4006),t=n(17402),l=n(89490),o=n(63136);function u(e){let{profile:r}=e,n=r.bio;return n?(0,i.Y)(c,{children:(0,i.Y)(o.EY.B4,{children:n})}):null}let c=(0,l.I4)({display:"flex",direction:"column",gap:2});var a=n(69277),s=n(70408),d=n(65824),f=n(58050),p=n(84605),h=n(46271),b=n(74297),m=n(86500),Y=n(35369),g=n(94874),_=n(85050),y=n(40659),v=n(49807),C=n(57324);function I(e){let{subject:r,profile:n,utmSource:t,forceRefresh:l,entityKey:o}=e,u=(0,h.Jd)(),c=(0,y.rG)(),a=(0,d.FV)(n);return(null==r?void 0:r.id)===(null==u?void 0:u.id)?null:(0,i.FD)(B,{children:[a?(0,i.Y)(w,{pub:a,isSubscribed:n.isSubscribed,user:u,profile:n,utmSource:t,forceRefreshCard:l,params:c}):(0,i.Y)(x,{profile:n,entityKey:o}),n.can_dm&&(0,i.Y)(A,{profile:n})]})}function w(e){let{pub:r,profile:n,isSubscribed:t,user:l,utmSource:o,forceRefreshCard:u,params:c={}}=e,s=(0,_.s)({surface:"hover_profile"})(r,n),{isLoading:f,subscribe:p}=(0,b.M)({publication:r,profileId:n.id,source:null!=o?o:"profile-card",onSuccess:()=>{u()}}),h=r?(0,v.eV6)(r,{user:l,addBase:!0,params:(0,a._)({utm_source:o||d.XY,utm_content:C.fL.subscribes,next:document.location.href},c)}):"";return r&&(t?(0,i.Y)(S,{href:h,onClick:()=>{(0,m.u4)(m.qY.ACCOUNT_CARD_SUBSCRIBE_CLICKED),(0,m.fN)(r,"hover_profile")}}):"feed"===o&&l?(0,i.Y)(D,{onClick:()=>p(),isLoading:f}):(0,i.Y)(E,{href:h,onClick:e=>{(0,m.u4)(m.qY.ACCOUNT_CARD_SUBSCRIBE_CLICKED),s(e)}}))}function S(e){let{href:r,onClick:n}=e,{iString:t}=(0,p.GO)();return(0,i.Y)(Y.$n,{priority:"secondary-outline",size:"sm",flex:"grow",href:r,onClick:n,children:t("Subscribed")})}function E(e){let{href:r,onClick:n}=e,{iString:t}=(0,p.GO)();return(0,i.Y)(Y.$n,{priority:"primary",size:"sm",flex:"grow",href:r,localNavigation:!1,onClick:n,children:t("Subscribe")})}function D(e){let{isLoading:r,onClick:n}=e,{iString:t}=(0,p.GO)();return(0,i.Y)(Y.$n,{priority:"primary",size:"sm",flex:"grow",onClick:n,loading:r,children:t("Subscribe")})}function x(e){let{profile:r,entityKey:n}=e,{isFollowing:t,buttonProps:l}=(0,f.km)(r,"hover-card",n),{iString:o}=(0,p.GO)();return(0,i.Y)(Y.$n,(0,s._)((0,a._)({priority:t?"secondary-outline":"primary",size:"sm",flex:"grow"},l),{children:o(t?"Following":"Follow")}))}function A(e){let{profile:r}=e,{isLoading:n,handleStart:t}=(0,g.F)({source:"profile"}),{iString:l}=(0,p.GO)();return(0,i.Y)(Y.$n,{priority:"secondary-outline",size:"sm",flex:"grow",onClick:()=>t([r.id]),loading:n,children:l("Message")})}let B=(0,l.I4)({display:"flex",direction:"row",gap:8,paddingTop:4});var F=n(24078),L=n(49095);function k(e){var r,n,t;let{subject:l,profile:u,utmSource:c}=e,a=l.name||"",s=null!=(n=u.handle)?n:null,f=(0,d.dL)(l,{utmSource:c}),p=l.id||0,h=null!=(t=u.bestseller_tier)?t:0,b=!!p&&!!(h||(null==(r=u.status)?void 0:r.badge));return(0,i.FD)(O,{children:[(0,i.FD)(N,{children:[(0,i.FD)(o.EY.B2,{children:[(0,i.Y)(o.Yq,{href:f,children:a}),"\xa0",b&&(0,i.Y)(o.EY,{as:"span",style:{verticalAlign:"bottom"},paddingLeft:2,children:(0,i.Y)(L.UserStatusSymbols,{inline:!0,tier:h,userId:p,status:u.status,size:"sm",noRelationshipBadge:!0})})]}),s&&(0,i.Y)(o.EY.B4,{color:"secondary",children:(0,i.Y)(o.Yq,{href:f,children:"@".concat(s)})}),(0,i.Y)(L.ProfileRelationshipBadge,{profile:u})]}),(0,i.Y)(F.dm,{user:u,size:48})]})}let O=(0,l.I4)({display:"flex",direction:"row",gap:12}),N=(0,l.I4)({display:"flex",direction:"column",justifyContent:"center",flex:"grow",gap:2});var q=n(57820);function R(){return(0,i.Y)(eo,{children:(0,i.Y)(q.y$,{flex:"grow",padding:40})})}var U=n(38305),T=n(22057),z=n(76977),K=n(39318);function G(e){let{profile:r,utmSource:n}=e,{iString:t,iPlural:l}=(0,p.GO)(),u=r.mutualsContext;if(!u)return null;let c=u.users.sort(e=>e.photo_url?-1:1);return 0===c.length?null:(0,i.FD)(z.fI,{alignItems:"center",gap:12,children:[(0,i.Y)(T.Z,{users:c,max:3,size:20,renderAvatar:e=>e.user?(0,i.Y)(F.dm,(0,s._)((0,a._)({},e),{linkProps:{href:(0,K.gYq)(e.user,{utm_source:C.VU.profileCard})},utmSource:C.VU.profileCard})):(0,i.Y)(F.q5,{})}),(0,i.FD)(o.EY.B4,{color:"secondary",children:["followers"===u.type&&t("Followed by "),(0,i.Y)(U.K,{array:c,limit:3,formatter:e=>(0,i.Y)(o.Yq,{href:(0,d.dL)(e,{utmSource:n}),children:e.name})}),"subscribers"===u.type?l(" subscribes"," subscribe",c.length):""]})]})}var J=n(33727),V=n(81203),P=n(75303),X=n(82776);function $(e){let{profile:r,utmSource:n}=e,t=(0,d.FV)(r),l=(0,h.Jd)();if(!t)return null;let u=(0,X.getByLine)(t),c=(0,K.fOI)(t,{params:{utm_source:n||d.XY,utm_content:C.fL.writes},signedIn:!!l});return(0,i.Y)(P.AE,{href:c,target:"_blank",rel:"noopener",onClick:()=>{(0,m.u4)(m.qY.ACCOUNT_CARD_WRITES_LINK_CLICKED),(0,m.fN)(t,"hover_profile")},children:(0,i.Y)(j,{children:(0,i.FD)(W,{children:[(0,i.Y)(V.Nq,{pub:t,size:40}),(0,i.FD)(M,{children:[(0,i.Y)(o.EY.B4,{weight:"medium",color:"primary",children:t.name}),u&&(0,i.FD)(o.EY.B4,{translated:!0,color:"secondary",children:["By ",I18N.p(u)]})]})]})})})}function j(e){let{children:r}=e;return(0,i.Y)(J.Z,{padding:12,gap:12,radius:"sm",bg:"primary-hover",shadow:"none",children:r})}let W=(0,P.I4)({display:"flex",direction:"row",gap:12,alignItems:"center"}),M=(0,P.I4)({display:"flex",direction:"column",flex:"grow"});var Z=n(25859),Q=n(76171);function H(e){let{profile:r,subject:n,utmSource:t}=e,{iString:l}=(0,p.GO)(),{subscriptions:o,moreSubsLabel:u}=(0,d.Xm)(r),c=(0,d.FV)(r);return 0===o.length||c?null:(0,i.FD)(en,{children:[(0,i.Y)(ee,{title:l("Subscriptions"),moreSubsLabel:u,href:(0,d.dL)(n,{utmSource:t})}),o.map(e=>(0,i.Y)(er,{pub:e.publication,utmSource:t},e.publication.id))]})}function ee(e){let{title:r,moreSubsLabel:n,href:t}=e;return(0,i.FD)(z.fI,{justifyContent:"space-between",children:[(0,i.Y)(Q.JU,{color:"secondary",children:r}),n&&(0,i.Y)(o.EY.B4,{color:"secondary",children:(0,i.Y)(Z.Yq,{href:t,children:n})})]})}function er(e){let{pub:r,utmSource:n}=e,t=(0,h.Jd)();if(!r)return null;let l=(0,K.fOI)(r,{params:{utm_source:n||d.XY,utm_content:C.fL.reads},signedIn:!!t});return(0,i.Y)(P.AE,{href:l,target:"_blank",onClick:()=>{(0,m.u4)(m.qY.ACCOUNT_CARD_READS_LINK_CLICKED),(0,m.fN)(r,"hover_profile")},rel:"noopener",children:(0,i.FD)(z.fI,{alignItems:"center",gap:12,children:[(0,i.Y)(V.Nq,{pub:r,size:28}),(0,i.Y)(o.EY.B4,{weight:"medium",color:"primary",title:r.name,children:r.name})]})})}function en(e){let{children:r}=e;return(0,i.Y)(J.Z,{padding:12,radius:"sm",bg:"primary-hover",shadow:"none",children:r})}var ei=n(31354),et=n(76528);function el(e){let{subject:r,utmSource:n,trackOnShow:l}=e,o=(0,d.nL)(r),{data:c,mutate:a}=(0,et.OU)(o||"",{shouldRevalidate:!1}),s=(0,ei.O)();return((0,t.useEffect)(()=>{if(l&&c){var e;(0,m.u4)(m.qY.ACCOUNT_CARD_SHOWN,{profile_user_id:c.id,has_publication:((null==(e=c.publicationUsers)?void 0:e.length)||0)>0})}},[l,null==c?void 0:c.id]),o&&c)?(0,i.FD)(eo,{children:[(0,i.Y)(k,{profile:c,subject:r,utmSource:n}),(0,i.Y)(u,{profile:c}),(0,i.Y)(I,{profile:c,subject:r,utmSource:n,forceRefresh:()=>a(),entityKey:s}),(0,i.Y)($,{profile:c,utmSource:n}),(0,i.Y)(H,{profile:c,subject:r,utmSource:n}),(0,i.Y)(G,{profile:c,utmSource:n})]}):(0,i.Y)(R,{})}let eo=(0,l.I4)({display:"flex",direction:"column",sizing:"border-box",width:320,gap:12,padding:12})},65824:function(e,r,n){n.d(r,{FV:()=>d,XY:()=>u,Xm:()=>s,dL:()=>a,nL:()=>c}),n(59167);var i=n(58278),t=n(39318),l=n(49807),o=n(82776);let u=n(57324).VU.accountCard;function c(e){if(!e)return null;let r=function(e){if("handle"in e&&e.handle)return e.handle;let r="author_id"in e&&e.author_id||"user_id"in e&&e.user_id||e.id;return r?e.slug?e.slug.startsWith("".concat(r,"-"))?e.slug:"".concat(r,"-").concat(e.slug):e.name?"".concat(r,"-").concat((0,i.JG)(e.name,{hashIfEmpty:!0})):"".concat(r):null}(e);return r?"/api/v1/user/".concat(r,"/public_profile"):null}function a(e){let{utmSource:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.location.href.startsWith((0,l.Ewe)());return(0,t.gYq)(e,{noBase:n,utm_source:r||u})}function s(e){let r=[];e&&e.subscriptions&&(r=(0,o.sortSubscriptions)(e.subscriptions.filter(e=>!!e)));let n=null;return r.length>3&&(n="See all ".concat((0,o.numberToString)(r.length))),{subscriptions:r=r.slice(0,3),moreSubsLabel:n}}function d(e){var r;return e.primaryPublication&&(null==(r=e.publicationUsers.find(r=>{var n;return r.publication_id===(null==e||null==(n=e.primaryPublication)?void 0:n.id)}))?void 0:r.publication)}},74297:function(e,r,n){n.d(r,{M:()=>h});var i=n(69277),t=n(4006),l=n(48697),o=n(45773),u=n(58050),c=n(46271),a=n(86500),s=n(1683),d=n(12501),f=n(36372),p=n(32848);function h(e){let{publication:r,profileId:n,onSuccess:h=()=>{},source:b,params:m={}}=e,Y=(0,c.Jd)(),g=(0,p.n7)(),_=(0,u.uy)(),{popToast:y}=(0,f.d)(),{isLoading:v,refetch:C}=(0,d.st)({pathname:"/api/v1/reader/signup/pub",method:"POST",json:(0,i._)({publication_id:null==r?void 0:r.id,email:null==Y?void 0:Y.email,source:b,first_url:s.R9,first_referrer:s.b7,first_session_url:s.K0,first_session_referrer:s.OG,current_url:s.AT,current_referrer:s.uC},m)});return{isLoading:v,subscribe:async()=>{if(!Y||!r)return void y(()=>(0,t.Y)(f.y,{text:"Something went wrong. Please try again.",Icon:l.A}));try{await C(),y(()=>(0,t.Y)(f.y,{text:"Subscribed to ".concat(r.name),Icon:o.A})),h(),g.refetchPublication(r.id),n&&_(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(n)?e:[n,...e]},{revalidate:!1}),(0,a.u4)(a.qY.FEED_ONE_CLICK_SUBSCRIBE,{source:b,publication_id:r.id})}catch(e){console.error(e),y(()=>(0,t.Y)(f.y,{text:"There was an issue subscribing to this profile.",Icon:l.A}))}}}}},49365:function(e,r,n){n.d(r,{d:()=>o});var i=n(4006),t=n(33727),l=n(10996);function o(e){let{children:r}=e;return(0,i.Y)(l.e$,{children:(0,i.Y)(t.Z,{className:"panel-dQv8m7",shadow:"md",radius:"sm",sizing:"border-box",outline:"none",border:"detail",zIndex:1,padding:0,children:r})})}}}]);