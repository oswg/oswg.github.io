!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="43ff3b50-56ef-4662-ac06-c18d167e9ad3",e._sentryDebugIdIdentifier="sentry-dbid-43ff3b50-56ef-4662-ac06-c18d167e9ad3")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["91667"],{20201:function(e,n,t){t(4006),t(70357),t(45197),t(77398),t(68349),t(35369),t(76977);var r=t(75303);t(63136),t(11510),(0,r.I4)({display:"flex",justifyContent:"center",alignItems:"center",flex:"grow",minWidth:0});let l=(0,r.I4)({display:"flex",alignItems:"center",flex:"auto",gap:12});(0,r.I4)({justifyContent:"start"},l),(0,r.I4)({justifyContent:"end"},l)},47963:function(e,n,t){t.d(n,{El:()=>O,gF:()=>T,hj:()=>R});var r=t(69277),l=t(70408),o=t(79785),i=t(4006),a=t(17402),c=t(80682),u=t(72880),s=t(84605),d=t(46271),p=t(86500),f=t(94729),h=t(12501),m=t(22057),g=t(35369),y=t(16074),b=t(76977),C=t(20500),Y=t(16993),_=t(63136),S=t(59482),v=t(11510),w=t(39318),E=t(82776),D=t(34372);function I(){let e=(0,o._)(["Accept ","'s gift in the Substack app"]);return I=function(){return e},e}function k(){let e=(0,o._)(["We sent a link to download the Substack app to ","."]);return k=function(){return e},e}function O(){let{utm_campaign:e,utm_source:n,utm_content:t,abTestingId:r,overrideCTA:l,overrideTitle:o,subTitle:c,openUrl:u,giftCard:s,pub:d,facepileUsers:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[h,m]=(0,a.useState)(!1),g=(0,a.useCallback)(()=>{m(!0),(0,p.u4)(p.qY.APP_INSTALL_MODAL_OPENED,{utm_campaign:e,utm_source:n,utm_content:t})},[e,n,t]),y=(0,a.useCallback)(()=>{m(!1)},[]);return{open:g,modal:(0,i.Y)(F,{isOpen:h,onClose:y,utm_campaign:e,utm_source:n,utm_content:t,abTestingId:r,overrideCTA:l,overrideTitle:o,subTitle:c,openUrl:u,width:s?450:void 0,giftCard:s,pub:d,facepileUsers:f})}}function T(e){let{utm_campaign:n,utm_source:t,utm_content:r,hideEmailPrompt:l=!1,abTestingId:o,suggestedEmail:a,size:c,padding:u=32,openUrl:d,overrideCTA:p,onSend:f}=e,{iString:h}=(0,s.GO)(),m=(0,v.Iu)();return(0,i.FD)(b.I1,{gap:20,padding:u,children:[!m&&(0,i.FD)(i.FK,{children:[(0,i.Y)(b.pT,{className:D.A.qrCode,padding:20,alignSelf:"center",children:(0,i.Y)(R,{size:c,utm_campaign:n,utm_source:t,utm_content:r,abTestingId:o,openUrl:d})}),!m&&!l&&(0,i.Y)(y.v,{})]}),!m&&!l&&(0,i.Y)(A,{suggestedEmail:a,onSend:f}),m&&(0,i.Y)(g.$n,{href:d||(0,w.wHz)({utm_campaign:n,utm_source:t}),children:p||h("Install the app")})]})}function F(e){var n;let{isOpen:t,onClose:o,utm_campaign:u,utm_content:d,utm_source:p,abTestingId:f,overrideCTA:h,overrideTitle:g,subTitle:y,openUrl:C,width:_,facepileUsers:S,showMobileClose:D,giftCard:k,pub:O}=e,{iString:F,iTemplate:R}=(0,s.GO)(),A=(0,v.Iu)(),[P,B]=(0,a.useState)(""),G=(0,a.useCallback)(e=>{B(e)},[]),x=(0,a.useCallback)(()=>{B(""),o()},[o]),j=!!k&&!!O,q=(null==k||null==(n=k.gifter)?void 0:n.name)?"Split Zone Duo"===k.gifter.name?"SZD":(0,E.guessFirstName)(k.gifter.name):"",U=g||(j?q?R(I(),q):F("Accept this gift in the Substack app"):F("Download the Substack app"));return(0,i.FD)(Y.aF,{isOpen:t,onClose:o,width:_||360,children:[(0,i.Y)(Y.rQ,{title:U,description:y,onClose:o,showClose:!A||D,showDivider:!0}),P?(0,i.Y)(N,{sentEmail:P,closeModal:x}):(0,i.FD)(b.I1,{alignItems:"stretch",paddingTop:32*!!A,children:[j?(0,i.Y)(b.pT,{justifyContent:"center",alignItems:"center",paddingTop:{desktop:20,mobile:0},children:(0,i.Y)(c.N,(0,l._)((0,r._)({},k),{pub:O}))}):(null==S?void 0:S.length)?(0,i.Y)(b.pT,{justifyContent:"center",alignItems:"center",padding:{mobile:8},children:(0,i.Y)(m.Z,{users:S,max:3,size:48})}):A?(0,i.Y)(b.pT,{justifyContent:"center",alignItems:"center",children:(0,i.Y)("img",{src:(0,w.dJ9)("/img/substack-app-icon.png"),height:64,width:64})}):null,(0,i.Y)(T,{utm_campaign:u,utm_source:p,utm_content:d,abTestingId:f,openUrl:C,overrideCTA:h,size:142,onSend:G})]})]})}function R(e){let{utm_campaign:n,utm_source:r,utm_content:l,abTestingId:o,size:c=240,width:u,height:s,openUrl:d}=e,p=(0,a.useRef)(null),f=(0,w.wHz)({utm_campaign:n,utm_source:r,utm_content:l,abti:o}),m=function(e,n){let{result:r}=(0,h.qK)(()=>t.e("34592").then(t.t.bind(t,97283,23)),[],{auto:!0}),l=null==r?void 0:r.default;return(0,a.useMemo)(()=>l&&"undefined"!=typeof window?new l(e(window)):null,[l,...n])}(e=>{let n=e.devicePixelRatio,t=getComputedStyle(document.body),r="rgb(".concat(t.getPropertyValue("--color-primitive-black-rgb"),")");return{width:(null!=u?u:c)*n,height:(null!=s?s:c)*n,type:"canvas",data:d||f,dotsOptions:{color:r,type:"dots"},backgroundOptions:{color:"rgb(".concat(t.getPropertyValue("--color-primitive-white-rgb"),")")},cornersSquareOptions:{color:r,type:"extra-rounded"},cornersDotOptions:{color:r,type:"dot"},qrOptions:{errorCorrectionLevel:"L"}}},[u,s,d]);return(0,a.useEffect)(()=>{let{current:e}=p;if(!e||!m||!m._canvas)return;let n=m._canvas;return n.style.width="".concat(null!=u?u:c,"px"),n.style.height="".concat(null!=s?s:c,"px"),e.style.width="".concat(null!=u?u:c,"px"),e.style.height="".concat(null!=s?s:c,"px"),e.appendChild(n),()=>{e.removeChild(n)}},[m,u,s]),(0,i.Y)("div",{ref:p})}function A(e){let{suggestedEmail:n,onSend:t}=e,{iString:r}=(0,s.GO)(),l=(0,d.Jd)(),[o,c]=(0,a.useState)((null==l?void 0:l.email)||n||""),[u,p]=(0,a.useState)(!1),[h,m]=(0,a.useState)(null);return(0,i.Y)(i.FK,{children:(0,i.FD)(b.I1,{gap:8,children:[(0,i.Y)(S.U,{placeholder:r("Your email"),placement:"end",priority:"primary",type:"email",value:o,onChange:e=>c(e.currentTarget.value),button:(0,i.Y)(g.$n,{loading:u,onClick:async()=>{p(!0);try{await (0,f.x6)("/api/v1/send_app_download_link",{method:"POST",json:{email:o}}),m(null),p(!1),t&&t(o)}catch(e){m("Something went wrong")}},children:r("Send link")})}),h&&(0,i.Y)(C.yn,{align:"center",children:h})]})})}let N=e=>{let{sentEmail:n,closeModal:t}=e,{iString:r,iTemplate:l}=(0,s.GO)();return(0,i.FD)(i.FK,{children:[(0,i.Y)(Y.cw,{children:(0,i.FD)(b.I1,{gap:20,justifyContent:"center",alignItems:"center",children:[(0,i.Y)(u.o,{src:"/img/cohorts/local_news/plane.png",maxWidth:64}),(0,i.FD)(b.I1,{gap:4,justifyContent:"center",alignItems:"center",children:[(0,i.Y)(_.EY.B2,{weight:"semibold",textAlign:"center",children:r("Check your email")}),(0,i.Y)(_.EY.B3,{color:"secondary",align:"center",children:l(k(),n||"your email")})]})]})}),(0,i.Y)(Y.jl,{alignButtons:"stretch",primaryButton:(0,i.Y)(g.$n,{priority:"secondary",onClick:t,children:r("Done")})})]})}},77398:function(e,n,t){t(17402)},92905:function(e,n,t){t.d(n,{a:()=>o});var r=t(17402),l=t(86500);function o(e){let n=(0,r.useRef)(Date.now()),t=(0,r.useRef)(new Set),o=(0,r.useCallback)(r=>{if(!e)return;let o=r.currentTarget,i=o.name;!o.value||t.current.has(i)||Date.now()-n.current<1e3||(t.current.add(i),(0,l.u4)("".concat(e," Input Filled"),{name:i}))},[e]);return{trackInputFilled:o,trackSubmitPressed:(0,r.useCallback)(()=>{e&&(0,l.u4)("".concat(e," Submit Pressed"))},[e]),trackError:(0,r.useCallback)(n=>{if(!e)return;let t="Something went wrong";if(n instanceof Error){var r,o;t=(null==(r=n.body)?void 0:r.errors)?JSON.stringify(n.body.errors):(null==(o=n.body)?void 0:o.error)?n.body.error:n.message}(0,l.u4)("".concat(e," Error"),{error:t})},[e])}}},19832:function(e,n,t){t.d(n,{m:()=>o});var r=t(4006),l=t(16993);let o=e=>{let{isOpen:n=!1,title:t,description:o,icon:i,onClose:a,primaryButton:c,secondaryButton:u}=e;return(0,r.FD)(l.aF,{isOpen:n,onClose:a,children:[t&&(0,r.Y)(l.rQ,{title:t,description:o,showClose:!1,icon:i}),(0,r.Y)(l.q1,{}),(0,r.Y)(l.jl,{primaryButton:c,secondaryButton:u})]})}},89955:function(e,n,t){t.d(n,{O:()=>i});var r=t(4006),l=t(68349),o=t(20500);function i(e){let{error:n}=e,t=(0,l.zs)(n);return(null==t?void 0:t.html)?(0,r.Y)(o.yn,{dangerouslySetInnerHTML:{__html:t.html}}):(0,r.Y)(o.yn,{children:(null==t?void 0:t.msg)||"Something went wrong"})}},62088:function(e,n,t){t.d(n,{$P:()=>C,M9:()=>y,dt:()=>Y});var r=t(69277),l=t(70408),o=t(4006),i=t(84605),a=t(80103),c=t(17028),u=t(16993),s=t(84843),d=t(50630),p=t(83842),f=t(23358),h=t(82804),m=t(23191),g=t(11510);function y(e){let{onCancel:n,onSuccess:t,onSignup:r,onUserCreated:l,noCloseButton:i,noExit:c,isOpen:s,redirectOverride:p,overrideTitle:f}=e,h=(0,g.Iu)();return(0,o.Y)(u.aF,{onClose:n,isOpen:s,children:(0,o.FD)(d.W,{children:[(0,o.Y)(b,{onCancel:n,onSuccess:t,onSignup:r,onUserCreated:l,noCloseButton:i,noExit:c,redirectOverride:p,overrideTitle:f}),h&&(0,o.Y)(a.a7,{})]})})}function b(e){let{onCancel:n,onSuccess:t,onSignup:i,onUserCreated:a,noCloseButton:c,noExit:u,redirectOverride:s,overrideTitle:g}=e,{mode:y}=(0,d.r)(),b={overrideTitle:g,noCloseButton:c||u,onCancel:n,onSignup:i};return(0,o.FD)(o.FK,{children:["magic-link"===y&&(0,o.Y)(p.j,(0,l._)((0,r._)({},b),{onSuccess:t})),"email"===y&&(0,o.Y)(f._,(0,l._)((0,r._)({},b),{onUserCreated:a,redirectOverride:s})),"password"===y&&(0,o.Y)(m.d,(0,l._)((0,r._)({},b),{onSuccess:t})),"mfa"===y&&(0,o.Y)(h.Q,{onSuccess:t})]})}let C=e=>{let{overrideTitle:n,noCloseButton:t,onCancel:r,onSignup:l}=e,{iString:a}=(0,i.GO)();return(0,o.Y)(s.rQ,{title:n||a("Sign in to Substack"),description:l?(0,o.FD)(o.FK,{children:[a("First time here? "),(0,o.Y)(c.Yq,{color:"substack",decoration:"hover-underline",onClick:l,cursor:"pointer",children:a("Create account")})]}):void 0,showClose:!t,onClose:r,icon:(0,o.Y)(s.Ud,{}),alignItems:"center"})},Y=e=>{let{children:n}=e;return(0,o.Y)(c.VP,{padding:16,borderTop:"detail",children:(0,o.Y)(c.EY.B4,{as:"span",color:"secondary",align:"center",children:n})})}},46647:function(e,n,t){t.d(n,{D:()=>d});var r=t(4006),l=t(84605),o=t(17028),i=t(16291);let a=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),c=new Intl.DateTimeFormat(void 0,{weekday:"long"}),u=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),s=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function d(e){let{timestamp:n,conjunction:t=!1}=e,{iString:d,language:p}=(0,l.GO)(),f=new Date(n),h=(0,i.A)(),m=p.startsWith("en"),g=h.isSame(f,"day")?d("Today"):h.subtract(1,"day").isSame(f,"day")?d("Yesterday"):h.isSame(f,"week")?c.format(f):h.isSame(f,"year")?u.format(f):s.format(f);return(0,r.Y)(o.fI,{alignItems:"center",justifyContent:"center",children:(0,r.FD)(o.EY.B4,{color:"secondary",children:[g,t&&m?" at ":" ",a.format(f)]})})}},94954:function(e,n,t){t.d(n,{O:()=>h});var r=t(4006),l=t(17402),o=t(46271),i=t(86500),a=t(16993),c=t(48239),u=t(51721),s=t(78979),d=t(39318),p=t(49807);let f=s.dn.CATEGORIES;function h(e){let{isOpen:n,onClose:t,pub:h=null,profile:m=null,initialStep:g,entry:y,redirect:b,skipRedirectOnExit:C=!1,redirectAfterProfile:Y,skipCategories:_,onAfterClose:S,onBeforeClose:v}=e,{user:w}=(0,o.ur)(),E=b&&"/"!==b?b:null,[D,I]=(0,l.useReducer)(c.Gg,null!=g?g:f,c.Ur);(0,l.useEffect)(()=>{n&&I({type:"RESET",initialStep:null!=g?g:f})},[n]);let{step:k}=D,O=(0,u.B)(k),{trackScreenShown:T}=O;(0,l.useEffect)(()=>{n&&T&&(0,i.u4)(T,{entry:y})},[n,T,y]);let F=null==h?void 0:h.id,R=h?(0,d.$_T)(h):null,A=(0,l.useCallback)(()=>{(0,i.u4)(i.qY.READER_ONBOARDING_MODAL_OPENED,{entry:y,step:k,for_pub_id:F})},[y,k,F]),N=(0,l.useCallback)(()=>{(0,i.u4)(i.qY.READER_ONBOARDING_COMPLETED,{entry:y,step:k})},[y,k]),P=(0,l.useCallback)(()=>{v&&!1===v(w)||((0,i.u4)(i.qY.READER_ONBOARDING_MODAL_CLOSED,{entry:y,step:k}),(0,s.pq)(k)&&N(),t(),null==S||S())},[v,w,y,k,t,S,N]),B=(0,l.useCallback)(e=>{if((0,i.u4)(i.qY.READER_ONBOARDING_STEP_CHANGED,{from_step:k,to_step:e,modal:!0}),e===s.dn.EXIT)if(C)P();else{N();let e=null!=E?E:R&&"reader2"===y?R:(0,p.oT5)();document.location.href=e}else setTimeout(()=>I({type:"GO_TO_STEP",step:e}),0)},[k,C,E,R,y,P,N]),G=(0,l.useCallback)((e,n)=>{I({type:"SET_STEP_DATA",key:e,data:n})},[]),x=(0,l.useCallback)(function(e){let{ignore:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.error("Error in reader onboarding ".concat(k," step: ").concat(e)),(0,i.u4)(i.qY.READER_ONBOARDING_ERROR,{step:k,entry:y,ignore:n}),n||B(s.dn.ERROR)},[k,y,B]),j=(0,l.useMemo)(()=>({state:D,user:w,entry:y,pub:h,profile:m,redirect:E,skipRedirectOnExit:C,redirectAfterProfile:Y,skipCategories:_,goToStep:B,setStepData:G,handleError:x,close:P,trackSuccessfulCompletion:N}),[D,w,y,h,m,E,C,Y,_,B,G,x,P,N]);return(0,r.Y)(a.aF,{isOpen:n,onOpen:A,onClose:P,width:500,children:(0,r.Y)(c.Xf,{value:j,children:(0,r.Y)(r.FK,{children:O.render()})})})}},97307:function(e,n,t){t.d(n,{n:()=>a});var r=t(69277),l=t(17402),o=t(46271),i=t(78979);function a(){let{user:e}=(0,o.ur)(),[n,t]=(0,l.useState)(!1),[a,c]=(0,l.useState)({}),u=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(e),t(!0)},[]),s=(0,l.useCallback)((n,r)=>{c({pub:n,profile:r,initialStep:e?i.dn.CATEGORIES:i.dn.PUB_SIGNUP}),t(!0)},[e]),d=(0,l.useCallback)(e=>{c({pub:e,profile:null,initialStep:i.dn.PUB_SIGNUP}),t(!0)},[]),p=(0,l.useCallback)(()=>{t(!1),c({})},[]);return{modalProps:(0,l.useMemo)(()=>(0,r._)({isOpen:n,onClose:p},a),[n,p,a]),open:u,openForPub:s,openToPubSignup:d,close:p}}}}]);