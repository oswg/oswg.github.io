!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="5382dca3-6f4f-42a9-84ad-e1288c10a27b",e._sentryDebugIdIdentifier="sentry-dbid-5382dca3-6f4f-42a9-84ad-e1288c10a27b")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["52268"],{40345:function(e,a,i){i.d(a,{A:()=>r});let r={gifPreview:"gifPreview-aspqQH",visible:"visible-LWauZo",image:"image-Aqe6vn",videoPlayerWrapper:"videoPlayerWrapper-cIRA2m",videoPlayerClassName:"videoPlayerClassName-wHpwKj",videoClassName:"videoClassName-F40TTj"}},92825:function(e,a,i){i.d(a,{f:()=>N,S:()=>_});var r=i(4006),n=i(17402),l=i(89490),t=i(63136);function o(e){let{pub:a}=e,i=a.hero_text,n=a.rankingDetailFreeSubscriberCount;return i||n?(0,r.FD)(s,{children:[i&&(0,r.Y)(t.EY.B4,{clamp:3,children:i}),n&&(0,r.Y)(t.EY.B4,{color:"secondary",children:n})]}):null}let s=(0,l.I4)({display:"flex",direction:"column",gap:2});var d=i(84605),u=i(46271),c=i(35369),p=i(85050),m=i(39318),g=i(57324);function v(e){let{pub:a,isContributor:i,isSubscribed:n,utmSource:l}=e,{iString:t}=(0,d.GO)(),o=(0,u.Jd)(),s=(0,p.s)({surface:"profile"}),v=(0,m.eV6)(a,{user:o,addBase:!0,utm_source:l||g.VU.pubHoverCard,utm_medium:g.Jn.web,utm_campaign:g._9.profilePage});return i?null:(0,r.Y)(y,{children:n?(0,r.Y)(c.$n,{priority:"secondary-outline",href:v,size:"sm",children:t("Subscribed")}):(0,r.Y)(c.$n,{priority:"primary",href:v,onClick:s(a),size:"sm",children:t("Subscribe")})})}let y=(0,l.I4)({display:"flex",direction:"column",paddingTop:4});var f=i(81203);function h(e){var a;let{pub:i}=e,n=(0,m.fOI)(i),l=i.name||"",o=null!=(a=i.subdomain)?a:"";return(0,r.FD)(b,{children:[(0,r.FD)(Y,{children:[(0,r.Y)(t.EY.B2,{weight:"medium",children:(0,r.Y)(t.Yq,{href:n,children:l})}),(0,r.Y)(t.EY.B4,{color:"secondary",children:(0,r.Y)(t.Yq,{href:n,children:o})})]}),(0,r.Y)(f.wg,{pub:i,size:48})]})}let b=(0,l.I4)({display:"flex",direction:"row",gap:12}),Y=(0,l.I4)({display:"flex",direction:"column",flex:"grow",gap:2});var w=i(57820);function q(){return(0,r.Y)(N,{children:(0,r.Y)(w.y$,{flex:"grow",padding:40})})}var C=i(86500),S=i(76528);function _(e){var a;let{pubId:i,utmSource:l,trackOnShow:t}=e,{data:s}=(0,S.OU)("/api/v1/publication/public/".concat(i),{shouldRevalidate:!1});return((0,n.useEffect)(()=>{t&&s&&(0,C.u4)(C.qY.PUBLICATION_HOVER_CARD_SHOWN,{publication_id:i})},[t,null==s||null==(a=s.pub)?void 0:a.id]),s)?(0,r.FD)(N,{children:[(0,r.Y)(h,{pub:s.pub}),(0,r.Y)(o,{pub:s.pub}),(0,r.Y)(v,{isContributor:s.isContributor,isSubscribed:s.isSubscribed,pub:s.pub,utmSource:l})]}):(0,r.Y)(q,{})}let N=(0,l.I4)({display:"flex",direction:"column",sizing:"border-box",width:320,gap:12,padding:12})},74762:function(e,a,i){i.d(a,{t:()=>q});var r=i(4006),n=i(32485),l=i.n(n),t=i(49802),o=i(50802),s=i(17402),d=i(72880),u=i(85478),c=i(68410),p=i(28528),m=i(91694),g=i(73066),v=i(47885),y=i(76977),f=i(13348),h=i(59294),b=i(56262),Y=i(39318);let w={container:"container-XxSyR3",containerEmpty:"containerEmpty-GNvZRB",image:"image-nBNbRY","image-square-legacy":"image-square-legacy-jBVF2K",imageSquareLegacy:"image-square-legacy-jBVF2K",containerSquare:"containerSquare-M6P7XI","inner-wrapper":"inner-wrapper-ymo6T9",innerWrapper:"inner-wrapper-ymo6T9","inner-wrapper-small":"inner-wrapper-small-h1CnSS",innerWrapperSmall:"inner-wrapper-small-h1CnSS","inner-wrapper-medium":"inner-wrapper-medium-JvLb2H",innerWrapperMedium:"inner-wrapper-medium-JvLb2H","inner-wrapper-large":"inner-wrapper-large-ffUJx1",innerWrapperLarge:"inner-wrapper-large-ffUJx1","image-square":"image-square-b7oiFr",imageSquare:"image-square-b7oiFr","image-square-small":"image-square-small-v9eiR2",imageSquareSmall:"image-square-small-v9eiR2","image-square-medium":"image-square-medium-Z6HNx5",imageSquareMedium:"image-square-medium-Z6HNx5","image-square-large":"image-square-large-dp7_L9",imageSquareLarge:"image-square-large-dp7_L9"},q=e=>{var a,i,n,q,S;let{className:_,disableVideoHover:N,hidePlaceholder:P,hideTimestamp:R,hideTimestampIcon:x,imageAspectRatio:A,imageWidth:U,isBelowTheFold:I,playButtonSize:E,post:z,squareImageSize:k}=e,{cropGravity:D,pub:F}=(0,p.np)(),{getConfigFor:L}=(0,u.mJ)(),{isMobile:T}=(0,c.sM)(),W=L("show_entire_square_image"),B=(0,s.useRef)(null),[H]=(0,h.TR)(B),J=H&&!N,O=!!z.videoUpload,j=!!(!O&&"podcast"===z.type),Z=(0,b.getCoverImageUrl)(z);!Z&&((null==(q=z.videoUpload)?void 0:q.thumbnail_id)?Z=(0,Y.Pzx)(z.videoUpload):(null==(S=z.podcastUpload)?void 0:S.thumbnail_id)&&(Z=(0,Y.Pzx)(z.podcastUpload,{post:z})));let K=U<=640;if(!Z&&P)return null;let M=U||A?A:1.32,V=U||336,$=!!Z&&z.cover_image_is_square&&W,G=$&&!!k&&(!T||"small"!==k),X=I?"lazy":void 0,Q=(0,b.getDurationForPostPreview)({post:z}),ee=!!(null==(a=z.videoUpload)?void 0:a.live_stream_id);return G?(0,r.Y)(C,{aspectRatio:M,className:_,imageUrl:Z,loading:X,size:k,width:V}):(0,r.FD)("div",{ref:B,className:l()(_,w.container,{[String(w.containerEmpty)]:!Z}),style:{aspectRatio:"".concat(M)},children:[(O||j)&&null!==E&&(0,r.Y)(y.Ye,{alignItems:"center",inset:0,justifyContent:"center",opacity:O&&J?0:100,position:"absolute",style:{transition:"opacity ".concat(K?"var(--animation-timing-fast)":"var(--animation-timing-slow)"," var(--animation-smooth)")},children:(0,r.Y)(f.ro,{isPlaying:!1,size:E})}),O&&(K?(0,r.Y)(m.A,{aspectRatio:(null==(i=z.videoUpload)?void 0:i.width)&&(null==(n=z.videoUpload)?void 0:n.height)?z.videoUpload.width/z.videoUpload.height:M,containerRef:B,post:z,size:U>320?"large":"medium"}):(0,r.Y)(g.A,{isHovered:J,post:z,pub:F})),Z?(0,r.Y)(d.o,{alt:"",className:l()(w.image,{[w["image-square-legacy"]]:$}),imageIsFixedWidth:!0,imageProps:M?{height:Math.round(V/M),smartCrop:!0,gravity:ee?"auto":D}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:X,maxWidth:V,src:Z,style:{aspectRatio:"".concat(M)},useRetinaSizing:!0}):null,!!Q&&!R&&(0,r.Y)(v.Y,{duration:Q,icon:x?null:j?(0,r.Y)(t.A,{size:12,stroke:"white"}):(0,r.Y)(o.A,{size:14,stroke:"white"})})]})},C=e=>{let{aspectRatio:a,className:i,imageUrl:n,width:t,loading:o,size:s}=e;return(0,r.Y)("div",{className:l()(i,w.container,w.containerSquare),style:{aspectRatio:"".concat(a)},children:(0,r.Y)("div",{className:l()(w["inner-wrapper"],w["inner-wrapper-".concat(s)]),children:(0,r.Y)(d.o,{alt:"",className:l()(w.image,w["image-square"],w["image-square-".concat(s)]),imageProps:{height:t,smartCrop:!0,gravity:"center"},loading:o,maxWidth:t,src:n})})})}},73066:function(e,a,i){i.d(a,{A:()=>g});var r=i(4006),n=i(32485),l=i.n(n),t=i(63122),o=i(55584),s=i(17402),d=i(41873),u=i(25006),c=i(35369),p=i(76977),m=i(40345);let g=e=>{let{isHovered:a,post:i}=e,[n,g]=(0,s.useState)(!0),[v,y]=(0,s.useState)(!1),f=(0,s.useRef)(null),h=(0,u.df)();return(0,s.useEffect)(()=>{var e,i,r,l,t,o,s,d,u,c;let p=()=>y(!0);return null==(i=f.current)||null==(e=i.player)||e.addEventListener("loadedmetadata",p),a?(null==(t=f.current)||null==(l=t.player)||null==(r=l.play)||r.call(l),(null==(o=f.current)?void 0:o.player)&&(f.current.player.volume=+!n)):(null==(u=f.current)||null==(d=u.player)||null==(s=d.pause)||s.call(d),(null==(c=f.current)?void 0:c.player)&&(f.current.player.volume=0)),()=>{var e,a;null==(a=f.current)||null==(e=a.player)||e.removeEventListener("loadedmetadata",p)}},[a]),h&&i.videoUpload&&a?(0,r.Y)("div",{className:l()(m.A.gifPreview,{[m.A.visible]:v}),children:(0,r.FD)(p.Ye,{alignItems:"center",justifyContent:"center",position:"relative",style:{width:"100%",height:"100%"},children:[(0,r.Y)(d.A,{ref:f,autoPlay:!0,className:m.A.videoPlayerWrapper,contentType:"post",entityKey:i.id,entityType:"post",mediaUpload:i.videoUpload,noControls:!0,noPreview:!0,pub:h,surface:"publication",videoClassName:m.A.videoClassName,videoPlayerClassName:m.A.videoPlayerClassName,videoType:"post-preview"}),(0,r.Y)(p.Ye,{padding:12,position:"absolute",style:{top:0,right:0},children:(0,r.Y)(c.mZ,{onClick:e=>{var a;e.stopPropagation(),g(!n),(null==(a=f.current)?void 0:a.player)&&(f.current.player.volume=+!!n)},children:n?(0,r.Y)(t.A,{size:20}):(0,r.Y)(o.A,{size:20})})})]})}):null}},30192:function(e,a,i){i.d(a,{j:()=>u});var r=i(4006),n=i(61133),l=i(17402),t=i(75313),o=i(49365),s=i(53168),d=i(39957);function u(e){let{trigger:a,children:i,onOpen:u,onClose:c,onFetch:p,disabled:m,side:g,align:v,loading:y}=e,[f,h]=(0,l.useState)(!1),b=(0,l.useRef)(!1);(0,l.useEffect)(()=>{f&&!b.current&&p&&(b.current=!0,p())},[f,p]);let Y={zIndex:s.iC,"--shift":"".concat(t.k,"px"),"--scale":"".concat(t.R)};return m||!i?(0,r.Y)(r.FK,{children:a}):(0,r.FD)(n.bL,{openDelay:t.A1,closeDelay:t.TJ,open:f,onOpenChange:e=>{h(e),e?null==u||u():null==c||c()},children:[(0,r.Y)(n.l9,{asChild:!0,children:(0,r.Y)("span",{style:{minWidth:"0"},children:a})}),(0,r.Y)(n.ZL,{children:(0,r.Y)(n.UC,{side:g,align:v,sideOffset:t.k,collisionPadding:t.k,className:d.A.content,style:Y,children:!y&&(0,r.Y)(o.d,{children:"function"==typeof i?i({close:()=>h(!1)}):i})})})]})}}}]);