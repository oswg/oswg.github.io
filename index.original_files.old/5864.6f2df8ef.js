!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0f079510-59a5-4a0c-81f3-8d4284906c7f",e._sentryDebugIdIdentifier="sentry-dbid-0f079510-59a5-4a0c-81f3-8d4284906c7f")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5864"],{45464:function(e,t,i){i.d(t,{A:()=>n});let n={bubbleStack:"bubbleStack-umAMnU",bubble:"bubble-LfInju",linkBubble:"linkBubble-t8SyEH",paywallBubble:"paywallBubble-HIFC1C",imageGroup:"imageGroup-hmX9Za",hasFooter:"hasFooter-knDZrK",body:"body-SxXE9l",authorName:"authorName-RUTp3m",facepileAvatar:"facepileAvatar-F_BcFw",outgoing:"outgoing-zRoPvi",facepile:"facepile-_l_hyN",readMore:"readMore-OS5vSy",pixels:"pixels-dEQTfm",textLink:"textLink-TnmBfo",linkImg:"linkImg-kNOnWu",linkUrl:"linkUrl-LW11wp",linkTitle:"linkTitle-oVSOfX",reactionsWrapper:"reactionsWrapper-ls9Csz",actions:"actions-QkU3dI",avatarContainer:"avatarContainer-QgIACu",highlight:"highlight-pSh3e7","highlight-animation":"highlight-animation-kGdFb4",highlightAnimation:"highlight-animation-kGdFb4",isLast:"isLast-UDCLfj",quoteBox:"quoteBox-Dcal5K",quote:"quote-IkMApN",incoming:"incoming-yrKQPL",notFirst:"notFirst-MmF7_s",author:"author-naTBRq",hasUnread:"hasUnread-p_1CFW",noUnread:"noUnread-aWF1i8",paywallReplyTag:"paywallReplyTag-AnU7qK",media:"media-H8ykdm",center:"center-F91XRK",right:"right-dRUlyN",iconOnly:"iconOnly-pLEdW7",paywallFade:"paywallFade-jjuRAC",paywallBlur:"paywallBlur-yZ2js3",paywallText:"paywallText-s4FRye"}},18325:function(e,t,i){i.d(t,{A:()=>c});var n=i(69277),r=i(70408),a=i(4006),l=i(54687),o=i(97731);let c=e=>(0,a.Y)(o.A,(0,r._)((0,n._)({},e),{name:"LucideComments",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,a.Y)(l.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},43427:function(e,t,i){i.d(t,{A:()=>c});var n=i(69277),r=i(70408),a=i(4006),l=i(23345),o=i(97731);let c=e=>(0,a.Y)(o.A,(0,r._)((0,n._)({},e),{name:"LucideHeart",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,a.Y)(l.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},58299:function(e,t,i){i.d(t,{A:()=>o});var n=i(69277),r=i(70408),a=i(4006),l=i(97731);let o=e=>(0,a.Y)(l.A,(0,r._)((0,n._)({},e),{name:"NoteForwardIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,a.Y)("path",{d:"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12",strokeLinecap:"round","stroke-linejoin":"round"})}))},71941:function(e,t,i){i.d(t,{A:()=>c});var n=i(69277),r=i(70408),a=i(32641),l=i(4006),o=i(97731);let c=e=>{var{size:t=24,color:i="var(--color-fg-primary)"}=e,c=(0,a._)(e,["size","color"]);return(0,l.Y)(o.A,(0,r._)((0,n._)({},c),{name:"NoteQuoteForwardIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,stroke:i,strokeWidth:2,fill:"none",children:(0,l.Y)("path",{d:"M13.4147 2.09993C10.4072 1.67249 7.2423 2.61548 4.92891 4.92887C1.02366 8.83411 1.02366 15.1658 4.92891 19.071C8.83415 22.9762 15.1658 22.9762 19.071 19.071C21.3844 16.7576 22.3274 13.5927 21.9 10.5852M18.5 2.62126C18.8978 2.22343 19.4374 1.99994 20 1.99994C20.5626 1.99994 21.1021 2.22343 21.5 2.62126C21.8978 3.01908 22.1213 3.55865 22.1213 4.12126C22.1213 4.68387 21.8978 5.22343 21.5 5.62126L13 14.1213L8.99998 15.1213L9.99998 11.1213L18.5 2.62126Z",strokeLinecap:"round","stroke-linejoin":"round"})}))}},2675:function(e,t,i){i.d(t,{Sp:()=>S,Uo:()=>K,vZ:()=>Z,xr:()=>z});var n=i(69277),r=i(70408),a=i(32641),l=i(4006),o=i(32485),c=i.n(o),d=i(57157),s=i(17402),u=i(78649),h=i(84777),p=i(72880),m=i(84605),f=i(46271),g=i(64632),v=i(77405),b=i(53594),y=i(99662),k=i(56804),Y=i(35369),_=i(76977),w=i(81203),A=i(63136),I=i(83629),C=i(46453),x=i(2548),F=i(32848),N=i(47639),T=i(27747),W=i(39318),B=i(49807),P=i(69706),L=i(44307);function S(e){var t,i;let{post:n,publication:r,compact:a,readOnly:o,onClick:c,onSavePostClick:d,item:s,clipInfo:u}=e,{isHidden:h,onShow:p}=(0,g.k_)(!!(n.explicit||n.cover_image_is_explicit||(null==(t=n.videoUpload)?void 0:t.explicit))),{isPaid:m,isFreeSubscribed:f}=(0,F.NL)(r.id),v=null!=(i=n.coverImagePalette)?i:null,b=n.podcastUpload&&!n.videoUpload,y=function(e){let{post:t,compact:i,readOnly:n}=e;return n||i||!t.videoUpload?n||!t.podcastUpload||t.videoUpload?!i&&t.cover_image?{type:"cover",coverImage:t.cover_image}:null:{type:"audio"}:{type:"video",videoUpload:t.videoUpload}}({post:n,compact:a,readOnly:o});return(0,l.FD)(U,{readOnly:o,onClick:c,publication:r,post:n,compact:a,palette:v,headerRenderable:y,children:[(0,l.Y)(R,{item:s,post:n,publication:r,clipInfo:u,isHidden:h,isFreeSubscribed:f,isPaid:m,headerRenderable:y}),!b&&(0,l.Y)(O,{post:n,publication:r,palette:v,readOnly:o,onSavePostClick:d,compact:a}),h&&(0,l.Y)(g.f9,{onShow:p,itemName:"post"})]})}let U=e=>{let{readOnly:t,onClick:i,publication:n,post:r,compact:a,palette:o,headerRenderable:d,children:s}=e,h=K(o),p=!a&&h,m=Z({post:r,publication:n,readOnly:t,onClick:i}),f=(null==d?void 0:d.type)==="video"||(null==d?void 0:d.type)==="audio";return(0,l.Y)(u.Q,{children:(0,l.Y)(_.I1,{as:t?"div":"a",className:c()(L.A.postAttachment,t&&L.A.readOnly),position:"relative",bg:"primary",radius:"md",minWidth:0,onClick:m,href:t?void 0:(0,B.wu9)(n,r,{feedViewer:!1}),target:(0,y.y)()?"_blank":void 0,style:p?h:void 0,draggable:!1,pressable:f?void 0:"lg",showFocus:!0,children:s})})};function R(e){var t,i,r,a;let{item:o,post:d,publication:u,clipInfo:h,isHidden:m,isFreeSubscribed:f,isPaid:g,headerRenderable:v}=e,b=(0,s.useRef)(null),y=null!=(t=d.coverImagePalette)?t:null;if((null==v?void 0:v.type)==="video")return(0,l.Y)(E,{palette:y,children:(0,l.Y)(N.U,(0,n._)({clipInfo:h,disableAutoPlay:m,isFreeSubscribed:f,isSubscribed:g,mediaUpload:v.videoUpload,post:d,pub:u,startMuted:!0,videoPlayerRef:b,videoType:h?"clip":"feed"},D({post:d,item:o,clipInfo:h})))});if((null==v?void 0:v.type)==="audio"){let e=(i=d,r=u,i.section_id&&r.sections&&null!=(a=r.sections.find(e=>e.id===i.section_id))?a:null);return(0,l.Y)(T.KQ,{isFreeSubscribed:f,isSubscribed:g,post:d,pub:u,section:e,variant:"notes-embed",trackingProps:D({post:d,item:o})})}return(null==v?void 0:v.type)==="cover"?(0,l.Y)(E,{palette:y,borderBottom:"detail",children:(0,l.Y)(p.o,{className:c()(L.A.postImage,y&&L.A.vibrantPostImage),imageProps:{smartCrop:!0,aspect:P.d8},src:v.coverImage,maxWidth:520,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1})}):null}function D(e){let{post:t,item:i,clipInfo:n}=e;return{entityKey:String(t.id),entityType:"post",primaryEntityKey:null==i?void 0:i.entity_key,primaryEntityType:null==i?void 0:i.type,surface:"feed",contentType:n?"clip":"post",feedItemTrackingParameters:null==i?void 0:i.trackingParameters}}function E(e){var{children:t,palette:i,className:o}=e,d=(0,a._)(e,["children","palette","className"]);return(0,l.Y)(_.I1,(0,r._)((0,n._)({},d),{className:c()(i?L.A.vibrantHeader:void 0,o),children:t}))}function O(e){let{post:t,publication:i,palette:n,readOnly:r,onSavePostClick:a,compact:o}=e,c=!o&&n;return(0,l.FD)(_.pT,{gap:12,padding:12,alignItems:"center",children:[(0,l.Y)(M,{publication:i,post:t,palette:c?n:null,readOnly:r}),!r&&(0,l.Y)(z,{post:t,palette:c?n:null,onSavePostClick:a})]})}function M(e){let{publication:t,post:i,palette:n,readOnly:r}=e;return(0,l.FD)(_.I1,{gap:2,flex:"grow",minWidth:0,children:[(0,l.FD)(_.pT,{gap:8,paddingBottom:4,alignItems:"center",children:[(0,l.Y)(w.Nq,{pub:t,size:20,radius:"xs"}),(0,l.Y)(A.EY.B4,{color:n?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,flex:"grow",children:(0,l.Y)(q,{publication:t,readOnly:r})})]}),(0,l.Y)(A.EY.B3,{clamp:2,color:n?"vibrance-primary":"primary",weight:"medium",children:i.title})]})}function q(e){let{publication:t,readOnly:i}=e;return i?(0,l.Y)(l.FK,{children:t.name}):(0,y.y)()?(0,l.Y)(x.p2,{target:"_blank",href:(0,W.fOI)(t),draggable:!1,children:t.name}):(0,l.Y)(h.m,{pubId:t.id,trigger:(0,l.Y)(x.IE,{href:(0,W.fOI)(t),draggable:!1,children:t.name})})}function z(e){var t,i;let n,{post:r,palette:a,onSavePostClick:o,className:s}=e,{iString:u}=(0,m.GO)(),h=(0,f.Jd)(),{requireLogin:p}=(0,C.eE)(),{handleClick:g,isSaved:b}=(t=r,i=o,n=(0,v.J)(t),{handleClick:e=>{e.preventDefault(),e.stopPropagation(),n(),i&&i(t.is_saved?"unsave":"save"),t.is_saved=!t.is_saved},isSaved:t.is_saved}),y=c()(L.A.saveButton,b&&L.A.saved,a&&L.A.vibrant,s),k=a?Y.mZ:Y.K0;return(0,l.Y)(k,{className:y,priority:"tertiary",size:"sm",onClick:e=>{h?g(e):(e.preventDefault(),null==p||p({redirectOverride:(0,B.wu9)(null,r,{urlParams:{triggerSave:!0}})}))},"aria-label":u("Save"),children:(0,l.Y)(d.A,{size:18})})}function K(e,t){return e?(0,n._)({},(0,b.p4)({palette:e,colorKey:t,defaultColor:"var(--color-dark-bg-primary)"})):void 0}function Z(e){let{post:t,publication:i,readOnly:n,onClick:r,urlParams:a}=e;return e=>{null==r||r(),!n&&I.Z&&(0,k.o)(e,(0,B.wu9)(i,t,{noBase:!0,feedViewer:!0,urlParams:a}))}}},25859:function(e,t,i){i.d(t,{Yq:()=>b,yp:()=>v});var n=i(69277),r=i(70408),a=i(32641),l=i(4006),o=i(32485),c=i.n(o);i(17402);var d=i(27437);i(84777),i(84605),i(46271);var s=i(72343),u=i(99662),h=i(63136),p=i(83629),m=i(83357),f=i(28700),g=i(4438);function v(e){var{user:t,utm_source:i,utm_content:o,children:c,onClick:s,ellipsis:h}=e,m=(0,a._)(e,["user","utm_source","utm_content","children","onClick","ellipsis"]);let g=(0,r._)((0,n._)({},t),{id:t.author_id||t.user_id||t.id,name:t.user_profile_name||t.author_name||t.name,handle:(null==t?void 0:t.handle)||(null==t?void 0:t.author_handle)});return(0,l.Y)(d.ProfileHoverCard,{subject:g,utmSource:"feed",trigger:(0,l.Y)(b,(0,r._)((0,n._)({href:(0,f.gY)(t,{noBase:p.Z}),campaign:i||o?{source:i,content:o}:void 0,onClick:s,showBack:!0,ellipsis:h,className:m.className,target:(0,u.y)()?"_blank":void 0},m),{children:c}))})}function b(e){var{weight:t,color:i,decoration:o="hover-underline",ellipsis:d,native:u,className:p,campaign:f}=e,v=(0,a._)(e,["weight","color","decoration","ellipsis","native","className","campaign"]);let b=v.href,y=null==b?void 0:b.match(/^([a-z]+:)?\/\//),k=null!=u?u:y&&!(null==b?void 0:b.startsWith(document.location.origin));return k&&f&&b&&(b=(0,s.P)(b,f)),(0,l.Y)(h.EY,{as:"span",ellipsis:d,weight:t,color:i,decoration:o,children:k?(0,l.Y)("a",(0,r._)((0,n._)({},v),{"data-native":!0,href:b,className:c()(p,g.A.link)})):(0,l.Y)(m.N,(0,r._)((0,n._)({},v),{href:b,campaign:f,className:c()(p,g.A.link)}))})}},72569:function(e,t,i){i.d(t,{c:()=>o});var n=i(4006),r=i(82853),a=i(68349),l=i(36372);function o(){let e=(0,l.d)();return function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";(0,a.lW)(t),e.popToast(()=>(0,n.Y)(l.y,{text:"Copied ".concat(i," to clipboard"),Icon:r.A}))}}},80988:function(e,t,i){i.d(t,{a:()=>g,k:()=>v});var n=i(4006),r=i(35426),a=i(38390),l=i(17402),o=i(89490),c=i(90460),d=i(10996),s=i(45346),u=i(48028),h=i(55734),p=i(11510),m=i(53168),f=i(57241);function g(e){let{isOpen:t,onOpen:i=()=>void 0,onClose:o=()=>void 0,children:m,width:f=440,className:g,initialFocus:b,fullscreenMobile:y,disableCloseOnBackdropClick:k=!1,renderOverReactLaagPortal:Y=!1,testId:_="modal",style:w}=e,A=(0,p.Iu)(),I=(0,l.useRef)(t);(0,c.h)(t),(0,l.useEffect)(()=>{t&&!I.current&&(null==i||i()),I.current=t},[t,i]);let C=A&&!y?h.r:h.p;return(0,n.Y)(a.bL,{open:t,onOpenChange:e=>{e||null==o||o()},children:(0,n.Y)(a.ZL,{forceMount:!0,children:(0,n.Y)(r.e.Root,{show:t,children:(0,n.FD)(v,{renderOverReactLaagPortal:Y,children:[(0,n.Y)(s.B,{children:(0,n.Y)(s.k,{onClose:o,disableCloseOnBackdropClick:k})}),(0,n.Y)(d.e$,{children:(0,n.Y)(C,{children:(0,n.Y)(u.I,{onClose:o,fullscreenMobile:y,width:f,className:g,initialFocus:b,disableCloseOnBackdropClick:k,testId:_,style:w,children:m})},A?"mobile":"desktop")})]})})})})}function v(e){let{children:t,renderOverReactLaagPortal:i}=e;return(0,n.Y)(o.az,{className:f.A.layout,style:{zIndex:i?m.Up+1:m.Up},children:t})}},45346:function(e,t,i){i.d(t,{B:()=>c,k:()=>o});var n=i(4006),r=i(35426),a=i(38390);i(17402);var l=i(55739);function o(e){let{onClose:t,disableCloseOnBackdropClick:i}=e;return(0,n.Y)(a.hJ,{forceMount:!0,className:l.A.backdrop,onClick:()=>{i||t()}})}function c(e){let{children:t}=e;return(0,n.Y)(r.e.Child,{enter:l.A.transition,enterFrom:l.A.from,enterTo:l.A.to,leave:l.A.transition,leaveFrom:l.A.to,leaveTo:l.A.from,children:t})}},81929:function(e,t,i){i.d(t,{Jq:()=>b,Oi:()=>f,vw:()=>v});var n=i(69277),r=i(70408),a=i(32641),l=i(4006),o=i(32485),c=i.n(o),d=i(17402),s=i(89490),u=i(35369),h=i(76977),p=i(63136);i(67140);var m=i(62614);let f={size:14,strokeWidth:2.5},g={display:"flex",height:20,paddingX:6,paddingY:2,gap:4,font:"text",fontSize:11,fontWeight:"medium",alignItems:"center"},v=(0,d.forwardRef)((e,t)=>{var{className:i,theme:o="default",priority:d="secondary",leading:p,trailing:f,children:v,fillIcon:b,radius:y="xs",onClick:k,href:Y}=e,_=(0,a._)(e,["className","theme","priority","leading","trailing","children","fillIcon","radius","onClick","href"]);let w=void 0!==k||void 0!==Y;return(0,l.FD)(u.Nm,(0,r._)((0,n._)({},g,_),{className:c()(i,function(e){let{theme:t="default",priority:i="secondary",clickable:a,radius:l="xs"}=e;return c()(m.A.tag,m.A["theme_".concat(t)],m.A["priority_".concat(i)],a&&m.A.clickable,(0,s.iF)((0,r._)((0,n._)({},g),{cursor:a?"pointer":"inherit",radius:l})))}({theme:o,priority:d,clickable:w,radius:y})),onClick:k,href:Y,ref:t,tabIndex:w?0:-1,children:[p&&(0,l.Y)(h.pT,{className:c()(m.A.leading,b&&m.A.fillIcon),alignItems:"center",children:p}),v,f&&(0,l.Y)(h.pT,{className:c()(m.A.trailing,b&&m.A.fillIcon),alignItems:"center",children:f})]}))}),b=(0,d.forwardRef)((e,t)=>{var{className:i,priority:o="primary",leading:d,trailing:s,children:f,fillIcon:v,radius:b="xs",onClick:y,href:k,title:Y}=e,_=(0,a._)(e,["className","priority","leading","trailing","children","fillIcon","radius","onClick","href","title"]);let w=void 0!==y||void 0!==k;return(0,l.FD)(u.Nm,(0,r._)((0,n._)((0,r._)((0,n._)({},_),{className:c()(i,m.A.tag,m.A.media,m.A["priority_".concat(o)],w&&m.A.clickable),onClick:y,href:k,ref:t,radius:b,cursor:w?"pointer":"inherit",tabIndex:w?0:-1,minWidth:0,title:null!=Y?Y:void 0}),g),{children:[d&&(0,l.Y)(h.pT,{className:c()(m.A.leading,v&&m.A.fillIcon),alignItems:"center",children:d}),(0,l.Y)(p.EY,{ellipsis:!0,children:f}),s&&(0,l.Y)(h.pT,{className:c()(m.A.trailing,v&&m.A.fillIcon),alignItems:"center",children:s})]}))});b.displayName="MediaTag"},90460:function(e,t,i){i.d(t,{h:()=>r});var n=i(17402);let r=e=>{(0,n.useEffect)(()=>{if(e){let e=setTimeout(()=>{document.body.style.pointerEvents=""},0);return()=>clearTimeout(e)}document.body.style.pointerEvents="auto"},[e])}},3046:function(e,t,i){i.d(t,{Ac:()=>N,Nf:()=>A,T_:()=>P,XK:()=>R,Xx:()=>C,YX:()=>U,ZT:()=>F,Zh:()=>x,b5:()=>T,dU:()=>I});var n=i(69277),r=i(70408),a=i(32641),l=i(4006),o=i(32485),c=i.n(o),d=i(14792),s=i.n(d);i(83673);var u=i(82853);i(18993);var h=i(8853),p=i(38685);i(66443),i(94090);var m=i(72880);i(82936),i(84605);var f=i(46275);i(10398),i(94729),i(24078),i(15040);var g=i(17028),v=i(97515);i(88774);var b=i(22602),y=i(81203),k=i(75303);i(92028),i(36372),i(89955),i(46647),i(87782),i(80351),i(69089),i(70486),i(42831),i(20437),i(16291),i(39318);var Y=i(49807);i(82776);var _=i(69706),w=i(36083);function A(e){var t;let{user:i}=e,n=(0,f.BR)().isOnDestination;return(0,l.Y)(g.az,{paddingX:12,children:(0,l.Y)(g.EY.B4,{as:"a",color:"secondary",decoration:"hover-underline",href:(0,Y.gYq)(i,{noBase:n}),target:"_blank",children:null!=(t=i.name)?t:"Substack user"})})}let I=(0,g.I4)({className:w.A.messageBubbleGroup,position:"relative",gap:2},k.VP);function C(e){let{direction:t,isLink:i,backgroundColor:n,isAuthorContributor:r}=e,a="incoming"===t&&r,o="".concat(n,"1A");return(0,l.FD)("svg",{viewBox:"0 0 16 13",className:c()(w.A.bubbs,w.A[t],i&&w.A.isLink,r&&w.A.author),style:a?{fill:o}:{},children:[(0,l.Y)("circle",{cx:"5",cy:"5",r:"5",className:w.A.bubb}),(0,l.Y)("circle",{cx:"13.5",cy:"10.5",r:"2.5",className:w.A.bubb}),a&&(0,l.FD)(l.FK,{children:[(0,l.Y)("circle",{cx:"5",cy:"5",r:"5",fill:o}),(0,l.Y)("circle",{cx:"13.5",cy:"10.5",r:"2.5",fill:o})]})]})}function x(e){var{messageDirection:t,isFirst:i=!1,isLast:o=!1,forceTheme:d,pubThemeAccentColor:u,isAuthorContributor:h,className:p}=e,m=(0,a._)(e,["messageDirection","isFirst","isLast","forceTheme","pubThemeAccentColor","isAuthorContributor","className"]);let f="incoming"===t&&h,v=f&&u;return(0,l.Y)(g.fI,(0,r._)((0,n._)({},m),{className:c()(w.A.bubble,w.A[t],i&&w.A.isFirst,o&&w.A.isLast,d&&w.A["force".concat(s()(d),"Theme")],f&&w.A.author,p),style:{"--color-chat-author-bg-overlay":v?"".concat(u,"1A"):"oklch(from var(--color-bg-accent-themed) l c h / 0.1)"}}))}function F(e){let{metadata:t,publication:i,direction:n,isFirst:r,isLast:a}=e,o=N(t.url);return o?(0,l.Y)(x,{messageDirection:n,isFirst:r,isLast:a,maxWidth:400,forceTheme:"incoming",outline:"detail",children:(0,l.Y)(W,{videoId:o})}):(0,l.Y)(x,{as:"a",href:t.url,target:"_blank",rel:"nofollow noopener ugc",messageDirection:n,isFirst:r,isLast:a,maxWidth:400,forceTheme:"incoming",outline:"detail",children:!function(e){let{metadata:t}=e;if(!t.image)return!1;let i=(0,Y.d4Y)(t.image);return!!i&&(i.width<401||i.height<401)}({metadata:t})?(0,l.Y)(L,{publication:i,metadata:t}):(0,l.Y)(P,{metadata:t})})}function N(e){try{let i=new URL(e);if("youtube.com"===i.hostname||"www.youtube.com"===i.hostname){let e=i.searchParams.get("v");if("/watch"===i.pathname&&e)return e;let n=i.pathname.match(/\/(?:embed|v|shorts|live)\/([^\s\/]+)/);if(n){var t;return null!=(t=n[1])?t:null}}else if("youtu.be"===i.hostname){let e=i.pathname.slice(1);if(e)return e}}catch(e){console.error("Error parsing URL:",e)}return null}function T(e){try{var t,i;let n=new URL(e);if(n.pathname.startsWith("/player/v1/"))return null!=(t=n.pathname.split("/").pop())?t:null;if(n.pathname.includes("/video/")){let e=n.pathname.split("/"),t=e.indexOf("video")+1;if(t<e.length)return null!=(i=e[t])?i:null}}catch(e){console.error("Error parsing TikTok URL:",e)}return null}function W(e){let{videoId:t}=e;return(0,l.Y)(B,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})}let B=(0,g.I4)({className:w.A.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe");function P(e){let{metadata:t}=e;return(0,l.FD)(g.fI,{flex:"grow",gap:12,padding:12,minWidth:0,children:[(0,l.Y)(S,{metadata:t}),t.image?(0,l.Y)(g.VP,{radius:"md",overflow:"hidden",bg:"tertiary",minWidth:0,children:(0,l.Y)(m.o,{className:c()(w.A.linkImage,w.A.small),src:t.image,maxWidth:64,useRetinaSizing:!0,imageIsFixedWidth:!0,imageProps:{smartCrop:!0,aspect:_.Zi}})}):null]})}function L(e){let{metadata:t,publication:i}=e;return(0,l.FD)(g.VP,{flex:"grow",maxWidth:400,minWidth:400,children:[t.image&&(0,l.Y)(h.c,{className:w.A.linkImage,src:t.image,width:400,aspectRatio:"thumb",options:{smartCrop:!0}}),(0,l.Y)(g.fI,{flex:"grow",padding:12,borderTop:t.image?"detail":void 0,children:(0,l.Y)(S,{metadata:t,publication:i})})]})}function S(e){let{metadata:t,publication:i}=e;return(0,l.FD)(g.fI,{flex:"grow",gap:12,minWidth:0,children:[(0,l.FD)(g.VP,{minWidth:0,flex:"grow",gap:2,children:[t.host&&(0,l.FD)(g.fI,{alignItems:"center",gap:8,minWidth:0,paddingBottom:i?4:void 0,children:[i&&(0,l.Y)(y.Nq,{pub:i,size:20,radius:"xs"}),(0,l.Y)(g.EY.B4,{color:"secondary",ellipsis:!0,children:t.host})]}),t.title&&(0,l.Y)(g.EY.B3,{color:"primary",weight:"medium",clamp:2,children:t.title})]}),!t.image&&(0,l.Y)(g.fI,{width:64,height:64,bg:"tertiary",radius:"md",alignItems:"center",justifyContent:"center",children:"twitter.com"===t.host||"x.com"===t.host?(0,l.Y)(p.A,{fill:"var(--color-fg-secondary)"}):(0,l.Y)(u.A,{stroke:"var(--color-fg-secondary)"})})]})}function U(){return(0,l.FD)(g.fI,{gap:12,padding:12,alignItems:"center",bg:"secondary",flex:"grow",children:[(0,l.FD)(g.VP,{minWidth:0,flex:"grow",gap:8,children:[(0,l.Y)(b.O,{height:16,width:"".concat(30*Math.random()+60,"%")}),(0,l.Y)(b.O,{height:16,width:"".concat(20*Math.random()+20,"%")})]}),(0,l.Y)(b.O,{width:64,height:64,radius:"md"})]})}function R(){return(0,l.Y)(g.fI,{gap:12,alignItems:"start",bg:"secondary",flex:"grow",children:(0,l.Y)(v.p,{title:"Error loading link",description:"Please try again"})})}},90554:function(e,t,i){i.d(t,{y:()=>r});var n=i(17402);function r(e){let{name:t,action:i}=e;(0,n.useEffect)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){i();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},50129:function(e,t,i){i.d(t,{CP:()=>a,_d:()=>l,bO:()=>o});var n,r,a=((n={}).Removed="removed",n.Unavailable="unavailable",n.BlockedYou="blocked-you",n.YouBlocked="you-blocked",n.YouMuted="you-muted",n.Geoblocked="geoblocked",n);function l(e){return"missing"===e.type}var o=((r={}).comments_disabled="comments_disabled",r.free_subscription_required="free_subscription_required",r.paid_subscription_required="paid_subscription_required",r.founding_subscription_required="founding_subscription_required",r)},92967:function(e,t,i){function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<0)return"0:00";let i=Math.floor(e),n=Math.floor(i/60),r=i%60;if(t){let t=Math.round((e-i)*10);return"".concat(n,":").concat(String(r).padStart(2,"0"),".").concat(t)}return"".concat(n,":").concat(String(r).padStart(2,"0"))}i.d(t,{P6:()=>r,i:()=>a,kq:()=>n,wG:()=>l});let r=e=>/^[0-9.:]*$/.test(e),a=e=>/^(?:(?:[0-9]{1,3}):)?(?:[0-5][0-9]|[0-9]{1,2})(?:\.[0-9]{1,3})?$/.test(e),l=e=>{let[t="",i=""]=e.split("."),n=t.split(":").reverse().map(e=>parseInt(e)),r=n[0]||0,a=n[1]||0;return 3600*(n[2]||0)+60*a+r+parseInt(i.padEnd(3,"0"))/1e3}},70515:function(e,t,i){i.d(t,{$h:()=>a,fP:()=>l});var n=i(9740);i(50129);var r=i(75237);let a=9999;function l(e,t){let{attachments:i}=e;if(i&&i.length>0){for(let e of i)if("post"===e.type){for(let i of e.post.publishedBylines)if(i.id===t)return!0;if((0,n.Ie)(e.publication,t))return!0}else if("comment"===e.type){if(e.comment.user_id===t)return!0}else if("publication"===e.type&&(0,n.Ie)(e.publication,t))return!0}return(function(e){let t=[];if(e.body_json)for(let l of(0,r.A)(e.body_json)){var i,n,a;"substack_mention"!==l.type||(null==(i=l.attrs)?void 0:i.mentionType)!=="user"&&(null==(n=l.attrs)?void 0:n.mentionType)||t.push(null==(a=l.attrs)?void 0:a.id)}return new Set(t)})(e).has(t)}}}]);