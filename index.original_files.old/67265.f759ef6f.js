!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="93c9da65-fb8e-420d-b419-e817729ec7e2",e._sentryDebugIdIdentifier="sentry-dbid-93c9da65-fb8e-420d-b419-e817729ec7e2")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["67265"],{8895:function(e,t,n){n.d(t,{A:()=>i});let i={mention:"mention-LUD0tW",self:"self-ZrvJW0",unstyled:"unstyled-ydOSZ0"}},99243:function(e,t,n){n.d(t,{A:()=>i});let i={bottomControlsContainer:"bottomControlsContainer-kx5Iet",bottomInnerControlsContainer:"bottomInnerControlsContainer-nA_qdP",backDrop:"backDrop-OMzeTr",captionsContainer:"captionsContainer-sSAb5L",centerControlsContainer:"centerControlsContainer-CKUlUi",settingsControlsContainer:"settingsControlsContainer-V3A25d",settingsControlsBox:"settingsControlsBox-svKH2p",topOverlaysContainer:"topOverlaysContainer-xo1FwD",bottomOverControlsContainer:"bottomOverControlsContainer-FnhEyj",castStatus:"castStatus-Gq0e5M",spinner:"spinner-iKxsfj"}},57732:function(e,t,n){n.d(t,{A:()=>i});let i={volumeBarContainer:"volumeBarContainer-AVLNVa",volumeBar:"volumeBar-N1rUCF",mainContainer:"mainContainer-_32N5B",volumeLevel:"volumeLevel-VDMLnw"}},38898:function(e,t,n){n.d(t,{H5:()=>g,NK:()=>h,lW:()=>v});var i=n(4006),r=n(32485),l=n.n(r),a=n(78659),o=n.n(a),s=n(17402),u=n(69715),c=n(76977),d=n(57820),p=n(92967),m=n(47961);let v=e=>{let{videoElement:t,start:n,setStart:r,end:l,setEnd:a,storyboard:o,maxDuration:p,minDuration:v,maxTimelineDuration:h=360,minTimelineDuration:g=360,looping:f,zoom:Y,setZoom:y}=e,[_,b]=(0,s.useState)(!1),[w,E]=(0,s.useState)(0),[A,k]=(0,s.useState)(Math.max(0,n-u._K)),[D,S]=(0,s.useState)(0),[I,L]=(0,s.useState)(0),N=(0,s.useRef)(0),[T,x]=(0,s.useState)({isDragging:!1,element:void 0});return(0,s.useEffect)(()=>{let e=()=>{if(t){E(t.duration);let e=[360,t.duration];h&&e.push(h),S(Math.min(...e))}};return t&&t.addEventListener("loadedmetadata",e),(null==t?void 0:t.duration)&&e(),()=>{t&&t.removeEventListener("loadedmetadata",e)}},[h,t]),(0,s.useEffect)(()=>{let e=()=>{t&&L(t.currentTime)};if(t)return t.addEventListener("timeupdate",e),()=>{t.removeEventListener("timeupdate",e)}},[t]),(0,s.useEffect)(()=>{if(!_)return;let e=Math.abs(I-N.current);if(N.current=I,e<1){f&&t&&!T.isDragging&&(I>l||I<n)&&(t.currentTime=n);return}if(!T.isDragging&&(I>D||I<A)){let e=D-A,t=Math.min(I,w-e);k(t),S(t+e)}},[I,_]),(0,s.useEffect)(()=>{if(!w||T.isDragging)return;if(n>A&&l<D)return void b(!0);let e=l-n,t=Math.min(w,l+e);k(Math.max(0,n-e)),S(t);let i=(0,u.OV)(e);(!Y||i<Y)&&y(i),b(!0)},[n,l,w]),(0,s.useEffect)(()=>{if(!_)return;let e=D-A,t=(0,u.eD)(Y),i=isNaN(e)||e<u._K?.5:(n-A)/e,r=A+i*e,l=r-i*t,a=r+(1-i)*t,o=l,s=a;l<0?s=Math.min(w,(o=0)+t):a>w&&(o=Math.max(0,(s=w)-t)),h&&s-o>h||g&&s-o<g||(S(s),k(o))},[Y,h,g,w,_]),(0,i.Y)("div",{className:m.A.timeline,children:w>0?(0,i.Y)(C,{startTimeline:A,setStartTimeline:k,endTimeline:D,setEndTimeline:S,startPosition:n,setStartPosition:e=>{v&&e+v>=l?r(l-v):p&&e+p<=l?r(l-p):r(e)},endPosition:l,setEndPosition:e=>{v&&e-v<=n?a(n+v):p&&e-p>=n?a(n+p):a(e)},setPosition:(e,t)=>{r(e),a(t)},playerPosition:I,setPlayback:e=>{t&&(t.currentTime=e)},duration:w,onDragging:e=>{x(e)},storyboard:o}):(0,i.Y)(c.Ye,{alignItems:"center",justifyContent:"center",children:(0,i.Y)(d.y$,{})})})},h=e=>{let{storyboard:t,imageUrl:n,x:r,y:l,displayWidth:a,displayHeight:o,className:s}=e,u=(r?r/t.tile_width:0)*a,c=(l?l/t.tile_height:0)*o,d={width:"".concat(a,"px"),height:"".concat(o,"px"),backgroundImage:"url(".concat(n,")"),backgroundPosition:"-".concat(u,"px -").concat(c,"px"),backgroundSize:"500%"};return(0,i.Y)("div",{className:s,style:d})};function g(e,t){return e.reduce((e,n)=>Math.abs(n.start-t)<Math.abs(e.start-t)?n:e)}let C=e=>{let{startTimeline:t,setStartTimeline:n,endTimeline:r,setEndTimeline:a,startPosition:u,setStartPosition:d,endPosition:v,setEndPosition:C,setPosition:y,playerPosition:_,setPlayback:b,duration:w,storyboard:E,onDragging:A}=e,k=(0,s.useRef)(null),D=(0,s.useRef)(null),S=(0,s.useRef)(v-u),I=(0,s.useRef)(null),[L,N]=(0,s.useState)({isDragging:!1,element:void 0}),T=r-t,x=(0,s.useMemo)(()=>v-u,[v,u]),P=u-t,F=v-t,M=_-t,R=t<1,U=1>Math.abs(r-w),O=(0,s.useMemo)(()=>P/T*100,[T,P]),z=(0,s.useMemo)(()=>F/T*100,[F,T]),V=(0,s.useMemo)(()=>M/T*100,[M,T]),B="linear-gradient(to right, \n    rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) calc(".concat(O,"% - 6px), \n    rgba(0,0,0,0) calc(").concat(O,"% - 6px), rgba(0,0,0,0) calc(").concat(z,"% + 6px), \n    rgba(0,0,0,0.5) calc(").concat(z,"% + 6px), rgba(0,0,0,0.5) 100%)"),H=(0,s.useCallback)(e=>{d(Math.max(0,e/100*T+t))},[T,d,t]),K=(0,s.useCallback)(e=>{C(Math.min(w,e/100*T+t))},[w,T,C,t]);(0,s.useEffect)(()=>{A(L)},[L]);let q=e=>{e.preventDefault(),e.stopPropagation()},W=()=>{setTimeout(()=>{N({isDragging:!1,element:void 0})},300),D.current=null,I.current=null,document.removeEventListener("selectstart",q),document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",W),document.removeEventListener("pointerup",W)},X=e=>{if(null===D.current)return;let i=e.clientX-D.current;if(N({isDragging:!0,element:"interval"}),!k.current)return;let l=i/k.current.getBoundingClientRect().width*T,o=u+l,s=o+S.current;I.current?o<0?(y(0,S.current),n(0)):s>w?(y(w-S.current,w),a(w)):y(o,s):t-l>0&&r-l<=w&&(n(Math.max(0,t-l)),a(Math.min(w,r-l)))};return(0,i.Y)("div",{className:m.A.railContainer,children:(0,i.FD)("div",{className:m.A.rail,ref:k,onMouseDown:e=>{if(!k.current)return;document.addEventListener("selectstart",q),D.current=e.clientX,S.current=v-u;let t=k.current.getBoundingClientRect().left,n=(e.clientX-t)/k.current.getBoundingClientRect().width*100;I.current=n>=O&&n<=z,document.addEventListener("mousemove",X),document.addEventListener("mouseup",W),document.addEventListener("pointerup",W)},onClick:e=>{if(e.stopPropagation(),e.preventDefault(),L.isDragging||!k.current)return;D.current=e.clientX,S.current=v-u;let n=k.current.getBoundingClientRect().left,i=(e.clientX-n)/k.current.getBoundingClientRect().width*100,r=i>=O&&i<=z,l=t+i/100*T;if(r)b(l);else{let e=o()(l,0,w-S.current),t=e+S.current;y(e,t)}},children:[(()=>{var e,n;if(!E)return null;let l=null!=(n=null==k||null==(e=k.current)?void 0:e.getBoundingClientRect().width)?n:0;if(0===l)return null;let a=(function(e,t,n){let i=[],r=Math.floor(e/n)*n,l=Math.ceil(t/n)*n;for(let e=r;e<=l;e+=n)i.push(e);return i})(t,r,T/l*(60*(E.tile_width/E.tile_height))).map(e=>({time:e,tile:g(E.tiles,e)}));return(0,i.Y)(c.Ye,{className:m.A.storyboard,children:a.map((e,n)=>{let{time:r,tile:l}=e,a=(r-t)/T*100;return(0,i.Y)("div",{style:{position:"absolute",left:"calc(".concat(a,"% + 6px)")},children:(0,i.Y)(h,{storyboard:E,imageUrl:E.url,displayHeight:60,displayWidth:E.tile_width/E.tile_height*60,x:l.x,y:l.y},"".concat(l.x,"-").concat(l.y,"-").concat(n))})})})})(),(0,i.Y)("div",{className:m.A.nonSelectable,style:{background:B,position:"absolute",top:0,bottom:0,left:0,right:0}}),(0,i.FD)("div",{className:l()(m.A.handles,m.A.nonSelectable),children:[(0,i.Y)("div",{className:m.A.selection,style:{left:"calc(".concat(O,"% - 6px)"),width:"calc(".concat(z-O,"% + 12px)")}}),!R&&(0,i.Y)("div",{className:m.A.selectionFadeLeft}),!U&&(0,i.Y)("div",{className:m.A.selectionFadeRight})]}),(0,i.Y)(Y,{divRef:k,startTimeline:t,railDuration:r-t,active:!L.isDragging}),(0,i.FD)("div",{className:m.A.handles,children:[(0,i.Y)(f,{className:"".concat(m.A.draggable," ").concat(m.A.draggableLeft),railRef:k,label:(0,p.kq)(null!=x?x:0,!0),position:O,maxPosition:z,setPosition:H,isDragging:"start"===L.element,setIsDragging:e=>e?N({isDragging:!0,element:"start"}):N({isDragging:!1,element:void 0})}),(0,i.Y)(f,{className:"".concat(m.A.draggable," ").concat(m.A.draggableRight),railRef:k,label:(0,p.kq)(null!=x?x:0,!0),position:z,minPosition:O,setPosition:K,isDragging:"end"===L.element,setIsDragging:e=>e?N({isDragging:!0,element:"end"}):N({isDragging:!1,element:void 0})}),(0,i.Y)(f,{className:m.A.playback,railRef:k,label:(0,p.kq)(x,!0),position:V,isDragging:L.isDragging,disabled:!0})]})]})})};m.A.lgTick,m.A.lgTick,m.A.smTick,m.A.smTick;let f=e=>{let{railRef:t,position:n,disabled:r,setPosition:l,label:a,maxPosition:o,minPosition:u,className:c,onDragStart:d,onDragEnd:p,showIcon:v=!0,setIsDragging:h}=e,g=(0,s.useRef)(null),[C,f]=(0,s.useState)(!1),Y=e=>{e.preventDefault(),e.stopPropagation()},y=()=>{setTimeout(()=>{null==h||h(!1)},0),f(!1),document.removeEventListener("selectstart",Y),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",y),document.removeEventListener("pointerup",y),p&&p()},_=e=>{if(null==h||h(!0),!t.current||!g.current)return;let n=t.current.getBoundingClientRect().left,i=t.current.getBoundingClientRect().width,r=(e.clientX-n)/i*100;l&&(void 0!==o&&void 0!==u?l(Math.min(o,Math.max(u,r))):void 0!==o?l(Math.min(o,r)):void 0!==u?l(Math.max(u,r)):l(r))};return(0,i.FD)("div",{className:c,ref:g,style:{left:"".concat(n,"%")},onMouseDown:e=>{!r&&(null==h||h(!1),e.stopPropagation(),f(!0),document.addEventListener("selectstart",Y),document.addEventListener("mousemove",_),document.addEventListener("mouseup",y),document.addEventListener("pointerup",y),d&&d())},children:[v&&(0,i.Y)("div",{className:m.A.handle}),(0,i.Y)("div",{className:"".concat(m.A.tooltip," ").concat(C?m.A.visible:m.A.hidden," ").concat(m.A.nonSelectable),children:a})]})},Y=e=>{let{divRef:t,startTimeline:n,railDuration:r,active:a}=e,[o,u]=(0,s.useState)(null),[c,d]=(0,s.useState)(!1),v=e=>{if(t.current){let i=t.current.getBoundingClientRect(),{left:l,width:a}=i,o=e.clientX-l;u({x:e.clientX-i.left,time:n+o/a*100/100*r})}},h=()=>d(!0),g=()=>d(!1);return((0,s.useEffect)(()=>(t.current&&(t.current.addEventListener("mousemove",v),t.current.addEventListener("mouseenter",h),t.current.addEventListener("mouseleave",g)),()=>{t.current&&(t.current.removeEventListener("mousemove",v),t.current.removeEventListener("mouseenter",h),t.current.removeEventListener("mouseleave",g))}),[n,r]),a&&o&&c)?(0,i.FD)("div",{className:l()(m.A.shadowContainer,m.A.nonSelectable),style:{left:o.x},children:[(0,i.Y)("div",{className:m.A.shadow}),(0,i.Y)("div",{className:l()(m.A.tooltip,m.A.mouseTracker),children:(0,p.kq)(o.time,!0)})]}):null}},16784:function(e,t,n){n.d(t,{p:()=>k});var i=n(69277),r=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),u=n(48309),c=n(17402),d=n(15734),p=n.n(d),m=n(69715),v=n(76199),h=n(27402),g=n(89845),C=n(84605),f=n(80622),Y=n(86500),y=n(68349),_=n(35369),b=n(76977),w=n(36372),E=n(39318),A=n(7315);let k=e=>{var t;let{postId:n,visible:o,videoPlayerRef:u,surface:d}=e,p=(0,l._)(e,["postId","visible","videoPlayerRef","surface"]),{onCancelClipping:v}=(0,m.MC)(),[g,C]=(0,c.useState)(!1),[_,w]=(0,c.useState)(),E=()=>{if(o){var t,i,r,l;null==(i=u.current)||null==(t=i.player)||t.pause(),(0,Y.u4)(Y.qY.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:null!=n?n:null==(r=e.post)?void 0:r.id,surface:d}),p.hideBottomControls||(0,Y.u4)(Y.qY.MEDIA_CLIP_CREATE_MODAL_CLOSED,{video_upload_id:p.videoUpload.id,post_id:null!=n?n:null==(l=e.post)?void 0:l.id,is_post_editor:!1,surface:d})}v()},k=async e=>{var t,n;w({id:(0,y.QT)(),created_at:new Date,media_upload_id:p.videoUpload.id,title:null!=(n=null==(t=p.post)?void 0:t.slug)?n:"",start_time:e.start,duration:e.duration,source:"user",assets:[],user_id:null,description:""}),C(!0)};return((0,h.A)(e.containerRef,E),o)?(0,a.FD)(b.Ye,{className:s()(A.A.videoTrimmerSlider,{[A.A.videoTrimmerSliderVisible]:o}),children:[(0,a.Y)(D,(0,r._)((0,i._)({},p),{videoPlayerRef:u,onCancel:E,onSubmit:k,surface:d})),_&&(0,a.Y)(f.e,{videoUpload:p.videoUpload,transcription:null==(t=p.videoUpload.extractedAudio)?void 0:t.transcription,isOpen:g,onClose:()=>{C(!1),v()},clip:_,useDownloadsCenter:!0,surface:d})]}):null},D=e=>{let{hideBottomControls:t,isInline:n,videoPlayerRef:i,videoUpload:r,post:l,pub:o,onCancel:s,onSubmit:d,surface:h}=e,f=(0,w.d)(),y=(0,v.lY)(),{iString:b}=(0,C.GO)();(0,c.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);let A=async e=>{var t,n;(0,Y.u4)(Y.qY.VIDEO_CLIP_CREATE_BUTTON_CLICKED,{post_id:null==l?void 0:l.id,media_upload_id:null==l||null==(t=l.videoUpload)?void 0:t.id,start_time:e.start,end_time:e.start+e.duration,surface:h}),i&&setTimeout(()=>{var e,t;return null==(t=i.current)||null==(e=t.player)?void 0:e.pause()},100);try{let t=await p().post("/api/v1/video/assets/".concat(null==r?void 0:r.id,"/clips")).send(e);return y.addMediaUpload({mediaUpload:t.body.mediaUpload,thumbnailUrl:(0,E.Pzx)(r),title:null!=(n=null==l?void 0:l.title)?n:b("Download"),source:"user"}),s(),e}catch(e){console.error(e),f.popToast(()=>(0,a.Y)(w.y,{text:b("Error creating clip")}))}};return(0,a.Y)(g.A,{hideBottomControls:t,isInline:n,videoPlayerRef:i,videoUpload:r,post:l,pub:o,onSubmit:null!=d?d:A,onSubmitLabel:e=>(0,a.Y)(_.$n,{leading:(0,a.Y)(u.A,{size:20}),onClick:e,children:b("Create clip")}),minClipDuration:m.LO,maxClipDuration:m.z3,minTimelineDuration:m._K,maxTimelineDuration:m.sm,surface:h})}},70090:function(e,t,n){n.d(t,{A:()=>r});var i=n(17402);let r=e=>{let[t,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let t=()=>{e&&n(e.currentTime)};if(e)return e.addEventListener("timeupdate",t),()=>{e.removeEventListener("timeupdate",t)}},[e]),t}},83137:function(e,t,n){n.d(t,{U:()=>a});var i=n(7350),r=n.n(i),l=n(17402);let a=e=>{let{idleAfter:t=3e3,element:n}=e,[i,a]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e,i=null!=n?n:window,l=()=>{a(!0)},o=r()(()=>{a(!1),clearTimeout(e),e=setTimeout(l,t)},500),s=()=>{document.hidden||o()};return e=setTimeout(l,t),i.addEventListener("mousemove",o),i.addEventListener("mousedown",o),i.addEventListener("resize",o),i.addEventListener("keydown",o),i.addEventListener("touchstart",o),i.addEventListener("wheel",o),n||document.addEventListener("visibilitychange",s),()=>{i.removeEventListener("mousemove",o),i.removeEventListener("mousedown",o),i.removeEventListener("resize",o),i.removeEventListener("keydown",o),i.removeEventListener("touchstart",o),i.removeEventListener("wheel",o),n||document.removeEventListener("visibilitychange",s),clearTimeout(e)}},[n,t]),{isIdle:i}}},88553:function(e,t,n){n.d(t,{U:()=>l});var i=n(39318),r=n(18947);let l=e=>{let{linkToComments:t,post:n,pub:l,utm:a}=e;return t?(0,r.wu)(l,n,{comments:!0,urlParams:{utm:a}}):"video"===n.type?(0,i.oRR)(n.canonical_url,{autoPlay:!0,utm:a}):a?(0,i.yRP)(n.canonical_url,{utm:a}):n.canonical_url}},24539:function(e,t,n){n.d(t,{O:()=>c});var i=n(4006),r=n(32485),l=n.n(r),a=n(35369),o=n(76977),s=n(63136),u=n(81832);let c=e=>{let{options:t,value:n,onChange:r}=e;return(0,i.Y)(o.Ye,{gap:4,children:t.map(e=>{let t="string"==typeof e?e:e.value;return(0,i.Y)(d,{onClick:()=>{r(t)},selected:t===n,children:"string"==typeof e?e:(0,i.FD)(o.Ye,{alignItems:"center",gap:8,paddingY:4,children:[e.icon?e.icon:null,e.label]})},t)})})},d=e=>{let{children:t,selected:n,onClick:r}=e;return(0,i.Y)(a.Nm,{resetCss:!0,onClick:r,children:(0,i.Y)(s.EY.B4,{className:l()(u.A.pill,{[u.A.pillSelected]:n}),children:t})})}},47639:function(e,t,n){n.d(t,{U:()=>A});var i=n(69277),r=n(70408),l=n(4006),a=n(32485),o=n.n(a),s=n(17402),u=n(77849),c=n(69715),d=n(41873),p=n(16784),m=n(84605),v=n(83137),h=n(68410),g=n(89490),C=n(68391),f=n(13348),Y=n(59294),y=n(31790),_=n(8734),b=n(4246),w=n(56262);let E={"preview-label-container":"preview-label-container-Y88jiD",previewLabelContainer:"preview-label-container-Y88jiD","live-stream-tag-container":"live-stream-tag-container-MWmvAX",liveStreamTagContainer:"live-stream-tag-container-MWmvAX","media-clip-tag-container":"media-clip-tag-container-FbCpZr",mediaClipTagContainer:"media-clip-tag-container-FbCpZr",videoContainer:"videoContainer-wF4DEO",videoContainerRadiusMd:"videoContainerRadiusMd-oj4q3P",videoContainerRadiusSm:"videoContainerRadiusSm-CKqgqE",overflow:"overflow-ns9Lj9",notesVideoContainer:"notesVideoContainer-XgGhEY"},A=e=>{var t,n,a,A,k,D,S,I,L,N;let{borderRadius:T="md",clipInfo:x,disableAutoPlay:P=!1,forceAutoPlay:F=!1,isFreeSubscribed:M,isSubscribed:R,mediaUpload:U,post:O,pub:z,renderPaywall:V,startMuted:B,variant:H="notes",videoPlayerRef:K,videoType:q="post",entityKey:W,entityType:X,primaryEntityType:j,primaryEntityKey:G,surface:Z,contentType:J,feedItemTrackingParameters:Q,onFinishVideo:$}=e,{isClipping:ee}=(0,c.MC)(),{iString:et}=(0,m.GO)(),{isMobile:en}=(0,h.sM)(),[ei,er]=(0,s.useState)(!1),el=(0,w.isPaidAudience)(O.audience)&&!R,ea=(null!=(n=U.preview_duration)?n:0)>0,eo=el&&(!ea||ei),es=!1;if(x&&ea&&el){let e=null!=(a=U.preview_start)?a:0,t=e+(null!=(A=U.preview_duration)?A:0),n=x.startTime,i=n+x.duration;es=n<e||i>t}(0,C.C4)({videoPlayerRef:K,showPaywall:eo,disable:P});let eu=(0,s.useRef)(null),[ec,ed]=(0,s.useState)(!1),{isIdle:ep}=(0,v.U)({idleAfter:2e3,element:eu.current}),em=(0,u.V)(),ev=(0,Y.AC)(eu),eh=()=>{var e;(null==(e=K.current)?void 0:e.player)&&(er(!1),K.current.player.currentTime=0,K.current.player.play())},eg={mediaRef:K,pub:z,post:O,mediaUpload:U,podcastUpload:null==U?void 0:U.extractedAudio,isActive:null!=(k=ec||!ep||ee)&&k,isFocused:ev,handle:em,hasPaywall:el,hideNextVideoButton:!0,showPaywall:eo,onShareMenuOpen:()=>ed(!0),onShareMenuClose:()=>ed(!1),disableShortcuts:!0,size:"notes"===H?"sm":"md",hideSettings:!!x,hidePip:!!x};return(0,l.Y)(g.az,{ref:eu,position:"relative",onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.FD)(u.m,{handle:em,className:E.fullScreenContainer,children:[(0,l.FD)("div",{className:o()(E.videoContainer,{[null!=(D=E.overflow)?D:""]:ee,[null!=(S=E.notesVideoContainer)?S:""]:"notes"===H,[null!=(I=E.inboxVideoContainer)?I:""]:"inbox"===H,[null!=(L=E.videoContainerRadiusMd)?L:""]:"md"===T,[null!=(N=E.videoContainerRadiusSm)?N:""]:"sm"===T}),children:[(0,l.Y)(d.A,{ref:K,doNotResetOnEnd:!0,hidePlayButton:eo,mediaUpload:U,noControls:!0,noKeyboardShortcuts:!0,post:O,pub:z,startMuted:B,onFinishVideo:()=>{er(!0),null==$||$()},renderPlayButton:()=>(0,l.Y)(f.ro,{isPlaying:!1,size:en?40:56}),isClipping:ee,videoType:q,usePreview:el&&ea,videoPlayerClassName:E.videoPlayer,autoPlay:F&&!eo,entityKey:W,entityType:X,primaryEntityKey:G,primaryEntityType:j,surface:Z,contentType:J,feedItemTrackingParameters:Q}),x&&!x.isAutoSelected?(0,l.Y)(b.rN,(0,r._)((0,i._)({},eg),{startTime:x.startTime,duration:x.duration})):(0,l.Y)(b.Jf,(0,i._)({},eg))]}),(null==(t=K.current)?void 0:t.player)&&"post"===q&&(0,l.Y)(p.p,{visible:ee,videoPlayerRef:K,containerRef:eu,videoUpload:U,post:O,surface:"notes_video_player"}),ea&&!eo&&!R&&(0,l.Y)("div",{className:E["preview-label-container"],children:(0,l.Y)(_.d,{children:et("Preview")})}),eo&&(V?V({onRestart:ea&&!es?eh:void 0}):(0,l.Y)(y.v,{post:O,pub:z,isFreeSubscribed:M,isPaidClip:es,medium:"video",variant:"dialog",onRestart:ea&&!es?eh:void 0}))]})})}},31790:function(e,t,n){n.d(t,{v:()=>W});var i=n(79785),r=n(4006),l=n(32485),a=n.n(l),o=n(67078),s=n(59492),u=n(81143),c=n(17402),d=n(15734),p=n.n(d),m=n(47963),v=n(86404),h=n(84605),g=n(53989),C=n(46271),f=n(86500),Y=n(53928),y=n(68349),_=n(68410),b=n(24078),w=n(35369),E=n(76977),A=n(63136),k=n(36372),D=n(56458),S=n(39318),I=n(57324),L=n(74409);function N(){let e=(0,i._)(["Available now for iOS and Android"]);return N=function(){return e},e}function T(){let e=(0,i._)(["Continue watching this video for free in the Substack app"]);return T=function(){return e},e}function x(){let e=(0,i._)(["Continue watching this video for free, courtesy of ","."]);return x=function(){return e},e}function P(){let e=(0,i._)(["Continue listening for free in the Substack app"]);return P=function(){return e},e}function F(){let e=(0,i._)(["Continue listening for free, courtesy of ","."]);return F=function(){return e},e}function M(){let e=(0,i._)(["Watch this video for free in the Substack app"]);return M=function(){return e},e}function R(){let e=(0,i._)(["Watch this video for free, courtesy of ","."]);return R=function(){return e},e}function U(){let e=(0,i._)(["Listen to this episode for free in the Substack app"]);return U=function(){return e},e}function O(){let e=(0,i._)(["Listen to this episode for free, courtesy of ","."]);return O=function(){return e},e}function z(){let e=(0,i._)([""," episode"]);return z=function(){return e},e}function V(){let e=(0,i._)(["The full episode is only available to "," subscribers"]);return V=function(){return e},e}function B(){let e=(0,i._)(["The full episode is only available to paid subscribers of ",""]);return B=function(){return e},e}function H(){let e=(0,i._)([""," clip"]);return H=function(){return e},e}function K(){let e=(0,i._)(["This clip is only available to "," subscribers"]);return K=function(){return e},e}function q(){let e=(0,i._)(["This clip is only available to paid subscribers of ",""]);return q=function(){return e},e}let W=e=>{var t,n,i,l,d,v,W,j;let{disableButtons:G,medium:Z,inlineIcon:J,isFreeSubscribed:Q,isPaidClip:$,post:ee,pub:et,variant:en,onRestart:ei,magicToken:er}=e,{iString:el,iTemplate:ea}=(0,h.GO)(),{isMobile:eo}=(0,_.sM)(),[es,eu]=(0,c.useState)(!1),{getSettingFor:ec}=(0,g.Pu)(),ed=(0,C.Jd)(),{popToast:ep}=(0,k.d)(),em=!!(ec("paywall_unlock_tokens")&&"only_paid"===ee.audience&&ee.teaser_post_eligible)&&!(null==ed?void 0:ed.is_subscribed)&&Q&&!(null==ed?void 0:ed.has_redeemed_post_unlock_token),ev=null==ed?void 0:ed.reader_installed_at,{modal:eh,open:eg}=(0,m.El)({utm_campaign:I._9.paywallPostUnlockPrompt,utm_source:I.VU.substack,overrideCTA:null!=(t=ev&&el("Open in app"))?t:void 0,overrideTitle:ev?el("Unlock your free post in the Substack app"):el("Get the free Substack app to unlock this post"),subTitle:ea(N()),openUrl:null!=(n=ev&&(0,S.XV8)(et.subdomain,ee.slug))?n:void 0}),eC=(0,c.useCallback)(async()=>{(0,f.u4)(f.qY.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:ee.id,publication_id:et.id,medium:Z,source:"shows_media_paywall"});try{if(await p().post("/api/v1/post_unlock_token").send({post_id:ee.id,token:er}),eo){let e=ev?(0,S.XV8)(et.subdomain,ee.slug,{redirect:"app-store",params:{utm_campaign:I._9.paywallPostUnlockPrompt,utm_source:I.VU.paywall,utm_medium:Z}}):(0,S.wHz)({utm_campaign:I._9.paywallPostUnlockPrompt,utm_source:I.VU.paywall,utm_medium:Z});(0,y.V2)(e)}else eg()}catch(e){ep(()=>(0,r.Y)(k.y,{text:el("Teaser posts are not currently available for this content")}))}},[ee.id,ee.slug,et.id,et.subdomain,Z,er,ev,eg,ep,el,eo]),ef=!!ei,eY=null!=(i=(0,D.m4)(et))?i:"Founding Member",ey=em?ei?"video"===Z?eo?ea(T()):ea(x(),et.author_name||et.name):eo?ea(P()):ea(F(),et.author_name||et.name):"video"===Z?eo?ea(M()):ea(R(),et.author_name||et.name):eo?ea(U()):ea(O(),et.author_name||et.name):"founding"===ee.audience?ea(z(),eY):el("Paid episode"),e_="founding"===ee.audience?ea(V(),eY):ea(B(),et.name);2309160===et.id?(ey=el("Watch the film"),e_="Subscribe or purchase as a 1-month rental to continue."):$&&(ey="founding"===ee.audience?ea(H(),eY):el("Paid clip"),e_="founding"===ee.audience?ea(K(),eY):ea(q(),et.name));let eb="video"===Z?el("Subscribe to watch"):el("Subscribe to listen"),ew=em?el("Claim my free episode"):"video"===Z?el("Upgrade to watch"):el("Upgrade to listen"),eE=em?()=>{eC()}:()=>{(0,y.V2)((0,S.my9)(et,{simple:!0,next:document.location.href,utm_source:I.VU.showsPaywall,utm_medium:I.Jn.web,utm_content:ee.id}),{local_navigation:!1})},eA=Q?ew:eb;return(0,c.useEffect)(()=>{(0,f.u4)(f.qY.FREE_PREVIEW_PAYWALL_SHOWN,{post_id:ee.id,medium:Z}),(0,Y.jN)(Y.ti.TRACK_PAYWALL_SHOWN)},[ee.id,Z]),(0,c.useEffect)(()=>{ef&&setTimeout(()=>{eu(!0)},10)},[ef]),(0,r.FD)(E.Ye,{className:a()({[null!=(l=L.A["container--dialog"])?l:""]:"dialog"===en,[null!=(d=L.A["container--overlay"])?d:""]:"overlay"===en,[null!=(v=L.A["container--animated"])?v:""]:ef,[null!=(W=L.A["container--animated-in"])?W:""]:es}),inset:0,justifyContent:"center",alignItems:"center",position:"absolute",onClick:e=>{e.stopPropagation(),e.preventDefault()},"data-testid":"paywall",children:[eh,"dialog"===en?(0,r.Y)(X,{showUnlockPrompt:em,description:e_,headerText:ey,post:ee,pub:et,primaryCta:eA,primaryCtaClick:eE,onRestart:ei}):(0,r.FD)(E.I1,{alignItems:"center",gap:eo?12:16,paddingX:24,children:[(0,r.FD)(E.I1,{alignItems:"center",className:L.A["content-top"],gap:eo?12:16,children:[!J&&(em?(0,r.Y)(b.eu,{photoUrl:null!=(j=et.author_photo_url)?j:void 0,size:64}):(0,r.Y)(E.Ye,{className:L.A["icon-container"],alignItems:"center",color:"white",justifyContent:"center",radius:"sm",children:(0,r.Y)(o.A,{size:eo?16:24})})),(0,r.FD)(E.I1,{alignItems:"center",gap:4*!eo,children:[(0,r.FD)(E.Ye,{alignItems:"center",gap:8,children:[J&&(0,r.Y)(E.Ye,{className:L.A.inlineIconContainer,alignItems:"center",justifyContent:"center",radius:"sm",children:(0,r.Y)(o.A,{size:16})}),(0,r.Y)(A.EY.B3,{as:"h3",color:"white",weight:"semibold",fontSize:em?20:15,textAlign:"center",children:ey})]}),!em&&(0,r.Y)(A.EY.B4,{color:"white",opacity:80,align:"center",children:e_})]})]}),(0,r.FD)(E.Ye,{className:L.A["content-bottom"],gap:16,children:[ei&&(0,r.Y)(w.$n,{className:L.A["restart-button"],disabled:G,priority:"secondary-outline",onClick:()=>{(0,f.u4)(f.qY.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:ee.id}),ei()},children:(0,r.FD)(E.Ye,{alignItems:"center",gap:12,children:[(0,r.Y)(s.A,{size:16}),el("Restart")]})}),(0,r.FD)(w.$n,{priority:"primary",onClick:eE,disabled:G,children:[em&&(0,r.Y)(u.A,{className:"icon",size:20,stroke:"#fff",fill:"none",strokeWidth:2}),eA]})]})]})]})},X=e=>{var t;let{description:n,headerText:i,post:l,pub:a,primaryCtaClick:s,primaryCta:u,onRestart:c,showUnlockPrompt:d}=e,{iString:p}=(0,h.GO)();return(0,r.FD)(E.I1,{bg:"glass-inverted-medium",padding:16,gap:16,radius:"md",maxWidth:320,children:[(0,r.FD)(E.I1,{gap:4,alignItems:"center",children:[d&&(0,r.Y)(b.eu,{photoUrl:null!=(t=a.author_photo_url)?t:void 0,size:64}),(0,r.FD)(E.Ye,{alignItems:"center",color:"white",gap:8,children:[!d&&(0,r.Y)(o.A,{size:16}),(0,r.Y)(A.EY.B2,{as:"h3",color:"white",weight:"semibold",textAlign:d?"center":"left",children:i})]}),!d&&(0,r.Y)(A.EY.B4,{color:"white",opacity:80,align:"center",children:n})]}),(0,r.FD)(E.I1,{gap:8,children:[c&&(0,r.Y)(w.$n,{priority:"primary-mono",onClick:()=>{(0,f.u4)(f.qY.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:l.id}),c()},children:p("Replay")}),(0,r.FD)(w.$n,{onClick:s,priority:"secondary",children:[d&&(0,r.Y)(v.A,{size:18,className:L.A.icon}),u]})]})]})}},8734:function(e,t,n){n.d(t,{d:()=>a});var i=n(4006),r=n(76977),l=n(63136);let a=e=>{let{children:t,avoidBackgroundBlur:n}=e;return(0,i.Y)(r.Ye,{alignItems:"center",bg:n?void 0:"glass-inverted-medium",color:"white",gap:6,height:24,paddingX:8,radius:"sm","data-testid":"audio-player-preview-label",style:n?{background:"var(--color-light-fg-primary)"}:void 0,children:(0,i.Y)(l.EY.B5,{weight:"medium",color:"white",children:t})})}},90531:function(e,t,n){n.d(t,{A:()=>m});var i=n(69277),r=n(70408),l=n(4006),a=n(32485),o=n.n(a),s=n(17402),u=n(55732),c=n(70090);let d="highlight-word-YsKp8Q",p=new u.WebVTTParser,m=e=>{var t,n,a;let u,{videoEle:m,mediaUpload:v,handle:h,subtitles:g,showCaptions:C,withHighlight:f,size:Y="md",captionsStyle:y}=e,[_,b]=(0,s.useState)([]),[w,E]=(0,s.useState)({segment:null,wordIndex:-1}),{segment:A,wordIndex:k}=w,D=(0,c.A)(m);return((0,s.useEffect)(()=>{if(m){let e=m.currentTime,t=_.find(t=>e>=t.start&&e<=t.end),n=null!=t?t:null;if(!f)return void E({wordIndex:-1,segment:n});if(n){let t=-1;for(let i=0;i<n.words.length;i++){let r=n.words[i];if(r){if(e>=r.start&&e<=r.end){t=i;break}if(e<r.start)break;t=i}}E({wordIndex:t,segment:n})}else E({wordIndex:-1,segment:n})}},[m,g,_.length,D]),(0,s.useEffect)(()=>{var e,t,n,l;let a=(null!=(n=null==v||null==(e=v.transcription)?void 0:e.signed_captions)?n:[]).find(e=>e.language===g);(null==a?void 0:a.original)?(null==v||null==(t=v.transcription)?void 0:t.cdn_url)&&fetch(null==v||null==(l=v.transcription)?void 0:l.cdn_url).then(e=>e.json()).then(e=>{b(e.map(e=>(0,r._)((0,i._)({},e),{words:e.words?e.words:[]})))}).catch(e=>console.error("Error fetching transcription:",e)):(null==a?void 0:a.url)&&fetch(a.url).then(e=>e.text()).then(e=>{b(p.parse(e,"metadata").cues.map(e=>({text:e.text,start:e.startTime,end:e.endTime,words:[]})))}).catch(e=>console.error("Error fetching transcription:",e))},[v,g,C]),C&&_.length&&A)?(0,l.Y)("div",{className:o()("container-zAxsTa",{"container-full-screen-mK397L":h.active,"captions-small-CavdhE":"sm"===Y}),style:y,children:A&&(0,l.Y)("div",{className:o()("text-Mt4veX",{"text-full-screen-BX6VEN":h.active,"text-small-boKa5D":"sm"===Y}),children:(null==A||null==(t=A.words)?void 0:t.length)?(0,l.Y)("div",{children:null==A?void 0:A.words.map((e,t)=>(0,l.Y)("span",{className:o()({[d]:t<=k&&f||!f}),children:e.word.startsWith(" ")?e.word:" ".concat(e.word)},t))}):(0,l.Y)("span",{className:d,children:(u=(null!=(n=null==A?void 0:A.text)?n:"").match(/<v [^>]+>(.*?)(<\/v>|$)/))?null==(a=u[1])?void 0:a.replace(/<\/v>$/,""):""})})}):null}},7998:function(e,t,n){n.d(t,{A:()=>h});var i=n(4006),r=n(17402),l=n(69277),a=n(70408),o=n(97731);let s=e=>(0,i.Y)(o.A,(0,a._)((0,l._)({name:"ClosedCaptionsFilledIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:(0,i.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM12.6776 7.9987V8.60503C12.6776 8.91696 12.7142 9.17954 12.7874 9.3928C12.8638 9.60605 12.972 9.76837 13.1121 9.87977C13.2553 9.98799 13.4272 10.0421 13.6277 10.0421C13.8251 10.0421 13.9906 9.99436 14.1242 9.89887C14.2579 9.8002 14.3582 9.66811 14.425 9.5026C14.4919 9.3371 14.5253 9.1509 14.5253 8.94401H16.4207V9.09201V9.23524C16.4207 9.7254 16.2997 10.1535 16.0578 10.5195C15.8191 10.8824 15.4881 11.1641 15.0648 11.3646C14.6415 11.5651 14.1561 11.6654 13.6086 11.6654C12.9657 11.6654 12.4214 11.538 11.9758 11.2834C11.5334 11.0288 11.1976 10.6723 10.9684 10.214C10.7393 9.75246 10.6247 9.21137 10.6247 8.59071V8.00347C10.6247 7.37963 10.7393 6.83854 10.9684 6.38021C11.1976 5.92188 11.5334 5.56699 11.9758 5.31554C12.4214 5.06091 12.9657 4.93359 13.6086 4.93359C14.0192 4.93359 14.3964 4.99089 14.7401 5.10547C15.0839 5.21687 15.3799 5.3792 15.6281 5.59245C15.8796 5.8057 16.0737 6.06192 16.2106 6.36111C16.3507 6.6603 16.4207 6.99609 16.4207 7.36849V7.51172V7.65017H14.5253C14.5253 7.44329 14.4919 7.25709 14.425 7.09158C14.3582 6.92607 14.2579 6.79557 14.1242 6.70009C13.9906 6.6046 13.8251 6.55686 13.6277 6.55686C13.4272 6.55686 13.2553 6.61256 13.1121 6.72396C12.972 6.83218 12.8638 6.99291 12.7874 7.20616C12.7142 7.41942 12.6776 7.68359 12.6776 7.9987ZM6.23177 8.60503V7.9987C6.23177 7.68359 6.26837 7.41942 6.34158 7.20616C6.41797 6.99291 6.52619 6.83218 6.66623 6.72396C6.80946 6.61256 6.98134 6.55686 7.18186 6.55686C7.3792 6.55686 7.5447 6.6046 7.67839 6.70009C7.81207 6.79557 7.91233 6.92607 7.97917 7.09158C8.04601 7.25709 8.07943 7.44329 8.07943 7.65017H9.97483V7.51172V7.36849C9.97483 6.99609 9.9048 6.6603 9.76476 6.36111C9.62789 6.06192 9.43374 5.8057 9.18229 5.59245C8.93403 5.3792 8.63802 5.21687 8.29427 5.10547C7.95052 4.99089 7.57335 4.93359 7.16276 4.93359C6.51982 4.93359 5.97555 5.06091 5.52995 5.31554C5.08753 5.56699 4.75174 5.92188 4.52257 6.38021C4.2934 6.83854 4.17882 7.37963 4.17882 8.00347V8.59071C4.17882 9.21137 4.2934 9.75246 4.52257 10.214C4.75174 10.6723 5.08753 11.0288 5.52995 11.2834C5.97555 11.538 6.51982 11.6654 7.16276 11.6654C7.71021 11.6654 8.1956 11.5651 8.61892 11.3646C9.04225 11.1641 9.37326 10.8824 9.61198 10.5195C9.85388 10.1535 9.97483 9.7254 9.97483 9.23524V9.09201V8.94401H8.07943C8.07943 9.1509 8.04601 9.3371 7.97917 9.5026C7.91233 9.66811 7.81207 9.8002 7.67839 9.89887C7.5447 9.99436 7.3792 10.0421 7.18186 10.0421C6.98134 10.0421 6.80946 9.98799 6.66623 9.87977C6.52619 9.76837 6.41797 9.60605 6.34158 9.3928C6.26837 9.17954 6.23177 8.91696 6.23177 8.60503Z",fill:"white",strokeWidth:.25})})),u=e=>(0,i.FD)(o.A,(0,a._)((0,l._)({name:"ClosedCaptionsIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:[(0,i.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM2.55814 1.37143C1.91595 1.37143 1.39535 1.8831 1.39535 2.51429V13.4857C1.39535 14.1169 1.91595 14.6286 2.55814 14.6286H17.4419C18.0841 14.6286 18.6047 14.1169 18.6047 13.4857V2.51429C18.6047 1.8831 18.0841 1.37143 17.4419 1.37143H2.55814Z",fill:"white",strokeWidth:"0.25"}),(0,i.Y)("path",{d:"M12.1858 7.94143V8.6719C12.1858 9.03793 12.2336 9.34826 12.329 9.60289C12.4277 9.85752 12.5694 10.0501 12.754 10.1806C12.9418 10.3111 13.1661 10.3763 13.4271 10.3763C13.6563 10.3763 13.8536 10.3286 14.0192 10.2331C14.1878 10.1344 14.3183 10.0008 14.4106 9.83206C14.5029 9.66337 14.5555 9.4708 14.5682 9.25437H16.0626C16.0626 9.2862 16.0626 9.31802 16.0626 9.34985C16.0626 9.38168 16.0626 9.41192 16.0626 9.44057C16.053 9.88617 15.9321 10.2777 15.6997 10.615C15.4705 10.9492 15.1586 11.2102 14.7639 11.398C14.3693 11.5826 13.9205 11.6749 13.4176 11.6749C12.8097 11.6749 12.294 11.5524 11.8707 11.3073C11.4506 11.0622 11.1307 10.7153 10.9111 10.2665C10.6946 9.81774 10.5864 9.2846 10.5864 8.66713V7.94143C10.5864 7.32077 10.6962 6.78605 10.9159 6.33727C11.1355 5.8853 11.4553 5.53677 11.8755 5.29169C12.2988 5.04661 12.8128 4.92407 13.4176 4.92407C13.7964 4.92407 14.1449 4.97818 14.4632 5.0864C14.7814 5.19143 15.0584 5.34421 15.2939 5.54473C15.5294 5.74525 15.714 5.98556 15.8477 6.26565C15.9846 6.54256 16.0562 6.85289 16.0626 7.19664C16.0626 7.22847 16.0626 7.2603 16.0626 7.29213C16.0626 7.32077 16.0626 7.34942 16.0626 7.37807H14.5682C14.5555 7.15526 14.5014 6.95633 14.4059 6.78128C14.3136 6.60622 14.1847 6.46936 14.0192 6.37069C13.8536 6.26883 13.6563 6.21791 13.4271 6.21791C13.1661 6.21791 12.9433 6.28634 12.7587 6.4232C12.5741 6.55688 12.4325 6.75104 12.3338 7.00567C12.2352 7.2603 12.1858 7.57222 12.1858 7.94143Z",fill:"white",strokeWidth:"0.25"}),(0,i.Y)("path",{d:"M5.87381 7.94143V8.6719C5.87381 9.03793 5.92155 9.34826 6.01704 9.60289C6.1157 9.85752 6.25734 10.0501 6.44195 10.1806C6.62974 10.3111 6.85413 10.3763 7.11513 10.3763C7.34429 10.3763 7.54163 10.3286 7.70714 10.2331C7.87583 10.1344 8.00633 10.0008 8.09863 9.83206C8.19094 9.66337 8.24345 9.4708 8.25618 9.25437H9.75054C9.75054 9.2862 9.75054 9.31802 9.75054 9.34985C9.75054 9.38168 9.75054 9.41192 9.75054 9.44057C9.74099 9.88617 9.62004 10.2777 9.3877 10.615C9.15853 10.9492 8.84661 11.2102 8.45193 11.398C8.05726 11.5826 7.60847 11.6749 7.10558 11.6749C6.49765 11.6749 5.98202 11.5524 5.5587 11.3073C5.13856 11.0622 4.81868 10.7153 4.59907 10.2665C4.38263 9.81774 4.27441 9.2846 4.27441 8.66713V7.94143C4.27441 7.32077 4.38422 6.78605 4.60384 6.33727C4.82346 5.8853 5.14334 5.53677 5.56348 5.29169C5.9868 5.04661 6.50083 4.92407 7.10558 4.92407C7.48434 4.92407 7.83286 4.97818 8.15115 5.0864C8.46944 5.19143 8.74635 5.34421 8.98188 5.54473C9.21741 5.74525 9.40202 5.98556 9.5357 6.26565C9.67256 6.54256 9.74418 6.85289 9.75054 7.19664C9.75054 7.22847 9.75054 7.2603 9.75054 7.29213C9.75054 7.32077 9.75054 7.34942 9.75054 7.37807H8.25618C8.24345 7.15526 8.18934 6.95633 8.09386 6.78128C8.00156 6.60622 7.87265 6.46936 7.70714 6.37069C7.54163 6.26883 7.34429 6.21791 7.11513 6.21791C6.85413 6.21791 6.63133 6.28634 6.44672 6.4232C6.26212 6.55688 6.12048 6.75104 6.02181 7.00567C5.92314 7.2603 5.87381 7.57222 5.87381 7.94143Z",fill:"white",strokeWidth:"0.25"})]}));var c=n(84605),d=n(68940),p=n(66511),m=n(59294),v=n(59537);let h=e=>{let{showCaptions:t,setShowCaptions:n,isFocused:l,disabled:a,disableShortcuts:o,disableTooltips:h=!1}=e,{iString:g}=(0,c.GO)(),C=e=>{n({showCaptions:e,userInitiated:!0}),e?localStorage.setItem("video_player:show_captions","true"):localStorage.removeItem("video_player:show_captions")};return(0,r.useEffect)(()=>{let e="true"===localStorage.getItem("video_player:show_captions");t!==e&&n({showCaptions:e,userInitiated:!1})},[]),(0,m._N)("c",()=>C(!t),l&&!o),(0,i.Y)(p.m_,{disabled:h,text:g("Closed captions / subtitles"),trailing:o?void 0:(0,i.Y)(d.u,{children:"C"}),children:(0,i.Y)(v.A,{onClick:()=>C(!t),disabled:a,children:t?(0,i.Y)(s,{}):(0,i.Y)(u,{})})})}},43959:function(e,t,n){n.d(t,{A:()=>c});var i=n(4006),r=n(46845),l=n(77079),a=n(68940),o=n(66511),s=n(59294),u=n(59537);let c=e=>{let{disableShortcuts:t=!1,disableTooltips:n=!1,handle:c,isFocused:d}=e,p=()=>{c.active?c.exit():c.enter()};return(0,s._N)("f",p,d&&!t),(0,i.Y)(o.m_,{disabled:n,text:c.active?"Exit full screen":"Full screen",trailing:t?void 0:(0,i.Y)(a.u,{children:"F"}),children:(0,i.Y)(u.A,{onClick:p,children:c.active?(0,i.Y)(r.A,{size:18}):(0,i.Y)(l.A,{size:18})})})}},59017:function(e,t,n){n.d(t,{A:()=>Y});var i=n(4006),r=n(87677),l=n(48858),a=n(17402),o=n(15734),s=n.n(o),u=n(72880),c=n(86500),d=n(68349),p=n(88553),m=n(89490),v=n(76977),h=n(63136),g=n(59294),C=n(59537),f=n(82776);let Y=e=>{var t,n,o,Y;let{pub:y,postId:_,isFocused:b,disableShortcuts:w=!1}=e,[E,A]=(0,a.useState)(!1),[k,D]=(0,a.useState)(null),S=e=>{if(!k||!y)return;(0,c.u4)(c.qY.VIDEO_NEXT_VIDEO_BUTTON_CLICKED,{postId:k.id,pubId:y.id});let t=(0,p.U)({linkToComments:!1,post:k,pub:y,utm:"next-episode"});(0,d.V2)(t,{event:e})};(0,a.useEffect)(()=>{(async()=>{var e,t,n;let i=await s().get("/api/v1/recent_posts").query({episodes_only:!0}),r=(null!=(t=i.body)?t:[]).findIndex(e=>e.id===_);D(null!=(n=null==(e=i.body)?void 0:e[r+1])?n:void 0)})()},[]),(0,g._N)("shift+n",()=>S(),b&&!w);let I=(null==k?void 0:k.cover_image)||(null==k?void 0:k.podcast_episode_image_url);return(0,i.FD)("div",{style:{position:"relative"},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[E&&I&&(0,i.FD)(v.I1,{position:"absolute",className:"container-djeVTw",children:[(0,i.FD)(v.I1,{bg:"glass-inverted-medium",radius:"sm",style:{cursor:"pointer"},paddingY:8,paddingX:12,gap:4,onClick:S,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[(0,i.FD)(v.Ye,{gap:16,children:[(0,i.FD)(v.I1,{gap:2,flex:"grow",children:[(0,i.Y)(h.EY.Meta,{color:"white",opacity:80,children:"Next Up"}),(0,i.Y)(h.EY.B4,{color:"white",children:k.title})]}),(0,i.Y)(v.Ye,{alignItems:"center",children:(0,i.Y)(r.A,{stroke:"white",size:24})})]}),(0,i.FD)("div",{style:{position:"relative"},children:[(0,i.Y)(u.o,{className:"fullWidth-KNhzK0",src:I,alt:k.title,maxWidth:200,imageProps:{height:112.5,smartCrop:!0},radius:"sm"}),(0,i.Y)(v.Ye,{className:"thumbnail-duration-CaP985",bg:"glass-inverted-medium",position:"absolute",radius:"sm",children:(0,i.Y)(h.EY.Meta,{color:"white",lineHeight:20,children:(0,f.secondsToHHMMSS)(null!=(Y=null!=(o=null==(t=k.videoUpload)?void 0:t.duration)?o:null==(n=k.podcastUpload)?void 0:n.duration)?Y:0)})})]})]}),(0,i.Y)(m.az,{className:"space-NQlvsK"})]}),(0,i.Y)(C.A,{disabled:!k,children:(0,i.Y)(l.A,{size:18,fill:"white",onClick:S})})]})}},97885:function(e,t,n){n.d(t,{A:()=>c});var i=n(4006),r=n(91743),l=n(17402),a=n(68940),o=n(66511),s=n(59294),u=n(59537);let c=e=>{let{disableShortcuts:t,disableTooltips:n,isFocused:c,mediaRef:d}=e,[p,m]=(0,l.useState)(!1),v=async()=>{if(d.current)try{document.pictureInPictureElement?await document.exitPictureInPicture():d.current.player&&"requestPictureInPicture"in d.current.player&&await d.current.player.requestPictureInPicture()}catch(e){console.error("Failed to toggle PiP mode:",e)}};return(0,l.useEffect)(()=>{let e=()=>m(!0),t=()=>m(!1);if(d.current){var n,i;null==(n=d.current.player)||n.addEventListener("enterpictureinpicture",e),null==(i=d.current.player)||i.addEventListener("leavepictureinpicture",t)}return()=>{if(d.current){var n,i;null==(n=d.current.player)||n.removeEventListener("enterpictureinpicture",e),null==(i=d.current.player)||i.removeEventListener("leavepictureinpicture",t)}}},[d]),(0,s._N)("i",v,c&&!t),(0,i.Y)(o.m_,{disabled:n,text:"Picture-in-picture",trailing:t?void 0:(0,i.Y)(a.u,{children:"I"}),children:(0,i.Y)(u.A,{onClick:v,children:(0,i.Y)(r.A,{size:18})})})}},76670:function(e,t,n){n.d(t,{A:()=>d});var i=n(4006),r=n(7611),l=n(85731),a=n(26289),o=n(68940),s=n(66511),u=n(59294),c=n(59537);let d=e=>{let{mediaRef:t,isFocused:n,disableShortcuts:d,disableTooltips:p=!1}=e,m=(0,a.By)(t),v=e=>{var n,i,r,l;null==e||e.preventDefault(),null==e||e.stopPropagation(),m?null==(i=t.current)||null==(n=i.player)||n.pause():null==(l=t.current)||null==(r=l.player)||r.play()};return(0,u._N)("k",v,n&&!d),(0,u._N)(" ",v,n&&!d),(0,i.Y)(s.m_,{disabled:p,text:m?"Pause":"Play",trailing:d?void 0:(0,i.Y)(o.u,{children:"K"}),children:(0,i.Y)(c.A,{onClick:v,children:m?(0,i.Y)(r.A,{fill:"white",size:18}):(0,i.Y)(l.A,{fill:"white",size:18})})})}},59537:function(e,t,n){n.d(t,{A:()=>c});var i=n(69277),r=n(70408),l=n(32641),a=n(4006),o=n(32485),s=n.n(o),u=n(35369);let c=e=>{var{children:t,className:n}=e,o=(0,l._)(e,["children","className"]);return(0,a.Y)(u.Nm,(0,r._)((0,i._)({resetCss:!0,className:s()("playerButton-qCsqQJ",n)},o),{children:t}))}},31584:function(e,t,n){n.d(t,{A:()=>d,P:()=>c});var i=n(4006),r=n(17402),l=n(76977),a=n(63136),o=n(7755);let s=e=>{let{startTime:t,mediaRef:n}=e,[l,s]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e,t=()=>{var i;(null==(i=n.current)?void 0:i.player)&&(s(n.current.player.currentTime),e=requestAnimationFrame(t))};return n.current&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}},[n]),(0,i.Y)(a.EY.Digit,{size:14,color:"white",children:t?l-t<0?null:(0,o.fU)(l-t):(0,o.fU)(l)})},u=e=>{var t;let{duration:n,mediaRef:l}=e,s=null==l||null==(t=l.current)?void 0:t.player,[u,c]=(0,r.useState)(null!=n?n:(null==s?void 0:s.duration)?s.duration:0);return(0,r.useEffect)(()=>{let e=()=>{var e;(null==l||null==(e=l.current)?void 0:e.player)&&!isNaN(l.current.player.duration)&&c(l.current.player.duration)};if(null==l?void 0:l.current){var t,n;null==(n=l.current)||null==(t=n.player)||t.addEventListener("durationchange",e)}return e(),()=>{if(null==l?void 0:l.current){var t,n;null==(n=l.current)||null==(t=n.player)||t.removeEventListener("durationchange",e)}}},[s]),(0,i.Y)(a.EY.Digit,{size:14,color:"white",children:(0,o.fU)(u)})},c=e=>{let{startTime:t,duration:n,mediaRef:r}=e;return(0,i.FD)(l.Ye,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,i.Y)(s,{mediaRef:r,startTime:t}),(0,i.Y)(a.EY.Digit,{size:14,color:"white",children:"/"}),(0,i.Y)(u,{duration:n})]})},d=e=>{let{duration:t,mediaRef:n}=e;return(0,i.FD)(l.Ye,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,i.Y)(s,{startTime:null,mediaRef:n}),(0,i.Y)(a.EY.Digit,{size:14,color:"white",children:"/"}),(0,i.Y)(u,{duration:t,mediaRef:n})]})}},41815:function(e,t,n){n.d(t,{A:()=>s});var i=n(4006),r=n(3213),l=n(84605),a=n(66511),o=n(59537);let s=e=>{let{disableTooltips:t=!1,isSettingsOpen:n,setIsSettingsOpen:s}=e,{iString:u}=(0,l.GO)();return n?(0,i.Y)(o.A,{children:(0,i.Y)(r.A,{size:18,onClick:()=>s(!n)})}):(0,i.Y)(a.m_,{disabled:t,text:u("Settings"),children:(0,i.Y)(o.A,{children:(0,i.Y)(r.A,{size:18,onClick:()=>s(!n)})})})}},17806:function(e,t,n){n.d(t,{A:()=>A});var i=n(69277),r=n(4006),l=n(32485),a=n.n(l),o=n(45773),s=n(44202),u=n(91378),c=n(72170),d=n(17402),p=n(70090),m=n(27402),v=n(9979),h=n(84605),g=n(86500),C=n(76977),f=n(63136),Y=n(78526);let y={seetingsMenu:"seetingsMenu-zc8kI3",menuItem:"menuItem-Z86vY3"},_=e=>{let{mediaRef:t,dismiss:n}=e;return(0,r.Y)(C.I1,{gap:4,flex:"grow",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(e=>{var i,l;return(0,r.FD)(C.Ye,{className:y.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:()=>{var i;(null==(i=t.current)?void 0:i.player)&&(t.current.player.playbackRate=e,localStorage.setItem("video_player:playbackRate",e.toString())),n()},children:[(0,r.FD)(f.EY.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:[e,"\xd7"]}),e===(null==(l=t.current)||null==(i=l.player)?void 0:i.playbackRate)&&(0,r.Y)(o.A,{size:16,stroke:"white"})]})})})},b={en:"English",es:"Spanish",it:"Italian",de:"German",pt:"Portuguese",fr:"French"},w=e=>{let{options:t=[],subtitles:n,setSubtitles:i,dismiss:l}=e;return(0,r.Y)(C.I1,{gap:4,flex:"grow",children:[null,...t].map(e=>{var t;return(0,r.FD)(C.Ye,{className:y.menuItem,paddingY:8,paddingX:16,justifyContent:"space-between",alignItems:"center",onClick:()=>{i(e),localStorage.setItem("video_player:subtitles",e||""),l()},children:[(0,r.Y)(f.EY.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:null!=(t=b[null!=e?e:""])?t:"None"}),n===e&&(0,r.Y)(o.A,{size:16,stroke:"white"})]})})})},E=e=>{let{title:t,icon:n,selection:i,onClick:l}=e;return(0,r.FD)(C.Ye,{className:y.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:l,children:[(0,r.FD)(C.Ye,{gap:8,alignItems:"center",children:[n,(0,r.Y)(f.EY.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:t})]}),(0,r.Y)(C.Ye,{children:(0,r.Y)(f.EY.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:i})})]})},A=e=>{var t,n,l;let{hideSharePostAtCurrentTime:o,mediaRef:f,post:A,pub:k,podcastUpload:D,subtitles:S,setSubtitles:I,setIsSettingsOpen:L}=e,{iString:N}=(0,h.GO)(),[T,x]=(0,d.useState)(!1),[P,F]=(0,d.useState)(!1),M=(0,d.createRef)(),R=(0,p.A)(null==(t=f.current)?void 0:t.player),U=(0,Y.L)(),[O,z]=(0,d.useState)([]);return(0,d.useEffect)(()=>{I(localStorage.getItem("video_player:subtitles")||null)},[]),(0,d.useEffect)(()=>{var e,t;if(null==D||null==(e=D.transcription)?void 0:e.signed_captions){let e=(null!=(t=D.transcription.signed_captions)?t:[]).map(e=>e.language);z(e),S&&!e.includes(S)&&I(null)}},[D,S]),(0,d.useEffect)(()=>{var e,t;let n=parseFloat(localStorage.getItem("video_player:playbackRate")||"1"),i=()=>{var e;(null==(e=f.current)?void 0:e.player)&&(f.current.player.playbackRate=n)};return(null==(e=f.current)?void 0:e.player)&&(null==(t=f.current.player)||t.addEventListener("loadedmetadata",i)),()=>{if(f.current){var e;null==(e=f.current.player)||e.removeEventListener("loadedmetadata",i)}}},[f]),(0,m.A)(M,()=>{x(!1),F(!1),L(!1)}),(0,r.FD)(C.I1,{paddingY:8,ref:M,gap:4,flex:"grow",className:a()(y.seetingsMenu,{[y.slideOut]:T}),children:[T&&(0,r.Y)(_,{mediaRef:f,dismiss:()=>x(!1)}),P&&(0,r.Y)(w,{options:O,subtitles:S,setSubtitles:I,dismiss:()=>F(!1)}),!T&&!P&&(0,r.FD)(C.I1,{gap:4,flex:"grow",children:[(0,r.Y)(E,{title:N("Playback speed"),icon:(0,r.Y)(s.A,{size:16,stroke:"white"}),onClick:()=>x(!0),selection:(0,r.FD)(r.FK,{children:[null==(l=f.current)||null==(n=l.player)?void 0:n.playbackRate,"\xd7"]})}),O.length>0&&(0,r.Y)(E,{title:N("Subtitles"),icon:(0,r.Y)(u.A,{size:16,stroke:"white"}),onClick:()=>F(!0),selection:b[null!=S?S:""]}),A&&k&&(0,r.FD)(d.Fragment,{children:[(0,r.Y)(E,{title:N("Share post"),icon:(0,r.Y)(c.A,{size:16,stroke:"white"}),onClick:()=>{A&&k&&(U((0,v.x5)(null,{post:A,pub:k,useCustomDomainOverOpen:!0})),(0,g.u4)(g.qY.SHARE_LINK_CLICKED,{name:"copy",source:"player",post_id:A.id}))}}),!o&&(0,r.Y)(E,{title:N("Share post at current time"),icon:(0,r.Y)(c.A,{size:16,stroke:"white"}),onClick:()=>{if(!A||!k)return;let e=R?{timestamp:R.toFixed(1)}:{};U((0,v.x5)(null,{post:A,pub:k,useCustomDomainOverOpen:!0,params:e})),(0,g.u4)(g.qY.SHARE_LINK_CLICKED,(0,i._)({name:"copy",source:"player",post_id:A.id},e))}})]})]})]})}},50794:function(e,t,n){n.d(t,{K:()=>V});var i=n(4006),r=n(32485),l=n.n(r),a=n(78659),o=n.n(a),s=n(72170),u=n(17402),c=n(69715),d=n(84605),p=n(26289),m=n(86500),v=n(76977),h=n(63136),g=n(59294),C=n(7755),f=n(16858),Y=n(92967);let y=e=>{let{clipDuration:t,isMinimized:n,onClick:r}=e;return n?(0,i.Y)(_,{onClick:r}):(0,i.FD)(v.Ye,{alignItems:"center",bg:"glass-inverted-thick",gap:6,padding:6,paddingRight:8,radius:"full",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),r()},children:[(0,i.Y)("div",{className:"iconContainer-RgovDu",children:(0,i.Y)(f.A,{size:12,stroke:"white"})}),(0,i.Y)(h.EY.Meta,{color:"white",children:(0,Y.kq)(t)})]})},_=e=>{let{onClick:t}=e;return(0,i.Y)("div",{className:"iconContainerMarker-qBRnT3",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),t()},children:(0,i.Y)(f.A,{size:12,stroke:"white"})})};var b=n(69277),w=n(83673),E=n.n(w),A=n(48309),k=n(49331),D=n(33460),S=n(9979),I=n(68349),L=n(35369),N=n(16074),T=n(88774),x=n(64127),P=n(70189);function F(e){var t,n,r,l;let{duration:a,pub:o,post:s,trigger:p,timestamp:v,onShareMenuOpen:h,onShareMenuClose:g,size:C}=e,[f,Y]=(0,u.useState)(v),{onStartClipping:y}=(0,c.MC)(),_=f&&a,w="post",k=_?{t:f.toFixed(1),d:a.toFixed(1)}:f?{timestamp:f.toFixed(1)}:{};(0,u.useEffect)(()=>{Y(v)},[v]);let I=(0,S.x5)(null,{post:s,pub:null!=o?o:void 0,useCustomDomainOverOpen:!0,params:k}),{iString:L}=(0,d.GO)(),P={variant:"menu",url:I,onLinkClicked:e=>{(0,m.u4)(m.qY.SHARE_LINK_CLICKED,(0,b._)({is_clip:_,type:e,post_id:null==s?void 0:s.id},k)),(0,m.u4)(m.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_".concat(e),source:"playback timeline",surface:w})}},F=(0,x.yg)(P),R=(0,x.JZ)(P),U=(0,x.PJ)(P),O=(0,x.g)(P),z=M(P),V=E()([O,"sm"!==C?(0,i.Y)(T.Dr,{leading:(0,i.Y)(A.A,{}),onClick:()=>{(0,m.u4)(m.qY.SHARE_LINK_CLICKED,(0,b._)({is_clip:_,type:"download_clip",post_id:null==s?void 0:s.id},k)),(0,m.u4)(m.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"playback timeline",surface:w}),y({source:"video-timeline",title:null})},children:L("Download clip")}):null,(0,i.Y)(D.Eg,{url:P.url,onShare:()=>{var e;null==(e=P.onLinkClicked)||e.call(P,"chat")}}),(0,i.Y)(N.c,{paddingX:8}),z,F,R,U]);return(0,i.FD)(T.W1,{trigger:p,"aria-label":L("Share"),onOpen:h,onClose:g,children:[V,!_&&(0,i.FD)(i.FK,{children:[(0,i.Y)(N.c,{}),(0,i.Y)(D.Ai,{initialTime:null!=f?f:0,onChange:Y,maxTime:null!=(l=null!=(r=null==s||null==(t=s.videoUpload)?void 0:t.duration)?r:null==s||null==(n=s.podcastUpload)?void 0:n.duration)?l:null})]})]})}let M=e=>{let{variant:t,url:n,onLinkClicked:r}=e,{iString:l}=(0,d.GO)(),a=()=>{(0,I.V2)((0,P.XX)({message:null!=n?n:""}),{newTab:!0}),null==r||r("notes")};return"icon"===t?(0,i.Y)(L.K0,{onClick:a,children:(0,i.Y)(k.A,{})}):(0,i.Y)(T.Dr,{leading:(0,i.Y)(k.A,{}),onClick:a,children:l("Share to Notes")})};var R=n(38898);let U=e=>{var t;let{children:n,showTooltip:r,size:a,setIsHovering:o,storyboard:s,videoTime:u}=e,c="sm"===a?75:100,d=null!=(t=null==s?void 0:s.tiles)?t:[],p=d.length?(0,R.H5)(d,u):null;return(0,i.FD)(v.I1,{bg:r?"glass-inverted-medium":void 0,radius:"sm"===a?"xs":"sm",padding:8*("sm"!==a),gap:4,opacity:100*!!r,children:[(0,i.Y)(v.Ye,{justifyContent:"center",alignItems:"center",onMouseEnter:()=>o(!1),children:(0,i.Y)("div",{style:{position:"relative"},children:s&&p&&(0,i.Y)(R.NK,{storyboard:s,imageUrl:s.url,displayHeight:c,displayWidth:s.tile_width/s.tile_height*c,x:p.x,y:p.y,className:l()("timelineThumbnail-sJc0Xj",{"timelineThumbnailSmall-FCvVQ9":"sm"===a})})})}),n]})},O={container:"container-S0aAZ3",track:"track-FYojQC",trackClippedPlayed:"trackClippedPlayed-cnYlGh",trackClippedUnplayed:"trackClippedUnplayed-km4zul",trackFilled:"trackFilled-gbOxAX",trackExpanded:"trackExpanded-_EdObk"},z=e=>{let{clipTimes:t,duration:n,isHovering:r,isPlayingClippedSegment:a,post:o,pub:c,progress:p,setIsHovering:g,storyboard:C,onClickBubble:f,onPause:Y,onShareMenuOpen:_,onShareMenuClose:b}=e,{iString:w}=(0,d.GO)(),[E,A]=(0,u.useState)(!1),[k,D]=(0,u.useState)(!0),S=!a&&p>t.start/n*100,I=!a&&p>t.end/n*100;return(0,u.useEffect)(()=>{(0,m.u4)(m.qY.MEDIA_CLIP_SEEN,{start_time:t.start,duration:t.end-t.start})},[t.end,t.start]),(0,i.FD)("div",{className:O.container,children:[(0,i.Y)("div",{className:l()(O.track,O.trackUnclipped,{[O.trackFilled]:S,[O.trackExpanded]:S&&r}),style:{left:0,width:"calc(".concat(t.start/n*100,"% - 2px)")}}),(0,i.Y)("div",{className:l()(O.track,{[O.trackClippedUnplayed]:a,[O.trackFilled]:I,[O.trackExpanded]:I&&r}),style:{left:"".concat(t.start/n*100,"%"),width:"".concat((t.end-t.start)/n*100,"%")}}),(0,i.Y)("div",{className:l()(O.track),style:{right:0,width:"calc(".concat((1-t.end/n)*100,"% - 2px)")}}),a?(0,i.Y)("div",{className:l()(O.track,O.trackClippedPlayed,{[O.trackExpanded]:r}),style:{left:"".concat(t.start/n*100,"%"),width:"".concat(p-t.start/n*100,"%")}}):p<t.start/n*100?(0,i.Y)("div",{className:l()(O.track,O.trackFilled,{[O.trackExpanded]:r}),style:{left:0,width:"".concat(p,"%")}}):(0,i.Y)("div",{className:l()(O.track,O.trackFilled,{[O.trackExpanded]:r}),style:{left:"calc(".concat(t.end/n*100,"% + 2px)"),width:"calc(".concat(p-t.end/n*100,"% - 2px)")}}),(0,i.FD)(v.I1,{alignItems:"center",position:"absolute",gap:8,style:{bottom:16,left:a?"".concat(Math.max(t.start/n*100,3.5),"%"):"".concat(Math.max(.5*(t.start+t.end)/n*100,1.5),"%"),transform:"translateX(-50%)"},onMouseEnter:()=>{A(!0)},onMouseLeave:()=>{k&&(D(!0),A(!1))},children:[E&&(0,i.Y)(U,{setIsHovering:g,showTooltip:k,size:"md",storyboard:C,videoTime:t.start,children:(0,i.Y)(F,{onShareMenuOpen:()=>{D(!1),null==_||_(),(0,m.u4)(m.qY.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==o?void 0:o.id})},onShareMenuClose:()=>{D(!0),null==b||b()},timestamp:t.start,duration:t.end-t.start,pub:c,post:o,size:"md",trigger:(0,i.Y)("div",{onMouseDown:e=>e.stopPropagation(),children:k&&(0,i.FD)(v.Ye,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:Y,justifyContent:"center",children:[(0,i.Y)(s.A,{stroke:"white",size:20}),(0,i.Y)(h.EY.B4,{color:"white",weight:"semibold",children:w("Share clip")})]})})})}),(0,i.Y)(y,{clipDuration:t.end-t.start,isMinimized:!a,onClick:f})]})]})},V=e=>{var t;let{disableSharing:n,mediaRef:r,mediaUpload:a,post:f,pub:Y,size:y,startTime:_=0,endTime:b,onShareMenuOpen:w,onShareMenuClose:E}=e,{iString:A}=(0,d.GO)(),{isClipping:k}=(0,c.MC)(),{currentTime:D}=(0,p.yr)(r),{clipTimes:S}=(()=>{let[e]=(0,u.useState)((()=>{if("undefined"==typeof window)return null;let e=new URLSearchParams(window.location.search),t=e.get("t"),n=e.get("d");if(!t||!n)return null;let i=parseInt(t),r=parseInt(n);if(isNaN(i)||isNaN(r)){let e;return(e=new URL(window.location.href)).searchParams.delete("t"),e.searchParams.delete("d"),window.history.replaceState({},"",e.toString()),null}return{start:i,end:i+o()(r,c.LO,c.z3)}})());return{clipTimes:e}})(),I=!!(S&&D>=S.start&&D<=S.end),[L,N]=(0,u.useState)(!0),[T,x]=(0,u.useState)(null),[P,M]=(0,u.useState)(0),[R,O]=(0,u.useState)(!1),[V,B]=(0,u.useState)(!1),[H,K]=(0,u.useState)(0),[q,W]=(0,u.useState)(0),[X,j]=(0,u.useState)(0),[G,Z]=(0,u.useState)(0),J=(0,u.useRef)(null),Q=(0,u.useRef)(null),$=(0,u.useRef)(null),ee=(0,g.Hc)(a),et=(b||H)-_,en=(0,u.useCallback)(()=>{var e;if(null==(e=r.current)?void 0:e.player){let e=r.current.player;M(o()(e.currentTime-_,0,null!=et?et:e.duration-_)/(null!=et?et:e.duration)*100),b&&e.currentTime>=b&&(e.currentTime=_,e.pause())}J.current=requestAnimationFrame(en)},[r,_,et,b]),ei=(0,u.useCallback)(e=>{var t;if($.current&&(null==(t=r.current)?void 0:t.player)){let t=$.current.getBoundingClientRect(),n=(e.clientX-t.left)/t.width;r.current.player.currentTime=o()(_+n*et,0,H),M(100*n)}},[r,_,H,et]),er=(0,u.useCallback)(e=>{ei(e)},[ei]),el=(0,u.useCallback)(e=>{R&&e.preventDefault()},[R]),ea=(0,u.useCallback)(()=>{O(!1),document.removeEventListener("mousemove",er),document.removeEventListener("selectstart",el)},[er,el]),eo=(0,u.useCallback)(e=>{e.preventDefault(),O(!0),ei(e),document.addEventListener("mousemove",er),document.addEventListener("mouseup",ea),document.addEventListener("selectstart",el)},[ei,er,ea,el]),es=()=>{Math.abs(q-G)>.1?(Z(e=>e+(q-e)*.1),Q.current=window.requestAnimationFrame(es)):(Z(q),Q.current&&window.cancelAnimationFrame(Q.current))};(0,u.useEffect)(()=>(J.current=window.requestAnimationFrame(en),()=>{null!==J.current&&window.cancelAnimationFrame(J.current),null!==Q.current&&window.cancelAnimationFrame(Q.current)}),[en]),(0,u.useEffect)(()=>{let e=()=>{var e;(null==(e=r.current)?void 0:e.player)&&!isNaN(r.current.player.duration)&&K(r.current.player.duration)};if(r.current){var t;null==(t=r.current.player)||t.addEventListener("durationchange",e)}return e(),()=>{if(r.current){var t;null==(t=r.current.player)||t.removeEventListener("durationchange",e)}}},[null==(t=r.current)?void 0:t.player]);let eu=T?T/et*100:q*et/100;return(0,i.FD)(v.Ye,{ref:$,onMouseDown:eo,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),onClick:ea,onMouseMove:e=>{var t,n,i,r;let{x:l,width:a}=null!=(i=null==(t=$.current)?void 0:t.getBoundingClientRect())?i:{x:0,width:0};W((e.clientX-l)/a*100);let s=ee?ee.tile_width/ee.tile_height*100:100,u=((null!=s?s:0)+10)/2/(null!=(r=null==(n=$.current)?void 0:n.getBoundingClientRect().width)?r:1)*100,c=T?T/et*100:null;j(o()(null!=c?c:q,u,100-u)),Q.current||es()},flex:"grow",position:"relative",className:"timelineContainer-QAunx2",cursor:"pointer",children:[S&&H&&f&&Y&&!k?(0,i.Y)(z,{clipTimes:S,duration:H,isHovering:V,isPlayingClippedSegment:null!=I&&I,post:f,pub:Y,progress:P,setIsHovering:B,storyboard:ee,onClickBubble:()=>{var e,t,n;(null==(e=r.current)?void 0:e.player)&&S&&(r.current.player.currentTime=S.start,r.current.player.paused&&(null==(t=(n=r.current.player).play)||t.call(n)))},onPause:()=>{var e,t,n;(null==(e=r.current)?void 0:e.player)&&(null==(t=(n=r.current.player).pause)||t.call(n))},onShareMenuOpen:w,onShareMenuClose:E}):(0,i.FD)("div",{className:"timeline-nCVBQY",children:[V&&(0,i.Y)("div",{className:"timelineHover-G7eFow",style:{width:"".concat(q,"%"),height:"100%"}}),(0,i.Y)("div",{className:l()("progress-K0IenH",{"progressHover-Cm9xTr":V&&!S}),style:{width:"".concat(P,"%"),height:"100%"}})]}),!k&&!n&&!S&&f&&Y&&E&&w&&(0,i.Y)(v.I1,{position:"absolute",className:"thumbnailContainer-vAgzNA",style:{position:"absolute",left:"".concat(X,"%"),opacity:+!!V,pointerEvents:V?"auto":"none"},children:(0,i.Y)(U,{setIsHovering:B,showTooltip:L,size:null!=y?y:"md",storyboard:ee,videoTime:eu,children:"sm"!==y&&(0,i.Y)(F,{onShareMenuOpen:()=>{N(!1),null==w||w(),(0,m.u4)(m.qY.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==f?void 0:f.id})},onShareMenuClose:()=>{N(!0),x(null),null==E||E()},timestamp:T,pub:Y,post:f,size:y,trigger:(0,i.Y)(v.Ye,{children:L&&(0,i.FD)(v.Ye,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:()=>{var e,t,n,i;(null==(t=r.current)||null==(e=t.player)?void 0:e.paused)||null==(i=r.current)||null==(n=i.player)||n.pause(),x(eu)},justifyContent:"center",children:[(0,i.Y)(s.A,{stroke:"white",size:20}),(0,i.FD)(h.EY.B4,{color:"white",weight:"semibold",children:[A("Share from "),(0,C.fU)(eu)]})]})})})})})]})}},82318:function(e,t,n){n.d(t,{A:()=>c});var i=n(4006),r=n(80827),l=n(84605),a=n(68940),o=n(66511),s=n(59294),u=n(59537);let c=e=>{let{isFocused:t,disabled:n,disableShortcuts:c,disableTooltips:d=!1,onToggleShowTranscript:p}=e,{iString:m}=(0,l.GO)();return(0,s._N)("t",p,t&&!c),(0,i.Y)(o.m_,{disabled:d,text:m("Transcripts"),trailing:c?void 0:(0,i.Y)(a.u,{children:"T"}),children:(0,i.Y)(u.A,{onClick:p,disabled:n,children:(0,i.Y)(r.A,{size:18})})})}}}]);