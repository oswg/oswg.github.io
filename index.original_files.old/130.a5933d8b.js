!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="620b6979-26f3-4b7f-bbbe-25b1bfed0d55",e._sentryDebugIdIdentifier="sentry-dbid-620b6979-26f3-4b7f-bbbe-25b1bfed0d55")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["130"],{30796:function(e,n,t){t.d(n,{h:()=>d});var i=t(4006),o=t(32485),a=t.n(o),l=t(17402),s=t(10278),r=t(76977),c=t(71305);function d(e){let{className:n,assets:t,readOnly:o,onClick:d,maxHeight:w=420,children:h,feedItem:p,commentId:f}=e,m=(0,s.Cu)(t),[g,b]=(0,l.useState)(null),v=(0,l.useRef)(null),y=(0,s.wY)(v,0),[C,k]=m;if(!C||!k)return null;let A=C.width&&C.height?C.width/C.height:1,Y=k.width&&k.height?k.width/k.height:1,I=A+Y,O=y-6,_=Math.min(w,O/I),E=[O*A/I,O*Y/I];return(0,i.FD)(r.pT,{ref:v,className:a()(c.A.imageDiptych,n),gap:6,overflow:"hidden",children:[m.map((e,n)=>(0,i.Y)(u,{asset:e.src,explicit:e.explicit,readOnly:o,width:E[n],height:_,index:n,onClick:o?void 0:t=>{t.preventDefault(),d&&d({attachmentId:e.id,attachmentType:"image"}),b({index:n})},children:h},e.src)),!o&&(0,i.Y)(s.yx,{assets:m,imageViewer:g,setImageViewer:b,readOnly:o,feedItem:p,commentId:f})]})}function u(e){let{asset:n,explicit:t,onClick:o,readOnly:l,width:r=500,height:d,children:u,index:w}=e;return(0,i.Y)(s.Vn,{asset:n,explicit:t,onClick:o,readOnly:l,width:r,height:d,className:a()(c.A.diptychImage,c.A["index-".concat(w+1)]),children:u})}},52742:function(e,n,t){t.d(n,{V:()=>_});var i=t(69277),o=t(70408),a=t(32641),l=t(4006),s=t(32485),r=t.n(s),c=t(48635),d=t(90232),u=t(48697),w=t(48309),h=t(17402),p=t(12791),f=t(84605),m=t(22858),g=t(68349),b=t(89490),v=t(35369),y=t(76977),C=t(19008),k=t(82439),A=t(57820),Y=t(36372),I=t(39318),O=t(37749);function _(e){var{isOpen:n,onClose:t}=e,s=(0,a._)(e,["isOpen","onClose"]);let{iString:r}=(0,f.GO)();return(0,l.FD)(C.h,{isOpen:n,onClose:t,children:[(0,l.Y)(k.l,{title:r("Fullscreen image")}),(0,l.Y)(E,(0,o._)((0,i._)({},s),{isOpen:n,onClose:t}))]})}function E(e){let{modalContent:n=[],onClose:t,step:i,post:o,publication:a,feedItem:s,onLike:c,restackedPost:d,restackedPublication:u}=e,w=(0,g.rr)(),[f,v]=(0,h.useState)(i),[C,k]=(0,h.useState)(!0),[Y,_]=(0,h.useState)(!1),E=(0,h.useCallback)(()=>{0!==f&&v(f-1)},[f]),S=(0,h.useCallback)(()=>{f!==n.length-1&&v(f+1)},[f,n]);(0,h.useEffect)(()=>{n.forEach(e=>{e.attrs.src&&(new Image().src=(0,I.dJ9)(e.attrs.src,void 0,{quality:"auto:good"}))})},[n]),(0,h.useEffect)(()=>{if(!w){let e,n=n=>{(null==n?void 0:n.type)==="keydown"&&(e=>{let{key:n}=e;["ArrowRight","ArrowDown"].includes(n)?(S(),e.stopPropagation()):["ArrowLeft","ArrowUp"].includes(n)&&(E(),e.stopPropagation())})(n),clearTimeout(e),_(!1),e=setTimeout(()=>{_(!0)},2e3)};return window.addEventListener("pointermove",n,{capture:!0,passive:!0}),window.addEventListener("pointerdown",n,{capture:!0,passive:!0}),window.addEventListener("keydown",n,{capture:!0,passive:!0}),n(),()=>{clearTimeout(e),window.removeEventListener("pointermove",n,{capture:!0}),window.removeEventListener("pointerdown",n,{capture:!0}),window.removeEventListener("keydown",n,{capture:!0})}}},[w,f,n,S,E]);let U=n[f];if(!U)return null;let{src:R,alt:F="",title:x=""}=U.attrs;return(0,l.FD)(l.FK,{children:[(0,l.FD)(b.az,{className:r()(O.A.chrome,Y&&O.A.hidden),children:[(0,l.FD)(y.fI,{justifyContent:"space-between",alignItems:"center",className:r()(O.A.top,O.A.left,O.A.right),position:"absolute",children:[(0,l.Y)(T,{onClick:t}),d&&u&&(0,l.Y)(m.L,{post:d,publication:u}),(0,l.Y)(L,{title:x,src:R})]}),f<n.length-1&&(0,l.Y)(N,{onClick:S}),f>0&&(0,l.Y)(D,{onClick:E}),(0,l.Y)(p.W,{post:o,publication:a,feedItem:s,onLike:c})]}),(0,l.FD)(y.ov,{position:"absolute",inset:0,pointerEvents:"none",children:[(0,l.Y)(b.az,{as:"img",className:r()(O.A.img,C&&O.A.loading),onLoad:()=>{k(!1)},onClick:t,alt:null!=F?F:void 0,title:null!=x?x:void 0,src:(0,I.dJ9)(R,void 0,{quality:"auto:good"}),animate:!0}),C&&(0,l.Y)(A.y$,{className:O.A.spinner,theme:"media"})]})]})}function N(e){let{onClick:n}=e,{iString:t}=(0,f.GO)();return(0,l.Y)(S,{className:r()(O.A.right,O.A.middle),onClick:n,"aria-label":t("Next image"),position:"absolute",children:(0,l.Y)(c.A,{size:20})})}function D(e){let{onClick:n}=e,{iString:t}=(0,f.GO)();return(0,l.Y)(S,{className:r()(O.A.left,O.A.middle),onClick:n,"aria-label":t("Previous image"),position:"absolute",children:(0,l.Y)(d.A,{size:20})})}function T(e){let{onClick:n}=e,{iString:t}=(0,f.GO)();return(0,l.Y)(S,{onClick:n,"aria-label":t("Close image viewer"),children:(0,l.Y)(u.A,{size:20})})}function L(e){let{title:n,src:t}=e,{iString:i}=(0,f.GO)(),o=(0,Y.d)(),a=async()=>{o.popToast(()=>(0,l.Y)(Y.y,{text:i("Downloading image..."),Icon:w.A}));try{await fetch(t).then(async e=>{var n,t,i;let o=null==(i=e.headers.get("Content-Disposition"))||null==(t=i.split("filename="))||null==(n=t[1])?void 0:n.replace(/"/g,"");return{blob:await e.blob(),filename:o}}).then(e=>{let{blob:t,filename:i}=e,o=i?decodeURIComponent(i):null;!o&&(n?(o=n.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").trim().slice(0,100)).includes(".")||(o="".concat(o,".jpg")):o="image.jpg");let a=window.URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=o,document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(a)})}catch(e){console.error(e)}};return(0,l.Y)(S,{onClick:a,"aria-label":i("Download image"),children:(0,l.Y)(w.A,{size:20})})}function S(e){var{children:n}=e,t=(0,a._)(e,["children"]);return(0,l.Y)(v.mZ,(0,o._)((0,i._)({rounded:!0},t),{children:n}))}},2797:function(e,n,t){t.d(n,{$j:()=>w,Tu:()=>d,Zi:()=>c,oo:()=>u});var i=t(12215),o=t(68349),a=t(96400),l=t(91392),s=t(39318),r=t(9036);async function c(e){var n;(null==(n=window._preloads)?void 0:n.language)&&void 0===window._preloads.customPublicationThemePreviewId&&a.ri.indexOf(window._preloads.language)>-1&&"function"==typeof fetch&&await fetch("/api/v1/i18n/translations?language=".concat(e),{method:"GET"}).then(e=>e.json()).then(n=>{a.TH.l(e,n)}).catch(()=>{})}function d(){let e=(0,r.m)(window.location.href);if(!e.token&&!e.lli||!window.history.replaceState)return;e.token&&!e.pt&&delete e.token,delete e.lli;let n="".concat((0,s.yRP)(window.location.pathname,e)).concat(window.location.hash);window.history.replaceState({},document.title,n)}function u(){if("object"==typeof window._analyticsConfig&&null!==window._analyticsConfig&&!window._analyticsConfig.anonymousId){let e;try{let n=i.get(l.FI.ANONYMOUS_ID);n&&(e=JSON.parse(n))}catch(e){}e||(e=(0,o.QT)(),i.set(l.FI.ANONYMOUS_ID,JSON.stringify(e),{expires:365})),window._analyticsConfig.anonymousId=e}}function w(){var e,n;!(null==(e=console)?void 0:e.log)||window.location.hostname.includes(".localhost")||window.location.pathname.startsWith("/embed")||window.location.pathname.startsWith("/visited-surface-frame")||null!=(n=window._preloads.user)&&n.is_global_admin||console.log("%c\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░ SUBSTACK WANTS YOU ░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▒░░░░░░░░▒▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▒▒░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▒░░░░░░░░░░░░░░░░░░░░░░▒▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░ TO BUILD A NEW ECONOMIC ENGINE FOR CULTURE ░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n                   https://substack.com/jobs\n","font-family:monospace")}t(20363)}}]);