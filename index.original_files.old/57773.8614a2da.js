!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="79767a07-0c55-4e69-90f4-caed9f34de31",e._sentryDebugIdIdentifier="sentry-dbid-79767a07-0c55-4e69-90f4-caed9f34de31")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["57773"],{67358:function(e,t,n){var r,o=(r=n(17402))&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(74808)),i=a.options,l=i.Options;t.default=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function, not "+typeof e);function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var n=e.apply(this,arguments);if(!this)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&("object"==typeof n||"function"==typeof n)?n:this}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),t.prototype.render=function(){var e={key:"linkified-element-0"};for(var t in this.props)"options"!==t&&"tagName"!==t&&(e[t]=this.props[t]);var n=new l(this.props.options),r=this.props.tagName||"span";return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===o.default.Children.count(t.props.children))return t;var l=[];o.default.Children.forEach(t.props.children,function(t){"string"==typeof t?(r+=1,l.push.apply(l,function(e,t){for(var n=a.tokenize(e),r=[],i=0,l=0;l<n.length;l++){var u=n[l];if("nl"===u.type&&t.nl2br){r.push(o.default.createElement("br",{key:"linkified-"+ ++i}));continue}if(!u.isLink||!t.check(u)){r.push(u.toString());continue}var s=t.resolve(u),c=s.formatted,p=s.formattedHref,d=s.tagName,f=s.className,h=s.target,m=s.attributes,g={key:"linkified-"+ ++i,href:p};if(f&&(g.className=f),h&&(g.target=h),m)for(var v in m)g[v]=m[v];r.push(o.default.createElement(d,g,c))}return r}(t,n))):o.default.isValidElement(t)?"string"==typeof t.type&&i.contains(n.ignoreTags,t.type.toUpperCase())?l.push(t):l.push(e(t,n,++r)):l.push(t)});var u={key:"linkified-element-"+r};for(var s in t.props)u[s]=t.props[s];return o.default.cloneElement(t,u,l)}(o.default.createElement(r,e),n,0)},t}(o.default.Component)},99862:function(e,t,n){n.d(t,{default:()=>S,getCurrentUrl:()=>m,route:()=>g,subscribers:()=>f});var r=n(50172),o={};function a(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t,n){var r,a=/(?:\?([^#]*))?(#.*)?$/,i=e.match(a),l={};if(i&&i[1])for(var u=i[1].split("&"),c=0;c<u.length;c++){var p=u[c].split("=");l[decodeURIComponent(p[0])]=decodeURIComponent(p.slice(1).join("="))}e=s(e.replace(a,"")),t=s(t||"");for(var d=Math.max(e.length,t.length),f=0;f<d;f++)if(t[f]&&":"===t[f].charAt(0)){var h=t[f].replace(/(^:|[+*?]+$)/g,""),m=(t[f].match(/[+*?]+$/)||o)[0]||"",g=~m.indexOf("+"),v=~m.indexOf("*"),y=e[f]||"";if(!y&&!v&&(0>m.indexOf("?")||g)){r=!1;break}if(l[h]=decodeURIComponent(y),g||v){l[h]=e.slice(f).map(decodeURIComponent).join("/");break}}else if(t[f]!==e[f]){r=!1;break}return(!0===n.default||!1!==r)&&l}function l(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function u(e,t){var n;return e.index=t,e.rank=(n=e).props.default?0:s(n.props.path).map(c).join(""),e.props}function s(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function c(e){return":"==e.charAt(0)?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var p=null,d=[],f=[],h={};function m(){var e;return""+((e=p&&p.location?p.location:p&&p.getCurrentLocation?p.getCurrentLocation():"undefined"!=typeof location?location:h).pathname||"")+(e.search||"")}function g(e,t){var n,r;return void 0===t&&(t=!1),"string"!=typeof e&&e.url&&(t=e.replace,e=e.url),function(e){for(var t=d.length;t--;)if(d[t].canRoute(e))return!0;return!1}(e)&&(n=e,r=t?"replace":"push",p&&p[r]?p[r](n):"undefined"!=typeof history&&history[r+"State"]&&history[r+"State"](null,null,n)),v(e)}function v(e){for(var t=!1,n=0;n<d.length;n++)!0===d[n].routeTo(e)&&(t=!0);for(var r=f.length;r--;)f[r](e);return t}function y(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return g(t)}}function b(e){if(!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&0===e.button)return y(e.currentTarget||e.target||this),E(e)}function E(e){return e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault()),!1}function w(e){if(!e.ctrlKey&&!e.metaKey&&!e.altKey&&!e.shiftKey&&0===e.button){var t=e.target;do if("A"===String(t.nodeName).toUpperCase()&&t.getAttribute("href")){if(t.hasAttribute("native"))return;if(y(t))return E(e)}while(t=t.parentNode)}}var C=!1,k=function(e){function t(t){e.call(this,t),t.history&&(p=t.history),this.state={url:t.url||m()},C||("function"==typeof addEventListener&&(p||addEventListener("popstate",function(){v(m())}),addEventListener("click",w)),C=!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.shouldComponentUpdate=function(e){return!0!==e.static||e.url!==this.props.url||e.onChange!==this.props.onChange},t.prototype.canRoute=function(e){var t=(0,r.toChildArray)(this.props.children);return this.getMatchingChildren(t,e,!1).length>0},t.prototype.routeTo=function(e){this.setState({url:e});var t=this.canRoute(e);return this.updating||this.forceUpdate(),t},t.prototype.componentWillMount=function(){d.push(this),this.updating=!0},t.prototype.componentDidMount=function(){var e=this;p&&(this.unlisten=p.listen(function(t){e.routeTo(""+(t.pathname||"")+(t.search||""))})),this.updating=!1},t.prototype.componentWillUnmount=function(){"function"==typeof this.unlisten&&this.unlisten(),d.splice(d.indexOf(this),1)},t.prototype.componentWillUpdate=function(){this.updating=!0},t.prototype.componentDidUpdate=function(){this.updating=!1},t.prototype.getMatchingChildren=function(e,t,n){return e.filter(u).sort(l).map(function(e){var o=i(t,e.props.path,e.props);if(o){if(!1!==n){var l={url:t,matches:o};return a(l,o),delete l.ref,delete l.key,(0,r.cloneElement)(e,l)}return e}}).filter(Boolean)},t.prototype.render=function(e,t){var n=e.children,o=e.onChange,a=t.url,i=this.getMatchingChildren((0,r.toChildArray)(n),a,!0),l=i[0]||null,u=this.previousUrl;return a!==u&&(this.previousUrl=a,"function"==typeof o&&o({router:this,url:a,previous:u,active:i,current:l})),l},t}(r.Component);k.subscribers=f,k.getCurrentUrl=m,k.route=g,k.Router=k,k.Route=function(e){return(0,r.createElement)(e.component,e)},k.Link=function(e){return(0,r.createElement)("a",a({onClick:b},e))},k.exec=i;let S=k},42216:function(e,t,n){n.d(t,{UO:()=>m,wE:()=>d});var r=n(17402),o=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=r.createContext({}),d=r.forwardRef((e,t)=>{let n;var o,d,m,g,v,{value:y,onChange:b,maxLength:E,textAlign:w="left",pattern:C,placeholder:k,inputMode:S="numeric",onComplete:P,pushPasswordManagerStrategy:x="increase-width",pasteTransformer:M,containerClassName:O,noScriptCSSFallback:R=h,render:_,children:T}=e,A=((e,t)=>{var n={};for(var r in e)u.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&l)for(var r of l(e))0>t.indexOf(r)&&s.call(e,r)&&(n[r]=e[r]);return n})(e,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[D,j]=r.useState("string"==typeof A.defaultValue?A.defaultValue:""),I=null!=y?y:D,W=(n=r.useRef(),r.useEffect(()=>{n.current=I}),n.current),U=r.useCallback(e=>{null==b||b(e),j(e)},[b]),B=r.useMemo(()=>C?"string"==typeof C?new RegExp(C):C:null,[C]),L=r.useRef(null),N=r.useRef(null),$=r.useRef({value:I,onChange:U,isIOS:"undefined"!=typeof window&&(null==(d=null==(o=null==window?void 0:window.CSS)?void 0:o.supports)?void 0:d.call(o,"-webkit-touch-callout","none"))}),F=r.useRef({prev:[null==(m=L.current)?void 0:m.selectionStart,null==(g=L.current)?void 0:g.selectionEnd,null==(v=L.current)?void 0:v.selectionDirection]});r.useImperativeHandle(t,()=>L.current,[]),r.useEffect(()=>{let e=L.current,t=N.current;if(!e||!t)return;function n(){if(document.activeElement!==e){q(null),J(null);return}let t=e.selectionStart,n=e.selectionEnd,r=e.selectionDirection,o=e.maxLength,a=e.value,i=F.current.prev,l=-1,u=-1,s;if(0!==a.length&&null!==t&&null!==n){let e=t===n,r=t===a.length&&a.length<o;if(e&&!r){if(0===t)l=0,u=1,s="forward";else if(t===o)l=t-1,u=t,s="backward";else if(o>1&&a.length>1){let e=0;if(null!==i[0]&&null!==i[1]){s=t<i[1]?"backward":"forward";let n=i[0]===i[1]&&i[0]<o;"backward"!==s||n||(e=-1)}l=e+t,u=e+t+1}}-1!==l&&-1!==u&&l!==u&&L.current.setSelectionRange(l,u,s)}let c=-1!==l?l:t,p=-1!==u?u:n,d=null!=s?s:r;q(c),J(p),F.current.prev=[c,p,d]}if($.current.value!==e.value&&$.current.onChange(e.value),F.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",n,{capture:!0}),n(),document.activeElement===e&&G(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";f(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),f(e.sheet,`[data-input-otp]:autofill { ${t} }`),f(e.sheet,`[data-input-otp]:-webkit-autofill { ${t} }`),f(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),f(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let r=()=>{t&&t.style.setProperty("--root-height",`${e.clientHeight}px`)};r();let o=new ResizeObserver(r);return o.observe(e),()=>{document.removeEventListener("selectionchange",n,{capture:!0}),o.disconnect()}},[]);let[H,K]=r.useState(!1),[z,G]=r.useState(!1),[V,q]=r.useState(null),[Y,J]=r.useState(null);r.useEffect(()=>{var e;setTimeout(e=()=>{var e,t,n,r;null==(e=L.current)||e.dispatchEvent(new Event("input"));let o=null==(t=L.current)?void 0:t.selectionStart,a=null==(n=L.current)?void 0:n.selectionEnd,i=null==(r=L.current)?void 0:r.selectionDirection;null!==o&&null!==a&&(q(o),J(a),F.current.prev=[o,a,i])},0),setTimeout(e,10),setTimeout(e,50)},[I,z]),r.useEffect(()=>{void 0!==W&&I!==W&&W.length<E&&I.length===E&&(null==P||P(I))},[E,P,W,I]);let Q=function({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:o}){let[a,i]=r.useState(!1),[l,u]=r.useState(!1),[s,c]=r.useState(!1),p=r.useMemo(()=>"none"!==n&&("increase-width"===n||"experimental-no-flickering"===n)&&a&&l,[a,l,n]),d=r.useCallback(()=>{let r=e.current,o=t.current;if(!r||!o||s||"none"===n)return;let a=r.getBoundingClientRect().left+r.offsetWidth,l=r.getBoundingClientRect().top+r.offsetHeight/2;0===document.querySelectorAll('[data-lastpass-icon-root],com-1password-button,[data-dashlanecreated],[style$="2147483647 !important;"]').length&&document.elementFromPoint(a-18,l)===r||(i(!0),c(!0))},[e,t,s,n]);return r.useEffect(()=>{let t=e.current;if(!t||"none"===n)return;function r(){u(window.innerWidth-t.getBoundingClientRect().right>=40)}r();let o=setInterval(r,1e3);return()=>{clearInterval(o)}},[e,n]),r.useEffect(()=>{let e=o||document.activeElement===t.current;if("none"===n||!e)return;let r=setTimeout(d,0),a=setTimeout(d,2e3),i=setTimeout(d,5e3),l=setTimeout(()=>{c(!0)},6e3);return()=>{clearTimeout(r),clearTimeout(a),clearTimeout(i),clearTimeout(l)}},[t,o,n,d]),{hasPWMBadge:a,willPushPWMBadge:p,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:N,inputRef:L,pushPasswordManagerStrategy:x,isFocused:z}),X=r.useCallback(e=>{let t=e.currentTarget.value.slice(0,E);t.length>0&&B&&!B.test(t)?e.preventDefault():("string"==typeof W&&t.length<W.length&&document.dispatchEvent(new Event("selectionchange")),U(t))},[E,U,W,B]),Z=r.useCallback(()=>{var e;if(L.current){let t=Math.min(L.current.value.length,E-1),n=L.current.value.length;null==(e=L.current)||e.setSelectionRange(t,n),q(t),J(n)}G(!0)},[E]),ee=r.useCallback(e=>{var t,n;let r=L.current;if(!M&&(!$.current.isIOS||!e.clipboardData||!r))return;let o=e.clipboardData.getData("text/plain"),a=M?M(o):o;console.log({_content:o,content:a}),e.preventDefault();let i=null==(t=L.current)?void 0:t.selectionStart,l=null==(n=L.current)?void 0:n.selectionEnd,u=(i!==l?I.slice(0,i)+a+I.slice(l):I.slice(0,i)+a+I.slice(i)).slice(0,E);if(u.length>0&&B&&!B.test(u))return;r.value=u,U(u);let s=Math.min(u.length,E-1),c=u.length;r.setSelectionRange(s,c),q(s),J(c)},[E,U,B,I]),et=r.useMemo(()=>({position:"relative",cursor:A.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[A.disabled]),en=r.useMemo(()=>({position:"absolute",inset:0,width:Q.willPushPWMBadge?`calc(100% + ${Q.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Q.willPushPWMBadge?`inset(0 ${Q.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:w,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Q.PWM_BADGE_SPACE_WIDTH,Q.willPushPWMBadge,w]),er=r.useMemo(()=>r.createElement("input",a(((e,t)=>{for(var n in t||(t={}))u.call(t,n)&&c(e,n,t[n]);if(l)for(var n of l(t))s.call(t,n)&&c(e,n,t[n]);return e})({autoComplete:A.autoComplete||"one-time-code"},A),i({"data-input-otp":!0,"data-input-otp-placeholder-shown":0===I.length||void 0,"data-input-otp-mss":V,"data-input-otp-mse":Y,inputMode:S,pattern:null==B?void 0:B.source,"aria-placeholder":k,style:en,maxLength:E,value:I,ref:L,onPaste:e=>{var t;ee(e),null==(t=A.onPaste)||t.call(A,e)},onChange:X,onMouseOver:e=>{var t;K(!0),null==(t=A.onMouseOver)||t.call(A,e)},onMouseLeave:e=>{var t;K(!1),null==(t=A.onMouseLeave)||t.call(A,e)},onFocus:e=>{var t;Z(),null==(t=A.onFocus)||t.call(A,e)},onBlur:e=>{var t;G(!1),null==(t=A.onBlur)||t.call(A,e)}}))),[X,Z,ee,S,en,E,Y,V,A,null==B?void 0:B.source,I]),eo=r.useMemo(()=>({slots:Array.from({length:E}).map((e,t)=>{var n;let r=z&&null!==V&&null!==Y&&(V===Y&&t===V||t>=V&&t<Y),o=void 0!==I[t]?I[t]:null;return{char:o,placeholderChar:void 0!==I[0]?null:null!=(n=null==k?void 0:k[t])?n:null,isActive:r,hasFakeCaret:r&&null===o}}),isFocused:z,isHovering:!A.disabled&&H}),[z,H,E,Y,V,A.disabled,I]),ea=r.useMemo(()=>_?_(eo):r.createElement(p.Provider,{value:eo},T),[T,eo,_]);return r.createElement(r.Fragment,null,null!==R&&r.createElement("noscript",null,r.createElement("style",null,R)),r.createElement("div",{ref:N,"data-input-otp-container":!0,style:et,className:O},ea,r.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},er)))});function f(e,t){try{e.insertRule(t)}catch(e){console.error("input-otp could not insert CSS rule:",t)}}d.displayName="Input";var h=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,m="^\\d+$"}}]);