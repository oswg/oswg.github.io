!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="665d5e52-2ef7-4509-b7d4-f349bc3dbde0",e._sentryDebugIdIdentifier="sentry-dbid-665d5e52-2ef7-4509-b7d4-f349bc3dbde0")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["38874"],{85013:function(e,t,r){r.d(t,{A:()=>n});let n={lockedIcon:"lockedIcon-JpQwVp"}},54409:function(e,t,r){r.d(t,{A:()=>n});let n={active:"active-hmQjWF"}},90095:function(e,t,r){r.d(t,{A:()=>n});let n={active:"active-CkxYpV"}},2435:function(e,t,r){r.d(t,{A:()=>d});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(97731);let d=e=>{var{size:t=20,stroke:r="var(--color-fg-primary)",strokeWidth:d=1.5}=e,s=(0,a._)(e,["size","stroke","strokeWidth"]);return(0,o.Y)(l.A,(0,i._)((0,n._)({},s),{name:"NoteCommentIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,stroke:r,strokeWidth:d,strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.Y)("path",{d:"M18.7502 11V7.50097C18.7502 4.73917 16.5131 2.50033 13.7513 2.50042L6.25021 2.50044C3.48848 2.5004 1.25017 4.73875 1.2502 7.50048L1.25021 10.9971C1.2502 13.749 3.47395 15.9836 6.22586 15.9971L6.82888 16V19.0182L12.1067 16H13.7502C16.5116 16 18.7502 13.7614 18.7502 11Z"})}))}},83114:function(e,t,r){r.d(t,{A:()=>a});var n=r(4006),i=r(97731);let a=e=>{let{size:t=32,color:r="var(--color-fg-secondary)",strokeWidth:a=1.5,className:o}=e;return(0,n.FD)(i.A,{name:"NoteReplyLockedIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round",className:o,children:[(0,n.Y)("path",{d:"M18.7499 10.6907C18.7499 13.4521 16.5113 15.6907 13.7499 15.6907H12.1064L6.82856 18.7089V15.6907L6.22554 15.6878C3.47363 15.6743 1.24988 13.4397 1.24989 10.6878L1.24988 7.19122C1.24985 4.42949 3.48816 2.19114 6.24989 2.19118L10.0004 2.19117",stroke:r,strokeWidth:a,fill:"none"}),(0,n.Y)("path",{d:"M13.5616 9.25692H17.8786C18.5722 9.25692 18.9402 8.87948 18.9402 8.134V4.88323C18.9402 4.13776 18.5722 3.76505 17.8786 3.76505H13.5616C12.868 3.76505 12.5 4.13776 12.5 4.88323V8.134C12.5 8.87948 12.868 9.25692 13.5616 9.25692ZM13.3257 4.12834H14.0758V2.53362C14.0758 1.34466 14.8355 0.712433 15.7177 0.712433C16.6 0.712433 17.3691 1.34466 17.3691 2.53362V4.12834H18.1145V2.63742C18.1145 0.863412 16.9539 0 15.7177 0C14.4863 0 13.3257 0.863412 13.3257 2.63742V4.12834Z",fill:r,stroke:"none"})]})}},76673:function(e,t,r){r.d(t,{A:()=>d});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(97731);let d=e=>{var{size:t=20,stroke:r="var(--color-fg-primary)",strokeWidth:d=1.5,className:s}=e,c=(0,a._)(e,["size","stroke","strokeWidth","className"]);return(0,o.Y)(l.A,(0,i._)((0,n._)({},c),{name:"NoteRestackIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,stroke:r,strokeWidth:d,strokeLinecap:"round",strokeLinejoin:"round",className:s,children:(0,o.Y)("path",{d:"M2.53001 7.81595C3.49179 4.73911 6.43281 2.5 9.91173 2.5C13.1684 2.5 15.9537 4.46214 17.0852 7.23684L17.6179 8.67647M17.6179 8.67647L18.5002 4.26471M17.6179 8.67647L13.6473 6.91176M17.4995 12.1841C16.5378 15.2609 13.5967 17.5 10.1178 17.5C6.86118 17.5 4.07589 15.5379 2.94432 12.7632L2.41165 11.3235M2.41165 11.3235L1.5293 15.7353M2.41165 11.3235L6.38224 13.0882"})}))}},3228:function(e,t,r){r.d(t,{k:()=>v});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(17402),d=r(2435),s=r(83114),c=r(84605),u=r(82021),f=r(86473),p=r(85013);let v=(0,l.forwardRef)((e,t)=>{var{count:r,className:l,onClick:v,disabled:m,replyRequirement:h,priority:y="secondary"}=e,k=(0,a._)(e,["count","className","onClick","disabled","replyRequirement","priority"]);let{iString:b}=(0,c.GO)(),_=(0,f.kS)(y);return(0,o.Y)(u.V,(0,i._)((0,n._)({priority:y,className:l,onClick:v,count:r,disabled:m,tooltip:function(e){let{iString:t}=(0,c.GO)();return"paid_subscriber"===e?t("Only paid subscribers can reply."):"free_subscriber"===e?t("Only subscribers can reply."):void 0}(h),"aria-label":b("Comment"),ref:t},k),{children:h?(0,o.Y)(s.A,{size:_,className:p.A.lockedIcon}):(0,o.Y)(d.A,{size:_})}))})},82021:function(e,t,r){r.d(t,{V:()=>m});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(32485),d=r.n(l),s=r(17402),c=r(86473),u=r(35369),f=r(63136),p=r(82776),v=r(78862);let m=(0,s.forwardRef)((e,t)=>{var{className:r,disabled:l,count:s,children:f,priority:p="secondary"}=e,m=(0,a._)(e,["className","disabled","count","children","priority"]);let y=(0,c.LX)(p);return(0,o.FD)(u.Nm,(0,i._)((0,n._)({ref:t,resetCss:!0,display:"flex",flex:"auto",sizing:"border-box",alignItems:"center",justifyContent:"center",userSelect:"none",radius:"full",paddingX:8,height:y,minWidth:y,gap:8,className:d()(r,v.A.button,v.A["priority_".concat(p)]),disabled:l},m),{children:[f,!!s&&s>0&&(0,o.Y)(h,{count:s,priority:p})]}))});function h(e){let{count:t,priority:r}=e,n=(0,c.kE)(r);return(0,o.Y)(f.EY.B4,{weight:n,children:(0,p.numberToRoughShortString)(Math.max(t,1),{plusSignifier:""})})}},71836:function(e,t,r){r.d(t,{S:()=>d});var n=r(4006),i=r(32485),a=r.n(i),o=r(86473),l=r(89490);function d(e){let{isLiked:t,clickedOnce:r,priority:i="secondary"}=e,d=(0,o.kS)(i);return(0,n.FD)(l.az,{className:a()("container-CDGars",t&&"isLiked-pX6wdS",r&&t&&"clickedOnce-AmcfwJ"),children:[(0,n.Y)(s,{size:d}),(0,n.Y)(c,{totalSparks:8})]})}function s(e){let{size:t}=e;return(0,n.Y)("svg",{className:"heart-LkT9Ql",viewBox:"0 0 20 20",width:t,height:t,children:(0,n.Y)("path",{d:"M5.00002 2.54822C8.00003 2.09722 9.58337 4.93428 10 5.87387C10.4167 4.93428 12 2.09722 15 2.54822C18 2.99923 18.75 5.66154 18.75 7.05826C18.75 9.28572 18.1249 10.9821 16.2499 13.244C14.3749 15.506 10 18.3333 10 18.3333C10 18.3333 5.62498 15.506 3.74999 13.244C1.875 10.9821 1.25 9.28572 1.25 7.05826C1.25 5.66154 2 2.99923 5.00002 2.54822Z"})})}function c(e){let{totalSparks:t}=e;return(0,n.Y)(l.az,{className:"sparks-Q83SsW",style:{"--total-sparks":t},children:Array(t).fill(0).map((e,t)=>(0,n.Y)(u,{index:t}))})}function u(e){let{index:t}=e;return(0,n.Y)("div",{className:"spark-gW9TO5",style:{"--i":t+1}})}},48226:function(e,t,r){r.d(t,{c:()=>m});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(32485),d=r.n(l),s=r(17402),c=r(84605),u=r(82021),f=r(83269),p=r(71836),v=r(54409);let m=(0,s.forwardRef)((e,t)=>{var{count:r,className:l,onClick:s,active:m,disabled:h,priority:y="secondary"}=e,k=(0,a._)(e,["count","className","onClick","active","disabled","priority"]);let{iString:b}=(0,c.GO)(),[_,C]=(0,f.a)(s);return(0,o.Y)(u.V,(0,i._)((0,n._)({priority:y,className:d()(l,m&&v.A.active),onClick:C,count:r,disabled:h,"aria-label":b("Like"),ref:t},k),{children:(0,o.Y)(p.S,{isLiked:null!=m&&m,clickedOnce:_,priority:y})}))})},68838:function(e,t,r){r.d(t,{U:()=>c});var n=r(4006),i=r(32485),a=r.n(i),o=r(17402),l=r(76673),d=r(86473),s=r(89490);function c(e){let{isRestacked:t,priority:r="secondary"}=e,i=(0,d.kS)(r),c=(0,o.useRef)(t),[u,f]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{f(!c.current&&t),c.current=t},[t]),(0,n.Y)(s.az,{className:a()("container-R_2Qan",t&&"isRestacked-dHuw53",u&&"animate-q7j37o"),children:(0,n.Y)(l.A,{className:"restackIcon-XKvm2P",size:i})})}},82634:function(e,t,r){r.d(t,{Q:()=>v});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(32485),d=r.n(l),s=r(17402),c=r(84605),u=r(82021),f=r(68838),p=r(90095);let v=(0,s.forwardRef)((e,t)=>{var{count:r,className:l,onClick:s,active:v,disabled:m,priority:h="secondary"}=e,y=(0,a._)(e,["count","className","onClick","active","disabled","priority"]);let{iString:k}=(0,c.GO)();return(0,o.Y)(u.V,(0,i._)((0,n._)({priority:h,className:d()(l,v&&p.A.active),onClick:s,count:r,disabled:m,"aria-label":k("Restack"),ref:t},y),{children:(0,o.Y)(f.U,{isRestacked:null!=v&&v,priority:h})}))})},52347:function(e,t,r){r.d(t,{H:()=>c});var n=r(4006),i=r(46271),a=r(75840),o=r(82634),l=r(88774),d=r(46453),s=r(28916);function c(e){let{pub:t,post:r,comment:c,feedItem:u,onOpen:f,onRestack:p,disabled:v,surface:m,priority:h}=e,y=(0,i.Jd)(),k=(0,a.T)(),{requireLogin:b}=(0,d.eE)(),{canRestack:_,isRestacked:C,restacks:g,menuItems:L,nuxModal:E}=(0,s.I)({pub:t,post:r,comment:c,feedItem:u,onRestack:p,tabId:k,surface:m});return y?(0,n.FD)(n.FK,{children:[E,(0,n.Y)(l.W1,{trigger:(0,n.Y)(o.Q,{count:g,active:C,disabled:v||!_,priority:h}),onOpen:()=>null==f?void 0:f(C),children:L})]}):(0,n.Y)(o.Q,{count:g,active:C,onClick:()=>null==b?void 0:b(),priority:h})}},99978:function(e,t,r){r.d(t,{w:()=>f});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(17402),d=r(55913),s=r(84605),c=r(82021),u=r(86473);let f=(0,l.forwardRef)((e,t)=>{var{count:r,className:l,onClick:f,disabled:p,priority:v="secondary"}=e,m=(0,a._)(e,["count","className","onClick","disabled","priority"]);let{iString:h}=(0,s.GO)(),y=(0,u.kS)(v);return(0,o.Y)(c.V,(0,i._)((0,n._)({className:l,onClick:f,count:r,disabled:p,"aria-label":h("Share"),ref:t,priority:v},m),{children:(0,o.Y)(d.A,{size:y})}))})},60763:function(e,t,r){r.d(t,{f:()=>m});var n=r(4006),i=r(46271),a=r(27749),o=r(75840),l=r(99978),d=r(86500),s=r(88774),c=r(504),u=r(64127),f=r(37764),p=r(49807),v=r(57324);function m(e){var t,r;let{publication:m,post:h,comment:y,item:k,activityItem:b,twitterText:_,priority:C="secondary"}=e,g=(0,a.PK)(),L=(0,o.T)(),E=(0,i.Jd)(),w=E?E.id.toString(36):void 0,Y=k&&(0,f.tL)(k)&&"post"===k.type&&k.mediaClip?k.mediaClip:void 0,S=y?(0,p.Zgx)(y,{urlParams:{utm_source:v.VU.notesShareAction,r:w}}):h?(0,p.q$n)(m,h,{urlParams:{utm_source:v.VU.notesShareAction,r:w},mediaClip:Y}):(null==b||null==(t=b.target_live_stream)?void 0:t.id)!=null?(0,p.Xrv)({liveStreamId:null==(r=b.target_live_stream)?void 0:r.id,utm_source:v.VU.activityItemShare}):null,I=(0,u.gz)({variant:"menu",url:S,twitterText:_,onLinkClicked:e=>{(0,d.u4)(d.qY.FEED_ITEM_SHARE_LINK_CLICKED,{type:e,shared_post_id:null==h?void 0:h.id,shared_comment_id:null==y?void 0:y.id})},comment:y});return(0,n.Y)(s.W1,{trigger:(0,n.Y)(l.w,{priority:C}),onOpen:()=>{k&&(0,c.Qb)(k,g,"share",{tabId:L})},children:I})}},83269:function(e,t,r){r.d(t,{a:()=>i});var n=r(17402);function i(e){let[t,r]=(0,n.useState)(!1);return[t,t=>{r(!0),null==e||e(t)}]}},74579:function(e,t,r){r.d(t,{Y:()=>f});var n=r(69277),i=r(46271),a=r(27749),o=r(75840),l=r(12501),d=r(68349),s=r(504),c=r(5180),u=r(46453);function f(e,t,r){let f=(0,i.Jd)(),p=(0,c.wA)(),v=(0,a.PK)(),m=(0,o.T)(),{requireLogin:h}=(0,u.eE)(),y=(0,l.st)({pathname:"/api/v1/comment/".concat(e.id,"/reaction"),method:"POST"});return async i=>{if(i.preventDefault(),!f){null==h||h();return}let a=!r,o=null==t?void 0:t.publication;p({type:"comment_like",payload:{commentId:e.id,isLiked:a}});try{var l,c;await y.refetch({method:a?"POST":"DELETE",json:(0,n._)({publication_id:(null==o?void 0:o.id)||null,reaction:"â¤",tabId:m},a&&(null==t?void 0:t.context.type)==="comment_restack"&&{restacking_user_id:null==(c=t.context.users)||null==(l=c[0])?void 0:l.id})})}catch(t){p({type:"comment_like",payload:{commentId:e.id,isLiked:!a}}),alert((0,d.uX)(t));return}t&&(0,s.Qb)(t,v,"like",{tabId:m})}}},20474:function(e,t,r){r.d(t,{l:()=>s});var n=r(46271),i=r(27749),a=r(75840),o=r(504),l=r(46453),d=r(2481);function s(e,t){let r=(0,n.Jd)(),s=(0,i.PK)(),c=(0,a.T)(),u=(0,d.NP)(),{requireLogin:f}=(0,l.eE)(),p=(0,d.L6)(t);return n=>{var i,a;if(n.preventDefault(),!r){null==f||f();return}t&&(u.open({feedItem:t,parentPubId:null!=(i=e.publication_id)?i:void 0,parentPostId:null!=(a=e.post_id)?a:void 0,parentCommentId:e.id,tabId:c,surface:s}),(0,o.Qb)(t,s,"comment",{tabId:c,extraEventProps:{reply_requirement:p,reply_locked:!!p}}))}}},86473:function(e,t,r){r.d(t,{LX:()=>d,kE:()=>l,kS:()=>s,mp:()=>a,qW:()=>o});var n=r(60064),i=r(82776);function a(e){if(!e)return!1;let{publication:t,post:r}=e;return!!(r&&t&&!(0,i.commentsEnabledForPost)({publication:t,post:r}))}function o(e){if(!e)return!1;let{publication:t,post:r}=e;return!!(r&&t&&!(0,i.restacksEnabledForPost)({publication:t,post:r}))}function l(e){return"primary"===e?"bold":"regular"}function d(e){return"primary"===e?n.tS:n.F0}function s(e){return"primary"===e?n.hx:n.P2}},26289:function(e,t,r){r.d(t,{By:()=>a,sY:()=>o,yr:()=>i});var n=r(17402);let i=e=>{var t,r;let i=null==e||null==(t=e.current)?void 0:t.player,[a,o]=(0,n.useState)("number"==typeof(null==i?void 0:i.currentTime)?i.currentTime:0),[l,d]=(0,n.useState)(!!i&&!i.paused);return(0,n.useEffect)(()=>{var t;let r=null==(t=e.current)?void 0:t.player;if(r){let e=e=>{"number"==typeof e.target.currentTime&&o(e.target.currentTime)},t=()=>d(!0),n=()=>d(!1),i=()=>d(!1);return r.addEventListener("timeupdate",e),r.addEventListener("play",t),r.addEventListener("pause",n),r.addEventListener("ended",i),r.paused||l||d(!0),()=>{r.removeEventListener("timeupdate",e),r.removeEventListener("play",t),r.removeEventListener("pause",n),r.removeEventListener("ended",i)}}},[null==e||null==(r=e.current)?void 0:r.player]),{currentTime:a,isPlaying:l}},a=e=>o(e.current),o=e=>{let t=null==e?void 0:e.player,[r,i]=(0,n.useState)(!!t&&!t.paused);return(0,n.useEffect)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>i(!0),n=()=>i(!1),a=()=>i(!1);return t.addEventListener("play",e),t.addEventListener("pause",n),t.addEventListener("ended",a),t.paused||r||i(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",n),t.removeEventListener("ended",a)}}},[null==e?void 0:e.player]),r}},47784:function(e,t,r){r.d(t,{A:()=>p});var n=r(69277),i=r(70408),a=r(32641),o=r(4006),l=r(32485),d=r.n(l),s=r(17402),c=r(11587),u=r(65842),f=r(24311);let p=(0,s.forwardRef)((e,t)=>{var{className:r,error:l=!1,defaultRows:p=4,maxRows:v,value:m,onChange:h}=e,y=(0,a._)(e,["className","error","defaultRows","maxRows","value","onChange"]);let{innerRef:k,combinedRef:b}=(0,u.N)(t),{value:_,handleChange:C}=(0,c.u)({value:m,onChange:h}),g=(0,s.useCallback)(()=>{let e=k.current;if(!e)return;let t=window.getComputedStyle(e),r=parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth),n=parseInt(t.paddingTop)+parseInt(t.paddingBottom),i=parseInt(t.lineHeight);e.style.height="auto";let a=v?i*v+r+n:1/0,o=i*p+r+n,l=Math.min(Math.max(e.scrollHeight+r,o),a);e.style.height="".concat(l,"px")},[p,v]);return(0,s.useEffect)(()=>{g(),document.fonts&&"loaded"!==document.fonts.status&&document.fonts.ready.then(g)},[g,m]),(0,s.useEffect)(()=>(window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)),[g]),(0,o.Y)(c.T,(0,i._)((0,n._)({},y),{value:_,onChange:e=>{C(e),g()},rows:p,className:d()(r,f.A.autogrowing),ref:b,error:l}))})}}]);