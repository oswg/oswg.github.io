!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="02828771-28c4-4b00-bb47-80c5ef0ff90a",e._sentryDebugIdIdentifier="sentry-dbid-02828771-28c4-4b00-bb47-80c5ef0ff90a")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["37370"],{78962:function(e,t,n){n.d(t,{A:()=>o});let o={verticalMenuLabel:"verticalMenuLabel-vDULBF"}},50587:function(){},61084:function(e,t,n){n.d(t,{Jm:()=>S,eB:()=>A});var o=n(69277),r=n(70408),a=n(32641),c=n(4006),u=n(32485),i=n.n(u),s=n(45773),l=n(17402),d=n(82519),f=n(84605),p=n(35369),m=n(76977),b=n(88774),h=n(43145),g=n(63136),_=n(65842),y=n(25879);let A=(0,l.forwardRef)((e,t)=>{var{className:n,error:u=!1,children:i,flex:s="auto",label:l,placeholder:d,disabled:f,leading:p,size:m="md",priority:h="secondary-outline",onClose:g}=e,_=(0,a._)(e,["className","error","children","flex","label","placeholder","disabled","leading","size","priority","onClose"]);let y=(0,c.Y)(C,(0,r._)((0,o._)({},_),{className:n,error:u,flex:s,label:l,placeholder:d,disabled:f,leading:p,size:m,priority:h,ref:t}));return(0,c.Y)(b.W1,{trigger:y,disabled:f,matchReferenceWidth:!0,onClose:g,children:i})});A.displayName="SelectMenu";let C=(0,l.forwardRef)((e,t)=>{var{className:n,error:u=!1,flex:s="auto",label:l,placeholder:b,disabled:h,leading:A,size:C="md",priority:S="secondary-outline"}=e,T=(0,a._)(e,["className","error","flex","label","placeholder","disabled","leading","size","priority"]);let{iString:w}=(0,f.GO)(),v=!l,N=null!=b?b:w("Select an option");return(0,c.FD)(p.Nm,(0,r._)((0,o._)({},T),{className:i()(n,y.A.select,y.A.trailing,y.A.menu,y.A["size_".concat(C)],y.A["priority_".concat(S)],!!A&&y.A.leading,!!u&&y.A.error,!!h&&y.A.disabled),display:"flex",position:"relative",textAlign:"left",minWidth:0,flex:s,disabled:h,ref:t,resetCss:!0,children:[A&&(0,c.Y)(_.uk,{position:"leading",size:C,className:i()(u&&y.A.error),disabled:!!h,children:A}),v?(0,c.Y)(g.EY,{flex:"grow",ellipsis:!0,color:"secondary",children:N}):"string"==typeof l?(0,c.Y)(g.EY,{flex:"grow",ellipsis:!0,color:"primary",children:l}):(0,c.Y)(m.fI,{flex:"grow",alignItems:"center",ellipsis:!0,children:l}),(0,c.Y)(_.uk,{position:"trailing",size:C,className:i()(u&&y.A.error),disabled:!!h,children:(0,c.Y)(d.A,{})})]}))});function S(e){var{selected:t,trailing:n,onClick:u}=e,i=(0,a._)(e,["selected","trailing","onClick"]);return(0,c.Y)(h.Dr,(0,r._)((0,o._)({},i),{trailing:t?(0,c.Y)(s.A,{}):n,onClick:u}))}C.displayName="SelectMenuTrigger"},59167:function(e,t,n){n.d(t,{h:()=>a});var o=n(16291);function r(e){var t;let n=[e.is_primary,(null==(t=e.publication)?void 0:t.author_id)===e.user_id,"admin"===e.role,"contributor"===e.role].map(e=>e?"0":"1").join("");return"".concat(n,"-").concat((0,o.A)(e.created_at).valueOf())}function a(e){return e.slice(0).sort((e,t)=>r(e)>r(t)?1:-1)}},10591:function(e,t,n){n.d(t,{N_:()=>T,Si:()=>D,TH:()=>N,U4:()=>B,WK:()=>I,XU:()=>E,ce:()=>v,eH:()=>R,ju:()=>L,mh:()=>w,nd:()=>S,pv:()=>C,yj:()=>x,yt:()=>k});var o=n(79785),r=n(86500),a=n(98111),c=n(4016),u=n(39318),i=n(49807),s=n(82776),l=n(57324),d=n(33333),f=n(4518);function p(){let e=(0,o._)(["Start writing today. Use the button below to create a Substack of your own"]);return p=function(){return e},e}function m(){let e=(0,o._)(["Share ",""]);return m=function(){return e},e}function b(){let e=(0,o._)(["Get ","% off a group subscription"]);return b=function(){return e},e}function h(){let e=(0,o._)(["Get a group subscription"]);return h=function(){return e},e}function g(){let e=(0,o._)(["Give a gift subscription"]);return g=function(){return e},e}function _(){let e=(0,o._)(["","! Subscribe for free to receive new posts and support my work."]);return _=function(){return e},e}function y(){let e=(0,o._)(["",". To receive new posts and support my work, consider becoming a free or paid subscriber."]);return y=function(){return e},e}function A(){let e=(0,o._)(["","! This post is public so feel free to share it."]);return A=function(){return e},e}let C=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:"".concat(a.T.CHECKOUT_URL,"&donate=true"),text:o("Donate Subscriptions")};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},S=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:"".concat(a.T.LEADERBOARD_URL,"&utm_source=").concat(l.VU.post),text:o("Refer a friend")};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},T=e=>{let{writerReferralCode:t,publication:n,postId:o}=e;return(e,r)=>{let{iString:a,iTemplate:c}=I18N.i({pub:n});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!e.schema.nodes.captionedWriterReferralButton)return console.error("captionedWriterReferralButton node type not found in schema"),!1;if(!e.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,f.c)(e,e.schema.nodes.button))return!1;let i=c(p()),s={url:"".concat((0,u.gWk)(t||""),"?utm_source=").concat(l.VU.substack,"&utm_context=").concat(l.rw.post,"&utm_content=").concat(o,"&utm_campaign=").concat(l._9.writerReferralButton),text:a("Start a Substack")},m=e.schema.nodes.captionedWriterReferralButton.create(s,e.schema.nodes.ctaCaption.create(null,[e.schema.text(i)]));return r&&r((0,d.DL)(e,m)),!0}},w=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:a.T.HALF_MAGIC_COMMENTS_URL,text:o("Leave a comment")};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},v=(e,t,n)=>(o,a)=>{if((0,r.u4)(r.qY.READER_SURVEY_LINKED_IN_POST,{editorVersion:"1",surveyId:t.id}),!o.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(o,o.schema.nodes.button))return!1;let c={url:"".concat((0,i.gAK)(e,t.id)),text:n};return a&&a((0,d.DL)(o,o.schema.nodes.button.create(c))),!0},N=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:a.T.SHARE_URL,text:o("Share")};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},x=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:a.T.SHARE_PUB_URL,text:o(m(),e.name)};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},E=e=>{let{couponPub:t,scrollParent:n,parentClass:o,get_coupons:r,insert_coupon:a,SelectField:c,openPrompt:i,closePrompt:s,getNetworkErrorMessage:l}=e;return(e,d,p)=>{let{iString:m}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(e,e.schema.nodes.button))return!1;let b={parentClass:o,root:n?document.querySelector(".".concat(n)):p.dom.parentNode,scrollParent:n,offsetTop:10},h=Object.assign({title:m("Loading..."),no_buttons:!0,language:t.language},b);return i(h),r().then(n=>{s(h);let o=n.map(e=>{var t;return{label:null!=(t=e.name)?t:"",value:e}}).concat([{label:m("Create new offer"),value:{create_new:!0}}]),r={coupon:new c({label:m("Select offer..."),required:!0,options:o,onChange:e=>{e&&"create_new"in e&&e.create_new&&(s(l),window.open("".concat((0,u.$_T)(t),"/publish/offers"),"_blank"))}})},l=Object.assign({title:m("Special Offer"),fields:r,language:null==t?void 0:t.language,onSubmit:t=>{let{coupon:n}=t;a({coupon:n,state:e,dispatch:p.dispatch,schema:e.schema})},onClose:()=>{p.focus()}},b);i(l)}).catch(e=>{s(h),alert(l(e))}),!1}},L=e=>{let{scrollParent:t,parentClass:n,TextField:o,openPrompt:r,publication:u}=e;return(e,i,s)=>{let{iString:l}=I18N.i({pub:u});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(e,e.schema.nodes.button))return!1;let p={parentClass:n,title:l("Create a button"),root:t?document.querySelector(".".concat(t)):s.dom.parentNode,scrollParent:t,offsetTop:10,language:null==u?void 0:u.language,fields:{text:new o({label:l("Enter text..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(e.length>40)return l("Too long")}}),href:new o({label:l("Enter URL..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(!/^%%.*%%$/.test(e)){try{let t=new URL(e);if(["http:","https:","mailto:"].includes(t.protocol))return}catch(e){}return l("Invalid URL")}}})}};return p.onSubmit=t=>{let n=t.href;if((0,c.lu)({pub:u})){let[e,t]=n.split("#"),o=e.includes("?")?"&":"?",r=["utm_source=custom_button","utm_medium=".concat(a.T.SEND_MEDIUM),"utm_campaign=".concat(a.T.POST_ID)].join("&");n="".concat(e).concat(o).concat(r).concat(t?"#".concat(t):"")}let o={url:n,text:t.text};if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;i&&s.dispatch((0,d.DL)(e,e.schema.nodes.button.create(o)))},p.onClose=()=>{s.focus()},r(p),!0}},k=e=>{let{publication:t}=e;return(e,n)=>{let{iTemplate:o}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(e,e.schema.nodes.button))return!1;let r=t.default_group_coupon,c={url:"".concat(a.T.CHECKOUT_URL,"group=true").concat(r?"&coupon=".concat(r):""),text:(0,s.getSubscriptionSentenceWithCustomWords)(t,()=>{var e;return r&&t.default_group_coupon_percent_off?o(b(),null!=(e=t.default_group_coupon_percent_off.split(".")[0])?e:""):o(h())},e=>r&&t.default_group_coupon_percent_off?"Get ".concat(t.default_group_coupon_percent_off.split(".")[0],"% off a group ").concat(e.subscription):"Get a group ".concat(e.subscription))};return n&&n((0,d.DL)(e,e.schema.nodes.button.create(c))),!0}},R=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r={url:"".concat(a.T.CHECKOUT_URL,"&gift=true"),text:(0,s.getSubscriptionSentenceWithCustomWords)(e,()=>o(g()),e=>"Give a gift ".concat(e.subscription))};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(r))),!0},D=e=>(t,n)=>{if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let o={url:a.T.CHECKOUT_URL,text:(0,s.getSubscribeText)(e,{now:!0}),language:e.language};return n&&n((0,d.DL)(t,t.schema.nodes.button.create(o))),!0},I=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.subscribeWidget)return console.error("subscribeWidget node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let r="enabled"!==e.payments_state?o(_(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)):o(y(),e.author_name===e.name?"This Substack is reader-supported":"".concat(e.name," is a reader-supported publication")),c={url:a.T.CHECKOUT_URL,text:(0,s.getSubscribeText)(e),language:e.language},u=t.schema.nodes.subscribeWidget.create(c,[t.schema.nodes.ctaCaption.create(null,[t.schema.text(r)])]);return n&&n((0,d.DL)(t,u)),!0},B=e=>(t,n)=>{let{iString:o,iTemplate:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.captionedShareButton)return console.error("captionedShareButton node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,f.c)(t,t.schema.nodes.button))return!1;let c=r(A(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)),u={url:a.T.SHARE_URL,text:o("Share")},i=t.schema.nodes.captionedShareButton.create(u,t.schema.nodes.ctaCaption.create(null,[t.schema.text(c)]));return n&&n((0,d.DL)(t,i)),!0}},10933:function(e,t,n){n.d(t,{kI:()=>a});var o=n(33333);let r=e=>!(0,o.cy)(e.doc.toJSON(),e=>"paywall"===e.type),a=e=>(t,n)=>{if(!r(t))return!1;let{schema:o,tr:a}=t,u=o.nodes.paywall.create();return 1===a.selection.anchor?c(e)(t,n):(a.insert(a.selection.anchor,u),n&&(n(a),e()),!0)},c=e=>(t,n)=>{if(!r(t))return!1;let{schema:o,tr:a}=t,c=o.nodes.paywall.create(),u=0,i=0;for(;u<10&&i<3;){let e=t.doc.resolve(u).nodeAfter;if(!e)break;u+=e.nodeSize,i++}return a.insert(u,c),n&&(n(a),e()),!0}},82061:function(e,t,n){n.d(t,{D:()=>a});var o=n(86500),r=n(16044);function a(e){let{msg:t,node:n,err:a,group:u}=e;(0,o.u4)(o.qY.EDITOR_NODE_RENDER_FAILED,{nodeType:n.type.name,nodeAttrs:n.attrs,errMsg:null==a?void 0:a.message});let i=null!=t?t:"Something went wrong";return"block"===u?function(e){let{msg:t}=e,n=document.createElement("div");n.className=r.A.blockContainer;let o=document.createElement("div");o.textContent=t,o.className=r.A.blockTitle;let a=document.createElement("div");a.textContent="Try refreshing the page or try again later.",a.className=r.A.blockSubTitle;let u=document.createElement("div");return u.className=r.A.blockTitleContainer,u.appendChild(o),u.appendChild(a),n.appendChild(c({size:24})),n.appendChild(u),n}({msg:i}):function(e){let{msg:t}=e,n=document.createElement("span");n.className=r.A.inlineContainer;let o=document.createElement("span");return o.className=r.A.inlineText,o.textContent=t,n.appendChild(c({size:10})),n.appendChild(o),n}({msg:i})}function c(e){let{size:t}=e,n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg");o.setAttribute("width","".concat(t)),o.setAttribute("height","".concat(t)),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill","none"),o.setAttribute("stroke","#363737"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round");let r=document.createElementNS(n,"circle");r.setAttribute("d","M12 8V12M12 16H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"),r.setAttribute("cx","12"),r.setAttribute("cy","12"),r.setAttribute("r","10");let a=document.createElementNS(n,"line");a.setAttribute("x1","12"),a.setAttribute("x2","12"),a.setAttribute("y1","8"),a.setAttribute("y2","12");let c=document.createElementNS(n,"line");return c.setAttribute("x1","12"),c.setAttribute("x2","12.01"),c.setAttribute("y1","16"),c.setAttribute("y2","16"),o.appendChild(r),o.appendChild(a),o.appendChild(c),o}}}]);