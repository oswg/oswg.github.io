!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0eb8d18c-b46a-4aca-a91c-3c22a352eeba",e._sentryDebugIdIdentifier="sentry-dbid-0eb8d18c-b46a-4aca-a91c-3c22a352eeba")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["24144"],{95064:function(e,t,n){n.d(t,{HS:()=>N,IS:()=>O,Of:()=>F,Qj:()=>P});var r=n(4006),i=n(38221),a=n.n(i),l=n(69843),s=n.n(l);if(90887==n.j)var d=n(69308);if(52101!=n.j)var o=n(48697);if(52101!=n.j)var c=n(98445);if(90887==n.j)var u=n(8414);if(90887==n.j)var p=n(54718);if(90887==n.j)var h=n(65892);if(90887==n.j)var g=n(32708);if(52101!=n.j)var f=n(72102);if(52101!=n.j)var m=n(75107);var Y=n(17402),_=n(44518),v=n(84605),y=n(77441),I=n(86500),b=n(68410),C=n(35369),D=n(76977),E=n(88774),w=n(63136),T=n(17836),S=n(16291),A=n(50874),k=n(82776),x=n(38610);let R=(0,Y.createContext)({isSearching:!1,items:[],setIsSearching:()=>void 0,setItems:()=>void 0,focusedItemStart:null,setFocusedItemStart:()=>void 0,filteredItems:[],searchTerm:null,setSearchTerm:()=>void 0,hasFiltered:!1}),F=e=>{let{children:t}=e,[n,i]=(0,Y.useState)(!1),[a,l]=(0,Y.useState)([]),[s,d]=(0,Y.useState)(null),[o,c]=(0,Y.useState)(null),{filteredItems:u,setQuery:p,hasFiltered:h}=(0,_.S)({items:a,getKeys:e=>[e.text],sortFunc:(e,t)=>e.start-t.start});return(0,Y.useEffect)(()=>{var e,t;d(null!=(t=null==(e=u[0])?void 0:e.start)?t:null)},[u]),(0,r.Y)(R.Provider,{value:{isSearching:n,setIsSearching:i,items:a,setItems:l,focusedItemStart:s,setFocusedItemStart:d,filteredItems:u,hasFiltered:h,searchTerm:o,setSearchTerm:e=>{c(e),p(e)}},children:t})},O=()=>(0,Y.useContext)(R),N=e=>{let{isEditing:t,setIsEditing:n,setEdits:i,hasEdits:a,handleSubmitEdits:l,handleRegenerateTranscription:s,handleCancelTranscription:c,isTranscribing:u,transcription:p,postId:h,audioUpload:g,onTranscriptionUploadCancelled:f,onTranscriptionUploadError:m,onTranscriptionUploadStarted:Y,onTranscriptionUploaded:_,uploadedFile:v,setUploadedFile:y,isEditingSpeakers:b}=e,{isSearching:E}=O();return(0,r.FD)(D.I1,{gap:16,children:[v&&(0,r.FD)(D.Ye,{alignItems:"center",justifyContent:"space-between",padding:16,radius:"sm",border:"detail",gap:16,children:[(0,r.FD)(D.Ye,{gap:16,alignItems:"center",children:[(0,r.Y)(D.pT,{alignItems:"center",padding:8,radius:"sm",color:"primary",bg:"secondary",children:(0,r.Y)(d.A,{})}),(0,r.FD)(D.I1,{children:[(0,r.Y)(w.EY.B3,{weight:"semibold",color:"primary",children:v.name}),(0,r.Y)(w.EY.B4,{children:(0,k.numberToHumanFileSize)(v.size)})]})]}),(0,r.Y)(C.K0,{onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_EDIT_CANCELLED_CLICKED,{post_id:h}),y(null),c()},children:(0,r.Y)(o.A,{})})]}),t&&(0,r.Y)(j,{hasEdits:a,setIsEditing:n,setEdits:i,handleSubmitEdits:l}),!t&&!E&&(0,r.Y)(L,{isEditingSpeakers:b,setIsEditing:n,transcription:p,isTranscribing:u,handleCancelTranscription:c,handleRegenerateTranscription:s,setUploadedFile:y,postId:h,audioUpload:g,onTranscriptionUploadCancelled:f,onTranscriptionUploadError:m,onTranscriptionUploadStarted:Y,onTranscriptionUploaded:_}),E&&(0,r.Y)(P,{postId:h})]})},L=e=>{var t,n,i;let{transcription:a,isTranscribing:l,handleCancelTranscription:s,handleRegenerateTranscription:d,setUploadedFile:o,postId:f,audioUpload:m,onTranscriptionUploadStarted:Y,onTranscriptionUploadCancelled:_,onTranscriptionUploadError:b,onTranscriptionUploaded:w,setIsEditing:T,isEditingSpeakers:k}=e,{iString:R}=(0,v.GO)(),F=(null==a?void 0:a.created_at)&&new Date(a.created_at)<(0,S.A)().subtract(5,"minutes").toDate(),N=(null==a?void 0:a.status)==="failed",L=(null==a?void 0:a.status)==="transcribed",{setIsSearching:j}=O(),P=null==(t=(null!=(n=null==a?void 0:a.signed_captions)?n:[]).find(e=>"True"===e.original))?void 0:t.url,U=async e=>{if(e.cdn_unaligned_url&&e.cdn_url)try{var t,n,r,i;let a=await fetch(e.cdn_unaligned_url,{headers:{Accept:"text/plain"}}),l=await a.text(),s=JSON.parse(l),d=null!=(n=s.segments)?n:[];Object.keys(null!=(r=s.speaker_map)?r:{}).length>0&&(null==d||null==(t=d[0])?void 0:t.speaker)||(a=await fetch(e.cdn_url,{headers:{Accept:"text/plain"}}),l=await a.text(),d=JSON.parse(l));let o=(0,A.$r)(d,null!=(i=e.speaker_map)?i:{}),c=new Blob([o],{type:"text/plain"}),u=URL.createObjectURL(c),p=document.createElement("a");p.href=u,p.download="transcript_".concat(new Date().toISOString(),".txt"),document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(u)}catch(e){console.error("Failed to fetch and download transcript:",e)}};return(0,r.FD)(D.Ye,{justifyContent:"space-between",gap:8,children:[(0,r.Y)(C.K0,{onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_SEARCH_CLICKED,{post_id:f}),j(!0)},disabled:k,children:(0,r.Y)(c.A,{})}),(0,r.FD)(D.Ye,{gap:8,children:[(0,r.Y)(C.$n,{onClick:d,disabled:!(L&&!F||!l||N)||k,leading:(0,r.Y)(u.A,{size:20}),priority:"secondary",children:R("Regenerate")}),(0,r.Y)(y.f,{setUploadedFile:o,postId:f,mediaUpload:m,transcription:null!=a?a:null,onTranscriptionUploadStarted:Y,onTranscriptionUploadCancelled:_,onTranscriptionUploadError:b,onTranscriptionUploaded:w,disabled:!f||!m||(null==m?void 0:m.state)!=="transcoded"||k}),(0,r.FD)(E.W1,{trigger:(0,r.Y)(C.K0,{priority:"secondary",rounded:!1,children:(0,r.Y)(p.A,{className:x.A.icon})}),children:[(null==a?void 0:a.status)==="transcribed"&&(0,r.FD)(r.FK,{children:[(0,r.Y)(E.H9,{isFirst:!0,children:(0,r.Y)(E.Dr,{disabled:k,onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_EDIT_CLICKED,{post_id:f}),T(!0)},leading:(0,r.Y)(h.A,{}),children:R("Correct transcript")})}),(0,r.FD)(E.H9,{children:[(0,r.Y)(E.Dr,{disabled:k,onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_DOWNLOAD_CLICKED,{post_id:f,type:"txt"}),U(a)},children:R("Download .txt")}),(0,r.Y)(E.Dr,{disabled:k,href:null!=(i=a.cdn_url)?i:void 0,onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_DOWNLOAD_CLICKED,{post_id:f,type:"json"})},children:R("Download .json")}),P&&(0,r.Y)(E.Dr,{disabled:k,href:P,onClick:()=>{(0,I.u4)(I.qY.TRANSCRIPTION_DOWNLOAD_CLICKED,{post_id:f,type:"vtt"})},children:R("Download .vtt")})]})]}),(0,r.Y)(E.H9,{isFirst:(null==a?void 0:a.status)!=="transcribed",children:(0,r.Y)(E.Dr,{disabled:!a||k,priority:"destructive",leading:(0,r.Y)(g.A,{}),onClick:s,children:R("Remove")})})]})]})]})},j=e=>{let{setIsEditing:t,setEdits:n,hasEdits:i,handleSubmitEdits:a}=e,{iString:l}=(0,v.GO)();return(0,r.FD)(D.Ye,{justifyContent:"end",gap:8,children:[(0,r.Y)(C.$n,{onClick:()=>{t(!1),n({})},priority:"secondary",children:l("Cancel")}),(0,r.Y)(C.$n,{priority:"primary",disabled:!i,onClick:a,children:l("Save")})]})},P=e=>{let{postId:t,closeAlwaysVisible:n=!0}=e,{iString:i}=(0,v.GO)(),{isMobile:l}=(0,b.sM)(),d=(0,Y.useRef)(null),{setSearchTerm:u,setIsSearching:p,hasFiltered:h,filteredItems:g,setFocusedItemStart:_,focusedItemStart:y,searchTerm:E}=O();(0,Y.useEffect)(()=>{!E&&d.current&&(d.current.value="")},[E]);let S=g.findIndex(e=>e.start===y),A=()=>{let e=S+1>=g.length?0:S+1,t=g[e];s()(t)?console.warn("nextItem not found at index ".concat(e)):_(t.start)},k=()=>{u(""),p(!1),(0,I.u4)(I.qY.TRANSCRIPTION_SEARCH_CANCELLED,{post_id:t})};return(0,r.FD)(D.Ye,{gap:8,justifyContent:"space-between",alignItems:"center",className:x.A.searchForm,children:[(0,r.Y)(T.c,{ref:d,leftIcon:(0,r.Y)(D.Ye,{children:(0,r.Y)(c.A,{size:16})}),rightIcon:(0,r.Y)(D.Ye,{cursor:"pointer",onClick:k,children:E||n?(0,r.Y)(o.A,{size:16}):null}),placeholder:i("Search"),onChange:a()(e=>{u(e.target.value),(0,I.u4)(I.qY.TRANSCRIPTION_SEARCHED,{post_id:t})},100),onKeyDown:e=>{"Enter"===e.key&&A(),"Escape"===e.key&&k()}}),h&&(0,r.Y)(D.Ye,{gap:8,paddingRight:8*!!l,children:(0,r.FD)(D.Ye,{alignItems:"center",gap:8,children:[(0,r.Y)(w.EY.B4,{paddingLeft:l?4:16,className:x.A.resultsValue,color:"primary",weight:"semibold",children:"".concat(S+1," / ").concat(g.length)}),(0,r.FD)(D.Ye,{children:[(0,r.Y)(C.K0,{priority:"tertiary",size:"sm",onClick:()=>{let e=S-1<0?g.length-1:S-1,t=g[e];s()(t)?console.warn("lastItem not found at index ".concat(e)):_(t.start)},children:(0,r.Y)(f.A,{size:20})}),(0,r.Y)(C.K0,{priority:"tertiary",size:"sm",onClick:A,children:(0,r.Y)(m.A,{size:20})})]})]})})]})}},77441:function(e,t,n){n.d(t,{f:()=>f});var r=n(4006),i=n(17402),a=n(15734),l=n.n(a),s=n(82519),d=n(84605),o=n(86500),c=n(35369),u=n(76977),p=n(88774),h=n(50874);let g=90887==n.j?[".txt",".srt",".vtt"]:null,f=e=>{let{postId:t,mediaUpload:n,transcription:a,onTranscriptionUploadStarted:f,onTranscriptionUploadCancelled:m,onTranscriptionUploadError:Y,onTranscriptionUploaded:_,disabled:v,setUploadedFile:y}=e,{iString:I}=(0,d.GO)(),[b,C]=(0,i.useState)(!1),[D,E]=(0,i.useState)(""),w=a&&"in_progress"===a.status,[T,S]=(0,i.useState)(null),A=async e=>{if(S(e),null==f||f(),e.length>0&&e[0]){var r,i,a;let l;y&&y(e[0]);let s=null!=(r=e[0].name.split(".").pop())?r:"";(0,o.u4)(o.qY.TRANSCRIPTION_UPLOAD_FILE_STARTED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:s}),i=e[0],a=async t=>{E(t);let r=null,i={};try{if("txt"===s){var a;[r,i]=(0,h.b5)(t,null!=(a=null==n?void 0:n.duration)?a:0)}else"vtt"===s?[r,i]=(0,h._b)(t):"srt"===s&&([r,i]=(0,h._b)(t));let l=(0,h.gD)(r);if(r&&!l)await k(e[0],s,r,i);else{let e=I("Error validating transcription file"),t="".concat(e,": ").concat(l);console.error(t),null==Y||Y(t)}}catch(t){let e=I("Error parsing transcription file");console.error(e,t),null==Y||Y(e),y&&y(null)}finally{F()}},(l=new FileReader).onload=e=>{var t;a(null==(t=e.target)?void 0:t.result)},l.readAsText(i)}},k=async(e,r,i,a)=>{let{body:s}=await l().post("/api/v1/drafts/".concat(t,"/upload_transcription/start")).send({speaker_map:a}),{originalTranscriptionFileKey:d,unalignedTranscriptionFileKey:c,alignedTranscriptionFileKey:u}=s;C(!0);try{var p;await l().put(d).send(e).set("Content-Type",e.type),await l().put(c).send(JSON.stringify(i)).set("Content-Type","application/json"),await l().put(u).send(JSON.stringify(null!=(p=null==i?void 0:i.segments)?p:[])).set("Content-Type","application/json"),await l().post("/api/v1/drafts/".concat(t,"/upload_transcription/complete")).send(),await l().post("/api/v1/drafts/".concat(t,"/realign_transcription")).send({edits:{}}).then(e=>{var i;(null==(i=e.body)?void 0:i.data)&&((0,o.u4)(o.qY.TRANSCRIPTION_UPLOAD_FILE_COMPLETED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:r}),C(!1),_(e.body.data),F())})}catch(e){(0,o.u4)(o.qY.TRANSCRIPTION_UPLOAD_FILE_FAILED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:r}),console.error("File upload failed:",e),null==Y||Y(I("Error uploading transcription file"))}};(0,i.useEffect)(()=>{},[D]);let{openFileDialog:x,fileInputRef:R}=function(e){let{onFilesSelected:t}=e,n=(0,i.createRef)(),r=e=>{let n=e.target;n.files&&n.files.length>0&&t(n.files)};return(0,i.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("change",r),()=>{e.removeEventListener("change",r)}},[n]),{openFileDialog:()=>{var e;null==(e=n.current)||e.click()},fileInputRef:n}}({onFilesSelected:A}),F=()=>{S(null),R.current&&(R.current.value=""),null==m||m()},O=null==T?void 0:T[0],N=e=>{(0,o.u4)(o.qY.TRANSCRIPTION_UPLOAD_FILE_TYPE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:e}),R.current&&(R.current.accept=e,setTimeout(()=>x(),50))};return w?null:(0,r.FD)(u.I1,{gap:8,children:[!b&&(0,r.FD)(p.W1,{onOpen:()=>{(0,o.u4)(o.qY.TRANSCRIPTION_UPLOAD_FILE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id})},trigger:(0,r.Y)(c.$n,{disabled:v,priority:"secondary",trailing:(0,r.Y)(s.A,{}),children:I("Upload transcript")}),children:[(0,r.Y)(p.Dr,{onClick:()=>N(".txt"),children:I("Upload .txt file")}),(0,r.Y)(p.Dr,{onClick:()=>N(".vtt"),children:I("Upload .vtt file")}),(0,r.Y)(p.Dr,{onClick:()=>N(".srt"),children:I("Upload .srt file")})]}),O&&(0,r.Y)(u.I1,{gap:8}),(0,r.Y)("input",{type:"file",ref:R,style:{display:"none"},accept:g.join(",")})]})}},60346:function(e,t,n){n.d(t,{H:()=>g});var r=n(4006),i=n(32485),a=n.n(i),l=n(72880),s=n(84605),d=n(17028),o=n(46453),c=n(11510),u=n(49807);if(52101!=n.j)var p=n(57324);var h=n(44307);function g(e){let{onDismiss:t,version:n,asParent:i}=e,l=(0,c.Iu)();return(0,r.FD)(d.I1,{borderTop:i?"detail":"transparent",gap:8,justifyContent:"center",alignItems:"center",className:a()(h.A.transparentLoginPrompt,"app"===n&&h.A.appPrompt,i&&h.A.asParent),minHeight:l?400:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["login"===n&&(0,r.Y)(f,{}),"app"===n&&(0,r.Y)(m,{onDismiss:t})]})}function f(){let{iString:e}=(0,s.GO)(),{requireLogin:t,onboardingModal:n}=(0,o.eE)();return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.EY,{size:19,color:"primary",font:"display",fontWeight:"semibold",translated:!0,children:"Log in for more"}),(0,r.Y)(d.EY,{color:"secondary",size:15,translated:!0,children:"Or create an account"}),(0,r.FD)(d.Ye,{gap:8,paddingTop:8,children:[(0,r.Y)(d.$n,{style:{width:"138px"},size:"sm",priority:"secondary-outline",onClick:()=>null==t?void 0:t(),children:e("Login")}),(0,r.Y)(d.$n,{onClick:()=>{null==n||n.open()},style:{width:"138px"},size:"sm",priority:"primary",children:e("Create account")})]})]})}function m(e){let{onDismiss:t}=e,{iString:n}=(0,s.GO)();return(0,r.FD)(d.I1,{alignItems:"center",gap:16,paddingY:16,paddingX:24,paddingTop:32,children:[(0,r.Y)(d.pT,{width:48,paddingY:4,radius:"md",border:"detail",alignItems:"center",justifyContent:"center",bg:"primary",children:(0,r.Y)(l.o,{src:"https://substack.com/img/substack.png",maxWidth:40,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,r.Y)(d.EY.B2,{size:17,textAlign:"center",font:"display",fontWeight:"semibold",translated:!0,children:"Get every post and note from creators you love with the Substack app."}),(0,r.FD)(d.I1,{style:{width:"100%"},padding:16,gap:8,children:[(0,r.Y)(d.$n,{size:"md",priority:"primary",onClick:t,href:(0,u._h3)({tab:"notes",redirect:"app-store",utm_source:p.VU.menu}),newTab:!0,children:n("Switch to the app")}),(0,r.Y)(d.$n,{onClick:t,size:"md",priority:"secondary",children:n("Maybe later")})]})]})}},72678:function(e,t,n){n.d(t,{g:()=>p});var r=n(4006);if(52101!=n.j)var i=n(50802);var a=n(17402),l=n(84605),s=n(12501),d=n(68349),o=n(88774),c=n(36372),u=n(39318);function p(e){let{pub:t}=e,{iString:n}=(0,l.GO)(),{popToast:p}=(0,c.d)(),{refetch:h,isLoading:g}=(0,s.st)({pathname:"/api/v1/live_stream/recording",method:"post"}),f=(0,a.useCallback)(async()=>{let e=await h();"id"in e?(0,d.V2)("".concat((0,u.$_T)({subdomain:t.subdomain}),"/publish/recording/").concat(e.id,"?startPractice=true")):p(()=>(0,r.Y)(c.y,{text:n("Something went wrong. Please try again.")}))},[h,t.subdomain]);return(0,r.Y)(o.Dr,{leading:(0,r.Y)(i.A,{}),disabled:g,onClick:f,children:n("Record a podcast")})}},8665:function(e,t,n){n.d(t,{Q:()=>a});var r=n(4006),i=n(59085);function a(){return(0,r.Y)(i.A,{size:12,color:"var(--color-fg-secondary)"})}},89256:function(e,t,n){n.d(t,{Lx:()=>S,Wp:()=>w,X_:()=>E,_V:()=>k,cY:()=>T});var r=n(69277),i=n(70408),a=n(4006),l=n(32485),s=n.n(l),d=n(43954),o=n(54718),c=n(56195),u=n(17402),p=n(86500);n(56804);var h=n(12501),g=n(76528),f=n(17028),m=n(97515),Y=n(88774),_=n(65228),v=n(31679),y=n(70486),I=n(62488),b=n(93427),C=n(39318),D=n(35407);function E(e){var t;let{onClick:n}=e,r=(0,y.Pk)();return r.inbox.pendingInviteCount?(0,a.Y)(f.VP,{className:s()(D.A.invitesRow),children:(0,a.FD)(v._h,{onClick:n,children:[(null!=(t=r.inbox.pendingInviteUnreadCount)?t:0)>0&&(0,a.Y)(b.XV,{className:D.A.unreadDot}),(0,a.Y)(f.fI,{width:56,justifyContent:"center",alignItems:"center",children:(0,a.Y)(d.A,{size:20})}),(0,a.Y)(v.Ru,{children:(0,a.FD)(f.fI,{justifyContent:"space-between",alignItems:"center",children:[(0,a.Y)(f.EY.B3,{weight:"semibold",translated:!0,children:"Requests"}),(0,a.Y)(f.EY.B4,{color:"secondary",flex:"auto"})]})})]})}):null}function w(){return(0,a.Y)(Y.W1,{trigger:(0,a.Y)(f.K0,{"aria-label":"View more",priority:"tertiary",children:(0,a.Y)(o.A,{size:20})}),children:(0,a.Y)(Y.Dr,{href:(0,C.tFi)({section:"privacy"}),target:"_blank",leading:(0,a.Y)(c.A,{}),children:(0,a.Y)(f.EY.B3,{weight:"semibold",children:"Messaging settings"})})})}function T(e){let t=[],n=[...(null==e?void 0:e.threads)||[],...(null==e?void 0:e.spamThreads)||[]];for(let e of null!=n?n:[])if("direct-message"===e.type){var a,l;t.push((0,i._)((0,r._)({},e),{members:e.messageThread.members.map(e=>{let{user:t}=e;return t}),messageThreadId:e.messageThread.id,recentMessageId:null!=(l=null==(a=e.recentMessage)?void 0:a.id)?l:null,recentMessage:e.recentMessage?{comment:e.recentMessage,userId:e.recentMessage.user_id}:null}))}return t}function S(e){let{error:t,items:n,isLoading:r,selectedConversationId:i,onSelect:l}=e,s=(0,I.Z)(),{refetch:d}=(0,h.st)({pathname:"/api/v1/messages/inbox/invites/seen",method:"POST",auto:!1});return(0,u.useEffect)(()=>{r||(d(),(0,p.u4)(p.qY.DIRECT_MESSAGE_REQUESTS_VIEWED,{pending_conversation_requests:n.length,surface:s}))},[r]),(0,a.Y)(a.FK,{children:t?(0,a.Y)(a.FK,{children:"'Error'"}):r?(0,a.Y)(v.S,{}):(0,a.Y)(f.VP,{paddingY:12,gap:8,flex:"grow",children:n.length?n.map(e=>(0,a.Y)(_.L,{item:e,onSelect:(t,n)=>l(e.messageThread.id,n),isUnread:!e.lastViewedAt,isSelected:i===e.messageThread.id,tab:"requests"},e.id)):(0,a.Y)(A,{})})})}function A(e){let{spam:t}=e;return(0,a.Y)(f.VP,{flex:"grow",justifyContent:"center",alignItems:"center",sizing:"border-box",children:(0,a.Y)(m.p,{title:t?"No spam requests yet":"No requests yet",description:t?"Message requests that may be low-quality or unwanted will appear here.":"Control whose messages arrive as requests in your Settings.",button:t?void 0:(0,a.Y)(f.$n,{priority:"primary-mono",href:(0,C.tFi)({section:"privacy"}),newTab:!0,size:"sm",children:"Go to Settings"})})})}function k(){return(0,g.OU)("/api/v1/messages/dm/invites")}},30:function(e,t,n){function r(e,t){return e.map(t).filter(e=>null!=e)}function i(e,t,n){let r=e.slice();return r[t]=n,r}n.d(t,{A6:()=>i,Gt:()=>r}),n(58156)},54542:function(e,t,n){function*r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let r=e;r<t;r+=n)yield r}function*i(e){let t=Array.from(e);for(let e=t.length-1;e>=0;e--)yield t[e]}n.d(t,{BE:()=>i,y1:()=>r})},50874:function(e,t,n){n.d(t,{$r:()=>f,_b:()=>h,b5:()=>u,gD:()=>g,qD:()=>c});var r=n(69277),i=n(70408);n(39944);var a=n(69843),l=n.n(a),s=n(82776);let d=90887==n.j?[{regex:/\((\d{2}):(\d{2}):(\d{2})\):/,parse:e=>3600*parseInt(e[1])+60*parseInt(e[2])+parseInt(e[3])},{regex:/\((\d{2}):(\d{2})\):/,parse:e=>60*parseInt(e[1])+parseInt(e[2])},{regex:/\((\d{2}:\d{2}\.\d{1,3})\)/,parse:e=>{let[t,n]=e[1]?e[1].split(":").map(parseFloat):[0,0];return 60*t+n}}]:null,o=90887==n.j?[{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s*\(\d{2}:\d{2}\.\d{1,3}\)$/,parse:e=>e[1]}]:null,c=e=>{let{rows:t,maxWordsPerRow:n=60}=e;if(l()(t[0]))return[];let a=[],s=(0,i._)((0,r._)({},t[0]),{words:t[0].words.map(e=>(0,i._)((0,r._)({},e),{originalIndex:0}))});for(let e=1;e<t.length;e++){let l=t[e];if(!l)continue;let d=(0,i._)((0,r._)({},l),{words:l.words.map(t=>(0,i._)((0,r._)({},t),{originalIndex:e}))});s.speaker===d.speaker&&s.words.length+d.words.length<=n?s={start:s.start,end:d.end,text:"".concat(s.text," ").concat(d.text),words:s.words.concat(...d.words),speaker:s.speaker}:(a.push(s),s=d)}return a.push(s),a},u=(e,t)=>{let n=e.split("\n"),a=[],l="",s="",c=0,u=0,p=new Set,h={},g=0;return n.forEach((e,r)=>{var i,f;let m=null!=(i=d.find(t=>!!e.match(t.regex)))?i:null,Y=null!=(f=o.find(t=>!!e.match(t.regex)))?f:null,_=e.trim();if(m){let t=e.match(m.regex);t&&(u=m.parse(t),s&&(a.push({speaker:h[l],start:c,end:u,text:s.trim(),words:[]}),s=""),c=u,_=_.replace(m.regex,""))}if(Y){let t=e.match(Y.regex);t&&(l=Y.parse(t),p.has(l)||(p.add(l),h[l]="SPEAKER_".concat(g++)),s+="".concat(_.substring(l.length)," "))}else""!==_.trim()&&(s+="".concat(_," "));r===n.length-1&&s&&a.push({speaker:h[l],start:c,end:t,text:s.trim(),words:[]})}),[{segments:a},Object.entries(h).reduce((e,t)=>(0,i._)((0,r._)({},e),{[t[1]]:t[0]}),{})]};function p(e){let[t,n,r]=e.split(":").map(parseFloat);return 3600*t+60*n+r}let h=e=>{let t=e.split("\n").map(e=>e.trim()),n=[],a=new Set,s={},d=0;for(let e=0;e<t.length;e++){let r=t[e];if(l()(r))continue;let i=r.trim();if(i.includes("--\x3e")){let r=i.split(" --\x3e ").map(e=>e.trim()),o=p(r[0]),c=p(r[1]);e++;let u=[],h="";for(;e<t.length&&!l()(t[e])&&""!==t[e].trim();){let n=t[e].trim();if(n.startsWith("<v ")){let e=n.match(/<v\s+([^>]+)>/);if(e&&e[1]){h=e[1].trim(),a.has(h)||(a.add(h),s[h]="SPEAKER_".concat(d++));let t=n.indexOf(">")+1;t<n.length&&u.push(n.substring(t).trim())}}else u.push(n);e++}n.push({speaker:s[h],start:o,end:c,text:u.join(" ").trim(),words:[]})}}return[{segments:n},Object.entries(s).reduce((e,t)=>(0,i._)((0,r._)({},e),{[t[1]]:t[0]}),{})]},g=e=>e?e.segments.some(e=>!e.text)?"Segment text is missing":e.segments.some(e=>l()(e.end)||l()(e.start))?"Segment start or end time is missing":null:"Transcription is missing",f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e.forEach(e=>{let r="(".concat((0,s.secondsToHHMMSS)(e.start,{strict:!0}),"):\n").concat(e.text.trim(),"\n");if(Object.keys(t).length>0){var i;let a=t[null!=(i=e.speaker)?i:""];a?n.push("".concat(a," ").concat(r)):n.push(r)}else e.user_id?n.push("user_".concat(e.user_id," ").concat(r)):n.push(r)}),n.join("\n")}}}]);