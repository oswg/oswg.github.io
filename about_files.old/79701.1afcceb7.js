!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"substack@af5f699"};var t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7ece11b8-ebe9-4d99-8026-65bc5ef1fd31",e._sentryDebugIdIdentifier="sentry-dbid-7ece11b8-ebe9-4d99-8026-65bc5ef1fd31")}catch(e){}}();"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["79701"],{39625:function(e,t,n){n.d(t,{A:()=>i});let i={textInput:"textInput-kYr7wC"}},72032:function(e,t,n){n.d(t,{A:()=>i});let i={header:"header-m3czQu",headerWithJustTitle:"headerWithJustTitle-AWuTLu",noImage:"noImage-VVe5Lh",actions:"actions-mMxsK2",thickRule:"thickRule-c8r1qH",bodyWrapperTwoMiddleColumns:"bodyWrapperTwoMiddleColumns-EOoshF",notifyButton:"notifyButton-wkevVH",hoverText:"hoverText-OtXqlP",notifyButtonInternal:"notifyButtonInternal-wv0x02",titleNotifyButton:"titleNotifyButton-bWyjlY",caret:"caret-vNjCU3",collapsed:"collapsed-KQpXLZ"}},45663:function(e,t,n){n.d(t,{A:()=>i});let i={specialFeatureHeaderContainer:"specialFeatureHeaderContainer-Skrlng",thickRule:"thickRule-oguYhe",threeColumnContainer:"threeColumnContainer-ziuSvf",mediumRule:"mediumRule-wQbBfo",headerButtonMobile:"headerButtonMobile-DURJFG",america250HomepageHeader:"america250HomepageHeader-Gp7Pmn",a250Rule:"a250Rule-oAzvtB",a250Logo:"a250Logo-sb3SfS"}},22232:function(e,t,n){n.d(t,{A:()=>i});let i={noAnimation:"noAnimation-jU0t5u"}},78918:function(e,t,n){n.d(t,{A:()=>i});let i={container:"container-xlqXTa",containerHoverLight:"containerHoverLight-pv1hHj"}},60996:function(e,t,n){n.d(t,{k:()=>g});var i=n(79785),l=n(4006),r=n(17402),o=n(84605),a=n(45064),s=n(76977),d=n(16993),c=n(57820),u=n(18947),p=n(49807),h=n(81675);function m(){let e=(0,i._)([""," by ",""]);return m=function(){return e},e}function g(e){let{onClose:t,post:n,pub:i,comment:g}=e,{iString:v,iTemplate:Y,language:f}=(0,o.GO)(),[b,y]=(0,r.useState)({width:400,height:400}),[_,w]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!g&&!n)return;let e=e=>{e.data.iframeHeight&&(y({width:500,height:e.data.iframeHeight}),w(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[g,n]);let C=g?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat("".concat(g.body||""),"</p>").concat(g.name?"<p> - ".concat(g.name,"</p>"):g.handle?"<p> - @".concat(g.handle,"</p>"):"",'<a data-comment-link href="').concat((0,p.Zgx)(g),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):i&&n?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat(Y(m(),n.title,i.author_name),"</p><p>").concat(n.subtitle,'</p><a data-post-link href="').concat((0,u.st)(i,n.slug),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):"",{width:I,height:S,scaler:D}=(e=>{let{width:t,height:n}=e,i="undefined"!=typeof window?window.innerHeight:1/0,l=1;return i<700?l=.7:i<800?l=.75:i<900&&(l=.8),{width:t*l,height:n*l,scaler:l}})(b);return(0,l.FD)(l.FK,{children:[(0,l.Y)(d.rQ,{title:v("Embed note"),showDivider:!0,showClose:!0,onClose:t}),(0,l.Y)(d.cw,{gap:20,children:(0,l.FD)(s.VP,{style:{width:_?I:void 0,height:S},minHeight:_?void 0:220,bg:"secondary",radius:"md",overflow:"hidden",border:"detail",children:[(0,l.Y)("iframe",{ref:k,style:{transform:"scale(".concat(D,")"),width:b.width,height:b.height,display:_?"block":"none"},className:h.A.iframe,src:g?(0,p.RYA)(g,{isPreview:!0}):i&&n?(0,u.ti)(i,n.slug,{isPreview:!0}):"",onLoad:()=>{w(!0)}}),!_&&(0,l.Y)(s.ov,{flex:"grow",children:(0,l.Y)(c.y$,{})})]})}),(0,l.Y)(d.jl,{direction:"column",primaryButton:(0,l.Y)(a.c,{value:C,confirmationText:v("Copied code to clipboard")})})]})}},30796:function(e,t,n){n.d(t,{h:()=>c});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(10278),s=n(76977),d=n(71305);function c(e){let{className:t,assets:n,readOnly:l,onClick:c,maxHeight:p=420,children:h,feedItem:m,commentId:g}=e,v=(0,a.Cu)(n),[Y,f]=(0,o.useState)(null),b=(0,o.useRef)(null),y=(0,a.wY)(b,0),[_,w]=v;if(!_||!w)return null;let k=_.width&&_.height?_.width/_.height:1,C=w.width&&w.height?w.width/w.height:1,I=k+C,S=y-6,D=Math.min(p,S/I),F=[S*k/I,S*C/I];return(0,i.FD)(s.pT,{ref:b,className:r()(d.A.imageDiptych,t),gap:6,overflow:"hidden",children:[v.map((e,t)=>(0,i.Y)(u,{asset:e.src,explicit:e.explicit,readOnly:l,width:F[t],height:D,index:t,onClick:l?void 0:n=>{n.preventDefault(),c&&c({attachmentId:e.id,attachmentType:"image"}),f({index:t})},children:h},e.src)),!l&&(0,i.Y)(a.yx,{assets:v,imageViewer:Y,setImageViewer:f,readOnly:l,feedItem:m,commentId:g})]})}function u(e){let{asset:t,explicit:n,onClick:l,readOnly:o,width:s=500,height:c,children:u,index:p}=e;return(0,i.Y)(a.Vn,{asset:t,explicit:n,onClick:l,readOnly:o,width:s,height:c,className:r()(d.A.diptychImage,d.A["index-".concat(p+1)]),children:u})}},30653:function(e,t,n){n.d(t,{M:()=>x});var i=n(79785),l=n(4006),r=n(32485),o=n.n(r),a=n(17402),s=n(8853),d=n(71900),c=n(9599),u=n(2538),p=n(84605),h=n(86500),m=n(68349),g=n(24078),v=n(89490),Y=n(35369),f=n(16993),b=n(84843),y=n(81203),_=n(46453),w=n(11510),k=n(39318),C=n(57324),I=n(82130);function S(){let e=(0,i._)(["Tell "," you appreciate their post"]);return S=function(){return e},e}function D(){let e=(0,i._)(["Join the discussion for ","'s post"]);return D=function(){return e},e}function F(){let e=(0,i._)(["Quickly share posts with your followers"]);return F=function(){return e},e}let P=[{angle:-25,rotation:5,scale:1,flip:!1},{angle:135,rotation:-5,scale:.66,flip:!0}];function x(e){let{isOpen:t,setOpen:n,author:i,pub:r,action:o,postId:s,postSlug:d}=e,c=(0,w.Iu)(),{iString:u,iTemplate:g}=(0,p.GO)(),{requireLogin:v}=(0,_.eE)();if((0,a.useEffect)(()=>{t&&(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SHOWN,{action:o,author_id:null==i?void 0:i.id,post_id:s})},[t,o,i,s]),!i||!r)return null;let y=()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_DISMISSED,{action:o,author_id:null==i?void 0:i.id,post_id:s}),n(!1)},I={like:u("Like this in the app"),comment:u("Comment in the app"),restack:u("Restack this in the app")},P={like:g(S(),i.name),comment:g(D(),i.name),restack:g(F())},x=I[o],A=P[o];return(0,l.FD)(f.aF,{isOpen:t,onClose:y,children:[(0,l.Y)(b.rQ,{icon:(0,l.Y)(T,{action:o,author:i,pub:r}),alignItems:"center",title:x,description:A,showClose:!0,onClose:y}),(0,l.Y)(f.q1,{}),(0,l.Y)(f.jl,{direction:"column",primaryButton:(0,l.Y)(Y.$n,{priority:"primary",onClick:()=>{if((0,h.u4)(h.qY.POST_UFI_APP_UPSELL_GET_APP_CLICKED,{action:o,author_id:null==i?void 0:i.id,post_id:s,is_mobile:c}),c){let e=(0,k.XV8)(r.subdomain,d,{redirect:"app-store",source:C.VU.postUfiModal});(0,m.V2)(e,{newTab:!0}),n(!1)}},children:u(c?"Open Substack":"Get the app")}),secondaryButton:(0,l.Y)(Y.$n,{priority:"secondary",onClick:()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SIGN_IN_CLICKED,{action:o,author_id:null==i?void 0:i.id,post_id:s}),n(!1),null==v||v()},children:u("Sign in")})})]})}function T(e){let{action:t,author:n,pub:i}=e,r=n.photo_url?(0,l.Y)(g.eu,{photoUrl:n.photo_url,size:84,className:I.A.avatar}):i.logo_url?(0,l.Y)(y.Nq,{pub:i,size:84,className:I.A.avatar}):(0,l.Y)(s.c,{src:"/img/substack-app-icon.png",width:84,height:84});return(0,l.FD)(v.az,{position:"relative",width:84,height:84,children:[r,P.map((e,n)=>(0,l.Y)(A,{config:e,action:t},n))]})}function A(e){let{config:t,action:n}=e,i=t.angle*Math.PI/180,r=46*Math.cos(i),o=46*Math.sin(i);return(0,l.Y)(v.az,{className:I.A.stickerContainer,style:{"--sticker-x":"".concat(r,"px"),"--sticker-y":"".concat(o,"px"),"--sticker-scale":t.scale,"--sticker-rotation":"".concat(t.rotation,"deg"),"--sticker-flip":t.flip?"-1":"1"},children:(0,l.Y)(E,{action:n})})}function E(e){let{action:t}=e;return"like"===t?(0,l.Y)(c.A,{size:32,className:o()(I.A.sticker,I.A.like)}):"comment"===t?(0,l.Y)(d.A,{size:32,className:o()(I.A.sticker,I.A.comment)}):"restack"===t?(0,l.Y)(u.A,{size:32,className:o()(I.A.sticker,I.A.restack)}):null}},13950:function(e,t,n){n.d(t,{DH:()=>d,xF:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(10996),s=n(6045);function d(e){let{prefix:t,children:n}=e;if(t){let e="header"===t?s.A.headerTheme:"footer"===t?s.A.footerTheme:s.A.footerSecondaryTheme;return(0,i.Y)(c.Provider,{value:t,children:(0,i.Y)("div",{className:r()(s.A.pubTheme,e),children:n})})}return(0,i.Y)(a.NP,{theme:s.A.pubTheme,children:n})}let c=(0,o.createContext)(null);function u(){let e=(0,o.useContext)(c);return{onOpen:o.default.useCallback(()=>{let t=document.getElementById("menu-portal");if(!t||!e)return;let n="header"===e?s.A.headerTheme:"footer"===e?s.A.footerTheme:s.A.footerSecondaryTheme;t.className=r()(s.A.pubTheme,n)},[e]),onClose:o.default.useCallback(()=>{let e=document.getElementById("menu-portal");e&&(e.className="")},[])}}},7e4:function(e,t,n){n.d(t,{b:()=>I});var i=n(79785),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(84605),d=n(35369),c=n(33727),u=n(60322),p=n(76977),h=n(16993),m=n(81203),g=n(63136),v=n(36372),Y=n(39318),f=n(82776);function b(){let e=(0,i._)(["Recommend ","?"]);return b=function(){return e},e}function y(){let e=(0,i._)(["Recommend "," and "," other Substacks?"]);return y=function(){return e},e}function _(){let e=(0,i._)(["Since you embedded "," in your post, we thought you might like to recommend them to your subscribers."]);return _=function(){return e},e}function w(){let e=(0,i._)(["Since you embedded these Substacks in your post, we thought you might like to recommend them to your subscribers."]);return w=function(){return e},e}function k(){let e=(0,i._)(["Recommend "," Substack"]);return k=function(){return e},e}function C(){let e=(0,i._)(["Recommend "," Substacks"]);return C=function(){return e},e}function I(e){var t,n;let{pub:i,pubsToRecommend:o}=e,{iString:c,iTemplate:u,iPlural:m}=(0,s.GO)(),g=(0,v.d)(),[Y,f]=(0,r.useState)(!0),[I,D]=(0,r.useState)(!1),[F,P]=(0,r.useState)(new Set((o||[]).map(e=>e.id)));if(0===o.length||!o[0])return null;let x=()=>{f(!1)},T=async()=>{try{D(!0);let e=Array.from(F);await a().put("/api/v1/recommendations/multiple").send({recommending_publication_id:i.id,recommended_publication_ids:e,source:"post_publish_cta",suggested:e.map(()=>!0)}),e.length&&g.popToast(()=>(0,l.Y)(v.y,{text:m("Added %1 recommendation","Added %1 recommendations",e.length)})),x()}catch(e){console.error("Failed to add recommendations: ",e),g.popToast(()=>(0,l.Y)(v.y,{text:c("Failed to add recommendations")})),x()}finally{D(!1)}},A=F.size,E=1===o.length?u(b(),o[0].name):u(y(),o[0].name,o.length-1),N=1===o.length?u(_(),null!=(n=null==(t=o[0])?void 0:t.name)?n:""):u(w());return(0,l.Y)(l.FK,{children:Y?(0,l.FD)(h.aF,{isOpen:Y,onClose:x,children:[(0,l.Y)(h.rQ,{title:E,description:N,onClose:x,showClose:!0,showDivider:!0}),(0,l.Y)(h.cw,{children:(0,l.Y)(p.VP,{gap:16,children:o.map(e=>(0,l.Y)(S,{pub:e,checked:F.has(e.id),onChange:()=>{var t;let n;return t=e.id,void((n=new Set(F)).has(t)?n.delete(t):n.add(t),P(n))}},e.id))})}),(0,l.Y)(h.jl,{showDivider:!0,primaryButton:(0,l.Y)(d.$n,{onClick:T,disabled:0===A,loading:I,children:0===A?c("Recommend"):u(1===A?k():C(),A)}),secondaryButton:(0,l.Y)(d.$n,{onClick:x,priority:"secondary",children:c("Cancel")})})]}):null})}function S(e){let{pub:t,checked:n,onChange:i}=e;return(0,l.Y)("label",{children:(0,l.FD)(c.Z,{padding:12,gap:12,direction:"row",alignItems:"center",cursor:"pointer",children:[(0,l.Y)(m.wg,{pub:t,size:40,openInNewTab:!0}),(0,l.FD)(p.VP,{gap:2,flex:"grow",children:[(0,l.Y)(g.EY.B3,{children:(0,l.Y)(g.Yq,{href:(0,Y.$_T)(t),target:"_blank",children:t.name})}),(0,l.Y)(g.EY.B4,{color:"secondary",children:(0,f.getByLine)(t)})]}),(0,l.Y)(u.S,{name:"pub-".concat(t.id),checked:n,onChange:i,size:"sm"})]})})}},84236:function(e,t,n){n.d(t,{Jq:()=>u,pJ:()=>p});var i=n(69277),l=n(70408),r=n(4006),o=n(76977),a=n(63136),s=n(39318),d=n(49807);let c=(e,t)=>{var n;return null==(n=e.sponsorship_campaigns)?void 0:n.find(e=>{let n="podcast"===e.campaign_type,i=e.section_id&&t&&e.section_id===t.id,l=!e.section_id&&!t;return n&&(i||l)})},u=(e,t)=>!!c(e,t),p=e=>{var t;let{align:n="left",direction:u="row",gap:p=16,pub:h,post:m=null,section:g=null,textField:v="short_text",imageHeight:Y=16,paddingY:f,paddingX:b}=e,y=c(h,g);if(!y)return null;let _="episode_short_text"===v?y.episode_short_text:y.short_text;if(!_)return null;let w=(0,s.qCG)({campaignId:y.id,medium:"podcast",pubId:h.id,url:y.link_url,postId:null==m?void 0:m.id,referrer:"undefined"!=typeof window?window.location.href:void 0}),k=(0,r.FD)(r.FK,{children:[(0,r.Y)(a.EY.Digit,{color:"pub-secondary-text",weight:"regular",children:_}),y.image_url&&(0,r.Y)("img",{alt:null!=(t=y.image_alt_text)?t:"",src:(0,d.dJ9)(y.image_url,250),style:{width:"auto",height:Y}})]}),C=(0,i._)({alignItems:"center",as:"a",gap:p,href:w,target:"_blank",justifyContent:(()=>{switch(n){case"center":return"center";case"right":return"end";default:return}})()},f&&{paddingY:f},b&&{paddingX:b});return"column"===u?(0,r.Y)(o.I1,(0,l._)((0,i._)({},C),{children:k})):(0,r.Y)(o.Ye,(0,l._)((0,i._)({},C),{children:k}))}},4013:function(e,t,n){n.d(t,{A:()=>d});var i=n(69277),l=n(70408),r=n(4006),o=n(32641),a=n(97731);let s=e=>{var{name:t,children:n}=e,s=(0,o._)(e,["name","children"]);return(0,r.Y)(a.A,(0,l._)((0,i._)({},s),{name:t,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"},children:n}))},d=e=>(0,r.FD)(s,(0,l._)((0,i._)({},e),{name:"ActivationUsersIcon",children:[(0,r.Y)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"})]}))},32999:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=24,color:n="var(--color-utility-white)",className:s}=e,d=(0,r._)(e,["size","color","className"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},d),{name:"EyeIconFilled",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:n,className:s,children:(0,o.Y)("path",{d:"M11.869 18.1925C17.6987 18.1925 21.7307 13.4687 21.7307 11.9962C21.7307 10.5163 17.6914 5.7998 11.869 5.7998C6.11209 5.7998 2 10.5163 2 11.9962C2 13.4687 6.11209 18.1925 11.869 18.1925ZM11.869 16.0566C9.59825 16.0566 7.79331 14.2123 7.79331 11.9962C7.79331 9.72174 9.59825 7.93573 11.869 7.93573C14.1179 7.93573 15.9374 9.72174 15.9374 11.9962C15.9374 14.2123 14.1179 16.0566 11.869 16.0566ZM11.869 13.4614C12.6769 13.4614 13.3464 12.7981 13.3464 11.9962C13.3464 11.187 12.6769 10.5236 11.869 10.5236C11.0538 10.5236 10.3843 11.187 10.3843 11.9962C10.3843 12.7981 11.0538 13.4614 11.869 13.4614Z"})}))}},46137:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,l._)((0,i._)({},e),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"},children:[(0,r.Y)("circle",{cx:"3.93749",cy:"5.97916",r:"3.4375"}),(0,r.Y)("path",{d:"M8.39583 9.49273C8.39583 11.3912 6.85681 12.9302 4.95833 12.9302C3.05985 12.9302 1.52083 11.3912 1.52083 9.49273C1.52083 7.59425 3.05985 6.05523 4.95833 6.05523C6.85681 6.05523 8.39583 7.59425 8.39583 9.49273Z"}),(0,r.Y)("path",{d:"M12.4792 9.49273C12.4792 11.3912 10.9402 12.9302 9.04172 12.9302C7.14324 12.9302 5.60422 11.3912 5.60422 9.49273C5.60422 7.59425 7.14324 6.05523 9.04172 6.05523C10.9402 6.05523 12.4792 7.59425 12.4792 9.49273Z"}),(0,r.Y)("circle",{cx:"6.99999",cy:"3.9375",r:"3.4375"}),(0,r.Y)("circle",{cx:"10.0625",cy:"5.97916",r:"3.4375"})]}))},3364:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{color:t="#262626"}=e,n=(0,r._)(e,["color"]);return(0,o.FD)(a.A,(0,l._)((0,i._)({},n),{name:"LockThinIcon",svgParams:{height:16,width:16},children:[(0,o.Y)("path",{className:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:t}),(0,o.Y)("path",{className:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:t,stroke:t})]}))}},20297:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(33167),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideArrowUpRight",svgParams:{height:24,width:24},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},89839:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(57157),a=n(97731);let s=function(e){return(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))}},18325:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(54687),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideComments",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},43427:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(23345),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideHeart",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},14394:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(60927),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},78330:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"LucideShare",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M12.4376 15.6C4.77778 15.6 2 20.3999 2 20.3999C2 12.5999 5.88889 8.4 12.4376 8.4V3L22 11.9812L12.4376 21V15.6Z",strokeWidth:e.strokeWidth,fill:e.fill,className:"lucide",strokeLinecap:"round",strokeLinejoin:"round"})})}))},58299:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"NoteForwardIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,r.Y)("path",{d:"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12",strokeLinecap:"round","stroke-linejoin":"round"})}))},71941:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=24,color:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","color"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},s),{name:"NoteQuoteForwardIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,stroke:n,strokeWidth:2,fill:"none",children:(0,o.Y)("path",{d:"M13.4147 2.09993C10.4072 1.67249 7.2423 2.61548 4.92891 4.92887C1.02366 8.83411 1.02366 15.1658 4.92891 19.071C8.83415 22.9762 15.1658 22.9762 19.071 19.071C21.3844 16.7576 22.3274 13.5927 21.9 10.5852M18.5 2.62126C18.8978 2.22343 19.4374 1.99994 20 1.99994C20.5626 1.99994 21.1021 2.22343 21.5 2.62126C21.8978 3.01908 22.1213 3.55865 22.1213 4.12126C22.1213 4.68387 21.8978 5.22343 21.5 5.62126L13 14.1213L8.99998 15.1213L9.99998 11.1213L18.5 2.62126Z",strokeLinecap:"round","stroke-linejoin":"round"})}))}},26184:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,l._)((0,i._)({},e),{name:"PinIconSmall",svgParams:{height:16,width:14},children:[(0,r.Y)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),(0,r.Y)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),(0,r.Y)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"})]}))},23747:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"YoutubeIcon",svgParams:{height:24,width:24},children:(0,r.Y)("path",{d:"M21.582 6.07467C21.352 5.21467 20.674 4.53667 19.814 4.30667C18.254 3.88867 12 3.88867 12 3.88867C12 3.88867 5.746 3.88867 4.186 4.30667C3.326 4.53667 2.648 5.21467 2.418 6.07467C2 7.63467 2 11.8887 2 11.8887C2 11.8887 2 16.1427 2.418 17.7027C2.648 18.5627 3.326 19.2407 4.186 19.4707C5.746 19.8887 12 19.8887 12 19.8887C12 19.8887 18.254 19.8887 19.814 19.4707C20.675 19.2407 21.352 18.5627 21.582 17.7027C22 16.1427 22 11.8887 22 11.8887C22 11.8887 22 7.63467 21.582 6.07467ZM10 15.3527V8.42467L16 11.8887L10 15.3527Z"})}))},9292:function(e,t,n){n.d(t,{Sb:()=>o});var i=n(69277),l=n(70408),r=n(4006);function o(e){return(0,r.Y)("svg",(0,l._)((0,i._)({width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,r.Y)("path",{d:"M5.67709 10C6.02484 10 6.28151 9.73617 6.28151 9.37872V7.91489H6.37259C7.82981 7.91489 8.69917 8.39574 9.30773 9.54894C9.48574 9.88085 9.69273 9.97021 9.93698 9.97021C10.2682 9.97021 10.5 9.64255 10.5 9.00426C10.5 5.94894 9.16283 4.10638 6.37259 4.10638H6.28151V2.64255C6.28151 2.28511 6.02484 2 5.66881 2C5.43698 2 5.27139 2.09787 5.01886 2.33617L1.73183 5.4766C1.56624 5.6383 1.5 5.82553 1.5 6C1.5 6.16596 1.57038 6.36596 1.73183 6.5234L5.01886 9.68511C5.24655 9.90213 5.43698 10 5.67709 10Z"})}))}n(97731)},37767:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(32641),o=n(4006);let a=e=>{var{children:t,href:n,onClick:a,newTab:s}=e,d=(0,r._)(e,["children","href","onClick","newTab"]);return(0,o.Y)("a",(0,l._)((0,i._)({role:"button",tabIndex:0,href:null!=n?n:"javascript:void(0)"},s&&{target:"_blank",rel:"noopener noreferrer"},a&&{onClick:e=>{e.stopPropagation(),a(e)}},d),{children:t}))}},97683:function(e,t,n){n.d(t,{B:()=>ee,D:()=>$});var i=n(79785),l=n(4006),r=n(38376),o=n(49436),a=n(70010),s=n(12723),d=n(25005),c=n(27775),u=n(35404),p=n(14520),h=n(44435),m=n(3549),g=n(56195),v=n(12203),Y=n(80827),f=n(61250),b=n(27786),y=n(3160),_=n(93540),w=n(50180),k=n(33167),C=n(54718),I=n(17402),S=n(15734),D=n.n(S),F=n(37767),P=n(41935),x=n(69277),T=n(70408),A=n(68349),E=n(35369),N=n(76977),B=n(67211),M=n(84270),R=n(16993),L=n(36372);function O(e){var t,n;let{isOpen:i,onClose:r,post:o}=e,a=(0,L.d)(),[s,d]=(0,I.useState)(!1),c=null==(n=o.postTheme)||null==(t=n.variant_config)?void 0:t.fullWidthImage,u={hideOverlay:(null==c?void 0:c.hideOverlay)||!1,hideSectionLink:(null==c?void 0:c.hideSectionLink)||!1,textColor:(null==c?void 0:c.textColor)||"black"},[p,h]=(0,I.useState)(u),m=async()=>{d(!0);try{var e;let t=(0,T._)((0,x._)({},null==(e=o.postTheme)?void 0:e.variant_config),{fullWidthImage:p});await D().patch("/api/v1/post/".concat(o.id,"/theme")).send({variant_config:t}),location.reload()}catch(e){a.popToast(()=>(0,l.Y)(L.y,{text:(0,A.uX)(e)}))}finally{d(!1)}},g=()=>{h(u),r()};return(0,l.FD)(R.aF,{isOpen:i,onClose:g,children:[(0,l.Y)(R.rQ,{showClose:!0,title:"Full Width Image Options",onClose:g}),(0,l.Y)(R.cw,{children:(0,l.FD)(N.I1,{gap:12,children:[(0,l.Y)(M.z,{label:"Text Color",options:[{value:"black",label:"Black"},{value:"red",label:"Red"},{value:"white",label:"White"}],value:p.textColor,onChange:e=>h((0,T._)((0,x._)({},p),{textColor:e}))}),(0,l.Y)(B.Y,{label:"Hide overlay",value:p.hideOverlay,onChange:e=>h((0,T._)((0,x._)({},p),{hideOverlay:e}))}),(0,l.Y)(B.Y,{label:"Hide section link",value:p.hideSectionLink,onChange:e=>h((0,T._)((0,x._)({},p),{hideSectionLink:e}))})]})}),(0,l.Y)(R.jl,{primaryButton:(0,l.Y)(E.$n,{disabled:s,priority:"primary",onClick:m,children:"Save"}),secondaryButton:(0,l.Y)(E.$n,{disabled:s,priority:"secondary",onClick:g,children:"Cancel"})})]})}var z=n(84605),U=n(86500),q=n(94729),H=n(13022),W=n(28528),G=n(88774),K=n(52145),V=n(16291),j=n(4016),X=n(39318),J=n(49807),Z=n(82776);function Q(){let e=(0,i._)([""," top posts"]);return Q=function(){return e},e}function $(e){var t,n,i,C;let{pub:S,post:F,hideDropCapOption:x,hidePinning:T,hidePostHeaderOptions:E,user:N,emailSent:B,allowSendEmail:M,handleCrossPost:R,onToggleMenu:U,onSummaryOpen:$,trigger:ee,disabled:et}=e,en=(0,I.useContext)(W.wZ),ei=(0,L.d)(),{iString:el,iTemplate:er}=(0,z.GO)(),[eo,ea]=(0,I.useState)(!1),[es,ed]=(0,I.useState)(!1),[ec,eu]=(0,I.useState)(!1),[ep,eh]=(0,I.useState)(!1),[em,eg]=(0,I.useState)(!1),[ev,eY]=(0,I.useState)(null),[ef,eb]=(0,I.useState)(null),[ey,e_]=(0,I.useState)(null),[ew,ek]=(0,I.useState)(!1);(0,I.useEffect)(()=>{(async()=>{eg(!!await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"GET"}))})()},[F.id]);let eC=async e=>{let t;switch(e){case"1hour":t=1;break;case"8hours":t=8;break;case"24hours":t=24}let n=t?{expires_at:(0,V.A)().add(t,"hour").toISOString()}:{};await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"POST",json:n}),eg(!0),ei.popToast(()=>(0,l.Y)(L.y,{text:el("Paused notifications"),Icon:r.A}))},eI=async()=>{await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"DELETE"}),eg(!1),ei.popToast(()=>(0,l.Y)(L.y,{text:el("Unpaused notifications"),Icon:o.A}))},eS=async()=>{let e={everyone:"everyone",only_free:"free subscribers",only_paid:"paid subscribers",founding:"founding members"}[F.audience];if(confirm("Send this published post as an email to ".concat(e,"?")))try{await D().post("/api/v1/drafts/".concat(F.id,"/publish")).send({send:!0,only_send:!0}),location.reload()}catch(e){alert((0,A.uX)(e))}},eD=async()=>{try{await D().put("/api/v1/posts/".concat(F.id,"/clear_cache")),location.reload()}catch(e){alert((0,A.uX)(e))}},eF=async()=>{ea(!0);try{let e=await D().post("/api/v1/posts/".concat(F.id,"/duplicate"));(0,A.V2)((0,X.I_S)(S,e.body.id),{local_navigation:!1})}catch(e){alert((0,A.uX)(e)),ea(!1)}},eP=async e=>{eu(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({post_preview_crop_gravity:e}),location.reload()},ex=async e=>{eh(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({disable_drop_cap:e}),location.reload()},eT=async()=>{if(ev)return;eY(S.id);let e=F.pins.includes(S.id),t="/api/v1/publication/".concat(S.id,"/pin/").concat(F.id);try{e?(await D().del(t),F.pins=F.pins.filter(e=>e!==S.id)):(await D().post(t),S.multiple_pins||(F.pins=[]),F.pins.push(S.id)),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eY(null)}},eA=async()=>{if(ef)return;let e=F.section_id;if(!e)return;eb(e);let t="/api/v1/publication/".concat(S.id,"/section/").concat(e,"/pin/").concat(F.id);try{F.is_section_pinned?(await D().del(t),F.is_section_pinned=!1):(await D().post(t),F.is_section_pinned=!0),(["/","/beta","/publish"].includes(location.pathname)||location.pathname.startsWith("/s/"))&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eb(null)}},eE=async()=>{if(ey)return;e_(S.id);let e=F.top_exclusions.includes(S.id),t="/api/v1/publication/".concat(S.id,"/exclusion/").concat(F.id);try{e?(await D().del(t),F.top_exclusions=[]):(await D().post(t),F.top_exclusions=[S.id]),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{e_(null)}},eN=(null==(t=F.postTheme)?void 0:t.post_preview_crop_gravity)||en.cropGravity,eB=!(null==(n=F.postTheme)?void 0:n.disable_drop_cap),eM=null==(i=S.sections)?void 0:i.find(e=>e.id===F.section_id),eR="undefined"!=typeof window?window.location.pathname:"",eL=!!(0,H.Ay)("enable_post_summarization"),eO=(0,j.lu)({pub:S}),ez=F.is_section_pinned!==(ef===F.section_id),eU=F.pins.includes(S.id)!==(ev===S.id),eq=F.top_exclusions.includes(S.id)!==(ey===S.id),eH=eO&&!E&&(null==(C=F.postTheme)?void 0:C.header_variant)==="full-width-image";return(0,l.FD)(l.FK,{children:[(0,l.Y)(P.Cg,{isOpen:es,setIsOpen:ed}),(0,l.Y)(O,{isOpen:ew,onClose:()=>ek(!1),post:F}),(0,l.FD)(G.W1,{trigger:ee,onOpen:()=>{null==U||U({active:!0})},onClose:()=>{null==U||U({active:!1})},disabled:et,children:[(0,l.FD)(G.H9,{isFirst:!0,children:[(0,l.Y)(G.Dr,{leading:(0,l.Y)(a.A,{}),href:(0,J.PuM)(S,F.id,{referrer:eR}),"data-native":!0,children:el("View stats")}),(0,l.Y)(G.Dr,{leading:(0,l.Y)(s.A,{}),href:(0,J.U_V)(S,F.id,{referrer:eR}),"data-native":!0,children:el("Share assets")})]}),(0,l.FD)(G.H9,{children:[(0,l.Y)(G.Dr,{leading:(0,l.Y)(d.A,{}),href:(0,X.wu9)(S,F,{edit:!0}),children:el("Edit")}),!B&&M&&F.is_published&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(c.A,{}),onClick:eS,children:el("Send as email")}),(0,l.Y)(G.Dr,{leading:(0,l.Y)(u.A,{}),disabled:eo,onClick:eF,children:eo?"Duplicating...":"Duplicate"}),R&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(p.A,{}),onClick:R,children:el("Cross post")}),eO&&(0,l.Y)(G.Dr,{disabled:ec,leading:(0,l.Y)(h.A,{}),onClick:()=>eP("auto"===eN?"center":"auto"),children:ec?"Updating...":"auto"===eN?"Disable smart cropping":"Enable smart cropping"}),eO&&!x&&(0,l.Y)(G.Dr,{disabled:ep,leading:(0,l.Y)(m.A,{}),onClick:()=>ex(eB),children:ep?"Updating...":eB?"Disable drop cap":"Enable drop cap"}),eH&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(g.A,{}),onClick:()=>ek(!0),children:el("Edit full width image options")}),eL&&$&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(v.A,{}),onClick:$,children:el("Reader guide")}),(0,H.Ay)("show_open_post_as_pdf_button")&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(Y.A,{}),onClick:()=>{ed(!0),(0,A.V2)((0,J.MGs)(S,F.id),{local_navigation:!1})},children:el("Open as PDF")})]}),(0,l.FD)(G.H9,{children:[!T&&F.slug&&(0,l.FD)(l.FK,{children:[(0,Z.isPinnable)(S)&&F.section_id&&(F.section_name||(null==eM?void 0:eM.name))&&(0,l.FD)(G.Dr,{leading:ez?(0,l.Y)(f.A,{}):(0,l.Y)(b.A,{}),onClick:eA,children:[ez?"Unpin from":"Pin to"," ",F.section_name||(null==eM?void 0:eM.name)]}),(0,Z.isPinnable)(S)&&(0,l.Y)(G.Dr,{leading:eU?(0,l.Y)(f.A,{}):(0,l.Y)(b.A,{}),onClick:eT,children:eU?"Unpin from homepage":"Pin to homepage"})]}),F.slug&&"adhoc_email"!==F.type&&(0,l.Y)(G.Dr,{leading:eq?(0,l.Y)(y.A,{}):(0,l.Y)(_.A,{}),onClick:eE,children:er(Q(),eq?"Include in":"Hide from")}),em?(0,l.Y)(K.MI,{onClick:eI,customLabel:el("Unpause notifications")}):(0,l.Y)(K.DE,{onMute:e=>eC(e),customLabel:el("Pause notifications")})]}),(null==N?void 0:N.is_global_admin)&&(0,l.FD)(G.H9,{children:[(0,l.Y)(G.Dr,{priority:"secondary",onClick:eD,leading:(0,l.Y)(w.A,{}),children:el("Clear from cache")}),(0,l.Y)(G.Dr,{priority:"secondary",href:"".concat((0,X.$_T)({subdomain:"admin"}),"/posts/").concat(F.id),leading:(0,l.Y)(k.A,{}),children:el("Open in Underground")})]})]})]})}function ee(e){let{pub:t,post:n,iconHeight:i,hidePinning:r,user:o,emailSent:a,allowSendEmail:s,iconClassName:d}=e,c=(0,l.Y)(F.A,{onClick:()=>{(0,U.u4)(U.qY.EDIT_POST_DROPDOWN_MENU_OPENED)},children:(0,l.Y)(C.A,{stroke:"var(--color-fg-secondary)",size:i,className:d})});return(0,l.Y)($,{trigger:c,pub:t,post:n,hidePinning:r,user:o,emailSent:a,allowSendEmail:s})}},50883:function(e,t,n){n.d(t,{T:()=>T});var i=n(69277),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(84605),d=n(86500),c=n(69618),u=n(68349),p=n(35369),h=n(8149),m=n(48535),g=n(76977),v=n(67211),Y=n(20500),f=n(76171),b=n(16993),y=n(81203),_=n(94996),w=n(63136),k=n(11587),C=n(65842),I=n(36372),S=n(16291),D=n(98111),F=n(56262),P=n(39318);let x={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},T=e=>{let{pub:t,post:n,user:o,open:y,setOpen:D,placeholderText:T=""}=e,E=(0,S.A)().add(2,"minutes"),[N,B]=(0,r.useState)(null),[M,R]=(0,r.useState)(T),[L,O]=(0,r.useState)(!1),[z,U]=(0,r.useState)(!0),[q,H]=(0,r.useState)("PREAMBLE"),[W,G]=(0,r.useState)(null),[K,V]=(0,r.useState)(void 0),[j,X]=(0,r.useState)(!0),[J,Z]=(0,r.useState)(!0),[Q,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)((0,S.A)().add(1,"day").toDate()),[en,ei]=(0,r.useState)(""),{iString:el}=(0,s.GO)(),er={everyone:"to everyone",founding:"to founding members",only_paid:"to paid subscribers"}[null!=K?K:"null"],eo=j?"Send":"Publish",ea=Q&&ee?(0,S.A)(ee).max(E).fromNow():"",es=j?er:"",ed="".concat(eo," cross-post ").concat(es," ").concat(ea),ec=null==N?void 0:N.find(e=>e.id===W),eu=(0,I.d)();(0,r.useEffect)(()=>{let e=async()=>{try{var e;let t=await a().get("/api/v1/restack/restackable-pubs"),n=(null==t||null==(e=t.body)?void 0:e.publications)||[];B(n),U(!1),n.length>0&&(G(n[0].id),V("everyone"))}catch(e){console.error("Failed to load user profile for restacking: ",e)}};y&&!N&&z&&e()},[y,o,z,U,N,B]),(0,r.useEffect)(()=>{y&&N&&0===N.length&&!z&&(0,u.V2)((0,P.f5H)())},[y,N,z]);let ep=(e,i)=>{D(!y,i),H("PREAMBLE"),ei(null),U(!1),i&&(R(""),(0,d.u4)(d.qY.RESTACK_POST_SUBMITTED,{restacked_publication_id:t.id,restacked_post_id:n.id,restacking_user_id:o.id,restacking_publication_id:null==ec?void 0:ec.id,restacking_blurb:M}),eu.popToast(()=>(0,l.Y)(I.y,{text:Q?"This post is scheduled to cross-post ".concat(ea):"This post was cross-posted to your subscribers"}))),(0,d.u4)(d.qY.CROSS_POST_MODAL_CLOSED,{didRestack:i})},eh=async()=>{(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_CLICKED),U(!0);try{if(Q){let e=(0,S.A)(ee).max(E).toDate();if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(n.id,"/schedule")).send({audience:K,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J,scheduledAt:e})}else{if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(n.id)).send({audience:K,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J})}(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMITTED),ep({},!0);return}catch(e){if((0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_FAILED,{error:(0,u.uX)(e,"Could not retrieve error message")}),console.error("Failed to restack post:",e),e instanceof TypeError)throw ei("An unknown error ocurred. This post was not recommended."),U(!1),e;ei((0,u.uX)(e,"This post could not be recommended.")),U(!1)}};return(0,l.FD)(b.aF,{isOpen:y,onClose:ep,children:[(0,l.Y)(b.rQ,{showClose:!0,onClose:ep,title:el("Cross-post to your Substack"),showDivider:!0}),"PREAMBLE"===q?(0,l.FD)(l.FK,{children:[(0,l.Y)(b.cw,{children:(0,l.FD)(g.I1,{gap:20,children:[(0,l.Y)(A,{post:n,pub:t}),(0,l.Y)(k.T,(0,i._)({placeholder:el("Say why this post is worth reading..."),onChange:e=>{L||(O(!0),(0,d.u4)(d.qY.CROSS_POST_MODAL_TYPING_STARTED)),R(e.target.value)},value:M,maxLength:800,rows:5},c.b)),en&&(0,l.Y)(Y.yn,{children:en})]})}),(0,l.Y)(b.jl,{direction:"column",primaryButton:(0,l.Y)(p.$n,{priority:"primary",onClick:()=>{if((0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_CLICKED),!M){ei("Please write something to your subscribers to continue"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_FAILED);return}ei(""),H("AUDIENCE_SELECTION"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUED)},disabled:!M,loading:z,children:el("Continue")})})]}):(0,l.FD)(l.FK,{children:[(0,l.Y)(b.cw,{children:(0,l.FD)(g.I1,{gap:20,children:[(0,l.FD)(C.A0,{children:[(0,l.Y)(f.JU,{children:el("Post to")}),(0,l.Y)(_.I,{value:null==ec?void 0:ec.id,onChange:e=>{let t=e.currentTarget.value;V("everyone"),G(Number(t))},children:null==N?void 0:N.map(e=>(0,l.Y)("option",{value:e.id,children:e.name}))})]}),(0,l.FD)(C.A0,{children:[(0,l.Y)(f.JU,{children:el("Send to")}),(0,l.Y)(_.I,{value:K,onChange:e=>V(e.target.value),children:((null==ec?void 0:ec.payments_state)==="enabled"?(0,F.getAudiencesForPublicListing)():["everyone"]).map(e=>(0,l.Y)("option",{value:e,children:x[e]}))})]}),(0,l.FD)(g.I1,{gap:12,children:[(0,l.Y)(f.JU,{children:el("Delivery")}),(0,l.Y)(v.Y,{value:j,label:el("Send cross-post via email"),onChange:e=>X(e)}),(0,l.Y)(v.Y,{value:J,label:el("Publish cross-post to web"),onChange:e=>Z(e)}),(0,l.Y)(v.Y,{value:Q,label:el("Schedule time to publish cross-post"),onChange:e=>$(e),contentBelow:(0,l.Y)(h.N,{open:Q,children:(0,l.Y)(g.I1,{paddingTop:8,children:(0,l.Y)(m.ZZ,{value:null!=ee?ee:new Date,max:(0,S.A)().add(92,"days").toDate(),onChange:e=>{et(new Date(e.currentTarget.value))}})})})})]}),en&&(0,l.Y)(w.EY.B4,{color:"error",children:en})]})}),(0,l.Y)(b.jl,{direction:"column",primaryButton:(0,l.Y)(p.$n,{priority:j||J?"primary":"secondary",onClick:eh,disabled:z||!j&&!J,children:ed})})]})]})},A=e=>{let{post:t,pub:n}=e;return(0,l.FD)(g.I1,{gap:12,border:"detail",radius:"md",shadow:"xs",bg:"secondary",padding:12,children:[(0,l.FD)(g.Ye,{alignItems:"center",gap:8,children:[(0,l.Y)(y.Nq,{pub:n,size:20}),(0,l.Y)(w.EY.Meta,{weight:"medium",children:n.name})]}),(0,l.FD)(g.I1,{gap:2,children:[(0,l.Y)(w.EY.B3,{weight:"semibold",clamp:2,children:t.title}),(0,l.Y)(w.EY.B4,{color:"secondary",clamp:2,children:t.truncated_body_text?(t.truncated_body_text||"").replace(D.T.PUBLICATION_NAME,n.name):t.subtitle||""})]})]})}},73869:function(e,t,n){n.d(t,{m:()=>Q});var i=n(4006),l=n(65892),r=n(17402),o=n(69277),a=n(70408),s=n(90179),d=n.n(s),c=n(15871),u=n(43627),p=n(74979),h=n(83673),m=n.n(h),g=n(38970),v=n.n(g),Y=n(33031),f=n.n(Y),b=n(48697),y=n(84605),_=n(35369),w=n(76977),k=n(25318),C=n(94996),I=n(63136),S=n(46009);let D=e=>{let{addLabel:t,hideAdd:n,isValidSection:l,metadata:o,pub:a,renderEditMetadata:s,renderMetadata:d,selectedIds:p,selectedLabel:h,validateMetadata:g,onChangeMetadata:Y,onChangeSelectedIds:f}=e,[b,y]=(0,r.useState)(null),_=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),C=v()(a.sections,"id"),D=(0,S.j_)({pub:a}),T=m()(p.map(e=>{var t;return -1===e?{id:-1,name:null!=(t=D.title)?t:""}:C[e]})),A=e=>{f(p.filter(t=>t!==e))},E=e=>{y(e)};return(0,i.FD)(w.I1,{gap:16,children:[(0,i.Y)(k.D,{label:h,children:(0,i.Y)(w.I1,{gap:8,children:p.length?(0,i.Y)(c.Mp,{collisionDetection:c.fp,sensors:_,onDragEnd:e=>{let{active:t,over:n}=e;if(t.id!==n.id){let e=p.findIndex(e=>e===t.id),i=p.findIndex(e=>e===n.id);f((0,u.be)(p,e,i))}},children:(0,i.Y)(u.gB,{items:T,strategy:u.kL,children:T.map(e=>{var t;return(0,i.Y)(P,{disableDrag:!!b,id:e.id,children:(0,i.Y)(x,{isEditing:b===e.id,renderEditMetadata:s,renderMetadata:d,sectionId:e.id,sectionMetadata:null!=(t=null==o?void 0:o[e.id])?t:null,sectionName:e.name,validateMetadata:g,onChangeMetadata:Y,onEdit:E,onRemove:A},e.id)},e.id)})})}):(0,i.Y)(I.EY.B3,{color:"pub-secondary-text",children:"No sections selected"})})}),!n&&(0,i.Y)(k.D,{label:null!=t?t:"Add section",children:(0,i.Y)(F,{excludedSectionIds:[...T.map(e=>e.id),...l?a.sections.filter(e=>!l(e)).map(e=>e.id):[]],pub:a,onSelect:e=>{f([...p,e])}})})]})},F=e=>{let{excludedSectionIds:t,pub:n,onSelect:l}=e,{iString:r}=(0,y.GO)(),o=n.sections.filter(e=>!(null==t?void 0:t.includes(e.id)));return(0,i.FD)(C.I,{value:"",onChange:e=>{let t=e.target.value;t&&l(parseInt(t))},children:[(0,i.Y)(C.K,{children:r("Select a section")}),f()(o,"name").map(e=>(0,i.Y)("option",{value:e.id,children:e.name}))]})},P=e=>{let{children:t,disableDrag:n,id:l}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:l}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return n?(0,i.Y)("div",{children:t}):(0,i.Y)("div",(0,a._)((0,o._)({ref:c},r,d),{role:"button",style:g,children:t}))},x=e=>{let{isEditing:t,renderEditMetadata:n,renderMetadata:o,sectionId:a,sectionName:s,sectionMetadata:d,validateMetadata:c,onChangeMetadata:u,onEdit:p,onRemove:h}=e,[m,g]=(0,r.useState)(d),[v,Y]=(0,r.useState)(null);return(0,i.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,i.FD)(w.I1,{children:[(0,i.Y)(I.EY.B4,{weight:"semibold",children:s}),!t&&o&&(0,i.Y)("div",{children:o(d)}),t&&n&&(0,i.FD)(w.I1,{alignItems:"start",gap:12,paddingTop:12,children:[n({errors:v,value:m,onChange:g}),u&&(0,i.FD)(w.Ye,{gap:8,children:[(0,i.Y)(_.$n,{size:"sm",onClick:()=>{if(u){if(c){let{isValid:e,message:t}=c(m);if(!e&&t)return void Y([t]);Y(null)}u({sectionId:a,value:m}),p(null)}},children:"Done"}),(0,i.Y)(_.$n,{priority:"secondary",size:"sm",onClick:()=>{p(null)},children:"Cancel"})]})]})]}),!t&&(0,i.FD)(w.Ye,{alignItems:"center",gap:8,children:[!!n&&(0,i.Y)(_.K0,{size:"xs",onClick:()=>{p(a)},children:(0,i.Y)(l.A,{size:14})}),(0,i.Y)(_.K0,{size:"xs",onClick:()=>{h(a)},children:(0,i.Y)(b.A,{size:14})})]})]})},T=e=>{let{emptyText:t,label:n,value:l}=e;return(0,i.FD)(w.Ye,{alignItems:"baseline",gap:4,children:[(0,i.FD)(I.EY.B4,{fontWeight:"semibold",children:[n,":"]}),(0,i.Y)(I.EY.B4,{color:l?"primary":"secondary",children:l||t})]})};var A=n(89160),E=n(79796),N=n(60141),B=n(16993);let M=e=>{let{pub:t,onClose:n}=e,{isSaving:l,metadata:r,ids:s,onChangeMetadata:c,onChangeOrder:u,onSave:p}=(0,E.i)({pub:t}),{isSaving:h,metadata:m,ids:g,onChangeMetadata:v,onChangeOrder:Y,onSave:f}=(0,E.i)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:b,isSaving:y,onChange:k,onSave:C}=(0,A.G)({pub:t}),I=async()=>{await p(),await f(),await C(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit featured and archived sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.FD)(w.I1,{gap:36,children:[(0,i.Y)(D,{addLabel:"Add From the Free Press section",metadata:m,pub:t,renderEditMetadata:e=>{var t,n;let{value:l,onChange:r}=e;return(0,i.FD)(w.I1,{gap:8,children:[(0,i.Y)(N.A,{label:"Tagline",value:null!=(t=null==l?void 0:l.tagline)?t:"",width:260,onChange:e=>{var t;r({frequency:null!=(t=null==l?void 0:l.frequency)?t:"",tagline:e})}}),(0,i.Y)(N.A,{label:"Frequency",value:null!=(n=null==l?void 0:l.frequency)?n:"",width:260,onChange:e=>{r((0,a._)((0,o._)({},l),{frequency:e}))}})]})},renderMetadata:e=>{var t,n;return(0,i.FD)(w.I1,{children:[(0,i.Y)(T,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,i.Y)(T,{emptyText:"no frequency set",label:"Frequency",value:null!=(n=null==e?void 0:e.frequency)?n:""})]})},selectedIds:g,selectedLabel:"From The Free Press sections",onChangeMetadata:e=>{var t;let{sectionId:n,value:i}=e;v({metadata:i?(0,a._)((0,o._)({},r),{[n]:(0,a._)((0,o._)({},i),{frequency:null!=(t=null==i?void 0:i.frequency)?t:""})}):d()(r,n)})},onChangeSelectedIds:e=>{Y({ids:e})}}),(0,i.Y)(D,{addLabel:"Add featured section",metadata:r,pub:t,renderEditMetadata:e=>{var t,n;let{value:l,onChange:r}=e;return(0,i.FD)(w.I1,{gap:8,children:[(0,i.Y)(N.A,{label:"Tagline",value:null!=(t=null==l?void 0:l.tagline)?t:"",width:260,onChange:e=>{var t;r({frequency:null!=(t=null==l?void 0:l.frequency)?t:"",tagline:e})}}),(0,i.Y)(N.A,{label:"Frequency",value:null!=(n=null==l?void 0:l.frequency)?n:"",width:260,onChange:e=>{r((0,a._)((0,o._)({},l),{frequency:e}))}})]})},renderMetadata:e=>{var t,n;return(0,i.FD)(w.I1,{children:[(0,i.Y)(T,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,i.Y)(T,{emptyText:"no frequency set",label:"Frequency",value:null!=(n=null==e?void 0:e.frequency)?n:""})]})},selectedIds:s,selectedLabel:"Featured sections",onChangeMetadata:e=>{var t;let{sectionId:n,value:i}=e;c({metadata:i?(0,a._)((0,o._)({},r),{[n]:(0,a._)((0,o._)({},i),{frequency:null!=(t=null==i?void 0:i.frequency)?t:""})}):d()(r,n)})},onChangeSelectedIds:e=>{u({ids:e})}}),(0,i.Y)(D,{addLabel:"Add archived section",pub:t,selectedIds:b,selectedLabel:"Archived sections",onChangeSelectedIds:e=>{k({ids:e})}})]})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l||y||h,onClick:I,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l||y||h,priority:"secondary",onClick:n,children:"Cancel"})})]})};var R=n(27428);let L=e=>{let{pub:t,onClose:n}=e,{isSaving:l,ids:r,onSave:o,onChange:a}=(0,R.M)({pub:t}),s=async()=>{await o(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit event sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add event section",pub:t,selectedIds:r,selectedLabel:"Event sections",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l,onClick:s,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l,priority:"secondary",onClick:n,children:"Cancel"})})]})};var O=n(77124),z=n(57753),U=n(84270);let q=e=>{let{pub:t,onClose:n}=e,{ids:l,metadata:s,onChangeOrder:d,onChangeMetadata:c,onSave:u}=(0,O.q)({pub:t}),[p,h]=(0,r.useState)(!1),m=async()=>{h(!0),await u(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{title:"Edit podcast sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add podcast section",isValidSection:e=>e.is_podcast,metadata:s,pub:t,renderEditMetadata:e=>{var t;let{value:n,onChange:l}=e;return(0,i.Y)(w.I1,{gap:12,children:(0,i.Y)(U.z,{label:"Carousel color",options:z.ek.map(e=>({label:e,value:e})),value:null!=(t=null==n?void 0:n.carouselColor)?t:"black",onChange:e=>{l({carouselColor:e})}})})},renderMetadata:e=>{var t;return(0,i.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q3[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20})},selectedIds:l,selectedLabel:"Podcast sections",onChangeMetadata:e=>{let{sectionId:t,value:n}=e;c({metadata:(0,a._)((0,o._)({},s),{[t]:n})})},onChangeSelectedIds:e=>{d({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:p,onClick:m,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:p,priority:"secondary",onClick:n,children:"Cancel"})})]})};var H=n(95691),W=n(7755);let G=e=>{let{pub:t,onClose:n}=e,{isSaving:l,metadata:r,ids:s,onChangeMetadata:d,onChangeOrder:c,onSave:u}=(0,H.P)({pub:t}),p=async()=>{await u(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit video sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add video section",metadata:r,pub:t,renderEditMetadata:e=>{var t,n;let{errors:l,value:r,onChange:o}=e;return(0,i.FD)(w.I1,{gap:12,children:[(0,i.Y)(U.z,{label:"Carousel color",options:z.ek.map(e=>({label:e,value:e})),value:null!=(t=null==r?void 0:r.carouselColor)?t:"black",onChange:e=>{var t;o({carouselColor:e,youtubeUrl:null!=(t=null==r?void 0:r.youtubeUrl)?t:""})}}),(0,i.Y)(N.A,{errors:l,label:"YouTube URL",value:null!=(n=null==r?void 0:r.youtubeUrl)?n:"",width:260,onChange:e=>{var t;o({carouselColor:null!=(t=null==r?void 0:r.carouselColor)?t:"black",youtubeUrl:e})}})]})},renderMetadata:e=>{var t;return(0,i.FD)(w.Ye,{alignItems:"center",gap:8,children:[(0,i.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q3[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20}),(null==e?void 0:e.youtubeUrl)?(0,i.Y)(I.EY.B4,{children:(0,i.Y)("a",{href:null==e?void 0:e.youtubeUrl,rel:"noopener noreferrer",target:"_blank",children:"YouTube link"})}):(0,i.Y)(I.EY.B4,{color:"pub-secondary-text",children:"No YouTube link set"})]})},selectedIds:s,selectedLabel:"Video sections",validateMetadata:e=>{var t;let n=(null!=(t=null==e?void 0:e.youtubeUrl)?t:"").trim();if(!n)return{isValid:!0,message:null};let{isValid:i,message:l}=(0,W.Hx)({platform:"youtube",url:n,language:"en"});return{isValid:i,message:l}},onChangeMetadata:e=>{var t,n;let{sectionId:i,value:l}=e;d({metadata:(0,a._)((0,o._)({},r),{[i]:(0,a._)((0,o._)({},l),{carouselColor:null!=(t=null==l?void 0:l.carouselColor)?t:"black",youtubeUrl:null!=(n=null==l?void 0:l.youtubeUrl)?n:""})})})},onChangeSelectedIds:e=>{c({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l,onClick:p,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l,priority:"secondary",onClick:n,children:"Cancel"})})]})},K=e=>{let{pub:t,selectedIds:n,selectedLabel:l,onChangeSelectedIds:r}=e,s=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),d=v()(t.authorPagesInfo,"user_id"),p=m()(n.map(e=>d[e]?(0,a._)((0,o._)({},d[e]),{id:e}):null)),h=e=>{r(n.filter(t=>t!==e))};return(0,i.FD)(w.I1,{gap:16,children:[(0,i.Y)(k.D,{label:l,children:(0,i.Y)(w.I1,{gap:8,children:n.length?(0,i.Y)(c.Mp,{collisionDetection:c.fp,sensors:s,onDragEnd:e=>{let{active:t,over:i}=e;if(t.id!==i.id){let e=n.findIndex(e=>e===t.id),l=n.findIndex(e=>e===i.id);r((0,u.be)(n,e,l))}},children:(0,i.Y)(u.gB,{items:p,strategy:u.kL,children:p.map(e=>(0,i.Y)(j,{id:e.user_id,children:(0,i.Y)(X,{authorId:e.user_id,authorName:e.name,onRemove:h})},e.user_id))})}):(0,i.Y)(I.EY.B3,{color:"pub-secondary-text",children:"No authors selected"})})}),(0,i.Y)(k.D,{label:"Add an author",children:(0,i.Y)(V,{excludedAuthorIds:p.map(e=>e.id),pub:t,onSelect:e=>{r([...n,e])}})})]})},V=e=>{var t,n;let{excludedAuthorIds:l,pub:r,onSelect:o}=e,{iString:a}=(0,y.GO)(),s=null!=(n=null==(t=r.authorPagesInfo)?void 0:t.filter(e=>!!e.name&&!!e.bio&&!!e.photo_url).filter(e=>!(null==l?void 0:l.includes(e.user_id))))?n:[];return(0,i.FD)(C.I,{value:"",onChange:e=>{let t=e.target.value;t&&o(parseInt(t))},children:[(0,i.Y)(C.K,{children:a("Select a section")}),f()(s,"name").map(e=>(0,i.Y)("option",{value:e.user_id,children:e.name}))]})},j=e=>{let{children:t,disableDrag:n,id:l}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:l}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return n?(0,i.Y)("div",{children:t}):(0,i.Y)("div",(0,a._)((0,o._)({ref:c},r,d),{role:"button",style:g,children:t}))},X=e=>{let{authorId:t,authorName:n,onRemove:l}=e;return(0,i.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,i.Y)(w.I1,{children:(0,i.Y)(I.EY.B4,{weight:"semibold",children:n})}),(0,i.Y)(_.K0,{size:"xs",onClick:()=>{l(t)},children:(0,i.Y)(b.A,{size:14})})]})};var J=n(1918);let Z=e=>{let{pub:t,onClose:n}=e,{ids:l,onSave:o,onChange:a}=(0,J.i)({pub:t}),[s,d]=(0,r.useState)(!1),c=async()=>{d(!0),await o(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit authors",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(K,{pub:t,selectedIds:l,selectedLabel:"Authors to show",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:s,onClick:c,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:s,priority:"secondary",onClick:n,children:"Cancel"})})]})},Q=e=>{let{pub:t,sectionType:n,user:o}=e,[a,s]=(0,r.useState)(!1);return(null==o?void 0:o.is_admin)?(0,i.FD)(i.FK,{children:[(0,i.Y)(_.K0,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,i.Y)(l.A,{size:16})}),a&&"columns"===n&&(0,i.Y)(M,{pub:t,onClose:()=>{s(!1)}}),a&&"event"===n&&(0,i.Y)(L,{pub:t,onClose:()=>{s(!1)}}),a&&"podcast"===n&&(0,i.Y)(q,{pub:t,onClose:()=>{s(!1)}}),a&&"video"===n&&(0,i.Y)(G,{pub:t,onClose:()=>{s(!1)}}),a&&"who-we-are"===n&&(0,i.Y)(Z,{pub:t,onClose:()=>{s(!1)}})]}):null}},22076:function(e,t,n){n.d(t,{n:()=>s});var i=n(4006),l=n(25006),r=n(86500),o=n(38914),a=n(49807);let s=e=>{var t;let{trigger:n,liveStream:s,trackingSurface:d}=e,c=(0,l.df)();if(!c)return null;let u=null==s||null==(t=s.id)?void 0:t.toString(),p={title:s.title,description:s.description||"",location:(0,a.QMq)({pub:c,utm_campaign:u,utm_source:"add_to_calendar_button",utm_medium:"web"}),start:s.scheduled_at||new Date,duration:[1,"hour"],allDay:!1,busy:!0};return(0,i.Y)(o.L,{event:p,handleClick:e=>{(0,r.u4)(r.qY.ADD_TO_CALENDAR_CLICKED,{liveStreamId:s.id,surface:d,type:e})},menuProps:{trigger:n}})}},82528:function(e,t,n){n.d(t,{y:()=>v});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(79909),d=n(13950),c=n(53696),u=n(15894),p=n(17306),h=n(68410),m=n(76977),g=n(72032);let v=e=>{let{actions:t,aboveTitle:n,belowDescription:o,bodyWrapperVariant:v,children:Y,description:f,image:b,isLoading:y,metadata:_,title:w,pageCTA:k,hideDivider:C=!1}=e,{isMobile:I}=(0,h.sM)(),S=!!(w&&!f&&!n&&!o&&!t&&!b),{markdownProps:D}=(0,p.$)(f);return(0,r.FD)(d.DH,{children:[_&&(0,r.Y)(s.Metadata,(0,i._)({},_)),(0,r.Y)(c.r,{paddingTop:I?40:64,children:!y&&(0,r.FD)(m.I1,{gap:I?24:40,paddingBottom:64,children:[(0,r.Y)("div",{className:a()(g.A.header,{[g.A.noImage]:!b,[g.A.headerWithJustTitle]:S}),children:I?(0,r.FD)(m.I1,{gap:24,children:[n&&(0,r.Y)(m.Ye,{alignSelf:"start",children:n}),(0,r.Y)(u.T,{preset:"h1-serif",children:w}),b&&(0,r.Y)(m.Ye,{children:b}),f&&(0,r.Y)(u.T,(0,l._)((0,i._)({},D),{preset:"d1-sans-regular"})),o]}):(0,r.FD)(r.FK,{children:[(0,r.FD)(m.I1,{children:[n&&(0,r.Y)(m.Ye,{alignSelf:"start",children:n}),(0,r.Y)(u.T,{preset:"h1-serif",children:w}),(0,r.FD)(m.I1,{gap:24,children:[f&&(0,r.Y)(u.T,(0,l._)((0,i._)({},D),{preset:"d1-sans-regular"})),o]})]}),b&&(0,r.Y)(m.Ye,{justifyContent:"end",children:b}),t&&(0,r.Y)("div",{className:g.A.actions,children:t})]})}),!C&&(0,r.Y)("div",{className:g.A.thickRule,children:k}),(0,r.Y)("div",{className:a()({[g.A.bodyWrapperTwoMiddleColumns]:"two-middle-columns"===v}),children:Y})]})})]})}},53696:function(e,t,n){n.d(t,{r:()=>r});var i=n(4006),l=n(76977);let r=e=>{let{children:t,paddingTop:n}=e;return(0,i.Y)(l.I1,{className:"container-Y7VoFt",paddingTop:n,children:t})}},82180:function(e,t,n){n.d(t,{Z:()=>Y});var i=n(69277),l=n(70408),r=n(4006),o=n(13589),a=n(85612),s=n(15894),d=n(57753),c=n(84605),u=n(74894),p=n(68349),h=n(76977),m=n(36372),g=n(59294),v=n(7755);let Y=e=>{let{pub:t,section:n,user:Y}=e,{iString:f}=(0,c.GO)(),[b,y]=(0,o.Mk)(),[_,w]=(0,o.Mk)(),[k,C]=(0,o.Mk)(),I=(0,m.d)(),{feedUrl:S}=(0,g.Zq)({pub:t,user:null!=Y?Y:null,section:n}),D=(0,v.Em)({pub:t,section:n,spotifySettings:(0,u.Om)({pub:t,section:null!=n?n:null})}),F={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"};return(0,r.FD)(h.Ye,{alignItems:"center",gap:12,children:[(0,r.Y)(s.T,{preset:"d1-sans-medium",children:"Listen On:"}),(0,r.FD)(h.Ye,{alignItems:"center",gap:16,children:[D.spotify_url&&(0,r.Y)(h.Ye,(0,l._)((0,i._)({},y,F),{href:D.spotify_url,children:(0,r.Y)(a.MO,{fill:b?"#1DB954":d.Q3.black.hex,size:24})})),D.apple_podcasts_url&&(0,r.Y)(h.Ye,(0,l._)((0,i._)({},w,F),{href:D.apple_podcasts_url,children:(0,r.Y)(a.uv,{fill:_?"#B53CD9":d.Q3.black.hex,size:24})})),(0,r.Y)(h.Ye,(0,l._)((0,i._)({},C),{cursor:"pointer",onClick:()=>{I.popToast(()=>(0,r.Y)(m.y,{text:f("RSS feed URL copied")})),(0,p.lW)(S)},children:(0,r.Y)(a.It,{fill:k?"#F88800":d.Q3.black.hex,size:24})}))]})]})}},22240:function(e,t,n){n.d(t,{L:()=>o});var i=n(4006),l=n(15894),r=n(76977);let o=e=>{let{children:t}=e;return(0,i.Y)(r.Ye,{children:(0,i.Y)(r.Ye,{className:"container-f0oiU0",paddingBottom:8,children:(0,i.Y)(l.T,{preset:"detail-large",children:t})})})}},70103:function(e,t,n){n.d(t,{Z:()=>l});var i=n(4006);let l=e=>{let{children:t}=e;return(0,i.Y)("div",{className:"container-mcXs8_",children:t})}},73062:function(e,t,n){n.d(t,{i:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(45773),a=n(49436),s=n(63446),d=n(76977);let c="hoverText-TwVQuR",u=e=>{let{isSubscribed:t,onClick:n,className:l,minimize:u,subscribedText:p="Notified",unsubscribedText:h="Get Notified",visible:m=!0}=e;return(0,i.Y)(s.v,{className:r()("notifyButton-lmtipU",u?"minimize-yxTwzX":void 0,t&&"subscribed-oEC2qb",l),"data-subscribed":t,size:"sm",style:{visibility:m?"visible":"hidden"},variant:"outline",onClick:n,onMouseOver:e=>{e.stopPropagation()},children:(0,i.Y)(d.Ye,{alignItems:"center",className:"notifyButtonInternal-e4KibS",gap:8*!u,justifyContent:"space-between",position:"relative",children:t?(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:r()(u?c:null),children:p}),(0,i.Y)(o.A,{size:16})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:r()(u?c:null),children:h}),(0,i.Y)(a.A,{size:16})]})})})}},78956:function(e,t,n){n.d(t,{A:()=>d});var i=n(4006),l=n(83673),r=n.n(l),o=n(17402),a=n(16074),s=n(76977);let d=e=>{let{children:t,gap:n=32,includeBottomDivider:l,includeTopDivider:d,paddingTop:c=0}=e,u=o.Children.toArray(t),p=r()(u).flatMap((e,t)=>0!==t||d?[(0,i.Y)(a.c,{flex:"auto"}),e]:[e]);return(0,i.FD)(s.I1,{gap:n,paddingTop:c,children:[p,l&&(0,i.Y)(a.c,{flex:"auto"})]})}},86227:function(e,t,n){n.d(t,{u:()=>a});var i=n(4006),l=n(61755),r=n(68410),o=n(76977);let a=e=>{let{post:t,pub:n,user:a}=e,{isMobile:s}=(0,r.sM)();return(0,i.FD)(o.Ye,{gap:s?16:40,justifyContent:"center",children:[(0,i.Y)(l.qS,{cta:s?"Comment":"Make a comment",post:t,pub:n,showCounts:!1,size:"large"}),(0,i.Y)(l.ct,{cta:s?"Like":"Like article",post:t,pub:n,showCounts:!1,size:"large",user:a}),(0,i.Y)(l.wu,{cta:s?"Share":"Share article",post:t,pub:n,user:a})]})}},36027:function(e,t,n){n.d(t,{E:()=>h});var i=n(4006),l=n(15894),r=n(68410),o=n(28528),a=n(84032),s=n(47173),d=n(76977),c=n(56262),u=n(82776);let p="verticalDivider-JbC7L1",h=e=>{let{post:t}=e,{isMobile:n}=(0,r.sM)(),{pub:h}=(0,o.np)(),m=(0,c.getDurationForPostPreview)({post:t});return(0,i.Y)(l.T,{color:"tertiary",preset:"caption",style:{lineHeight:1},children:(0,i.FD)(d.Ye,{gap:16,children:[(0,i.Y)(a.aR,{customFormat:"MMMM D, YYYY",post:t}),(0,i.Y)("div",{className:p}),(0,i.Y)(s.q,{clamp:1,post:t,pub:h}),!!m&&!n&&(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:p}),(0,u.formatPodcastDuration)(m)]})]})})}},64703:function(e,t,n){n.d(t,{k:()=>d});var i=n(4006),l=n(22076),r=n(63446),o=n(15894),a=n(76977),s=n(16291);let d=e=>{let{liveStream:t,trackingSurface:n}=e,d=(0,s.A)(t.scheduled_at).format("dddd MMMM D, YYYY"),c=(0,s.A)(t.scheduled_at).format("h:mm A");return(0,i.FD)(a.I1,{gap:24,children:[(0,i.FD)(a.I1,{gap:8,children:[(0,i.Y)(o.T,{preset:"h5-serif",children:t.title}),(0,i.Y)(o.T,{preset:"d3-serif",children:t.description}),(0,i.Y)(o.T,{preset:"timestamp",children:d}),(0,i.Y)(o.T,{preset:"timestamp",children:c})]}),(0,i.Y)(a.Ye,{children:(0,i.Y)(l.n,{liveStream:t,trackingSurface:n,trigger:(0,i.Y)("div",{children:(0,i.Y)(r.v,{size:"sm",trailingIcon:"plus",variant:"outline",children:"Add to calendar"})})})})]})}},72987:function(e,t,n){n.d(t,{N:()=>C});var i=n(4006),l=n(17402),r=n(72880),o=n(82528),a=n(82180),s=n(73090),d=n(22240),c=n(64703),u=n(16074),p=n(76977);let h=e=>{let{scheduledLiveStreams:t}=e;return(0,i.FD)(p.I1,{gap:40,children:[(0,i.Y)(d.L,{children:"Upcoming livestreams"}),(0,i.Y)(p.I1,{gap:24,children:t.map((e,t)=>(0,i.FD)(i.FK,{children:[0!==t&&(0,i.Y)(u.c,{}),(0,i.Y)(c.k,{liveStream:e,trackingSurface:"section-page"})]}))})]})};var m=n(7903),g=n(98695),v=n(37659),Y=n(27428),f=n(95691),b=n(79454),y=n(2058),_=n(68410),w=n(46009),k=n(22092);let C=e=>{let t,n,d,{freeSignup:c,freeSignupEmail:C,isPodcast:I,isTagPage:S=!1,newPosts:D,pub:F,scheduledLiveStreams:P,section:x,tag:T,user:A,utm:E}=e,{isMobile:N}=(0,_.sM)(),[B,M]=(0,l.useState)(null!=P?P:null),{ids:R}=(0,Y.M)({pub:F}),{ids:L}=(0,f.P)({pub:F}),O=(0,k.E)({pub:F,section:x});if((0,l.useEffect)(()=>{let e=async()=>{M(await (0,b.f7)())};O&&!B&&e()},[O,B]),!x&&!S&&!I)return console.warn("Needs to be a section, tag, or pub-level podcast"),null;let z=!!x&&L.includes(x.id),U=!!x&&R.includes(x.id);if(I){let e=x?(0,w.lL)({pub:F,section:x}):(0,w.j_)({pub:F});t=e.title,n=e.description,d=e.artUrl}else z?(t=null==x?void 0:x.name,n=null==x?void 0:x.description,d=null==x?void 0:x.logo_url):S?(t=(null==T?void 0:T.name)||"Page not found",n=null):(t=null==x?void 0:x.name,n=null==x?void 0:x.description);return(0,i.Y)(o.y,{belowDescription:(0,i.FD)(p.pT,{direction:N?"column":"row",justifyContent:"space-between",children:[I?(0,i.Y)(a.Z,{pub:F,section:x,user:A}):z?(0,i.Y)(v.m,{pub:F,section:x}):void 0,x&&(I||z)&&(0,i.Y)(m.S,{freeSignup:c,freeSignupEmail:C,isPodcastOrVideo:!0,pub:F,section:x,user:A})]}),bodyWrapperVariant:"two-middle-columns",description:n,image:d?(0,i.Y)(r.o,{className:"sectionImage-AFt6TD",imageIsFixedWidth:!1,maxWidth:540,src:d,useRetinaSizing:!0}):void 0,pageCTA:!x||S||I||z?void 0:(0,i.Y)(m.S,{freeSignup:c,freeSignupEmail:C,isPodcastOrVideo:!1,pub:F,section:x,user:A}),title:t,children:(0,i.FD)(p.I1,{gap:40,children:[B&&B.length>0&&(0,i.FD)(i.FK,{children:[(0,i.Y)(h,{scheduledLiveStreams:B}),(0,i.Y)(u.c,{})]}),(0,i.Y)(y.M,{hideCommunity:!0,hideTop:S,isPodcast:I&&!x,newPosts:D,postTagId:null==T?void 0:T.id,pub:F,renderLoading:()=>null,renderTabs:e=>{let{activeTabId:t,tabs:n,onClick:l}=e;return n.length<=1||I?null:(0,i.Y)(p.I1,{alignItems:"center",className:"tabsContainer-P8p3c9",paddingBottom:N?40:64,children:(0,i.Y)(g.p,{activeTabId:t,tabs:n,onClick:l})})},sectionId:null==x?void 0:x.id,source:S?"tag-archive":void 0,user:A,utm:E,children:e=>{let{posts:t}=e;return(0,i.Y)(s.R,{isEvents:U,posts:t})}})]})})}},7903:function(e,t,n){n.d(t,{S:()=>m});var i=n(4006),l=n(45773),r=n(17402),o=n(63446),a=n(73062),s=n(84605),d=n(12501),c=n(76977),u=n(36372),p=n(39318),h=n(22092);let m=e=>{let{pub:t,section:n,isPodcastOrVideo:m,user:g,minimize:v,freeSignup:Y,freeSignupEmail:f}=e,{iString:b}=(0,s.GO)(),{popToast:y}=(0,u.d)(),[_,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),I=!!g||!!f&&!!Y,{refetch:S}=(0,d.st)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{result:D,refetch:F}=(0,d.st)({pathname:"/api/v1/subscription",auto:!1});(0,r.useEffect)(()=>{(async()=>{let e=(0,p.Dlv)(window.location.href);if((null==e?void 0:e.searchParams.get("subscribe"))==="true"&&I){await S({json:{[n.id]:{setting:"individual"}}});let e=new URL(window.location.href);e.searchParams.delete("subscribe"),window.history.replaceState({},"",e.toString())}I&&await F(),C(!0)})()},[I]),(0,r.useEffect)(()=>{(null==D?void 0:D.email_settings)&&w("individual"===D.email_settings[n.id])},[D,n.id]);let P=async()=>{if(!I){let e=(0,h._)(t,{sectionSlug:n.slug,next:(0,p.yRP)(window.location.href,{subscribe:!0})});window.location.href=e;return}let e=!_;await S({json:{[n.id]:{setting:e?"individual":"disabled"}}}).then(()=>{w(e),y(()=>(0,i.Y)(u.y,{Icon:l.A,text:e?"Subscription updated!":"Unsubscribed!"}))})};return(0,i.Y)(c.Ye,{justifyContent:m?void 0:"end",children:m?(0,i.Y)(a.i,{isSubscribed:_,minimize:v,visible:k,onClick:P}):(0,i.Y)(o.v,{style:{visibility:k?"visible":"hidden"},variant:"tertiary",onClick:P,children:_?"".concat(b("Subscribed")," "):"".concat(b("Subscribe")," +")})})}},37659:function(e,t,n){n.d(t,{m:()=>d});var i=n(4006),l=n(23747),r=n(15894),o=n(95691),a=n(57753),s=n(76977);let d=e=>{var t;let{pub:n,section:d}=e,{metadata:c}=(0,o.P)({pub:n}),u=null==(t=c[d.id])?void 0:t.youtubeUrl;return u?(0,i.FD)(s.Ye,{alignItems:"center",as:"a",gap:8,href:u,rel:"noopener noreferrer",target:"_blank",children:[(0,i.Y)(r.T,{preset:"d1-sans-medium",children:"Watch on YouTube"}),(0,i.Y)(l.A,{fill:a.Q3.black.hex,height:30,stroke:"none"})]}):null}},1918:function(e,t,n){n.d(t,{i:()=>a});var i=n(38970),l=n.n(i),r=n(17402),o=n(13770);let a=e=>{let{pub:t}=e,n=l()(t.authorPagesInfo,"user_id"),{setting:i,save:a}=(0,o.E)({key:"about_us_author_ids",fallback:[]}),[s,d]=(0,r.useState)(i),c=async()=>{await a({setting:s})};return{ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>n[e]))},onSave:c}}},79454:function(e,t,n){n.d(t,{Cr:()=>r,IZ:()=>a,N7:()=>o,c:()=>s,f7:()=>c,zG:()=>d});var i=n(15734),l=n.n(i);let r=async e=>{let{extraText:t,extraLink:n}=e;await l().put("/api/v1/publication_settings").send({homepage_message_text:t,homepage_message_link:n})},o=async e=>{let{slug:t}=e;try{var n;return null!=(n=(await l().get("/api/v1/posts/".concat(t))).body)?n:null}catch(e){return null}},a=async e=>{let{postIds:t,pub:n}=e;await l().post("/api/v1/publication/".concat(n.id,"/pin")).send({post_ids:t})},s=async e=>{let{contentBlockId:t,contentBlockPins:n}=e;await l().post("/api/v1/content_block/".concat(t,"/pins")).send({pins:n})},d=async e=>{let{pub:t}=e;try{var n;return null!=(n=(await l().get("/api/v1/live_streams/active/pub/".concat(t.id))).body.activeLiveStream)?n:null}catch(e){return null}},c=async()=>{try{var e;return null!=(e=(await l().get("/api/v1/live_streams/scheduled")).body.scheduledLiveStreams)?e:[]}catch(e){return[]}}},29098:function(e,t,n){n.d(t,{A:()=>l});var i=n(17402);function l(){let{root:e=null,threshold:t=0,rootMargin:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return[null,null];let[l,r]=(0,i.useState)(null),[o,a]=(0,i.useState)(null),s=(0,i.useRef)(new IntersectionObserver(e=>{let[t]=e;return r(t)},{root:e,threshold:t,rootMargin:n}));return(0,i.useEffect)(()=>{var e;let t=(null==o||null==(e=o.base)?void 0:e.addEventListener)?o.base:(null==o?void 0:o.addEventListener)?o:null,{current:n}=s;return n.disconnect(),t&&n.observe(t),()=>n.disconnect()},[o]),[a,l]}},99145:function(e,t,n){n.d(t,{BR:()=>c,bf:()=>d,v9:()=>s});var i=n(4006),l=n(6411),r=n.n(l),o=n(17402),a=n(21398);function s(){return(0,o.useContext)(d)}let d=(0,o.createContext)({open:()=>void 0});function c(e){let{children:t,load:l,pub:s,enableShortcuts:c=!0}=e,[u,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(),[Y,f]=(0,o.useState)();(0,o.useEffect)(()=>{if(!l||!s)return;let e=()=>p(!0);if(c)return r().bind(["/","command+k"],e),()=>{r().unbind(["/"],e),r().unbind(["command+k"],e)}},[]);let b=(0,o.useMemo)(()=>({open:e=>{m(!!(null==e?void 0:e.postsOnly)),v(()=>null==e?void 0:e.onSelectResult),f(()=>null==e?void 0:e.onClose),p(!0)}}),[]);return l&&s?(0,i.FD)(d.Provider,{value:b,children:[t,(0,i.Y)(a.Ic,{module:"@/frontend/substack/search/PublicationSearch",resolve:e=>e.PublicationSearch,isOpen:u,postsOnly:h,pub:s,onClose:()=>{null==Y||Y(),p(!1)},onRequest:()=>Promise.all([n.e("53307"),n.e("84921"),n.e("33357")]).then(n.bind(n,43288)),onSelectResult:g})]}):(0,i.Y)(i.FK,{children:t})}},58050:function(e,t,n){n.d(t,{A:()=>P,cC:()=>x,km:()=>T,ku:()=>S,tg:()=>F,uy:()=>D});var i=n(69277),l=n(79785),r=n(4006),o=n(91648),a=n.n(o),s=n(74242),d=n(31062),c=n(17402),u=n(25250),p=n(82936),h=n(84605),m=n(46271),g=n(72026),v=n(6547),Y=n(94729),f=n(76528),b=n(68349),y=n(88774),_=n(36372),w=n(46453),k=n(50963);function C(){let e=(0,l._)(["Followed ",""]);return C=function(){return e},e}function I(){let e=(0,l._)(["Unfollowed ",""]);return I=function(){return e},e}function S(e){let t=(0,m.Jd)();return(0,f.OU)("/api/v1/feed/following",(0,i._)({auto:!!t},e))}function D(){let{mutate:e}=(0,u.iX)();return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e("/api/v1/feed/following",...n)}}function F(e,t){let{data:n}=S(t);return(null!=n?n:[]).includes(null!=e?e:0)}function P(e,t,n){let{iString:i}=(0,h.GO)(),{isFollowing:l,toggle:o}=x(e,t,n),a=(0,m.Jd)(),s=(0,p.Hv)(null==e?void 0:e.id),d=!!(a&&e&&a.id!==e.id)&&!s,c=[];return d&&c.push((0,r.Y)(y.Dr,{leading:l?(0,r.Y)(v.A,{stroke:"var(--color-fg-primary)"}):(0,r.Y)(g.D,{stroke:"var(--color-fg-primary)"}),onClick:o,children:i(l?"Unfollow":"Follow")})),c}function x(e,t,n,i){let l=(0,m.Jd)(),{onboardingModal:o,requireLogin:c}=(0,w.eE)(),u=F(null==e?void 0:e.id,i),{mutate:p,data:g}=S(i),v=(0,_.d)(),f=(0,k.$k)((null==e?void 0:e.name)||""),{iString:y,iTemplate:D}=(0,h.GO)(),P=async i=>{if(e){if(!l&&o)return void(c?c():o.open());p(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i?[...t,e.id]:a()(t,e.id)},{revalidate:!1});try{await (0,Y.x6)("/api/v1/feed/".concat(e.id,"/follow"),{method:i?"POST":"DELETE",json:{surface:t,noteId:n}}),v.popToast(()=>(0,r.Y)(_.y,{Icon:i?s.A:d.A,text:i?D(C(),f):D(I(),f),cta:y("Undo"),onAccept:()=>P(!i)}))}catch(e){v.popToast(()=>(0,r.Y)(_.y,{text:(0,b.uX)(e)}));return}}};return{isFollowing:u,toggle:()=>P(!u),isLoaded:!!g}}function T(e,t,n){let{isFollowing:i,toggle:l}=x(e,t,n),[r,o]=(0,c.useState)(!1);return{isFollowing:i,buttonProps:{onClick:()=>{l(),i||o(!0)},onMouseLeave:()=>o(!1)}}}},95282:function(e,t,n){n.d(t,{MT:()=>V,YU:()=>H,qN:()=>z});var i=n(69277),l=n(70408),r=n(79785),o=n(4006),a=n(17402),s=n(43262),d=n(27437);n(84777);var c=n(84565),u=n(84605),p=n(42686),h=n(89607),m=n(27749),g=n(51498),v=n(22434),Y=n(27332),f=n(40740),b=n(6950),y=n(75840),_=n(25859),w=n(4560),k=n(58292),C=n(60897),I=n(86500),S=n(56804),D=n(12501),F=n(68349),P=n(76977),x=n(63136),T=n(504),A=n(5180),E=n(83629),N=n(56262),B=n(83873),M=n(28700),R=n(49807),L=n(44307);function O(){let e=(0,r._)(["This comment is only visible to paid subscribers of ",""]);return O=function(){return e},e}function z(e){let{comment:t,item:n,isParent:r,showReplyingTo:s,showContext:d,utm_content:u,parentCommentUserId:p,hideable:h=!1}=e,g=(0,m.PK)(),Y=(0,y.T)(),b=(0,A.l$)(n),_="treatment"===(0,c.NQ)().getExperimentVariant("web_gutterless_feed")&&"permalink"!==g&&"post-discussion"!==g,w=!t.ancestor_path,C=n.publication&&n.post&&(0,N.getPostAuthor)(n.publication,n.post),P=(0,D.st)({pathname:"/api/v1/trending-topics/toggle",method:"POST"}),x=null;if(!w){var B,M,L;let e=null==(B=t.ancestor_path)?void 0:B.split(".").pop(),i=e&&Number(e);x=null!=(L=null==(M=n.parentComments)?void 0:M.find(e=>(null==e?void 0:e.id)===i))?L:null}let O=!!(s&&(w&&C||!w&&x)),z=(0,T.KY)(n,{isModuleItem:!0}),H=async()=>{var e,t,i,l,r;(0,T.Qb)(n,g,"context",{tabId:Y}),(0,I.u4)(I.qY.SEE_MORE_NOTES_IN_CATEGORY_CLICKED,{tagId:null==(e=n.context.tag)?void 0:e.id,noteId:null==(t=n.comment)?void 0:t.id}),await P.refetch({method:"POST",json:{enable:!0,categoryID:null==(l=n.context)||null==(i=l.tag)?void 0:i.id}}),(0,F.V2)("/home/category/".concat(null==(r=n.context.tag)?void 0:r.id),{local_navigation:!1})},W=(0,N.getCommentAuthor)(t),G=(0,a.useRef)(t.reaction),[K,V]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!G.current&&t.reaction&&n.canShowFollowUpsell&&V(!0),G.current&&!t.reaction&&V(!1),G.current=t.reaction},[t.reaction,n.canShowFollowUpsell]);let j=!r&&["comment_like","comment_restack","note_like","generic"].includes(n.context.type),X={comment:t,item:n,author:W,trackProfileClicked:()=>(0,T.Qb)(n,g,"profile",{tabId:Y}),utm_content:u,hideable:h,parentCommentUserId:p,showReplyMeta:O,isTopLevel:w,postAuthor:C,parentComment:x,onSavePostClick:z,showFollowUpsell:K,onFollowUpsellDismiss:()=>V(!1)};return(0,o.Y)(k.CF,{showGutter:r,hasContext:d,onClick:e=>{if(!e.defaultPrevented&&!b){(0,T.Qb)(n,g,"item",{tabId:Y});let i="search"===g&&"undefined"!=typeof location?location.pathname:null,l=(0,R.Zgx)(t,{noBase:!t.hidden&&E.Z,urlParams:{utmSource:i}});(0,S.o)(e,t.hidden&&n.publication?(0,R.eV6)(n.publication,{addBase:!0,params:{next:l}}):l,{newTab:!!t.hidden,native:t.hidden,state:{showBack:!0}})}},entityKey:n.entity_key,children:(0,o.FD)(f.k,{user:W,item:n,comment:t,children:[d||j?(0,o.Y)(v.x,{context:n.context,onClick:()=>(0,T.Qb)(n,g,"context",{tabId:Y}),utm_content:u}):null,n.context.tag?(0,o.Y)(v.x,{context:(0,l._)((0,i._)({},n.context),{type:"topic"}),onClick:H,utm_content:u}):null,_?(0,o.Y)(U,(0,i._)({},X)):(0,o.Y)(q,(0,i._)({},X))]})})}function U(e){var t,n;let{comment:i,item:l,author:r,trackProfileClicked:a,utm_content:s,hideable:d,parentCommentUserId:c,showReplyMeta:u,isTopLevel:h,postAuthor:g,parentComment:v,onSavePostClick:f,showFollowUpsell:_,onFollowUpsellDismiss:C}=e,I=(0,m.PK)(),S=(0,y.T)();return(0,o.FD)(P.VP,{gap:6,children:[(0,o.FD)(P.Ye,{gap:12,alignItems:"start",children:[(0,o.Y)(P.ov,{height:40,children:(0,o.Y)(k.NT,{user:r,onClick:a,utm_content:s})}),(0,o.FD)(P.I1,{gap:4,flex:"grow",minWidth:0,children:[(0,o.Y)(Y.LY,{author:r,post:null!=(t=l.post)?t:void 0,comment:i,onClick:a,utm_content:s,publication:null!=(n=l.publication)?n:void 0,item:l,allowHide:d,parentCommentUserId:c}),u&&(0,o.Y)(K,{isTopLevel:h,postAuthor:null!=g?g:null,parentComment:v,item:l})]})]}),i.body&&(0,o.Y)(H,{comment:i,item:l}),i.attachments&&(0,o.Y)(p.ti,{parent:i,attachments:i.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,T.Qb)(l,I,"attachment",{tabId:S,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:n}})},onSavePostClick:f,utm_content:s,item:l}),!i.hidden&&(0,o.Y)(w.M,{item:l,comment:i}),_&&(0,o.Y)(b.Z,{author:r,noteId:l.entity_key,onDismiss:C})]})}function q(e){var t,n;let{comment:i,item:l,author:r,trackProfileClicked:s,utm_content:d,hideable:c,parentCommentUserId:u,showReplyMeta:h,isTopLevel:v,postAuthor:f,parentComment:_,onSavePostClick:C,showFollowUpsell:I,onFollowUpsellDismiss:S}=e,D=(0,m.PK)(),F=(0,y.T)(),[x,A]=(0,a.useState)(!1);return x?(0,o.Y)(g.B,{item:l,author:r,comment:i,onCancel:()=>A(!1)}):(0,o.FD)(P.Ye,{gap:12,alignItems:"start",children:[(0,o.Y)(k.NT,{user:r,onClick:s,utm_content:d}),(0,o.FD)(P.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,o.FD)(P.I1,{gap:12,children:[(0,o.FD)(P.I1,{gap:4,children:[(0,o.Y)(Y.LY,{author:r,post:null!=(t=l.post)?t:void 0,comment:i,onClick:s,utm_content:d,publication:null!=(n=l.publication)?n:void 0,item:l,allowHide:c,parentCommentUserId:u,onDismiss:()=>A(!0)}),h&&(0,o.Y)(K,{isTopLevel:v,postAuthor:null!=f?f:null,parentComment:_,item:l}),i.body&&(0,o.Y)(H,{comment:i,item:l})]}),i.attachments&&(0,o.Y)(p.ti,{parent:i,attachments:i.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,T.Qb)(l,D,"attachment",{tabId:F,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:n}})},onSavePostClick:C,utm_content:d,item:l})]}),!i.hidden&&(0,o.Y)(w.M,{item:l,comment:i}),I&&(0,o.Y)(b.Z,{author:r,noteId:l.entity_key,onDismiss:S})]})]})}function H(e){let{comment:t,item:n,large:i,paddingRight:l}=e,r=(0,m.PK)(),d=(0,y.T)(),{bodyJson:c,truncatedBodyJson:u,isTruncated:p,shouldExpandInline:g}=(0,C.A)(t),[v,Y]=(0,a.useState)(!1),f=i||!p||v,b=f?c:u;return t.age_verification&&t.age_verification.status!==B.Y.CompletedAdult?(0,o.Y)(P.VP,{paddingTop:8,children:(0,o.Y)(s.T,{content:t,description:t.body,source:"feed"})}):(0,o.FD)(P.I1,{className:L.A.feedCommentBody,paddingRight:l,children:[(0,o.Y)(k.Wz,{children:t.hidden&&n?(0,o.Y)(W,{pub:null==n?void 0:n.publication}):b&&(0,o.Y)(h.w,{content:b,onLinkClicked:()=>{n&&(0,T.Qb)(n,r,"link",{tabId:d,extraEventProps:{commentId:t.id}})},attachedLinks:V(t)},f)}),!f&&(0,o.Y)(G,{onClick:e=>{n&&(0,T.Qb)(n,r,"see_more",{tabId:d,extraEventProps:{commentId:t.id}}),g?(e.preventDefault(),Y(!0)):(0,F.V2)((0,R.Zgx)(t,{noBase:E.Z,urlParams:{utmSource:"search"===r&&"undefined"!=typeof location?location.pathname:null}}),{event:e,state:{showBack:!0}})}})]})}function W(e){let{pub:t}=e,{iString:n,iTemplate:i}=(0,u.GO)(),l=(null==t?void 0:t.name)||"";return(0,o.FD)(o.FK,{children:[(0,o.Y)("i",{children:i(O(),l)}),(0,o.Y)("br",{}),(0,o.Y)("b",{children:n("Subscribe to view ")})]})}function G(e){let{iString:t}=(0,u.GO)();return(0,o.FD)(P.pT,{className:L.A.seeMore,children:[(0,o.Y)(P.pT,{className:L.A.seeMoreFade}),(0,o.Y)(x.EY.B3,{color:"secondary",weight:"medium",className:L.A.seeMoreText,children:(0,o.Y)(_.Yq,(0,l._)((0,i._)({},e),{children:t("See more")}))})]})}function K(e){var t;let{isTopLevel:n,postAuthor:i,parentComment:l,item:r}=e,a=n?i:l?{id:l.user_id,user_id:l.user_id,name:l.name,photo_url:l.photo_url,handle:l.handle}:i,s=n?(0,R.q$n)(r.publication,r.post,{noBase:E.Z}):(0,R.Zgx)(l,{noBase:E.Z}),c=(null==(t=n?i:l)?void 0:t.name)||"";return a?(0,o.FD)(x.EY.B5,{color:"secondary",translated:!0,children:["Replying to"," ",(0,o.Y)(d.ProfileHoverCard,{subject:a,utmSource:"feed",trigger:(0,o.Y)(_.Yq,{href:s,children:I18N.p(c)})})]}):null}function V(e){return e.attachments?e.attachments.map(e=>"link"===e.type?e.linkMetadata.url:"post"===e.type?(0,R.wu9)(e.publication,e.post):"publication"===e.type?(0,R.$_T)(e.publication):"comment"===e.type?(0,R.Zgx)(e.comment):"user"===e.type?(0,M.gY)(e.user):"").filter(Boolean):[]}},44451:function(e,t,n){n.d(t,{GJ:()=>et,XZ:()=>w.XZ});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(3213),d=n(17402),c=n(84565),u=n(84605),p=n(46271),h=n(95282),m=n(27749),g=n(51498),v=n(2675),Y=n(42652),f=n(2192),b=n(53906),y=n(25979),_=n(37120),w=n(20482),k=n(68279),C=n(60346),I=n(40144),S=n(22434),D=n(27332),F=n(40740),P=n(75840),x=n(25859),T=n(99289),A=n(58292),E=n(94328),N=n(58418),B=n(56804),M=n(82772),R=n(17028),L=n(44552),O=n(75303),z=n(63136),U=n(95187),q=n(504),H=n(5180),W=n(60281),G=n(83629),K=n(91563),V=n(2548),j=n(11510),X=n(20437),J=n(56262),Z=n(75914),Q=n(70189),$=n(49807),ee=n(44307);let et=(0,d.memo)(function(e){let{item:t,className:n,showLoginPrompt:i}=e,l=en[t.type];return l?(0,r.Y)(l,{item:t,className:n,children:i&&(0,r.Y)(C.H,{version:"login"})}):null}),en={post:function(e){let{item:t,className:n,children:i}=e,l=(0,m.PK)(),o=(0,d.useContext)(P.P),{iString:a}=(0,u.GO)();return(0,r.FD)(w.B_,{item:t,className:n,ariaLabel:a("Post"),children:[i,(0,r.Y)(ei,{item:t,context:(0,r.Y)(S.x,{context:t.context,onClick:()=>(0,q.Qb)(t,l,"context",{tabId:o}),utm_content:t.entity_key}),hideable:!0})]})},comment:function(e){var t,n;let{item:i,className:l,children:o}=e,{iString:a}=(0,u.GO)(),{publication:s,post:c,comment:p,parentComments:g}=i,v=s||c||!g||1===g.length?void 0:g[0],Y=null!=(n=g&&g[g.length-1])?n:null,f=s&&c&&(0,J.getPostAuthor)(s,c),b=(0,m.PK)(),y="comment_restack"!==i.context.type&&"comment_like"!==i.context.type&&"post-discussion"!==b,_=(0,d.useContext)(P.P),k="comment_restack"===i.context.type||"comment_like"===i.context.type?"user/".concat(null==(t=i.context.users[0])?void 0:t.id):i.entity_key;return(0,r.Y)(w.B_,{item:i,className:l,ariaLabel:a("Note"),children:(0,r.FD)(r.FK,{children:[o,(0,r.FD)(eo,{children:[y&&(0,r.Y)(ea,{author:f,rootFeedComment:v,parentComments:g,parentComment:Y,item:i,utm_content:k,feedSurface:b,tabId:_}),(0,r.Y)(h.qN,{comment:p,item:i,showReplyingTo:!y,utm_content:k,hideable:!0})]})]})})},userSuggestions:function(e){let{item:t}=e,n=(0,j.Iu)(),{iString:o}=(0,u.GO)(),a=(0,d.useRef)(null),s=(0,L.h9)(a),{state:c,handleArrowClick:h}=(0,V.jA)(a,{scrollFullPage:!0}),m=(0,p.ur)(),g=(0,Q.st)();return(0,M.S8)(a,()=>{m.changeSetting("suggestions_feed_item_last_shown_at",new Date().toISOString())},{threshold:.2}),(0,r.Y)(w.B_,{item:t,children:(0,r.FD)(R.I1,{paddingTop:16,children:[(0,r.FD)(R.pT,{alignItems:"center",justifyContent:"space-between",paddingLeft:{mobile:16,desktop:0},children:[(0,r.Y)(R.EY.H4,{children:(0,r.Y)(x.Yq,{onClick:e=>(0,B.o)(e,g),children:o("Suggestions")})}),(0,r.Y)(R.$n,{size:"sm",priority:"tertiary",onClick:e=>(0,B.o)(e,g),children:o("See all")})]}),(0,r.FD)(R.pT,{className:ee.A.peopleYouMayKnowContainer,alignItems:"center",flex:"grow",position:"relative",children:[(0,r.Y)(R.pT,{flex:"grow",overflow:"hidden",children:(0,r.FD)(R.pT,(0,l._)((0,i._)({},s.props),{ref:a,className:ee.A.peopleYouMayKnow,alignItems:"center",gap:8,paddingX:{desktop:0,mobile:16},paddingBottom:16,paddingTop:12,children:[!1,t.userSuggestions.map(e=>(0,r.Y)(W.pp,{feedUserSuggestion:e,surface:"feed"},e.user.id))]}))}),!n&&(0,r.FD)(r.FK,{children:[(0,r.Y)(U.p_,{direction:"left",isVisible:c.showLeft,onClick:h(-1)}),(0,r.Y)(U.p_,{direction:"right",isVisible:c.showRight,onClick:h(1)})]})]})]})})},facebookConnect:function(e){let{item:t}=e;return(0,r.Y)(w.B_,{item:t,children:(0,r.Y)(R.pT,{paddingY:20,children:(0,r.Y)(W.h8,{})})})},inviteFriends:function(e){let{item:t}=e,[n]=(0,N.A)(W.Ft);return n?null:(0,r.Y)(w.B_,{item:t,children:(0,r.Y)(R.pT,{paddingY:20,paddingX:20,children:(0,r.Y)(W.pS,{utmSource:"feed_item"})})})},featuredPublication:k.G,featuredCollection:_.U,chat:function(e){let{item:t}=e,{iString:n}=(0,u.GO)();return t.community_post.user&&(0,r.Y)(w.B_,{item:t,ariaLabel:n("Chat"),children:(0,r.Y)(Y.H,{item:t,author:t.community_post.user})})},profileSearchResults:function(e){let{item:t}=e;return(0,r.Y)(w.B_,{item:t,children:(0,r.Y)(f.T,{item:t})})},categoryLeaderboard:y.b,trendingTopicsExplore:function(e){let{item:t}=e;return(0,r.Y)(w.B_,{item:t,children:(0,r.Y)(b.q,{item:t})})},videoSuggestionsExplore:I.b};function ei(e){let{item:t,showGutter:n,context:l,hideable:o=!1}=e,{publication:a,post:s}=t,u=a&&s?(0,J.getPostAuthor)(a,s):void 0,p=(0,m.PK)(),h=(0,d.useContext)(P.P),g=(0,H.l$)(t),v="treatment"===(0,c.NQ)().getExperimentVariant("web_gutterless_feed")&&"permalink"!==p,Y="post"===t.type&&t.mediaClip?t.mediaClip.clip_info:null;if(!a||!s||!u)return null;let f={author:u,clipInfo:Y,post:s,item:t,publication:a,hideable:o,trackProfileClicked:()=>(0,q.Qb)(t,p,"profile",{tabId:h}),trackPostClicked:()=>(0,q.Qb)(t,p,"attachment",{tabId:h})};return(0,r.Y)(A.CF,{onClick:e=>{e.defaultPrevented||g||((0,q.Qb)(t,p,"item",{tabId:h}),(0,B.o)(e,(0,$.q$n)(a,s,{noBase:G.Z,mediaClip:"post"===t.type&&t.mediaClip||void 0})))},showGutter:n,hasContext:!!l,entityKey:t.entity_key,children:(0,r.FD)(F.k,{user:u,item:t,children:[l,v?(0,r.Y)(el,(0,i._)({},f)):(0,r.Y)(er,(0,i._)({},f))]})})}function el(e){var t,n;let{author:i,trackProfileClicked:l,post:o,item:a,publication:s,hideable:d,trackPostClicked:c,clipInfo:u}=e;return(0,r.FD)(ed,{children:[(0,r.FD)(R.pT,{gap:12,alignItems:"start",children:[(0,r.Y)(R.ov,{height:40,children:(0,r.Y)(A.NT,{user:i,onClick:l,utm_content:a.entity_key})}),(0,r.Y)(R.I1,{gap:8,flex:"grow",minWidth:0,children:(0,r.Y)(D.LY,{author:i,post:o,onClick:l,utm_content:a.entity_key,publication:s,item:a,allowHide:d})})]}),o&&(null==(n=o.liveStream)||null==(t=n.liveStream)?void 0:t.status)&&["scheduled","pending","active"].includes(o.liveStream.liveStream.status)?(0,r.Y)(K.S,{liveStream:o.liveStream,post:o,feedItem:a}):(0,Z.tL)(a)&&o.videoUpload?(0,r.Y)(X.R8,{tag:(0,r.Y)(E.b_,{item:a,pub:s,post:o}),composing:!1,mediaUpload:o.videoUpload,videoPlayerProps:(0,v.g2)({post:o,item:a,clipInfo:u})}):(0,r.Y)(v.Sp,{item:a,publication:s,post:o,onClick:c,clipInfo:u}),(0,r.Y)(T.j,{item:a,pub:s,post:o})]})}function er(e){var t,n;let{author:i,trackProfileClicked:l,post:o,item:a,publication:s,hideable:c,trackPostClicked:u,clipInfo:p}=e,[h,m]=(0,d.useState)(!1);return h?(0,r.Y)(g.B,{item:a,author:i,post:o,onCancel:()=>m(!1)}):(0,r.FD)(R.pT,{gap:12,alignItems:"start",children:[(0,r.Y)(A.NT,{user:i,onClick:l,utm_content:a.entity_key}),(0,r.FD)(R.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,r.FD)(R.I1,{gap:12,children:[(0,r.Y)(D.LY,{author:i,post:o,onClick:l,utm_content:a.entity_key,publication:s,item:a,allowHide:c,onDismiss:()=>m(!0)}),o&&(null==(n=o.liveStream)||null==(t=n.liveStream)?void 0:t.status)&&["scheduled","pending","active"].includes(o.liveStream.liveStream.status)?(0,r.Y)(K.S,{liveStream:o.liveStream,post:o,feedItem:a}):(0,Z.tL)(a)&&o.videoUpload?(0,r.Y)(X.R8,{tag:(0,r.Y)(E.b_,{item:a,pub:s,post:o}),composing:!1,mediaUpload:o.videoUpload,videoPlayerProps:(0,v.g2)({post:o,item:a,clipInfo:p})}):(0,r.Y)(v.Sp,{item:a,publication:s,post:o,onClick:u,clipInfo:p})]}),(0,r.Y)(T.j,{item:a,pub:s,post:o})]})]})}let eo=(0,O.I4)({gap:8},O.VP);function ea(e){var t,n;let{author:i,rootFeedComment:l,parentComments:o,parentComment:a,item:s,utm_content:d,feedSurface:c,tabId:u}=e,p="note_reply"===s.context.type&&s.comment.user_id!==(null!=(n=null==i?void 0:i.id)?n:null==o||null==(t=o[0])?void 0:t.user_id);return(0,r.FD)(r.FK,{children:[i?(0,r.FD)(r.FK,{children:[(0,r.Y)(ei,{item:s,showGutter:!0,context:p?(0,r.Y)(S.x,{context:s.context,onClick:()=>(0,q.Qb)(s,c,"context",{tabId:u}),utm_content:d}):void 0}),o&&o.length>1&&a&&(0,r.Y)(es,{url:(0,$.Zgx)(a,{noBase:G.Z}),showGutter:!0})]}):l?(0,r.FD)(r.FK,{children:[(0,r.Y)(h.qN,{isParent:!0,comment:l,item:s,showContext:p,utm_content:d}),o&&o.length>2&&a&&(0,r.Y)(es,{url:(0,$.Zgx)(a,{noBase:G.Z}),showGutter:!0})]}):null,a&&o&&o.length>0&&(0,r.Y)(h.qN,{showReplyingTo:o.length>2,isParent:!0,comment:a,item:s,showContext:p&&!(i||l),utm_content:d})]})}function es(e){let{url:t,showGutter:n}=e,{iString:i}=(0,u.GO)();return(0,r.Y)(A.CF,{onClick:e=>(0,B.o)(e,t),showGutter:n,hasAvatar:!1,children:(0,r.FD)(R.Ye,{children:[(0,r.FD)(R.I1,{alignItems:"center",justifyContent:"center",className:ee.A.seeMoreThread,children:[(0,r.Y)(R.I1,{className:a()(ee.A.seeMoreThreadSegment,ee.A.top)}),(0,r.Y)(s.A,{size:16,stroke:"var(--color-utility-detail)"}),(0,r.Y)(R.I1,{className:ee.A.seeMoreThreadSegment,flex:"grow"})]}),(0,r.Y)(R.I1,{className:ee.A.seeMoreReplies,flex:"grow",minWidth:0,children:(0,r.Y)(R.EY.B4,{color:"highlight",children:(0,r.Y)(x.Yq,{href:t,children:i("See more replies")})})})]})})}let ed=(0,O.I4)((0,l._)((0,i._)({},z.nS),{display:"flex",direction:"column",gap:12,width:"100%"}))},13074:function(e,t,n){n.d(t,{lE:()=>y});var i=n(69277),l=n(4006),r=n(82853),o=n(48309),a=n(43954),s=n(74217),d=n(43003),c=n(79146),u=n(86500),p=n(68349),h=n(35369),m=n(76977),g=n(63136),v=n(36372),Y=n(39318),f=n(49807),b=n(79804);function y(e){let{shareUrl:t,shareText:n,shareEventType:i,itemKey:h,shareSource:g,comment:b,onShare:y}=e,I=(0,v.d)(),S=(e,t)=>{(0,u.u4)(u.qY.SHARE_LINK_CLICKED,{name:e,type:i,item_entity_key:h,source:g});let n=t();n&&(n.startsWith("http")?window.open(n,"_blank"):document.location.href=n),null==y||y()};return(0,l.Y)(m.I1,{flex:"grow",justifyContent:"center",children:(0,l.FD)(m.pT,{gap:8,children:[(0,l.FD)(_,{children:[(0,l.Y)(k,{onClick:()=>{S("twitter",()=>(0,Y.gKg)({url:t,text:n}))},children:(0,l.Y)(c.A,{height:48})}),(0,l.Y)(w,{children:"Twitter"})]}),(0,l.FD)(_,{children:[(0,l.Y)(k,{onClick:()=>{S("facebook",()=>(0,Y.yRP)("https://www.facebook.com/sharer/sharer.php",{u:t}))},children:(0,l.Y)(s.A,{height:48})}),(0,l.Y)(w,{children:"Facebook"})]}),(0,l.FD)(_,{children:[(0,l.Y)(k,{onClick:()=>{S("linkedin",()=>(0,Y.yRP)("https://www.linkedin.com/sharing/share-offsite/",{url:t}))},children:(0,l.Y)(d.A,{height:48})}),(0,l.Y)(w,{children:"LinkedIn"})]}),(0,l.FD)(_,{children:[(0,l.Y)(C,{onClick:()=>{S("copy",()=>{(0,p.lW)(t)}),I.popToast(()=>(0,l.Y)(v.y,{text:"Copied link to clipboard",Icon:r.A}))},children:(0,l.Y)(r.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.Y)(w,{children:"Copy link"})]}),b?(0,l.FD)(_,{children:[(0,l.Y)(C,{onClick:()=>{I.popToast(()=>(0,l.Y)(v.y,{text:"Downloading image...",Icon:o.A}))},href:(0,f.Hr8)(b.id),target:"_blank",download:!0,children:(0,l.Y)(o.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.Y)(w,{children:"Save image"})]}):(0,l.FD)(_,{children:[(0,l.Y)(C,{onClick:()=>{S("email",()=>(0,Y.yRP)("mailto:",{subject:n,body:t}))},children:(0,l.Y)(a.A,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.Y)(w,{children:"Email"})]})]})})}function _(e){return(0,l.Y)(m.I1,(0,i._)({gap:8,alignItems:"center",flex:"grow"},e))}function w(e){return(0,l.Y)(g.EY.B5,(0,i._)({align:"center",color:"primary"},e))}function k(e){return(0,l.Y)(h.Nm,(0,i._)({resetCss:!0,className:b.A.shareImageButton},e))}function C(e){return(0,l.Y)(h.K0,(0,i._)({size:"lg",rounded:!0,priority:"tertiary"},e))}},92538:function(e,t,n){n.d(t,{n:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return[["1d",e("For 1 day")],["30d",e("For 30 days")],["90d",e("For 90 days")],["1y",e("For 1 year")],["1000y",e("Forever")]]}},7292:function(e,t,n){n.d(t,{t:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return{list:{id:"list",label:e("List"),description:e("A list of posts"),postCount:{desktop:7,tablet:7,mobile:7}},grid:{id:"grid",label:e("Grid"),description:e("A grid of nine posts"),postCount:{desktop:9,tablet:9,mobile:7}},"grid-groups":{id:"grid-groups",label:e("Groups (sections or tags)"),description:e("A grid of nine posts, grouped by section or tag"),postCount:{desktop:9,tablet:9,mobile:7}},custom:{id:"custom",label:e("Advanced"),description:e("Advanced layout options"),postCount:{desktop:0,tablet:0,mobile:0}}}}},5646:function(e,t,n){n.d(t,{T:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return[["visible",e("Do not delete comments")],["delete_this_comment",e("Delete this comment")],["delete_all_comments",e("Also delete all comments")]]}},70107:function(e,t,n){n.d(t,{f:()=>l});var i=n(17402);let l=e=>{let{key:t,initialValue:n}=e,[l,r]=(0,i.useState)(n);return(0,i.useEffect)(()=>{let e=localStorage.getItem(t);null!=e&&r("true"===e)},[t]),[l,e=>{r(e),e?localStorage.setItem(t,"true"):localStorage.removeItem(t)}]}},40075:function(e,t,n){n.d(t,{Y:()=>r});var i=n(17402),l=n(94729);let r=e=>{let{pub:t,user:n,preloadedActiveLiveStream:r,disabled:o}=e,[a,s]=(0,i.useState)(null!=r?r:null);return(0,i.useEffect)(()=>{n||o||(0,l.x6)("/api/v1/live_streams/active/pub/".concat(t.id)).then(e=>{let{activeLiveStream:t}=e;return s(t)})},[t,n,o]),{activeLiveStream:a}}},26289:function(e,t,n){n.d(t,{By:()=>r,sY:()=>o,yr:()=>l});var i=n(17402);let l=e=>{var t,n;let l=null==e||null==(t=e.current)?void 0:t.player,[r,o]=(0,i.useState)("number"==typeof(null==l?void 0:l.currentTime)?l.currentTime:0),[a,s]=(0,i.useState)(!!l&&!l.paused);return(0,i.useEffect)(()=>{var t;let n=null==(t=e.current)?void 0:t.player;if(n){let e=e=>{"number"==typeof e.target.currentTime&&o(e.target.currentTime)},t=()=>s(!0),i=()=>s(!1),l=()=>s(!1);return n.addEventListener("timeupdate",e),n.addEventListener("play",t),n.addEventListener("pause",i),n.addEventListener("ended",l),n.paused||a||s(!0),()=>{n.removeEventListener("timeupdate",e),n.removeEventListener("play",t),n.removeEventListener("pause",i),n.removeEventListener("ended",l)}}},[null==e||null==(n=e.current)?void 0:n.player]),{currentTime:r,isPlaying:a}},r=e=>o(e.current),o=e=>{let t=null==e?void 0:e.player,[n,l]=(0,i.useState)(!!t&&!t.paused);return(0,i.useEffect)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>l(!0),i=()=>l(!1),r=()=>l(!1);return t.addEventListener("play",e),t.addEventListener("pause",i),t.addEventListener("ended",r),t.paused||n||l(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",i),t.removeEventListener("ended",r)}}},[null==e?void 0:e.player]),n}},60285:function(e,t,n){n.d(t,{k:()=>s});var i=n(76703),l=n.n(i),r=n(17402),o=n(39318),a=n(41086);let s=e=>{let{alwaysPersistQuery:t,initialValue:n,key:i,type:s,isArray:d,disable:c}=e,u=(0,a.y)(i),p=n;u&&!c&&(p=d?u.split(",").map(e=>"number"===s?parseInt(e):e):"number"===s?parseInt(u):u);let[h,m]=(0,r.useState)(p),g=h&&(h!==n||t)?l()(h).join(","):"";return(0,r.useEffect)(()=>{if(!c)if(g)window.history.replaceState({},"",(0,o.oRR)({[i]:g}));else{let e=new URL(document.location.href);e.searchParams.delete(i),window.history.replaceState({},"",e.toString())}},[c,i,g]),[h,m]}},72569:function(e,t,n){n.d(t,{c:()=>a});var i=n(4006),l=n(82853),r=n(68349),o=n(36372);function a(){let e=(0,o.d)();return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";(0,r.lW)(t),e.popToast(()=>(0,i.Y)(o.y,{text:"Copied ".concat(n," to clipboard"),Icon:l.A}))}}},73331:function(e,t,n){n.d(t,{A:()=>F});var i=n(99851),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(9266),d=n(6212),c=n(58398),u=n(58997),p=n(36233),h=n(56778),m=n(85478),g=n(86500),v=n(13022),Y=n(68349),f=n(24782),b=n(76977),y=n(47639),_=n(27747);let w=e=>{var t;let{post:n,pub:i,user:o,freeSignup:a}=e,s=n.section_id&&i.sections&&null!=(t=i.sections.find(e=>e.id===n.section_id))?t:null,c=(0,r.useRef)(null);return(0,l.FD)(b.I1,{className:"post",paddingY:32,children:[(0,l.Y)(d.I0,{allowEdit:!0,hideAudience:"page"===n.type,hideDate:"page"===n.type,isOnPostPage:!0,post:n,pub:i,showCommentRestack:!i.hide_post_restacks,showLabel:!0,showPhoto:!0,showShare:!0,showSubtitle:!0,user:o}),n.videoUpload&&(0,l.Y)(y.U,{contentType:"post",disableAutoPlay:!0,entityKey:String(n.id),entityType:"post",isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),mediaUpload:n.videoUpload,post:n,pub:i,surface:"publication",variant:"inbox",videoPlayerRef:c,videoType:"post"}),n.podcastUpload&&!n.videoUpload&&(0,l.Y)(_.KQ,{isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),post:n,pub:i,section:s,trackingProps:{surface:"media_feed",entityKey:n.id,entityType:"post",contentType:"post"},variant:"notes-full"})]})};var k=n(56262),C=n(39318),I=n(41086),S=n(9036),D=n(57324);class F extends r.Component{async componentDidMount(){this.triggerShareOnLoad(),await this.loadMore()}getBatchSize(){return 5}async loadMore(){!this.state.hasMore||await (0,Y.vL)(this,"loading",async e=>{let{hasMore:t,posts:n}=e;if(t){n=n||[];try{let e=(await a().get("/api/v1/posts").query({limit:this.getBatchSize(),offset:n.length})).body;n=n.concat(e),t=e.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(e),this.setState({posts:n,hasMore:t})}catch(e){console.error(e)}return t}})&&this.loader&&this.loader.checkVisibility()}triggerShareOnLoad(){"share"===(0,I.y)("action")&&(window.history.replaceState({},document.title,(0,C.oRR)({action:null})),this.setState({share_on_load:!0,shareModalOpen:!0}))}makeSureIosCookiesArentBroken(e){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!e||0===e.filter(e=>(0,k.isPaidAudience)(e.audience)&&!e.hidden).length)return;let t="__cookie_checked",n=(0,S.m)(window.location.search);n[t]||(n[t]="true",window.location.search="?".concat((0,C.BpC)(n)))}onChange(e){let{post:t}=e||{};if(t){var n;let e=(this.state.posts||[]).map(e=>e.id).indexOf(t&&t.id);-1!==e&&(null==(n=this.state.posts)?void 0:n[e])&&(this.state.posts[e]=t,this.setState({posts:this.state.posts}))}}render(){var e;let{user:t,pub:n,freeSignup:i,freeSignupEmail:r,preloadedPosts:o,hide_intro_popup:a,children:d,blurbs:u,launchWelcomePage:p,skipIntroPopupRender:m,activeLiveStream:g}=this.props,{posts:v,hasMore:Y,share_on_load:b}=null!=(e=this.state)?e:{},y=[];for(let e of v||o||[]){let t=y[y.length-1];e.hidden?Array.isArray(t)?t.push(e):y.push([e]):y.push(e)}return(0,l.FD)("div",{className:"classic-home-page",children:[!!(null==g?void 0:g.liveStream.id)&&(0,l.Y)(f.A,{activeLiveStream:g}),(0,l.Y)(c.Z,{isOpen:!!this.state.shareModalOpen,onClose:()=>this.setState({shareModalOpen:!1}),user:t,pub:n,medium:"web"}),m?null:(0,l.Y)(s.Ay,{freeSignup:i,freeSignupEmail:r,user:t,post:null,publication:n,hidden:a||b,blurbs:u,launchWelcomePage:p}),(0,l.FD)("div",{className:"post-list",children:[0===y.length&&!Y&&(0,l.Y)("div",{className:"container-border coming-soon",children:(0,l.Y)("div",{className:"container",children:(0,l.Y)("p",{children:"Coming soon"})})}),y.map((e,t)=>Array.isArray(e)?this.renderHiddenPosts(e,t):this.renderPost(e)),Y?(0,l.Y)("div",{className:"post-loader",children:(0,l.Y)("div",{className:"container",children:(0,l.Y)(h.A,{ref:this.assignLoader,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore(),children:(0,l.Y)("p",{children:"Loading more posts"})})})}):n.has_posts&&v&&v.length>0&&(0,l.Y)("div",{className:"container",children:(0,l.Y)("a",{className:"archive-link button invis",href:(0,C.Xt9)(n),children:"View archive"})})]}),d]})}renderPost(e){return(0,l.Y)("div",{className:"container-border post-list-post",children:(0,l.Y)("div",{className:"container",children:"thread"===e.type?(0,l.Y)(u.X,{post:e,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:!!this.likesEnabled}):"podcast"===e.type||"video"===e.type?(0,l.Y)(w,{post:e,pub:this.props.pub,user:this.props.user,freeSignup:this.props.freeSignup}):(0,l.Y)(d.L4,{post:e,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:e=>this.onChange(e),noTitleLink:!!this.props.disableInteractive,disableSubscribePrompt:!0})})})}renderHiddenPosts(e,t){let n,i;return 0===t?(n=e.slice(0,1),i=e.slice(1)):e.length<=3?(n=e,i=[]):(n=e.slice(0,2),i=e.slice(2)),(0,l.Y)(P,{user:this.props.user,pub:this.props.pub,posts:n,collapsedPosts:i,onChange:e=>this.onChange(e)})}constructor(e,t){super(e,t),(0,i._)(this,"loader",void 0),(0,i._)(this,"assignLoader",e=>{this.loader=e}),(0,i._)(this,"likesEnabled",(0,v.Ay)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1,shareModalOpen:!1},this.props.notify_user&&"undefined"!=typeof window&&(0,p.Ay)(this.props.notify_user)}}(0,i._)(F,"contextType",m.W8);class P extends r.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||(0,g.u4)(g.qY.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render(){var e;let{user:t,pub:n,posts:i,collapsedPosts:r,onChange:o}=this.props,{showing:a}=null!=(e=this.state)?e:{};return(0,l.Y)("div",{className:"container-border post-list-hidden-posts ".concat(a?"showing":""),children:(0,l.FD)("div",{className:"container",children:[i.map(e=>(0,l.Y)(d.I0,{user:t,pub:n,post:e,onChange:o})),r.length>0&&(0,l.Y)("div",{className:"collapse-toggle",onClick:()=>this.toggle(),children:a?"hide":"+".concat(r.length," more")}),r.map(e=>(0,l.Y)(d.I0,{className:"collapsed",user:t,pub:n,post:e,utm_source:D.VU.home,onChange:o}))]})})}}},2058:function(e,t,n){n.d(t,{M:()=>H});var i=n(69277),l=n(70408),r=n(4006),o=n(48697),a=n(98445),s=n(99851),d=n(79785),c=n(32485),u=n.n(c),p=n(17402),h=n(15734),m=n.n(h),g=n(97731);let v=e=>(0,r.Y)(g.A,(0,l._)((0,i._)({},e),{name:"RightArrowIcon",svgParams:{height:20,width:20},children:(0,r.Y)("path",{d:"M7.5 15L12.5 10L7.5 5",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})}));var Y=n(56778),f=n(84605),b=n(99145),y=n(85478),_=n(86500),w=n(68349),k=n(16291),C=n(39318),I=n(49807),S=n(82776);function D(){let e=(0,d._)(["Search ",""]);return D=function(){return e},e}class F extends p.Component{componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){"search"===this.state.tab.id&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(e){(e.hideTop!==this.props.hideTop||e.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var e,t,n;let i=[],{iString:l}=this.props,r={id:"new",title:l("Latest"),posts:this.props.newPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.newPosts)};i.push(r),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||i.push({id:"top",title:l("Top"),posts:this.props.topPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.topPosts)}),(null==(e=this.props.pub)?void 0:e.community_enabled)&&(null==(t=this.props.pub)?void 0:t.has_community_content)&&!this.props.hideCommunity&&i.push({id:"community",title:l("Discussions"),posts:this.props.communityPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.communityPosts)})),this.props.postId&&i.push({id:"related",title:l("Related"),posts:this.props.relatedPosts,fullyLoaded:!!this.props.relatedPosts}),i=this.props.sortTabs&&this.props.sortTabs(i)||i,"search"!==this.props.sort&&this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()||i.push({id:"search",title:l("Search"),posts:this.props.searchPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});let o=null!=(n=i.find(e=>e.id===this.props.sort)||this.props.search&&i.find(e=>"search"===e.id)||i[0])?n:r;return{tabs:i,tab:o}}getFetchLimit(){return this.props.maxPosts||12}render(){var e,t,n;let{className:i,filterPostsPredicate:l,hideSearchTab:o,isPodcast:a,maxPosts:s,pinnedPosts:d,pub:c,renderLoading:p,renderPosts:h,renderTabs:m,renderSeeAll:g,sectionId:f,showMonthDividers:_,user:w,iString:k,iTemplate:F}=this.props,{emptyMessage:P}=this.props,{tabs:T,tab:A}=null!=(e=this.state)?e:{};P=P||k("No posts");let E=_&&(null==A?void 0:A.id)==="new",N=T.find(e=>"search"===e.id),B=T.find(e=>"community"===e.id),M=Array.isArray(A.posts)?A.posts.filter(e=>!(c&&"top"===A.id&&e.top_exclusions.includes(c.id))).filter(e=>null==c||!c.section||null==d||!d.length||!d.find(t=>t.id===e.id)).filter(e=>!S.hidePaidPostsFor.includes(null==c?void 0:c.subdomain)||"everyone"===e.audience||(null==w?void 0:w.is_subscribed)).filter(l||(()=>!0)):[];(null==c?void 0:c.section)&&(null==d?void 0:d.length)&&["new","top"].includes(null!=(t=A.id)?t:"")&&(M=[...d,...M]);let R=0===M.length,L=!M&&!A.loadingError,O=s?M.slice(0,s):M,z=h?h({posts:O,linkToComments:A===B,onClickPost:e=>{let{event:t,post:n,index:i,source:l}=e;return this.onPostClicked(t,n.id,i,l)},postGroups:E?x(O,c.language):null}):[],U=f&&null!=(n=null==c?void 0:c.sections.find(e=>e.id===f))?n:null,q=a?(0,I.erJ)({pub:c,section:U,params:{sort:A.id,search:A.query}}):(0,C.qy7)(c,{section:U,params:{sort:A.id,search:A.query}}),H=g?g({url:q}):(0,r.FD)("a",{className:"portable-archive-all",href:q,"data-native":!0,children:[k("See all")," ",(0,r.Y)(v,{height:12,width:12})]}),W=p?p():null;return(0,r.Y)(y.W8.Consumer,{children:e=>{let{getConfigFor:t}=e;return(0,r.Y)(b.bf.Consumer,{children:e=>{let{open:n}=e;return(0,r.FD)("div",{className:u()("portable-archive",i,{"empty-list":R}),children:[m&&m({activeTabId:A.id,isSearching:A===N,showSearch:!!(N&&!o),searchInputProps:{value:null==N?void 0:N.query,onKeyDown:this.onSearchKeyDown,onChange:e=>{"search"===this.state.tab.id&&this.loadTab("search",e)},onBlur:this.onSearchBlur},searchRef:e=>{this.searchInput=e},tabs:T.filter(e=>!e.hidden),onClick:e=>{this.loadTab(e)},onClickSearch:()=>{t("fallback_to_archive_search_on_section_pages")&&f?this.loadTab("search"):n()},onClickSearchClose:()=>{var e;this.loadTab(null==(e=T[0])?void 0:e.id)}}),(0,r.FD)("div",{className:"portable-archive-list",children:[A.loadingError?(0,r.Y)("p",{className:"portable-archive-empty",children:k("Failed to load posts")}):0!==M.length||A.loading?(0,r.FD)(r.FK,{children:[z,!s&&!L&&!A.loading&&!A.fullyLoaded&&(0,r.Y)(Y.A,{threshold:640,onVisible:()=>this.loadTab(A.id,A.query)})]}):(0,r.Y)("p",{className:"portable-archive-empty",children:"search"!==A.id?P:A.query?k("No results"):F(D(),U?U.name:c?c.name:"")}),A.loading||L?W:s&&M.length>=s&&H]})]})}})}})}constructor(e,t){if(super(e,t),(0,s._)(this,"searchInput",void 0),(0,s._)(this,"onTabClick",e=>t=>{t.preventDefault(),this.loadTab(e)}),(0,s._)(this,"onSearchInput",e=>{"search"===this.state.tab.id&&this.loadTab("search",e.currentTarget.value)}),(0,s._)(this,"onSearchKeyDown",e=>{if("search"===this.state.tab.id&&"Escape"===e.key){var t,n,i;null==(n=e.target)||null==(t=n.blur)||t.call(n),this.loadTab(null==(i=this.state.tabs[0])?void 0:i.id)}}),(0,s._)(this,"onPostClicked",(e,t,n,i)=>{(0,_.u4)(_.qY.ARCHIVE_PAGE_POST_CLICKED,{post_id:t,tab:this.state.tab.id,rank_in_feed:n,source:null!=i?i:this.props.source})}),(0,s._)(this,"onSearchBlur",e=>{if("search"===this.state.tab.id&&!e.target.value){var t;if(!this.state.tab.fullyLoaded)return void setTimeout(()=>{var e;null==(e=this.searchInput)||e.focus()},0);this.loadTab(null==(t=this.state.tabs[0])?void 0:t.id,"")}}),(0,s._)(this,"loadTab",async(e,t)=>{let n=this.state.tabs.find(t=>t.id===e);if(!n)return void console.error("couldnot find tab with id [".concat(e,"]"));let l=!1;if("search"===n.id&&"string"==typeof t&&n.query!==t&&(l=!0,n.query=t,n.posts=null,n.fullyLoaded=!1,n.loading=!1,n.loadingError=null),n.id!==this.state.tab.id?(this.setState({tab:n},()=>{"search"===n.id&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.oRR)({sort:n.id,search:n.query||null}))):l&&this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.oRR)({search:n.query||null})),n.loading)return;if(n.fullyLoaded){this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:n.posts});return}if("search"===n.id&&!n.query){n.posts=[],n.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}let r=(0,S.randomString)();if(n.loading=r,n.loadingError=null,this.setState({tabs:this.state.tabs}),"search"===n.id&&n.query&&(await new Promise(e=>setTimeout(e,300)),n.loading!==r))return;!this.state.tabs.find(e=>e.posts||e.fullyLoaded||e.loading||e.loadingError)&&this.props.delayFirstLoad&&await new Promise(e=>setTimeout(e,this.props.delayFirstLoad));let o=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":"";try{let e,t,l=this.props.maxPosts?2*this.props.maxPosts:this.getFetchLimit();if("related"===n.id)e=(await m().get("/api/v1/posts/".concat(this.props.postId,"/related")).query({limit:l,offset:(n.posts||[]).length})).body;else{let r=(0,i._)({type:this.props.isPodcast?"podcast":void 0,rss_episodes_only:!!this.props.isPodcast&&!this.props.sectionId||void 0},this.props.authorId&&{author_id:this.props.authorId},this.props.postTagId&&{post_tag_id:this.props.postTagId},this.props.sectionId&&{section_id:this.props.sectionId},this.props.profile&&{profile_user_id:this.props.profile.id});"new"===n.id&&this.props.includePins&&!n.posts&&(t=(await m().get(o).query((0,i._)({sort:"pinned",offset:0,limit:1},r))).body),e=(await m().get(o).query((0,i._)({sort:"search"===n.id?"new":n.id,search:"search"===n.id?n.query:"",offset:(n.posts||[]).length,limit:l},r))).body,e=[...t||[],...e.filter(e=>!(null==t?void 0:t.find(t=>t.id===e.id)))]}if(this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:e}),n.loading!==r)return;n.posts=n.posts?n.posts.concat(e):e,n.fullyLoaded=e.length<l||!!(this.props.maxPosts&&n.posts&&n.posts.length>=this.props.maxPosts)}catch(e){console.error("Failed to load tab:",e),n.loadingError=e}n.loading=!1,this.setState({tabs:this.state.tabs.map(e=>e.id===n.id?n:e),tab:n})}),(0,s._)(this,"onChange",e=>{let{post:t}=e;t&&((0,w.qr)(this,e=>{let n=!1;for(let i of e.tabs.map(e=>e.posts).filter(e=>Array.isArray(e))){let e=null==i?void 0:i.findIndex(e=>e.id===t.id);-1!==e&&i&&(i[null!=e?e:""]=t,n=!0)}n&&this.setState({tabs:e.tabs})}),this.props.onChange&&this.props.onChange(t))}),!(this.props.pub||this.props.profile))throw Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}}let P=(0,f.wr)(F),x=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",i=[];return e.forEach((e,l)=>{let r=(0,k.A)(e.post_date).locale(n).format("MMMM YYYY");if(r!==t)0===l?i.push({label:"",posts:[e]}):i.push({label:r,posts:[e]}),t=r;else{let t=i[i.length-1];t&&t.posts.push(e)}}),i};var T=n(53989),A=n(10939),E=n(68410),N=n(28528),B=n(24634),M=n(72692),R=n(35369),L=n(76977),O=n(40837),z=n(21356),U=n(63136),q=n(4016);let H=e=>{var t;let{authorId:n,children:s,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:Y,newPosts:b,pinnedPosts:_,postTagId:w,pub:k,renderLoading:C,renderTabs:I,search:D,searchPosts:F,postId:x,sectionId:H,showMonthDividers:W,sort:G,sortTabs:K,source:V,topPosts:j,user:X,utm:J,variant:Z="list",onPostsLoaded:Q}=e,{iString:$}=(0,f.GO)(),{isMobile:ee}=(0,E.sM)(),{getSettingFor:et}=(0,T.Pu)(),en=(0,y.mJ)(),ei=(0,S.ensureInList)(et("post_preview_crop_gravity"),["center","auto"]),el=(0,q.lu)({pub:k}),er=null!=(t=en.getConfigFor("related_posts_enabled"))&&t;return(0,r.Y)(N.XL,{authorPagesEnabled:!!en.getConfigFor("enable_author_pages"),cropGravity:ei,highlightByline:!!en.getConfigFor("post_preview_highlight_byline"),pub:k,user:X,utm:J,children:(0,r.Y)(P,{authorId:n,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:Y,newPosts:b,pinnedPosts:_,postId:er?x:void 0,postTagId:w,pub:k,renderLoading:null!=C?C:()=>(0,r.Y)(B.t,{postCount:null!=Y?Y:7,variant:Z}),renderPosts:e=>{let{posts:t,linkToComments:n,onClickPost:i,postGroups:l}=e;return l?l.map(e=>{let{label:t,posts:l}=e;return(0,r.FD)(r.FK,{children:[t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(A.r,{paddingBottom:8,paddingTop:8}),(0,r.Y)(U.EY.Meta,{as:"h3",className:"monthHeader-nt8KgE",color:"accent",paddingBottom:24,children:t})]}),s({posts:l,linkToComments:n,onClickPost:i})]})}):s({posts:t,linkToComments:n,onClickPost:i})},renderSeeAll:e=>{let{url:t}=e;return"grid-groups"===Z||el?null:(0,r.Y)(M.k,{url:t})},renderTabs:null!=I?I:e=>{let{activeTabId:t,isSearching:n,tabs:s,searchInputProps:d,searchRef:c,showSearch:u,onClick:p,onClickSearch:h,onClickSearchClose:m}=e;if("grid-groups"===Z||el)return null;if(n)return(0,r.FD)(L.Ye,{alignItems:"center",gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,children:[(0,r.Y)(O.D,(0,l._)((0,i._)({},d),{ref:c,autoFocus:!0,flex:"grow",placeholder:$("Search..."),showClear:!1})),(0,r.Y)(R.K0,{priority:"tertiary",onClick:m,children:(0,r.Y)(o.A,{size:20})})]});if(u||s.length>1){var g,v;return(0,r.FD)(L.Ye,{alignItems:"center","aria-label":$("Archive sort tabs"),gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,role:"navigation",children:[(0,r.Y)(z.T,{tabs:s.map(e=>({value:e.id,label:e.title})),value:null!=(v=null!=t?t:null==(g=s[0])?void 0:g.id)?v:"",onChange:e=>p(e||void 0)}),u&&(0,r.Y)(R.K0,{priority:"tertiary",onClick:h,children:(0,r.Y)(a.A,{size:20})})]})}return null},search:D,searchPosts:F,sectionId:H,showMonthDividers:W,sort:G,sortTabs:K,source:V,stateInUrl:!0,topPosts:j,user:X,onPostsLoaded:Q})})}},10939:function(e,t,n){n.d(t,{r:()=>o});var i=n(4006),l=n(80098),r=n(76977);let o=e=>{let{numColumns:t=4,paddingBottom:n=24,paddingTop:o=24}=e;return(0,i.Y)(l.P,{variant:4===t?"full-width":3===t?"three-column-width":"two-column-width",children:(0,i.Y)(r.I1,{paddingBottom:n,paddingTop:o,paddingX:8,children:(0,i.Y)(r.pT,{borderBottom:"detail-themed"})})})}},47956:function(e,t,n){n.d(t,{Z:()=>ls});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(90883),s=n(83673),d=n.n(s),c=n(90179),u=n.n(c),p=n(17402),h=n(36233),m=n(85478),g=n(77043);let v=e=>{let{children:t}=e;return(0,o.Y)("div",{className:"contentContainer-S5kWYp",children:(0,o.Y)("div",{className:"contentContainerInner-aojz59",children:t})})};var Y=n(60745),f=n(49031),b=n(84713),y=n(34581),_=n(65217),w=n(65590),k=n(13950),C=n(79391),I=n(84605);let S=(0,p.createContext)({activeLiveStream:void 0,latestPostByContributorId:void 0,latestPodcastPosts:void 0,latestPostFromSections:void 0,contributors:void 0,freeSignup:void 0,freeSignupEmail:void 0,homepageLinks:void 0,numRecommendations:void 0,recommendations:void 0,topPosts:void 0});var D=n(68410),F=n(89490),P=n(76977),x=n(63136),T=n(72682),A=n(71783),E=n(8312),N=n(39318),B=n(49807);let M=e=>{let{customFooterTheme:t,isPreview:n,pub:l,socialMediaLinks:r,user:s}=e,{isMobile:d,isTablet:c}=(0,D.sM)(),u=(0,a.md)(A.vB),p=u?(0,i._)({},t,u):t,{showPublicationName:h,publicationNamePosition:m}=p,g=64;c?g=48:d&&(g=24);let v={customFooterTheme:p,paddingY:g,pub:l},Y={customFooterTheme:p,isPreview:n,paddingY:g,pub:l,socialMediaLinks:r,user:s},f=h&&"default"!==p.layout?(0,o.Y)(L,(0,i._)({},v)):null;return(0,o.FD)(P.VP,{style:{marginTop:24},children:["top"===m&&f,(0,o.Y)(R,(0,i._)({},Y)),"bottom"===m&&f]})},R=e=>{let{customFooterTheme:t,isPreview:n,paddingY:i,pub:l,socialMediaLinks:r,user:a}=e,{iString:s}=(0,I.GO)(),{isMobile:d}=(0,D.sM)(),{layout:c}=t,u=(0,o.Y)(U,{isPreview:n,socialMediaLinks:r}),p=t.showPublicationName,h=null;return"centered"===c&&(h=(0,o.FD)(P.VP,{alignItems:"center",gap:20,children:[(0,o.FD)(P.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",children:p?s("Subscribe"):l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",maxWidth:540,textAlign:"center",children:l.hero_text})]}),(0,o.Y)(O,{pub:l,user:a}),(0,o.Y)(z,{pub:l}),u]})),"two-column"===c&&(h=(0,o.FD)("div",{className:"twoColumnGrid-NSUThY",children:[(0,o.FD)(P.VP,{gap:16,children:[(0,o.FD)(P.VP,{gap:4,children:[(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",children:l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",children:l.hero_text})]}),(0,o.Y)(z,{pub:l})]}),(0,o.FD)(P.VP,{alignItems:d?"center":"end",gap:24,children:[(0,o.Y)(O,{align:"left",pub:l,user:a}),u]})]})),"three-column"===c&&(h=(0,o.FD)("div",{className:"threeColumnGrid-nUueeH",children:[(0,o.Y)(P.VP,{alignItems:d?"center":"start",justifyContent:"center",style:d?{order:3}:void 0,children:u}),(0,o.FD)(P.VP,{alignItems:"center",gap:16,justifyContent:"center",children:[(0,o.FD)(P.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(x.EY.H3,{color:"primary",font:"pub-headings",children:p?s("Subscribe"):l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",children:l.hero_text})]}),(0,o.Y)(O,{pub:l,user:a})]}),(0,o.Y)(P.VP,{alignItems:d?"center":"end",justifyContent:"center",children:(0,o.Y)(z,{pub:l})})]})),(0,o.Y)(k.DH,{prefix:"footer",children:(0,o.Y)(F.az,{borderTop:"detail",paddingY:i,children:(0,o.Y)(v,{children:h})})})},L=e=>{var t,n,l,r,s,d;let{customFooterTheme:c,paddingY:u,pub:p}=e,h=(0,a.md)(A.MS),{publicationNameStyle:m,publicationNameSize:v}=c,Y="wordmark"===m&&p.logo_url_wide,f=null!=h?h:null==(n=p.theme)||null==(t=n.font_options)?void 0:t.wordmark,b=null!=(d=null==(r=p.theme)||null==(l=r.font_options)?void 0:l.heading)?d:null==(s=p.theme)?void 0:s.font_preset_heading,y=p.logo_url_wide?b:null!=f?f:b,_=y?(0,E.OK)(y):null,w=Y?20:g.Rc,C=Y?120:60,I=20+v,S=Y?I:50===v?g.YR:Math.min(Math.max(I,w),C);return(0,o.Y)(k.DH,{prefix:"footer_secondary",children:(0,o.Y)(P.fI,{borderTop:"detail",justifyContent:"center",paddingY:u,children:(0,o.Y)(T.c,{anchor:"center",max:C,min:w,property:"footerPublicationNameSize",value:S,children:e=>{if(Y)return(0,o.Y)("img",{alt:p.name,src:(0,B.dJ9)(p.logo_url_wide,null,{height:Math.round(2*e),crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:{display:"block",height:e,objectFit:"contain",width:"100%"}});let t=(0,g.$L)(e,w,C);return(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",style:(0,i._)({fontSize:"".concat(t,"rem"),lineHeight:1},_),children:p.name})}})})})},O=e=>{let{align:t="center",pub:n,user:i}=e,{freeSignup:l,freeSignupEmail:r}=(0,p.useContext)(S);return(0,o.Y)(C.A,{align:t,freeSignup:l,freeSignupEmail:r,noMargin:!0,pub:n,source:"custom-footer",user:i})},z=e=>{let{pub:t}=e,{iString:n}=(0,I.GO)();return(0,o.FD)(P.fI,{gap:12,children:[(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.DNs)(t),children:n("About")}),(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.Xt9)(t),children:n("Archive")}),t.has_recommendations&&(0,o.Y)(x.EY.B4,{as:"a",color:"primary","data-native":!0,decoration:"underline",href:(0,N.nUM)(t),children:n("Recommendations")}),t.can_have_sitemap&&(0,o.Y)(x.EY.B4,{as:"a",color:"primary","data-native":!0,decoration:"underline",href:(0,N.bGb)(t),children:n("Sitemap")})]})},U=e=>{let{isPreview:t,socialMediaLinks:n}=e,i=t&&(!n||Object.values(n).every(e=>!e)),l=[{platform:"instagram",icon:b.A,value:i?"#":null==n?void 0:n.instagram},{platform:"tiktok",icon:_.A,value:i?"#":null==n?void 0:n.tiktok},{platform:"youtube",icon:w.A,value:i?"#":null==n?void 0:n.youtube},{platform:"facebook",icon:f.A,value:i?"#":null==n?void 0:n.facebook},{platform:"linkedin",icon:y.A,value:i?"#":null==n?void 0:n.linkedin},{platform:"bluesky",icon:Y.A,value:i?"#":null==n?void 0:n.bluesky}].filter(e=>e.value);return 0===l.length?null:(0,o.Y)(P.fI,{alignItems:"center",gap:16,children:l.map(e=>{let{platform:t,icon:n,value:l}=e;if(!l)return null;let r=((e,t)=>{if(t.startsWith("http://")||t.startsWith("https://"))return t;let n=t.startsWith("@")?t.slice(1):t;switch(e){case"instagram":if(n.startsWith("instagram.com"))return"https://".concat(n);return"https://instagram.com/".concat(n);case"tiktok":if(n.startsWith("tiktok.com"))return"https://".concat(n);return"https://tiktok.com/@".concat(n);case"youtube":if(n.startsWith("youtube.com"))return"https://".concat(n);return"https://youtube.com/@".concat(n);case"facebook":if(n.startsWith("facebook.com"))return"https://".concat(n);return"https://facebook.com/".concat(n);case"linkedin":return"https://".concat(n);case"bluesky":if(n.startsWith("bsky.app/profile"))return"https://".concat(n);return"https://bsky.app/profile/".concat(n);default:return"https://".concat(t)}})(t,l);return(0,o.Y)("a",{href:r,rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",color:"inherit",opacity:i?.2:1},target:"_blank",children:(0,o.Y)(n,{"aria-label":t,size:20})},t)})})};var q=n(80098),H=n(32485),W=n.n(H),G=n(97432),K=n(82776),V=n(57324);function j(e){let{className:t="",pub:n,user:r}=e,{iString:a,language:s}=(0,I.GO)(),{freeSignup:d,freeSignupEmail:c}=(0,p.useContext)(S);return(0,o.FD)("div",{className:W()("home-sitemap",t),children:[(0,o.Y)("h4",{className:"home-sitemap-title",children:n.name}),d||r&&r.is_free_subscribed?!(r&&r.is_subscribed)&&n.plans?(0,o.Y)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:(0,N.eV6)(n,{utm_source:V.VU.homeSitemap}),"data-native":!0,children:(0,K.getSubscribeText)(n,{language:s})}):null:(0,o.Y)(F.az,{paddingTop:20,children:(0,o.Y)(G.A,{className:"home-sitemap-signup-form",freeSignup:d,freeSignupEmail:c,pub:n,source:"home-sitemap",user:r,onSuccess:e=>{e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,N.yRP)("/account/login",{redirect:document.location.href,email:e.body.email})},30):n.plans?document.location.href=(0,N.yRP)("/subscribe",(0,l._)((0,i._)({next:document.location.href,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(null==n?void 0:n.payments_state)==="enabled"?()=>null:void 0})}),(0,o.FD)("div",{className:"home-sitemap-links",children:[(0,o.Y)("a",{href:(0,N.DNs)(n),children:a("About")}),(0,o.Y)("a",{href:(0,N.Xt9)(n),children:a("Archive")}),n.has_recommendations&&(0,o.Y)("a",{href:(0,N.nUM)(n),"data-native":!0,children:a("Recommendations")}),n.can_have_sitemap&&(0,o.Y)("a",{href:(0,N.bGb)(n),"data-native":!0,children:a("Sitemap")})]})]})}let X=()=>{let{iString:e}=(0,I.GO)();return(0,o.Y)("div",{className:"emptyState-G3KBxq",children:(0,o.Y)(x.EY.B3,{color:"secondary",children:e("Click to add footer")})})},J="container-LSZllu",Z="container--empty-D_rgwk",Q={grid:"full-width","grid-groups":"full-width",list:"three-column-width"},$={newspaper:"three-column-width",magaziney:"full-width","magazine-5":"full-width",feature:"full-width","feature-media":"full-width",podcast:"full-width"},ee=e=>{var t,n,i,l;let{activeBodyLayout:r,hasBodyPosts:s,heroLayout:d,homepageData:c,isPreview:u,pub:p,isCustomFooterEnabled:h,user:m}=e,{isMobile:g}=(0,D.sM)(),v=!!((null==c?void 0:c.newPosts)&&c.newPosts.length>0),Y=(0,a.md)(A.vB),f=null==(t=p.theme)?void 0:t.custom_footer,b=null!=(i=null!=(n=null==Y?void 0:Y.layout)?n:null==f?void 0:f.layout)?i:"default";if(h&&f&&"default"!==b)return(0,o.Y)(M,{customFooterTheme:f,isPreview:u,pub:p,socialMediaLinks:null==(l=p.theme)?void 0:l.social_media_links,user:m});if("custom"===r&&u)return(0,o.Y)(X,{});if("custom"!==r&&v){let e=s?Q[r]:$[d];return(0,o.Y)("div",{className:J,style:{width:"100%"},children:(0,o.Y)(q.P,{variant:e,children:(0,o.Y)(P.I1,{paddingX:8*!g,width:"100%",children:(0,o.Y)(j,{pub:p,user:m})})})})}return null};var et=n(79785),en=n(48697),ei=n(47963),el=n(23725),er=n(85048),eo=n(46271),ea=n(86500),es=n(94729),ed=n(68349),ec=n(24078),eu=n(35369),ep=n(16993),eh=n(81203),em=n(11510),eg=n(41086);let ev="giftBackground-I9xH3b";var eY=n(27569);function ef(){let e=(0,et._)(["All of ","'s gifts have been claimed."]);return ef=function(){return e},e}function eb(){let e=(0,et._)(["Get your free guest pass to ",""]);return eb=function(){return e},e}function ey(){let e=(0,et._)([""," gifted you "," free days of ","."]);return ey=function(){return e},e}function e_(){let e=(0,et._)(["Gift from ",""]);return e_=function(){return e},e}function ew(){let e=(0,et._)(["Gift from someone"]);return ew=function(){return e},e}function ek(){let e=(0,et._)(["","-Day Guest Pass ("," value)"]);return ek=function(){return e},e}function eC(){let e=(0,et._)(["","-Day Guest Pass"]);return eC=function(){return e},e}function eI(){let e=(0,et._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return eI=function(){return e},e}function eS(){let e=(0,et._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return eS=function(){return e},e}function eD(){let e=(0,et._)(["Accept ","'s gift"]);return eD=function(){return e},e}function eF(){let e=(0,et._)(["Accept gift"]);return eF=function(){return e},e}function eP(){let e=(0,et._)(["Accept ","'s gift"]);return eP=function(){return e},e}let ex=e=>{var t,n,l;let{isOpen:r,onClose:a,pub:s,giftCard:d,abTestingId:c}=e,{iString:u,iTemplate:h}=(0,I.GO)(),m=(0,em.Iu)(),g=(0,eo.Jd)(),{freeSignup:v,freeSignupEmail:Y}=(0,p.useContext)(S),[f,b]=(0,p.useState)((null==g?void 0:g.email)||Y||""),[y,_]=(0,p.useState)(!1),[w,D]=(0,p.useState)(!1),[F,T]=(0,p.useState)(null),[A,E]=(0,p.useState)(null),N=(null==g?void 0:g.is_free_subscribed)||v,M=s.author_photo_url||s.logo_url;if(null==d?void 0:d.expired)return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!N,paddingBottom:24*!N,children:[(0,o.Y)(eu.K0,{rounded:!0,onClick:a,"aria-label":u("Close"),priority:"tertiary",tabIndex:-1,style:{position:"absolute",top:"12px",right:"12px"},children:(0,o.Y)(en.A,{size:20})}),(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.Y)(P.I1,{alignItems:"center",gap:2,children:(0,o.Y)(x.EY.B2,{textAlign:"center",translated:!0,children:"Sorry, this gift has already expired."})})]}),(0,o.FD)(P.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(C.A,{pub:s,user:g,freeSignup:v,freeSignupEmail:Y,isStatic:!1,source:"viral-gift-fallback"}),!N&&(0,o.Y)(er.qd,{publication:s})]})]})});if(null==g?void 0:g.is_subscribed){let e=(0,B.eV6)(s,{params:{utm_source:V.VU.viralGiftModal,gift:!0}});return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.Y)(P.I1,{alignItems:"center",padding:24,gap:24,children:(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.FD)(P.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(x.EY.H4,{textAlign:"center",translated:!0,children:["Give a gift to ",I18N.p(s.name)]}),(0,o.FD)(x.EY.B3,{textAlign:"center",translated:!0,children:["You currently have an active paid subscription to ",I18N.p(s.name),", so you're not able to accept a gift. Would you like to give a gift instead?"]})]}),(0,o.Y)(eu.$n,{href:e,localNavigation:!1,children:u("Give a gift")})]})})})}if(!d||!(null==d?void 0:d.days)){if(null==d?void 0:d.gifter){let e=d.gifter.name||d.gifter.handle&&"@".concat(d.gifter.handle);return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!N,paddingBottom:24*!N,children:[(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.FD)(P.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(x.EY.H4,{textAlign:"center",translated:!0,children:["Subscribe to ",I18N.p(s.name)]}),(0,o.Y)(x.EY.B3,{textAlign:"center",children:e?h(ef(),e):u("All of your friend's gifts have been claimed.")})]})]}),(0,o.FD)(P.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(C.A,{pub:s,user:g,freeSignup:v,freeSignupEmail:Y,isStatic:!1,source:"viral-gift-fallback"}),!N&&(0,o.Y)(er.qd,{publication:s})]})]})})}return null}let R=d.gifter&&d.gifter.id!==s.author_id,L=(null==(t=d.gifter)?void 0:t.name)||(null==(n=d.gifter)?void 0:n.handle)&&"@".concat(null==(l=d.gifter)?void 0:l.handle),O=async()=>{if(!f)return void T("Please enter your email");D(!0);try{var e,t;(0,ea.u4)(ea.qY.ACCEPT_GIFT_MODAL_CTA_CLICKED,{gifter_user_id:null==(e=d.gifter)?void 0:e.id,has_sender_token:!!(0,eg.y)(window._preloads.original_url,"senderToken")});let n=await (0,es.x6)("/api/v1/viral_gifts/create_for_email",{method:"POST",json:(0,i._)({email:f},R&&(0,eg.y)(window._preloads.original_url,"senderToken")&&{senderToken:(0,eg.y)(window._preloads.original_url,"senderToken")})}),l=null==n||null==(t=n.gift)?void 0:t.id;if(l)E(l),_(!0),T(null),m&&setTimeout(()=>{window.location.href=(0,B.xdH)({giftId:l}),a()},1e3);else throw Error()}catch(e){(0,ed.uX)(e)?T((0,ed.uX)(e)):T("Something went wrong. Please try again.")}D(!1)},z=y?u("Finish activating your guest pass in the Substack app"):R?h(eb(),s.name):h(ey(),s.author_name,d.days,s.name),U=(0,o.FD)(o.FK,{children:[R?(0,o.Y)(ec.eu,{user:d.gifter,size:80}):(0,o.Y)(eh.Nq,{logoUrl:s.logo_url,size:64,radius:"sm"}),(0,o.Y)(x.EY.H3,{textAlign:"center",fontWeight:"heavy",color:"white",paddingTop:12,children:R?L?h(e_(),L):h(ew()):s.name}),(0,o.Y)(x.EY.B3,{className:"guestPassText-_ibww7",children:d.value?h(ek(),d.days,d.value):h(eC(),d.days)})]});return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"stretch",paddingBottom:48*!m,children:[!m&&(0,o.Y)(P.I1,{className:W()(ev,"giftBackgroundHeader-tb4ks8"),children:(0,o.FD)(P.I1,{justifyContent:"center",alignItems:"center",gap:4,children:[U,(0,o.Y)(eu.K0,{rounded:!0,onClick:a,"aria-label":u("Close"),priority:"tertiary",className:"headerCloseButton-m0sKZi",children:(0,o.Y)(en.A,{size:20})})]})}),(0,o.Y)(P.I1,{alignItems:"stretch",maxWidth:m?void 0:400,style:{margin:"auto"},children:(0,o.FD)(P.I1,{paddingTop:24,paddingX:{mobile:24,desktop:0},paddingBottom:{mobile:24,desktop:0},gap:8,children:[m&&(0,o.Y)(P.I1,{className:ev,justifyContent:"center",alignItems:"center",gap:4,children:U}),(0,o.Y)(x.EY.H4,{weight:"semibold",fontStyle:"normal",textAlign:"center",children:z}),(0,o.Y)(x.EY.B3,{color:"secondary",align:"center",paddingBottom:16,children:m?N?u("Download the Substack app to claim your guest pass"):R?h(eI(),d.days):u("Subscribe and download the Substack app to claim your guest pass"):y?u("Available for iOS and Android"):R?h(eS(),d.days):u("Subscribe free to claim your guest pass")}),N||y?!m&&y&&A?(0,o.Y)(P.I1,{alignItems:"center",gap:16,children:(0,o.Y)(P.pT,{className:"qrCode-MxgyfH",padding:20,children:(0,o.Y)(ei.hj,{size:142,utm_campaign:"accept_gift",utm_source:"accept_gift_modal",abTestingId:c,openUrl:(0,B.xdH)({giftId:A})})})}):y?(0,o.FD)(P.Ye,{gap:8,alignItems:"center",justifyContent:"center",children:[(0,o.Y)(el.A,{isStatic:!0,height:24,fill:"#187F22",stroke:"#187F22"}),(0,o.Y)(x.EY.B3,{color:"secondary",align:"center",translated:!0,children:"Subscribed"})]}):(0,o.Y)(k.DH,{children:(0,o.Y)(eu.$n,{priority:"primary",onClick:O,disabled:w,children:R?L?h(eD(),L):h(eF()):h(eP(),s.author_name)})}):(0,o.FD)(P.I1,{gap:24,className:"emailInputWrapper-SzmWNd",children:[(0,o.FD)(P.Ye,{justifyContent:"center",alignItems:"center",gap:0,style:{borderRadius:8},children:[(0,o.Y)("input",{className:W()("pencraft",eY.A.emailInput,"emailInput-JqukPr"),style:{border:"1px solid var(--color-utility-detail)"},type:"text",value:f,onInput:e=>b(e.currentTarget.value),placeholder:u("Your email"),tabIndex:-1}),(0,o.Y)(eu.$n,{disabled:w,className:"acceptButton-TrYdu7",priority:"primary",onClick:O,children:u("Accept gift")})]}),(0,o.Y)(er.qd,{className:"tos-RHY2Hj",publication:s})]}),F&&(0,o.Y)(x.EY.B4,{align:"center",style:{color:"red"},children:F})]})})]})})};var eT=n(61143),eA=n(56195),eE=n(65892),eN=n(75107),eB=n(15734),eM=n.n(eB),eR=n(63446),eL=n(6641),eO=n(15894),ez=n(25006),eU=n(17306),eq=n(12501),eH=n(67211),eW=n(60141);let eG=e=>{var t;let{isOpen:n,onClose:i,onSave:l,currentValues:r}=e,[a,s]=(0,p.useState)(r.hedDesktop),[d,c]=(0,p.useState)(r.dekDesktop),[u,h]=(0,p.useState)(r.collapsedHedDesktop),[m,g]=(0,p.useState)(r.collapsedHedMobile),[v,Y]=(0,p.useState)(r.hedMobile),[f,b]=(0,p.useState)(r.dekMobile),[y,_]=(0,p.useState)(r.isBlueTheme),[w,k]=(0,p.useState)(r.ctaCopy),[C,I]=(0,p.useState)(r.ctaLink),[S,D]=(0,p.useState)(null==(t=r.enabledForNonPaid)||t),[F,x]=(0,p.useState)(!1),T=(0,p.useRef)(null),A=async e=>{e.preventDefault(),x(!0);try{await eM().put("/api/v1/islands/client/config?key=toaster_data").send({value:{hedDesktop:a,hedMobile:v,dekDesktop:d,dekMobile:f,collapsedHedDesktop:u,collapsedHedMobile:m,ctaCopy:w,ctaLink:C,isBlueTheme:y,enabledForNonPaid:S}}),l(),i()}catch(e){console.error("Failed to save toaster config:",e),alert("Failed to save changes. Please try again.")}finally{x(!1)}};return(0,p.useEffect)(()=>{var e;s(r.hedDesktop),c(r.dekDesktop),h(r.collapsedHedDesktop),g(r.collapsedHedMobile),Y(r.hedMobile),b(r.dekMobile),_(r.isBlueTheme),k(r.ctaCopy),I(r.ctaLink),D(null==(e=r.enabledForNonPaid)||e)},[r]),(0,o.Y)(eL.S,{initialFocus:T,isOpen:n,width:500,onClose:i,children:(0,o.FD)(P.I1,{gap:24,padding:32,children:[(0,o.Y)(P.Ye,{alignItems:"center",justifyContent:"space-between",children:(0,o.Y)(eO.T,{preset:"h4-serif",children:"Edit Footer Banner"})}),(0,o.Y)("form",{onSubmit:A,children:(0,o.FD)(P.I1,{gap:20,children:[(0,o.Y)(eW.A,{inputRef:T,label:"Heading",placeHolder:"Support independent journalism",value:a,onChange:s}),(0,o.Y)(eW.A,{label:"Heading (collapsed)",placeHolder:"Support independent journalism",value:u,onChange:h}),(0,o.Y)(eW.A,{label:"Description",placeHolder:"Join *The Free Press* today for unlimited access",value:d,onChange:c}),(0,o.Y)(eW.A,{label:"Heading (mobile)",placeHolder:"Support independent journalism",value:v,onChange:Y}),(0,o.Y)(eW.A,{label:"Heading (collapsed mobile)",placeHolder:"Support independent journalism",value:m,onChange:g}),(0,o.Y)(eW.A,{label:"Description (mobile)",placeHolder:"Join *The Free Press* today for unlimited access",value:f,onChange:b}),(0,o.Y)(eW.A,{label:"Button Text",placeHolder:"Subscribe now",value:w,onChange:k}),(0,o.Y)(eW.A,{label:"Button Link",placeHolder:"/subscribe",value:C,onChange:I}),(0,o.Y)(eH.Y,{label:"Blue Theme",value:y,onChange:_}),(0,o.Y)(eH.Y,{label:"Enable for non-paid users",value:S,onChange:D}),(0,o.FD)(P.Ye,{gap:12,justifyContent:"end",children:[(0,o.Y)(eu.$n,{disabled:F,priority:"secondary",onClick:i,children:"Cancel"}),(0,o.Y)(eu.$n,{disabled:F,priority:"primary",type:"submit",children:F?"Saving...":"Save Changes"})]})]})})]})})},eK=()=>{let[e,t]=(0,p.useState)(!0),[n,l]=(0,p.useState)(!1),[r,a]=(0,p.useState)(!1),{hedDesktop:s,dekDesktop:d,isBlueTheme:c,collapsedHedMobile:u,collapsedHedDesktop:h,hedMobile:g,dekMobile:v,ctaCopy:Y,ctaLink:f,enabledForNonPaid:b,refetch:y,isLoading:_}=(()=>{let[e,t]=(0,p.useState)({hedDesktop:"Support independent journalism",hedMobile:"Support independent journalism",collapsedHedMobile:"Support independent journalism",collapsedHedDesktop:"Support independent journalism",dekDesktop:"Join *The Free Press* today for unlimited access",dekMobile:"Join *The Free Press* today for unlimited access",ctaCopy:"Subscribe now",ctaLink:"/subscribe",isBlueTheme:!1,enabledForNonPaid:!0}),[n,i]=(0,p.useState)(!0),{result:l,refetch:r}=(0,eq.st)({pathname:"/api/v1/islands/client/config",query:{key:"toaster_data"},auto:!0});return(0,p.useEffect)(()=>{var e;(null==l||null==(e=l.config)?void 0:e.value)&&(t(l.config.value),i(!1))},[l]),{hedDesktop:e.hedDesktop,hedMobile:e.hedMobile,collapsedHedMobile:e.collapsedHedMobile,collapsedHedDesktop:e.collapsedHedDesktop,dekDesktop:e.dekDesktop,dekMobile:e.dekMobile,ctaCopy:e.ctaCopy,ctaLink:e.ctaLink,isBlueTheme:e.isBlueTheme,enabledForNonPaid:e.enabledForNonPaid,refetch:r,isLoading:n}})(),w=(0,eo.Jd)(),k=(0,ez.df)(),{isMobile:C}=(0,D.sM)(),{getConfigFor:I}=(0,m.mJ)(),S=I("thefp_enable_dynamic_toaster"),F=C?g:s,x=C?u:h,{markdownProps:T}=(0,eU.$)(C?v:d),A=(null==w?void 0:w.is_admin)&&!r,E=!(null==w?void 0:w.is_subscribed),B=null==w?void 0:w.is_admin;if(!(b&&E&&(!_||B))&&!(null==w?void 0:w.is_admin)||!S)return null;let M=()=>(0,o.Y)(eu.K0,{priority:"tertiary",size:"sm",style:{position:"fixed",left:16,bottom:16,zIndex:10,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)"},title:"Preview toaster",onClick:()=>a(!r),children:(0,o.Y)(eA.A,{size:20})});if(A)return(0,o.Y)(M,{});let R=!e,L="h5-sans";e||(L="lg-preview-byline");let O=k&&"undefined"!=typeof window?(0,N.eV6)(k,{addBase:!0,next:(0,N.yRP)(window.location.href,{follow:!0}),utm_source:V.VU.fixedFooterPaywall,utm_medium:V.Jn.web}):"/subscribe";return(0,o.FD)(o.FK,{children:[(null==w?void 0:w.is_admin)&&(0,o.Y)(M,{}),(0,o.FD)("div",{className:"".concat("container-liQ2Od"," ").concat(e?"open-NsIljP":""),style:{backgroundColor:c?"var(--color-blue)":"white"},children:[(0,o.FD)(P.pT,{alignItems:"center",direction:C?"column":"row",gap:C?8:24,justifyContent:"center",style:{width:C?"100%":"auto"},children:[(0,o.Y)(P.Ye,{alignItems:"center",gap:0,children:(0,o.FD)(P.I1,{gap:8*!!C,children:[(0,o.Y)(eO.T,{align:C?"center":"left",color:c?"white":"primary",preset:L,children:e?F:x}),e&&(0,o.Y)(eO.T,(0,i._)({align:C?"center":"left",color:c?"white":"primary",preset:"d3-serif"},T))]})}),(0,o.Y)(eR.v,{className:"subscribeButton-KC1zy_","data-native":!0,href:"/subscribe"===f?O:f,size:"md",style:{width:C?"100%":"auto",textDecoration:R?"underline":"none",color:R?c?"white":"var(--color-accent-themed)":void 0,padding:R?"0":void 0},variant:R?"tertiary":"primary-accent",children:Y})]}),(null==w?void 0:w.is_admin)&&(0,o.Y)(eu.K0,{priority:"tertiary",size:"sm",style:{position:"absolute",right:0,bottom:0},title:"Edit footer banner",onClick:()=>l(!0),children:(0,o.Y)(eE.A,{size:20,style:{color:c?"white":"var(--color-primary)"}})}),(0,o.Y)(eu.Nm,{className:"chevronButton-xCmt1F",onClick:()=>t(!e),children:(0,o.Y)(eN.A,{style:{transform:e?"rotate(0deg)":"rotate(180deg)",color:c?"white":"var(--color-primary)"}})})]}),(null==w?void 0:w.is_admin)&&(0,o.Y)(eG,{currentValues:{hedDesktop:s,dekDesktop:d,hedMobile:g,dekMobile:v,collapsedHedMobile:u,collapsedHedDesktop:h,ctaCopy:Y,ctaLink:f,isBlueTheme:c,enabledForNonPaid:b},isOpen:n,onClose:()=>l(!1),onSave:()=>{y()}})]})};var eV=n(53989),ej=n(40075),eX=n(60355),eJ=n(92636),eZ=n(39891);let eQ=e=>{let{posts:t}=e,{isMobile:n,isTablet:r}=(0,D.sM)();return(0,o.FD)("div",{className:W()("container-d4zBPi",{"containerTablet-tpTBc6":r,"containerMobile-VpmHH6":n}),children:[(0,o.FD)(P.Ye,{paddingLeft:20,position:"relative",children:[(0,o.Y)("div",{className:"latestArrowEndContainer-gx613b",children:(0,o.Y)("img",{className:"latestArrowEnd-kWO5qL",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/more-arrow-end-3.svg"),430)})}),(0,o.Y)("img",{className:"latestArrow-Z7Zn2b",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/more-arrow.svg"),430)})]}),t.map((e,t)=>(0,o.Y)(P.Ye,(0,l._)((0,i._)({},n?{borderTop:0===t?void 0:"detail-themed"}:{borderLeft:"detail-themed"}),{paddingX:20,paddingY:n?16:24,children:(0,o.Y)(eX.R,{hideUfi:!0,post:e,variant:"mini"})})))]})};var e$=n(70103),e0=n(78956),e1=n(84565),e2=n(28528),e4=n(21398);let e6="fullWidthRow-lUGCvS",e7=e=>{let{posts:t,showIntroModule:i=!1,isPortraitLayout:l=!1}=e,{isMobile:r,isTablet:a}=(0,D.sM)(),[s,d]=(0,p.useState)(!1),{pub:c,user:u}=(0,e2.np)(),h=t.slice(6,6+(a?3:5)),m="top-layout-container";return r?(0,o.Y)(e9,{isPortraitLayout:l,posts:t,showIntroModule:i}):(0,o.FD)(P.I1,{className:"container-8llGPE",gap:64,paddingBottom:a?40:64,children:[(null==u?void 0:u.is_admin)&&(0,o.Y)("div",{className:"editButtonContainer-PKbNaQ",children:(0,o.Y)(eu.K0,{priority:"primary-mono",size:"sm",onClick:()=>{d(!0)},children:(0,o.Y)(eE.A,{size:16})})}),(0,o.Y)("div",{id:m,children:(0,o.Y)(e3,{isPortraitLayout:l,posts:t,showIntroModule:i})}),(0,o.Y)(eQ,{posts:h}),s&&(0,o.Y)(e4.Ic,{module:"@/frontend/components/thefp/EditPinsModal",posts:t.slice(0,6),pub:c,renderPreview:e=>{let{posts:t,showIntroModule:n,isPortraitLayout:i}=e;return(0,o.Y)(e3,{isPortraitLayout:i,posts:t,showIntroModule:n})},resolve:e=>e.EditPinsForHomepageHeroModal,topLayoutContainerId:m,whileLoading:(0,o.Y)("div",{}),onClose:()=>{d(!1)},onRequest:()=>n.e("937").then(n.bind(n,93936))})]})},e8=()=>(0,o.FD)("a",{className:"introModule-WDoR9y","data-native":!0,href:"/intro-to-tfp",children:[(0,o.Y)("img",{alt:"The Free Press",className:"introModuleImage-b5tjpb",src:(0,N.dJ9)("".concat((0,eJ.Ew)(),"/img/thefp/fp-flag-red.png"))}),(0,o.Y)(eO.T,{align:"center",className:"introModuleText-tL6vMV",preset:"h7-serif",children:"An\xa0Introduction\xa0to The\xa0Free\xa0Press"})]}),e3=e=>{let{isPortraitLayout:t=!1,posts:n,showIntroModule:r=!1}=e,{isTablet:a,isDesktop:s}=(0,D.sM)(),d=(0,e1.NQ)(),c={align:"center"},u=d.getConfigFor("thefp_homepage_portrait_layout");return t&&s&&u?(0,o.FD)(q.P,{variant:"three-column-one-column-one-column",children:[(0,o.Y)(e0.A,{children:[n[0]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"left",post:n[0],variant:"portrait"}))]}),(0,o.Y)(e0.A,{paddingTop:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[2],variant:"square"})),r?(0,o.Y)(e8,{}):n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]}),(0,o.Y)(e0.A,{paddingTop:40,children:[n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[5],variant:"square"}))]})]}):t&&a&&u?(0,o.FD)("div",{className:"tabletPortraitLayout-eMAKhD",children:[n[0]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"left",post:n[0],variant:"portrait"})),(0,o.Y)("hr",{}),(0,o.FD)(P.Ye,{alignItems:"center",className:e6,justifyContent:"space-between",children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[2],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[3],variant:"square"}))]}),(0,o.Y)("hr",{}),(0,o.FD)(P.Ye,{className:e6,justifyContent:"space-between",children:[(0,o.Y)("div",{className:"wideContent-tdvs4B",children:n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[4],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}))}),(0,o.Y)("div",{className:"narrowContent-CJLDbf",children:n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[5],variant:"square"}))})]})]}):(0,o.FD)(q.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[n[0]&&(0,o.FD)(e0.A,{children:[(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"center",post:n[0],showImageLast:!!u,variant:"large"})),a&&(0,o.FD)(P.Ye,{gap:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[1],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]})]}),a&&(0,o.FD)(e0.A,{children:[r?(0,o.Y)(e8,{}):n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[2],variant:"square"})),n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[5],variant:"square"}))]}),s&&(0,o.FD)(e0.A,{paddingTop:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),r?(0,o.Y)(e8,{}):n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[2],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]}),s&&(0,o.FD)(e0.A,{paddingTop:40,children:[n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[5],variant:"square"}))]})]})},e9=e=>{let{posts:t,showIntroModule:n=!1,isPortraitLayout:i=!1}=e,l=t.slice(6,11);return(0,o.FD)(P.I1,{gap:32,paddingBottom:64,children:[i?t[0]&&(0,o.Y)(eX.R,{align:"left",imageAspectRatio:"portrait",post:t[0],variant:"large"}):t[0]&&(0,o.Y)(eX.R,{align:"left",post:t[0],variant:"large"}),n?(0,o.Y)(e8,{}):t[2]&&(0,o.Y)(eX.R,{post:t[2],variant:"square"}),(0,o.FD)(e$.Z,{children:[t[1]&&(0,o.Y)(eX.R,{hideDescription:!0,post:t[1],variant:"square"}),t[3]&&(0,o.Y)(eX.R,{hideDescription:!0,post:t[3],variant:"square"}),t[4]&&(0,o.Y)(eX.R,{post:t[4],variant:"mini"}),t[5]&&(0,o.Y)(eX.R,{post:t[5],variant:"mini"})]}),(0,o.Y)(eQ,{posts:l})]})},e5="column-HNiwn6",te=e=>{let{leftContent:t,rightContent:n,mobileContent:i}=e,{isMobile:l}=(0,D.sM)();return l&&i?i:(0,o.FD)("div",{className:"container-dOq2Em",children:[(0,o.Y)("div",{className:W()(e5,"left-jXwsmK"),children:t}),(0,o.Y)(P.Ye,{borderRight:"detail",style:{margin:"8px 0"}}),(0,o.Y)("div",{className:W()(e5,"right-koj6uE"),children:n})]})};var tt=n(98002),tn=n(93800),ti=n(86898);let tl=ti.O.feature.postCount.desktop,tr=e=>{let{noFirstImage:t,posts:n}=e,{breakpoint:i}=(0,D.sM)(),l=ti.O["magazine-5"].postCount[i],r=Array.from({length:t?l+2:l},(e,t)=>{var i;return null!=(i=n[t])?i:null});return(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:r,variant:t?"two-three-two":"five-up"})},to=e=>(0,o.Y)(tr,(0,l._)((0,i._)({},e),{noFirstImage:!0})),ta=e=>{let{children:t,href:n,testid:i,onClick:l}=e;return(0,o.Y)(x.EY.Meta,{as:"a",className:"link-dTkJzr",color:"pub-primary-text","data-native":!0,"data-testid":i,href:n,onClick:l?e=>{e.preventDefault(),l()}:void 0,children:t})};var ts=n(67190),td=n(88218),tc=n(4016);let tu=e=>{let{hideViewAll:t,isLatestPosts:n,pub:i,showPlaceholderTitle:l}=e,{iString:r}=(0,I.GO)(),a=(0,tc.S2)({pub:i}),s=r(n?"Latest":"Most Popular");return(0,o.FD)(P.Ye,{alignItems:"baseline",justifyContent:"space-between",paddingX:8,children:[l?(0,o.Y)(P.Ye,{paddingY:4,children:(0,o.Y)(ts.x,{size:"md",width:100})}):a?(0,o.Y)("div",{className:"pillarTitle-JAEuZo",children:s}):(0,o.Y)(td.F,{children:s}),!n&&!t&&(0,o.Y)(ta,{href:(0,N.qy7)(i,n?void 0:{params:{sort:"top"}}),children:r("View all")})]})};var tp=n(7761);let th=ti.O.magaziney.postCount.desktop,tm=e=>{var t;let{noFirstImage:n,posts:i,replaceTopPostsWithLatest:l,topPosts:r}=e,{isTablet:a,isMobile:s}=(0,D.sM)(),{pub:d}=(0,e2.np)();if(s)return null;let c=n?5:th,u=l?i.slice(0,c):i,p=l?i.slice(c):r,h=Array.from({length:c},(e,t)=>{var n;return null!=(n=u[t])?n:null}),m=(null!=(t=null==p?void 0:p.length)?t:0)===0,g=a?3:6,v=p?Array.from({length:g},(e,t)=>{var n;return null!=(n=p[t])?n:null}):null;return(0,o.FD)(q.P,{showContentBelowOnMobile:!0,variant:"full-width-with-border-and-sidebar",children:[(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:h,variant:n?"two-small-three-medium":"two-small-one-large"}),v&&(0,o.Y)(tp.WO,{pub:d,showPubPins:!1,showSectionPins:!1,children:(0,o.FD)(P.I1,{gap:12,paddingTop:8,children:[m?(0,o.Y)(F.az,{paddingX:8,paddingY:4,children:(0,o.Y)(ts.x,{size:"md",width:"30%"})}):(0,o.Y)(tu,{isLatestPosts:l,pub:d}),(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:v.slice(0,g),variant:a?"mini-row":(0,tc.S2)({pub:d})?"one-column-list-flex":"one-column-list"})]})})]})},tg=e=>(0,o.Y)(tm,(0,l._)((0,i._)({},e),{noFirstImage:!0}));var tv=n(16074);let tY=e=>{let{posts:t}=e;return t.length?(0,o.FD)(P.I1,{gap:12,children:[t[0]&&(0,o.Y)(tt.z,{post:t[0],variant:"mobile-hero"}),t.length>1&&(0,o.FD)(P.I1,{paddingX:16,children:[(0,o.Y)(tv.c,{paddingY:4}),(0,o.Y)(tn.m,{posts:t.slice(1),variant:"two-column-list"})]})]}):null},tf=e=>{let{isSmall:t,posts:n}=e;return n.length&&n[0]?(0,o.Y)(q.P,{variant:t?"three-column-width":"full-width",children:(0,o.Y)(tt.z,{post:n[0],variant:t?"jumbo-small":"jumbo"})}):null},tb=e=>(0,o.Y)(tf,(0,l._)((0,i._)({},e),{isSmall:!0}));var ty=n(64648),t_=n(64232),tw=n(13790);let tk={magaziney:tm,"magazine-5":tr,newspaper:tf,feature:e=>{var t;let{posts:n}=e,{isTablet:i}=(0,D.sM)(),l=null!=(t=n[0])?t:null,r=Array.from({length:tl-1},(e,t)=>{var i;return null!=(i=n[t+1])?i:null});return(0,o.Y)(te,{leftContent:(0,o.Y)(tt.z,{imageAspectRatio:"wide",post:l,variant:"large"}),mobileContent:(0,o.Y)(tn.m,{posts:n.slice(0,tl),variant:"two-column-list"}),rightContent:(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:r,variant:i?"one-column-list":"two-column-list"})})},podcast:e=>{var t,n,i;let{columns:l,hasMiniPostsRowUnderneath:r,heroAlignment:a,posts:s,showPodcastLinks:d,user:c}=e,{isMobile:u}=(0,D.sM)(),{pub:p}=(0,e2.np)(),h=p.podcast_description,m=p.podcast_art_url,g=p.podcast_title,v=24*!!r;return u?(0,o.Y)(P.I1,{paddingBottom:24,children:(0,o.Y)(tw._,{description:h,imageUrl:m,name:g,post:null!=(t=s[0])?t:null,pub:p,section:null,showPodcastLinks:d,user:c})}):"center"===a?(0,o.Y)(P.I1,{paddingBottom:v,children:(0,o.Y)(t_.i,{description:h,imageUrl:m,name:g,post:null!=(n=s[0])?n:null,pub:p,section:null,showPodcastLinks:d,user:c})}):(0,o.Y)(P.I1,{paddingBottom:v,children:(0,o.Y)(ty.S,{columns:l,description:h,imageUrl:m,name:g,post:null!=(i=s[0])?i:null,pub:p,section:null,showPodcastLinks:d,user:c})})}},tC=e=>{var{firstPostMissingImage:t,bodyVariant:n,isMobile:l,variant:a}=e,s=(0,r._)(e,["firstPostMissingImage","bodyVariant","isMobile","variant"]);let d=tk[a],c={};return(l&&"podcast"!==a?d=tY:"newspaper"===a&&"list"===n?d=tb:"magaziney"===a&&t?d=tg:"magazine-5"===a&&t?d=to:"podcast"===a&&(c.columns="list"===n?3:4),d)?(0,o.Y)(d,(0,i._)({},s,c)):(console.error("Component not found, add one to HomeHero"),null)};var tI=n(79531),tS=n(10939),tD=n(70557),tF=n(56458);let tP=e=>{let{posts:t,pub:n,user:i,utm:l}=e,{isMobile:r}=(0,D.sM)();if(!t.length||!t[0])return null;let a=t[0],s=a.section_id?n.sections.find(e=>e.id===a.section_id):void 0,d=(0,tF.rI)({post:a,section:null!=s?s:null,pub:n});return(0,o.Y)(P.I1,{cursor:"pointer",paddingX:16*!!r,onClick:()=>{let e=a.canonical_url;"video"===a.type?e=(0,N.oRR)(a.canonical_url,{autoPlay:!0}):l&&(e=(0,N.yRP)(a.canonical_url,{utm:l})),(0,ed.V2)(e)},children:(0,o.Y)(tD.X,{columns:4,highlightPost:!0,isPodcast:!d,post:t[0],pub:n,section:s,user:null!=i?i:null})})},tx=e=>{let{columns:t=4,posts:n,pub:i}=e,{isMobile:l}=(0,D.sM)(),r=Array.from({length:t},(e,t)=>{var i;return null!=(i=n[t])?i:null}),a=n.length>=t;return l?null:(0,o.Y)(q.P,{variant:3===t?"three-column-width":"full-width",children:(0,o.FD)(P.I1,{gap:12,children:[(0,o.Y)(tu,{hideViewAll:!a,pub:i,showPlaceholderTitle:0===n.length}),(0,o.Y)(tn.m,{posts:r,variant:3===t?"three-column-mini-row":"mini-row"})]})})};var tT=n(90800),tA=n(90839),tE=n(99156),tN=n(57459);let tB=(0,p.memo)(e=>{var t,n,i;let{bodyVariant:l,breakpoint:r,heroAlignment:s,heroVariant:d,isMobile:c,isPortraitLayout:u,posts:p,pub:h,replaceTopPostsWithLatest:m,showIntroModule:g,showPodcastLinks:v,showTopPosts:Y,topPosts:f,user:b,utm:y}=e,_=(0,a.md)(A.Nu),w=null!=(n=null==_?void 0:_.heroId)?n:d,k=null!=(i=null==_?void 0:_.alignment)?i:s,{isPreviewMode:C}=(0,tE.T)(),I={type:"home-hero"},S=(0,tT.tP)(I),D=(0,tc.lu)({pub:h}),F=(0,tN.b)({pub:h}),x=!(null==(t=p[0])?void 0:t.cover_image),{effectiveHero:T,postsForHero:E}=(0,tI.z)({breakpoint:r,firstPostMissingImage:x,heroVariant:w,posts:p,pub:h}),N=["newspaper","podcast"].includes(T)&&"list"===l,B=!!(Y&&f&&"magaziney"!==T&&!c),M=()=>{if(D)return(0,o.Y)(tA.kT,{previewBlockId:I,children:(0,o.Y)(tp.WO,{pub:h,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(e7,{isPortraitLayout:u,posts:E,showIntroModule:g})})});if("feature-media"===T){let e=c?16:8;return(0,o.Y)(tA.kT,{previewBlockId:I,children:(0,o.FD)(P.I1,{gap:24,paddingBottom:e,paddingTop:e,children:[(0,o.Y)(tP,{posts:p,pub:h,user:b,utm:y}),B&&f&&(0,o.Y)(tx,{columns:N?3:4,posts:f,pub:h})]})})}return(0,o.FD)(tA.kT,{disabled:F.disabledPreviewBlocks.includes("home-hero"),layoutVariant:N?"three-column":void 0,previewBlockId:I,children:[(0,o.Y)(tp.WO,{pub:h,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(tC,{bodyVariant:l,firstPostMissingImage:x,hasMiniPostsRowUnderneath:B,heroAlignment:k,isMobile:c,posts:E,replaceTopPostsWithLatest:m,showPodcastLinks:v,topPosts:f,variant:T})}),B&&f&&(0,o.FD)(o.FK,{children:[!["feature-media","podcast"].includes(T)&&(0,o.Y)(tS.r,{numColumns:N?3:4,paddingBottom:16,paddingTop:16}),(0,o.Y)(tx,{columns:N?3:4,posts:f,pub:h})]})]})};if(!C)return M();let R="feature-media"===T?c?8:B?16:32:0;return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{id:S,children:M()}),R>0&&(0,o.Y)("div",{style:{height:R}})]})});var tM=n(7292),tR=n(19945),tL=n(2058),tO=n(94394),tz=n.n(tO),tU=n(33031),tq=n.n(tU),tH=n(98188);let tW=e=>{let{homepageLinks:t,pub:n,renderGroup:i,renderLink:l}=e,r=tz()(t,"group"),a=tq()(Object.keys(r),e=>r[e][0].rank);return(0,o.Y)(o.FK,{children:a.map(e=>(0,o.Y)(tG,{group:e,items:r[e],newTab:!0,pub:n,renderGroup:i,renderLink:l}))})},tG=e=>{let{group:t,items:n,newTab:r,pub:a,renderGroup:s,renderLink:d}=e,c=[],u=null;r&&(u="_blank",c.push("noopener")),(!a||(null==a?void 0:a.no_follow))&&c.push("ugc nofollow");let p={rel:c.join(" "),target:u},h=(0,o.Y)(o.FK,{children:n.map(e=>{let{title:t,url:n,subtitle:r,subtitleUrl:a,edit:s,className:c}=e;return d?d({title:t,url:n,subtitle:r,linkProps:p}):(0,o.FD)("div",{className:W()("home-right-col",c),children:[s?(0,o.FD)("div",{className:"home-right-col-editable",children:[(0,o.Y)("a",{className:"home-right-col-title","data-native":!0,href:n,children:t}),(0,o.Y)(eu.K0,{href:s,priority:"quaternary",size:"sm",title:"edit",children:(0,o.Y)(tH.A,{size:20})})]}):(0,o.Y)("a",(0,l._)((0,i._)({className:"home-right-col-title","data-native":!0,href:n},p),{children:t})),r&&(0,o.Y)("a",(0,l._)((0,i._)({className:"home-right-col-sub","data-native":!0,href:a||n},p),{children:r}))]})})});return s?s({title:t,links:h}):(0,o.FD)("div",{className:"home-right-group",children:[(0,o.Y)("div",{className:"home-right-group-title",children:t}),h]})};var tK=n(91704),tV=n(14085);let tj=e=>{var{body:t,clampTitle:n,image:a,linkProps:s,pub:d,subtitle:c,title:u,url:p}=e,h=(0,r._)(e,["body","clampTitle","image","linkProps","pub","subtitle","title","url"]);let{size:m,lineHeight:g}=(0,tK.i)({preset:"sm",pub:d}),v="undefined"==typeof window,Y=(0,o.Y)(tV.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,(0,l._)((0,i._)({},h),{gap:16,children:[a&&(0,o.Y)(F.az,{alignSelf:"start",children:a}),(0,o.FD)(P.I1,{alignSelf:"stretch",gap:8,justifyContent:"center",children:[(0,o.FD)(P.I1,{gap:2,style:{wordBreak:"break-word"},children:[(0,o.Y)(x.EY,{clamp:n,color:"pub-primary-text",font:"pub-headings",style:{fontSize:m,lineHeight:"".concat(g,"px")},children:v?(0,o.Y)("a",(0,l._)((0,i._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:u})):u}),c&&(0,o.Y)(x.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:c})]}),t&&(0,o.Y)("div",{children:t})]})]}))});return v?Y:(0,o.Y)("a",(0,l._)((0,i._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:Y}))},tX=e=>{let{linkProps:t,pub:n,subtitle:r,title:a,url:s}=e,{isMobile:d}=(0,D.sM)(),{size:c,lineHeight:u}=(0,tK.i)({preset:"sm",pub:n});return(0,o.Y)("a",(0,l._)((0,i._)({className:"homepageLink-cE_DZ1",href:s},t),{children:(0,o.Y)(P.I1,{gap:8,paddingX:8*!d,children:(0,o.FD)(P.I1,{style:{wordBreak:"break-word"},children:[(0,o.Y)(x.EY,{className:"title-QddVTB",color:"pub-primary-text",font:"pub-body",style:{fontSize:c,lineHeight:"".concat(u,"px")},children:a}),r&&(0,o.Y)(x.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:r})]})})}))},tJ=e=>{let{hideHeaderBorder:t}=e,{homepageLinks:n}=(0,p.useContext)(S),{pub:i}=(0,e2.np)(),{isMobile:l}=(0,D.sM)();return n&&0!==n.length?(0,o.Y)(P.I1,{"data-testid":"homepage-links",gap:24,children:(0,o.Y)(tW,{homepageLinks:n,pub:i,renderGroup:e=>{let{title:n,links:i}=e;return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{alignItems:"center",paddingX:8*!l,children:(0,o.Y)(P.Ye,{borderBottom:t?void 0:"detail-themed",flex:"grow",paddingBottom:t?void 0:8,children:(0,o.Y)(td.F,{children:n})})}),(0,o.Y)(P.I1,{gap:12,children:i})]})},renderLink:e=>{let{linkProps:t,subtitle:n,title:l,url:r}=e;return(0,o.Y)(tX,{linkProps:t,pub:i,subtitle:n,title:l,url:r})}})}):null};var tZ=n(31856);let tQ=e=>{let{type:t}=e;return"recommendation"===t?(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{gap:16,children:[(0,o.Y)(tZ.z,{aspectRatio:1,width:40}),(0,o.FD)(P.I1,{flex:"grow",gap:8,justifyContent:"center",children:[(0,o.Y)(ts.x,{width:"60%"}),(0,o.Y)(ts.x,{size:"sm",width:"40%"})]})]})}):"contributor"===t?(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[(0,o.FD)(P.I1,{flex:"grow",gap:8,children:[(0,o.Y)(ts.x,{size:"sm",width:"30%"}),(0,o.Y)(ts.x,{width:"70%"})]}),(0,o.Y)(tZ.z,{aspectRatio:1,radius:"full",width:48})]})}):(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{gap:16,children:[(0,o.Y)(tZ.z,{aspectRatio:1,width:64}),(0,o.FD)(P.I1,{flex:"grow",gap:8,children:[(0,o.Y)(ts.x,{width:"40%"}),(0,o.Y)(ts.x,{size:"sm",width:"60%"}),(0,o.Y)(ts.x,{size:"sm",width:"50%"})]})]})})};var t$=n(41167);function t0(){let e=(0,et._)(["View all ",""]);return t0=function(){return e},e}let t1=e=>{let{showEmptyState:t,hideHeaderBorder:n}=e,{iString:r,iTemplate:a}=(0,I.GO)(),{numRecommendations:s,recommendations:d}=(0,p.useContext)(S),{pub:c,user:u}=(0,e2.np)(),{isMobile:h}=(0,D.sM)();return d&&(0!==d.length||t)?(0,o.Y)(t$.A,{numRecommendations:s,pub:c,recommendations:d,render:e=>{let{recommendations:t,canManage:i,manageUrl:l,hasMore:d,hasMoreUrl:c,recommendationsCount:u}=e;return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8*!h,children:(0,o.FD)(P.Ye,{alignItems:"baseline",borderBottom:n?void 0:"detail-themed",flex:"grow",justifyContent:"space-between",paddingBottom:n?void 0:8,children:[(0,o.Y)(td.F,{children:r("Recommendations")}),i?(0,o.Y)(ta,{href:l,children:r("Manage")}):d?(0,o.Y)(ta,{href:c,testid:"homepage-recommendations-view-all",children:a(t0(),null!=u?u:0)}):null]})}),(0,o.Y)(P.I1,{"data-testid":"homepage-recommendations",gap:4,children:0===s?(0,o.Y)(tQ,{type:"recommendation"}):t})]})},renderRecommendation:e=>{let{url:t,onClick:n,pubAvatarProps:r,pubName:a,pubAuthor:s}=e;return(0,o.Y)(tj,{"data-testid":"homepage-recommendation",image:(0,o.Y)(eh.wg,(0,l._)((0,i._)({},r),{size:40})),linkProps:{onClick:n,target:"_blank",rel:"noopener"},pub:c,subtitle:s,title:a,url:t})},user:u}):null},t2=()=>{let{freeSignup:e,freeSignupEmail:t}=(0,p.useContext)(S),{pub:n,user:i}=(0,e2.np)(),{isMobile:l}=(0,D.sM)();return(0,o.FD)(P.I1,{className:"container-rEYFE5",gap:24,paddingX:8*!l,children:[(0,o.FD)(P.I1,{gap:8,children:[n.logo_url&&(0,o.Y)("img",{alt:n.name,className:"pubLogo-DpnXOb","data-testid":"homepage-sidebar-pub-logo",src:(0,N.dJ9)(n.logo_url,88)}),(0,o.FD)(P.I1,{gap:2,children:[(0,o.Y)(td.F,{children:n.name}),n.hero_text&&(0,o.Y)(x.EY,{color:"pub-secondary-text",font:"text",lineHeight:20,size:12,children:n.hero_text})]})]}),(0,o.Y)(C.A,{align:"left",expectTruncation:!0,freeSignup:e,freeSignupEmail:t,isStatic:!1,pub:n,source:"magaziney-home-page",user:i})]})},t4=()=>{let{pub:e}=(0,e2.np)(),{isMobile:t}=(0,D.sM)();return(0,o.FD)(P.I1,{gap:40,children:[!t&&(0,o.Y)(t2,{}),e.show_recs_on_homepage&&(0,o.Y)(t1,{}),(0,o.Y)(tJ,{})]})};var t6=n(2404),t7=n.n(t6),t8=n(83128),t3=n(29098),t9=n(24634);let t5="homePageGroupsGrid-dfyTM6",ne=e=>"email_from_name"in e,nt=e=>{var t;let[n,a]=(0,p.useState)(null!=(t=e.postsByGroupId)?t:{}),[s,d]=(0,p.useState)(!1),{posts:c,bodyPostGroups:u,hasEmptyGroupOptions:h,setHasInvalidGroupSelection:m}=e,g=(0,r._)(e,["posts","bodyPostGroups","hasEmptyGroupOptions","setHasInvalidGroupSelection"]);(0,p.useEffect)(()=>{let e=async e=>{let t=(0,i._)({},n);for(let n of e){let e={limit:6};if(ne(n)?e.section_id=n.id:e.post_tag_id=n.id,!t[n.id]){let{body:i}=await eM().get("/api/v1/archive").query(e);t[n.id]=i}}t7()(t,n)||(a(t),d(!1))};0===Object.keys(n).length&&u&&(null==u?void 0:u.length)>0&&(d(!0),e(u))},[u,a,n]);let v=(0,p.useCallback)(e=>{var t;let r=null!=(t=e.post_tag_id)?t:e.section_id;if(!r)throw Error("Must supply section_id or post_tag_id");n&&n[r]||eM().get("/api/v1/archive").query((0,i._)({limit:3},e)).then(e=>{let{body:t}=e;a((0,l._)((0,i._)({},n),{[r]:t}))})},[n,a]),Y=(0,p.useCallback)(e=>{var t;return n&&(!n||0!==Object.keys(n).length)&&n[e]?null==(t=n[e])?void 0:t.slice(0,3):null},[n]);return h||!u||(null==u?void 0:u.length)===0?m?(m(!0),(0,o.Y)(nn,{message:"No groups selected"})):(0,o.FD)(P.I1,{children:[(0,o.Y)(ni,{pub:e.pub}),(0,o.Y)(tn.m,(0,l._)((0,i._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):(0,o.FD)("div",{className:t5,children:[u.map(t=>{let n=Y(t.id);return(0,o.FD)(P.I1,{paddingBottom:24,children:[(0,o.Y)(ni,{pub:e.pub,row:t}),(0,o.Y)(nl,(0,l._)((0,i._)({},g),{groupModel:t,loadingSync:s,posts:c,postsForId:n,setHasInvalidGroupSelection:m,onIntersectCallback:()=>{v(ne(t)?{section_id:t.id}:{post_tag_id:t.id})}}))]})}),u.length<3?(0,o.FD)(P.I1,{children:[(0,o.Y)(ni,{pub:e.pub}),(0,o.Y)(tn.m,(0,l._)((0,i._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):null]})},nn=e=>{let{groupModel:t,message:n}=e;return(0,o.Y)(F.az,{paddingBottom:40,paddingTop:8,children:(0,o.FD)(P.I1,{alignItems:"center",className:W()(t5,t?"emptyGroupView-kLS4e3":"emptyRowsView-Yo2IhI"),justifyContent:"center",children:[(0,o.Y)(t8.A,{className:"emptyContentIcon-mKbS2t"}),n&&(0,o.Y)(x.EY.B4,{color:"pub-secondary-text",paddingTop:20,weight:"semibold",children:n}),t&&(0,o.FD)(x.EY.B4,{color:"pub-secondary-text",paddingTop:4,children:["Add posts to this ",ne(t)?"section":"tag"," to include it on your homepage."]})]})})},ni=e=>{var t;let{row:n,pub:i}=e,{isMobile:l}=(0,D.sM)(),r="/archive";return n&&(r=ne(n)?(0,B.Dor)(i,{section:n}):(0,B.ii9)(i,n)),(0,o.Y)(P.I1,{paddingBottom:12,paddingX:8*!l,children:(0,o.FD)(P.Ye,{alignItems:"center",justifyContent:"space-between",children:[(0,o.Y)(x.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:null!=(t=null==n?void 0:n.name)?t:"Recent posts"}),(0,o.Y)(ta,{href:r,children:"See all"})]})})},nl=e=>{let{onIntersectCallback:t,groupModel:n,loadingSync:a,postsForId:s,setHasInvalidGroupSelection:d}=e,c=(0,r._)(e,["onIntersectCallback","groupModel","loadingSync","postsForId","setHasInvalidGroupSelection"]),[u,h]=(0,t3.A)();return((0,p.useEffect)(()=>{(null==h?void 0:h.isIntersecting)&&!a&&t()},[null==h?void 0:h.isIntersecting,t,a]),s)?0===s.length?d?(d(!0),(0,o.Y)(nn,{groupModel:n})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},c),{posts:c.posts.slice(0,3),variant:"three-column-grid"})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},c),{posts:s,variant:"three-column-grid"})):(0,o.Y)(t9.t,{ref:u,postCount:3,variant:"grid-groups"})},nr={grid:"full-width-with-sidebar","grid-groups":"full-width-with-sidebar",list:"three-column-width-with-sidebar"},no={grid:"three-column-grid",list:"two-column-list"},na=e=>{let t;var{hasCustomFooter:n,hideImagesFromList:a,posts:s,pub:d,source:c,user:u,variant:p,bodyPostGroups:h,postsByGroupId:m}=e,g=(0,r._)(e,["hasCustomFooter","hideImagesFromList","posts","pub","source","user","variant","bodyPostGroups","postsByGroupId"]);let{isMobile:v,isTablet:Y,breakpoint:f}=(0,D.sM)(),b=(t=(0,tM.t)(),tR.pQ.reduce((e,n)=>(0,l._)((0,i._)({},e),{[n]:t[n].postCount}),{}))[p][f],y="list"===p&&(a||s.slice(0,b).every(e=>!e.cover_image));return(0,o.Y)(tp.WO,{pub:d,showPubPins:!0,showSectionPins:!1,children:s.length>0&&(0,o.Y)(tA.kT,{layoutVariant:"list"===p?"three-column":void 0,previewBlockId:{type:"home-body"},children:(0,o.FD)(q.P,{showContentBelowOnMobile:!0,variant:nr[p],children:[(0,o.Y)(tL.M,(0,l._)((0,i._)({},g),{maxPosts:b,newPosts:s,pub:d,user:u,variant:p,children:e=>{let{posts:t,linkToComments:n,onClickPost:r}=e,a={hideImages:y,linkToComments:n,posts:t,pub:d,source:c,user:u,onClickPost:r};return"grid-groups"===p?(0,o.Y)(nt,(0,l._)((0,i._)({},a),{bodyPostGroups:h,hasEmptyGroupOptions:g.hasEmptyGroupOptions,postsByGroupId:m,setHasInvalidGroupSelection:g.setHasInvalidGroupSelection})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},a),{variant:no[p]}))}})),(!v&&!Y||!n)&&(0,o.Y)(t4,{})]})})})};var ns=n(73869),nd=n(98445),nc=n(99145);let nu=e=>{let{pub:t,showSearch:n,title:i,viewAllUrl:l}=e,r=(0,tc.S2)({pub:t}),{isMobile:a}=(0,D.sM)(),{iString:s}=(0,I.GO)(),{open:d}=(0,nc.v9)();return(0,o.FD)(P.Ye,{alignItems:"baseline",borderBottom:r?"detail-themed":void 0,className:W()({"pillarHeader-EpU7EL":r}),justifyContent:"space-between",paddingBottom:a?12:16,paddingX:8*!a,children:[r?(0,o.Y)("div",{className:"pillarTitle-Eyi3Nu",children:i}):a?(0,o.Y)(td.F,{children:i}):(0,o.Y)(x.EY.H3,{color:"pub-primary-text",font:"pub-headings",children:i}),l&&(0,o.FD)(P.Ye,{alignItems:"center",gap:16,style:{whiteSpace:"nowrap"},children:[n&&(0,o.Y)(k.DH,{children:(0,o.Y)(eu.K0,{priority:"tertiary",onClick:e=>{e.preventDefault(),d()},children:(0,o.Y)(nd.A,{size:20})})}),(0,o.Y)(ta,{href:l,children:s("View all")})]})]})},np=ti.O.feature.postCount.desktop,nh=e=>{let{posts:t,pub:n,showSearch:i,title:l,viewAllUrl:r,variant:a="focus-left-list"}=e,s=a.includes("-grid"),d=t.length>=(s?np:4);return(0,o.FD)(o.FK,{children:[l&&(0,o.Y)(nu,{pub:n,showSearch:i,title:l,viewAllUrl:d?r:void 0}),(0,o.Y)(nm,{posts:t,variant:a})]})},nm=e=>{var t;let{posts:n,variant:i}=e,{isMobile:l,isTablet:r}=(0,D.sM)(),a=null!=(t=n[0])?t:null,s=Array.from({length:Math.max(i.includes("-grid")?np:4,Math.min(n.length,np))-1},(e,t)=>{var i;return null!=(i=n[t+1])?i:null});if(l){let e=Array.from({length:4},(e,t)=>{var i;return null!=(i=n[t])?i:null});return(0,o.Y)(tn.m,{posts:e,variant:"two-column-list"})}if(r)return(0,o.FD)(q.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(tt.z,{post:a,variant:"large"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:s,variant:"one-column-list"})]});if(i.startsWith("focus-left")){let e="focus-left-list"===i?(0,o.Y)(tn.m,{posts:s,variant:"two-column-list"}):(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:s,variant:"two-column-grid"});return(0,o.Y)(te,{leftContent:(0,o.Y)(tt.z,{post:a,variant:"large"}),rightContent:e})}if(i.startsWith("focus-center")){let e=Array.from({length:2},(e,t)=>{var i;return null!=(i=n[t+1])?i:null}),t=Array.from({length:2},(e,t)=>{var i;return null!=(i=n[t+3])?i:null});return(0,o.FD)(q.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(tt.z,{post:a,variant:"large"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:e,variant:"square-square-column"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:t,variant:"square-square-column"})]})}if(i.startsWith("focus-right")){let e="focus-right-list"===i?(0,o.Y)(tn.m,{posts:s,variant:"two-column-list"}):(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:s,variant:"two-column-grid"});return(0,o.Y)(te,{leftContent:e,rightContent:(0,o.Y)(tt.z,{post:a,variant:"large"})})}return null};var ng=n(49869),nv=n(15871),nY=n(63950),nf=n.n(nY);let nb=e=>{let{collisionRect:t}=e;return t?(0,nv.Qo)(e).filter(e=>e.id.startsWith("column-")):[]},ny=e=>{let{column:t,moduleId:n}=e;return"".concat(t,"-").concat(n)},n_=e=>e?e.replace(/^(left|right)-/,""):null;function nw(e){let{items:t,draggedId:n,getElement:i}=e,l=[],r=0;for(let e of t){let t=i(e);if(t){let n=t.getBoundingClientRect();0===r&&(r=n.top+window.scrollY),l.push({itemId:e,height:n.height})}}let o=[],a=r;for(let{itemId:e,height:t}of l)e!==n&&(o.push({itemId:e,centerY:a+t/2}),a+=t);return o}function nk(e){let t=(0,p.useRef)(null);(0,p.useEffect)(()=>{if(!e){t.current=null;return}let n=document.documentElement;t.current=n.scrollLeft;let i=()=>{null!==t.current&&n.scrollLeft!==t.current&&(n.scrollLeft=t.current)};return window.addEventListener("scroll",i,{passive:!1,capture:!0}),()=>{window.removeEventListener("scroll",i,{capture:!0})}},[e])}var nC=n(65670),nI=n(53168);let nS=(0,p.createContext)({activeBlockId:null,activeDragId:null,attrs:void 0,contentBlockId:"",draggedHeight:null,getColumnItems:()=>[],hoveredColumn:null,isActive:!1,isDragging:!1,setHoveredColumn:nf()}),nD=()=>(0,p.useContext)(nS),nF=e=>{var t;let{attrs:n,children:i,contentBlockId:l,leftItems:r,renderModule:s,rightItems:d}=e,{isDesktop:c}=(0,D.sM)(),{isMobileEditor:u,sendPreviewBlockUpdate:h}=(0,tE.T)(),m=(0,nC.Cd)(),g=(0,a.Xr)(A.CL),v=(null==m?void 0:m.block.type)==="content-block"?m.block.id:null,Y=c&&v===l,f=(null==m||null==(t=m.item)?void 0:t.type)==="sidebar-module",b=Y&&!f&&!u,[y,_]=(0,p.useState)(null),[w,k]=(0,p.useState)(null),[C,I]=(0,p.useState)(null),[S,F]=(0,p.useState)([]),[P,x]=(0,p.useState)([]),T=(0,p.useRef)([]),E=(0,p.useRef)([]),N=(0,p.useRef)(!1),B=(0,p.useRef)([]),M=(0,p.useRef)([]);nk(null!==y),(0,p.useEffect)(()=>{N.current&&(N.current=!1,_(null),k(null),I(null),F([]),x([]),B.current=[],M.current=[])},[r,d]);let R=(0,nv.FR)((0,nv.MS)(nv.AN,{activationConstraint:{distance:5}})),L=(0,p.useCallback)(e=>{let t=function(e){var t,n,i,l,r;let{event:o,leftThresholds:a,rightThresholds:s}=e,d=o.active.id;if(!d)return null;let c=o.active.rect.current.translated;if(!c)return null;let u=null!=(n=null==(t=o.over)?void 0:t.id)?n:null,p=(l=d).startsWith("left-")?"left":l.startsWith("right-")?"right":null;if(!p)return null;let h=n_(d);if(!h)return null;let m=null!=(i=u?"drop-zone-left"===(r=u)||"column-left"===r?"left":"drop-zone-right"===r||"column-right"===r?"right":null:null)?i:p,g=function(e,t,n){let i=n.filter(t=>t.itemId!==e);for(let e=0;e<i.length;e++){let n=i[e];if(n&&t<n.centerY)return e}return i.length}(h,c.top+window.scrollY,"left"===m?a:s);return{draggedItemId:h,targetColumn:m,targetSlotIndex:g}}({event:e,leftThresholds:T.current,rightThresholds:E.current});if(!t)return;let{newLeftItems:n,newRightItems:i}=function(e){let{dragResult:t,leftItems:n,rightItems:i}=e,{draggedItemId:l,targetColumn:r,targetSlotIndex:o}=t,a=n.filter(e=>e!==l),s=i.filter(e=>e!==l);return"left"===r?a.splice(o,0,l):s.splice(o,0,l),{newLeftItems:a,newRightItems:s}}({dragResult:t,leftItems:r,rightItems:d}),l=!t7()(B.current,n),o=!t7()(M.current,i);(l||o)&&(l&&(B.current=n,F(n)),o&&(M.current=i,x(i)),g(e=>e+1))},[r,d]),O=(0,p.useCallback)(e=>{let t="left"===e?r:d,n="left"===e?B.current:M.current;return y?n:t},[y,r,d]),z=(0,p.useMemo)(()=>{var e;return{activeBlockId:Y?l:null,activeDragId:y,attrs:n,contentBlockId:l,draggedHeight:null!=(e=null==w?void 0:w.height)?e:null,getColumnItems:O,hoveredColumn:C,isActive:b,isDragging:!!y,setHoveredColumn:I}},[b,y,n,l,null==w?void 0:w.height,O,C,Y]);return(0,o.Y)(nv.Mp,{autoScroll:!0,collisionDetection:nb,sensors:R,onDragEnd:()=>{document.documentElement.classList.remove("theme-editor-dragging");let e=S.length!==r.length||S.some((e,t)=>e!==r[t]),t=P.length!==d.length||P.some((e,t)=>e!==d[t]);T.current=[],E.current=[],e||t?(N.current=!0,h({previewBlockId:{type:"content-block",contentBlockId:l},updates:{secondary_sidebar_modules:S,primary_sidebar_modules:P}})):(_(null),k(null),I(null),F([]),x([]),B.current=[],M.current=[])},onDragMove:L,onDragStart:e=>{let t=e.active.id,n=n_(t);if(!n)return;T.current=nw({items:r,draggedId:n,getElement:e=>document.querySelector('[data-draggable-id="left-'.concat(e,'"]'))}),E.current=nw({items:d,draggedId:n,getElement:e=>document.querySelector('[data-draggable-id="right-'.concat(e,'"]'))}),document.documentElement.classList.add("theme-editor-dragging");let{width:i,height:l}=nP(t);_(t),k({moduleId:n,width:i,height:l}),F(r),x(d),B.current=r,M.current=d},children:(0,o.FD)(nS.Provider,{value:z,children:[i,(0,o.Y)(nv.Hd,{dropAnimation:null,zIndex:nI.Up+10,children:y&&w?(0,o.Y)("div",{className:"dragOverlay-Slsz_M",style:{width:w.width-8},children:s(w.moduleId)}):null})]})})},nP=e=>{var t,n;let i=document.querySelector('[data-draggable-id="'.concat(e,'"]'));return{width:null!=(t=null==i?void 0:i.offsetWidth)?t:0,height:null!=(n=null==i?void 0:i.offsetHeight)?n:0}};var nx=n(80697),nT=n(17028);let nA=e=>{let{children:t,column:n}=e,{isActive:i,isDragging:l,setHoveredColumn:r}=nD(),{isOver:a,setNodeRef:s}=(0,nv.zM)({id:"column-".concat(n),disabled:!i});(0,p.useEffect)(()=>{l&&a?r(n):l&&!a&&r(e=>e===n?null:e)},[n,l,a,r]);let d="function"==typeof t?t({isOver:a}):t;return i?(0,o.Y)(P.I1,{ref:s,className:"dropZone-e4cHxw",children:d}):d};var nE=n(45387);let nN=e=>{let{column:t}=e,{iString:n}=(0,I.GO)(),{contentBlockId:i,draggedHeight:l,isActive:r,isDragging:a}=nD(),{deactivatePreviewBlock:s,requestModulePicker:d}=(0,tE.T)(),c=(0,p.useMemo)(()=>({type:"module-picker",parentContentBlockId:i,column:t,insertAtIndex:0}),[i,t]),{isActive:u,clickAction:h}=(0,nE.k6)(c),m=a||"activate"!==h&&!u,g=(0,p.useCallback)(e=>{e.stopPropagation(),u?s():d({parentContentBlockId:i,column:t,insertAtIndex:0})},[i,t,s,u,d]);return(0,o.Y)(nA,{column:t,children:e=>{let{isOver:t}=e;return(0,o.Y)(nT.I1,{alignItems:"center",className:W()("emptyState-MF3YDQ",{[String("active-llAkyd")]:r&&!m,[String("dropTarget-g9F8QT")]:a}),cursor:m?void 0:"pointer",gap:8,justifyContent:a?"start":"center",minHeight:a?200:120,paddingX:8,radius:"sm",role:"button",tabIndex:0,textAlign:"center",width:"100%",onClick:m?void 0:g,children:a?t&&(0,o.Y)("div",{className:"placeholder-tcxm_U",style:{height:null!=l?l:void 0}}):(0,o.FD)("div",{className:W()("ctaContent-poF8iJ",{[String("ctaContentVisible-BZYXLS")]:r}),children:[(0,o.Y)(nx.A,{className:"icon-X2nAHP",size:16}),(0,o.Y)(x.EY.B3,{color:"secondary",children:n("Add module")})]})})}})},nB="emptyColumn-wbqk2v",nM="emptyColumnActive-mTDRtK",nR="emptyColumnExpanded-g4LiNt",nL="emptyColumnContent-oiyCuv",nO=e=>{let{children:t,emptyLeft:n,emptyRight:i}=e,{isDesktop:l}=(0,D.sM)(),{hoveredColumn:r,isActive:a,isDragging:s}=nD(),{isMobileEditor:d,isPreviewMode:c}=(0,tE.T)(),u=(0,p.useRef)(null),{width:h}=(0,ng.w)({containerRef:u}),m=(0,p.useMemo)(()=>h<=0?{one:1,two:1}:{one:(h-100)/h,two:(h-200)/h},[h]);if(!c||!l||d)return t;let g=n&&i,v=s&&"left"===r&&n,Y=s&&"right"===r&&i,f=v||Y,b=n||i;return(0,o.FD)("div",{ref:u,className:W()("wrapper-iARQWw",{[String("dragging-wqUrPl")]:s}),style:{"--content-scale-one":m.one,"--content-scale-two":m.two},children:[b&&n&&(0,o.Y)("div",{className:W()(nB,"emptyColumnLeft-muN01M",{[String(nM)]:a,[String(nR)]:v}),children:(0,o.Y)("div",{className:nL,children:(0,o.Y)(nN,{column:"left"})})}),(0,o.Y)("div",{className:W()("content-OehGzR",{[String("contentOriginLeft-Kso11C")]:b&&i&&!n,[String("contentOriginRight-iAt4QB")]:b&&n&&!i,[String("contentOriginCenter-Cp9SmS")]:b&&g,[String("contentScaleOne-SI8mOq")]:b&&a&&!g&&!f,[String("contentScaleTwo-IthkKa")]:b&&a&&g&&!f,[String("contentScaleFull-riG7qC")]:b&&f}),children:t}),b&&i&&(0,o.Y)("div",{className:W()(nB,"emptyColumnRight-k7Rev2",{[String(nM)]:a,[String(nR)]:Y}),children:(0,o.Y)("div",{className:nL,children:(0,o.Y)(nN,{column:"right"})})})]})};var nz=n(9757),nU=n(72692),nq=n(85965),nH=n(86503);let nW=e=>{let{children:t,column:n,contentBlockId:r,disabled:s,dragId:d,moduleId:c}=e,{iString:u}=(0,I.GO)(),{activatePreviewBlock:h,deactivatePreviewBlock:m,isMobileEditor:g,isPreviewMode:v,sendSidebarModuleRemove:Y}=(0,tE.T)(),f=(0,nC.kG)(),b=(0,a.md)(A.nJ),y=(0,nE.MS)(r,c),_=(0,p.useMemo)(()=>({type:"sidebar-module",parentContentBlockId:r,moduleId:c}),[r,c]),w=(0,tT.tP)(_),k=(null==f?void 0:f.type)==="module-picker"&&(null==b?void 0:b.moduleId)===c&&(null==b?void 0:b.contentBlockId)===r,{attributes:C,listeners:S,setNodeRef:D}=(0,nv.PM)({id:null!=d?d:"disabled",disabled:!d||y||g}),{activeDragId:F,draggedHeight:P,isDragging:x}=nD(),T=(0,p.useMemo)(()=>n?{type:"sidebar-module",parentContentBlockId:r,moduleId:c}:null,[n,r,c]),{clickAction:E,showOverlay:N}=(0,nE.k6)(T),B="activate"===E,M=(0,p.useCallback)(e=>{e.stopPropagation(),T&&"none"!==E&&("activate"===E?h(T):m())},[T,E,h,m]),R=(0,p.useCallback)(e=>{e.stopPropagation(),Y({contentBlockId:r,moduleId:c})},[r,c,Y]),L=(0,p.useCallback)(e=>{d&&D(e)},[d,D]);if(!T||!v||s||g)return t;let O=n_(null!=F?F:void 0),z=void 0!==d&&O===c,U=void 0!==d&&!z&&!y&&!g,q=y||k,H=!x&&(N||q)&&!g,G=B&&!k,K=z&&P?{minHeight:P-24}:void 0;return(0,o.FD)("div",(0,l._)((0,i._)({ref:L,className:W()("draggableModule-Bf288k",{[String("draggableModuleDragging-LZeAjH")]:z,[String("defaultCursor-mUq6Y6")]:!G||q,[String("pointerCursor-IZ99JQ")]:G&&!H}),"data-draggable-id":d,id:w,style:K,onClick:k?void 0:M},U?C:{},U?S:{}),{children:[(0,o.Y)("div",{className:"draggableModuleContent-tYdch3","data-draggable-content":!0,children:!z&&t}),H&&!q&&(0,o.Y)(nH.O,{isActive:!1,label:u("Click to edit / Drag to move"),size:"sm",onClick:M,onRemove:R})]}))};var nG=n(81929);let nK=(0,p.forwardRef)((e,t)=>{let{disabled:n,isActive:i,label:l,onClick:r,variant:a="default"}=e,s="none"===a?null:"space"===a?(0,o.Y)(P.Ye,{paddingBottom:32}):(0,o.Y)(tS.r,{});return n?s:(0,o.FD)("div",{ref:t,className:W()("container-UZDvpD",{[String("active-Xwi0XX")]:i}),children:[s&&(0,o.Y)("div",{className:"content-w5CYL3",children:s}),(0,o.Y)("div",{className:"overlay-TizwXu",style:{zIndex:nI.AG},onClick:r,children:l&&!i&&(0,o.Y)(nG.vw,{className:"tag-FgJVof",priority:"primary",theme:"accent",children:l})})]})}),nV=e=>{var t;let{topPostsSettings:n}=e,{iString:i}=(0,I.GO)(),{topPosts:l}=(0,p.useContext)(S),{isMobile:r}=(0,D.sM)(),a=null!=(t=null==n?void 0:n.num_posts)?t:5;return l?(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(F.az,{paddingX:8*!r,children:(0,o.Y)(td.F,{children:i("Top posts")})}),(0,o.Y)(tn.m,{posts:l.slice(0,a),variant:"one-column-list-flex"})]}):null};var nj=n(71834);let nX=e=>{var t;let{contributor:n,latestPost:i}=e;if(!i)return null;let l="undefined"==typeof window,r=(0,o.Y)(tV.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[(0,o.FD)(P.I1,{flex:"grow",children:[(0,o.Y)(x.EY.Meta,{color:"accent",children:n.name}),(0,o.Y)(nj.Z,{post:i,preset:"sm"})]}),(0,o.Y)(P.pT,{flex:"auto",children:(0,o.Y)(ec.eu,{photoUrl:null!=(t=n.photo_url)?t:void 0,size:48})})]})});return l?r:(0,o.Y)("a",{href:i.canonical_url,style:{textDecoration:"none",display:"block"},children:r})};function nJ(e){let{items:t,excludedIds:n=[],order:i,fallbackSort:l}=e,r=new Set(n),o=t.filter(e=>!r.has(e.id));if(null==i?void 0:i.length){let e=new Map(i.map((e,t)=>[e,t]));return[...o].sort((t,n)=>{var i,l;return(null!=(i=e.get(t.id))?i:Number.MAX_SAFE_INTEGER)-(null!=(l=e.get(n.id))?l:Number.MAX_SAFE_INTEGER)})}return l?[...o].sort((e,t)=>l(e)-l(t)):o}let nZ=e=>{let{contributors:t,latestPostByContributorId:n}=(0,p.useContext)(S),i=(0,p.useMemo)(()=>(null!=t?t:[]).filter(e=>e.name&&(null==n?void 0:n[e.id])),[t,n]);return{contributors:(0,p.useMemo)(()=>nJ({items:i,excludedIds:null==e?void 0:e.excluded_user_ids,order:null==e?void 0:e.contributor_order}).slice(0,10),[i,e]),latestPostByContributorId:n}},nQ=e=>{let{contributorSettings:t}=e,{iString:n}=(0,I.GO)(),{contributors:i,latestPostByContributorId:l}=nZ(t);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(td.F,{children:n("The latest from")})}),(0,o.Y)(P.I1,{gap:4,children:i.length?i.map(e=>(0,o.Y)(nX,{contributor:e,latestPost:null==l?void 0:l[e.id]},e.id)):(0,o.Y)(tQ,{type:"contributor"})})]})},n$=e=>{let{children:t,dragOverlayId:n,id:r,onRemove:a}=e,{iString:s}=(0,I.GO)(),{isMobileEditor:d}=(0,tE.T)(),{attributes:c,listeners:u,setNodeRef:h}=(0,nv.PM)({id:r,disabled:d}),m=n===r,g=(0,p.useCallback)(e=>{e.stopPropagation(),null==a||a(r)},[r,a]);return d?t:(0,o.FD)("div",(0,l._)((0,i._)({ref:h,className:W()("draggableItem-SJ4YDF",{[String("isDragging-jRLhA9")]:m}),"data-reorderable-id":r},c,u),{children:[(0,o.Y)("div",{className:"itemContent-boSI7u",children:t}),null===n&&(0,o.Y)(nH.O,{label:s("Drag to reorder"),size:"sm",onClick:nf(),onRemove:a?g:void 0})]}))};function n0(e){let{items:t,title:n,onReorder:i,onRemove:l,renderItem:r,emptyStateType:a}=e,{iString:s}=(0,I.GO)(),{dragOverlayId:c,handleDragEnd:u,handleDragMove:h,handleDragStart:m,orderedItems:g,sensors:v}=function(e){let{items:t,getElement:n,onReorder:i}=e,[l,r]=(0,p.useState)(null),[o,a]=(0,p.useState)(null),[s,d]=(0,p.useState)([]),c=(0,p.useRef)([]),u=(0,p.useRef)(!1);nk(null!==l),(0,p.useEffect)(()=>{u.current&&(u.current=!1,r(null),a(null),d([]))},[t]);let h=(0,nv.FR)((0,nv.MS)(nv.AN,{activationConstraint:{distance:5}})),m=(0,p.useCallback)(e=>{let i=e.active.id;r(i),a(i),d(t),c.current=nw({items:t,draggedId:i,getElement:n})},[t,n]),g=(0,p.useCallback)(e=>{if(!l)return;let n=e.active.rect.current.translated;if(!n)return;let i=function(e){let{items:t,draggedId:n,targetIndex:i}=e,l=t.filter(e=>e!==n);return[...l.slice(0,i),n,...l.slice(i)]}({items:t,draggedId:l,targetIndex:function(e){let{draggedY:t,thresholds:n}=e;for(let e=0;e<n.length;e++){let i=n[e];if(i&&t<i.centerY)return e}return n.length}({draggedY:n.top+window.scrollY,thresholds:c.current})});d(e=>t7()(e,i)?e:i)},[l,t]),v=(0,p.useCallback)(()=>{if(c.current=[],l&&s.length>0&&s.some((e,n)=>e!==t[n])){u.current=!0,i(s);return}r(null),a(null),d([])},[l,t,i,s]),Y=l&&s.length>0?s:t;return{activeDragId:l,dragOverlayId:o,handleDragEnd:v,handleDragMove:g,handleDragStart:m,orderedItems:Y,sensors:h}}({items:t.map(e=>e.id),getElement:e=>document.querySelector('[data-reorderable-id="'.concat(e,'"]')),onReorder:i}),Y=null!=c?t.find(e=>e.id===c):null,f=d()(g.map(e=>t.find(t=>t.id===e)));return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(td.F,{children:s(n)})}),(0,o.FD)(nv.Mp,{sensors:v,onDragEnd:u,onDragMove:h,onDragStart:m,children:[(0,o.Y)(P.I1,{gap:4,children:f.length?f.map(e=>(0,o.Y)(n$,{dragOverlayId:c,id:e.id,onRemove:l,children:r(e)},e.id)):(0,o.Y)(tQ,{type:a})}),(0,o.Y)(nv.Hd,{dropAnimation:null,children:Y&&(0,o.Y)("div",{className:"dragOverlay-wQ1KF4",children:r(Y)})})]})]})}let n1=e=>{let{contentBlock:t}=e,{iString:n}=(0,I.GO)(),{sendPreviewBlockUpdate:i}=(0,tE.T)(),l=(0,nE.MS)(t.id,"contributors"),r=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"contributors"},updates:{contributor_order:e}})},[t.id,i]),a=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"contributors"},updates:{_add_excluded_user_id:e}})},[t.id,i]),{contributors:s,latestPostByContributorId:d}=nZ(t.attrs.contributors);return l?(0,o.Y)(n0,{emptyStateType:"contributor",items:s,renderItem:e=>(0,o.Y)(nX,{contributor:e,latestPost:null==d?void 0:d[e.id]}),title:n("The latest from"),onRemove:a,onReorder:r}):(0,o.Y)(nQ,{contributorSettings:t.attrs.contributors})},n2="logo-ulupBr",n4="logo-64-VEaVRL",n6="logo-72-fFbpYn",n7="logo-auto-l6jK_D",n8=e=>{let{altText:t="Section logo",size:n=64,url:i,showPlaceholder:l}=e;return i?(0,o.Y)("img",{alt:t,className:W()(n2,{[n4]:64===n,[n6]:72===n,[n7]:"auto"===n}),src:(0,N.dJ9)(i,"auto"===n?200:2*n)}):l?(0,o.Y)("div",{className:W()(n2,"logoPlaceholder-RbJEuS",{[n4]:64===n,[n6]:72===n,[n7]:"auto"===n})}):null},n3=e=>{let{pub:t}=(0,e2.np)(),n=(0,p.useMemo)(()=>t.sections.filter(e=>(0,K.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:t})||!e.is_podcast),[t]),i=(0,p.useMemo)(()=>nJ({items:n,excludedIds:null==e?void 0:e.excluded_section_ids,order:null==e?void 0:e.section_order}),[n,e]),l=(0,p.useMemo)(()=>i.some(e=>e.logo_url),[i]);return{newsletters:i,allNewsletters:n,someNewslettersHaveLogos:l,pub:t}},n9=e=>{let{newsletterSettings:t}=e,{iString:n}=(0,I.GO)(),{newsletters:i,someNewslettersHaveLogos:l,pub:r}=n3(t);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(td.F,{children:n("Newsletters")})}),(0,o.Y)(P.I1,{gap:4,children:i.length?i.map(e=>(0,o.Y)(tj,{image:e.logo_url||l?(0,o.Y)(n8,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:r,subtitle:e.description,title:e.name,url:(0,B.Dor)(r,{section:e,addBase:!0})},e.id)):(0,o.Y)(tQ,{type:"newsletter"})})]})},n5=e=>{let{contentBlock:t}=e,{iString:n}=(0,I.GO)(),{sendPreviewBlockUpdate:i}=(0,tE.T)(),l=(0,nE.MS)(t.id,"newsletters"),r=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"newsletters"},updates:{section_order:e}})},[t.id,i]),a=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"newsletters"},updates:{_add_excluded_section_id:e}})},[t.id,i]),{newsletters:s,someNewslettersHaveLogos:d,pub:c}=n3(t.attrs.newsletters);return l?(0,o.Y)(n0,{emptyStateType:"newsletter",items:s,renderItem:e=>(0,o.Y)(tj,{image:e.logo_url||d?(0,o.Y)(n8,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:c,subtitle:e.description,title:e.name,url:(0,B.Dor)(c,{section:e,addBase:!0})}),title:n("Newsletters"),onRemove:a,onReorder:r}):(0,o.Y)(n9,{newsletterSettings:t.attrs.newsletters})};function ie(){let e=(0,et._)(["Logo for ",""]);return ie=function(){return e},e}let it=e=>{let{latestPost:t,podcastArtUrl:n,podcastTitle:i,podcastUrl:l,showPlaceholder:r}=e,{iString:a,iTemplate:s}=(0,I.GO)(),d="undefined"==typeof window,c=t?t.canonical_url:l,u=(0,o.Y)(tV.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,{alignItems:"start",gap:16,children:[(n||r)&&(0,o.Y)(P.pT,{flex:"auto",children:(0,o.Y)(n8,{altText:s(ie(),i),showPlaceholder:!0,size:64,url:n})}),(0,o.FD)(P.I1,{flex:"grow",children:[(0,o.Y)(x.EY.Meta,{color:"accent",children:i}),t?(0,o.Y)(nj.Z,{noIcons:!0,post:t,preset:"sm"}):(0,o.Y)(x.EY.B4,{color:"pub-secondary-text",paddingTop:8,style:{fontStyle:"italic"},children:a("Coming soon")})]})]})});return d?u:(0,o.Y)("a",{href:c,style:{textDecoration:"none",display:"block"},children:u})};var ii=n(24713),il=n.n(ii);let ir=e=>{let{contentBlock:t,pub:n}=e,i=t.attrs.podcasts,l=(0,p.useMemo)(()=>{let e=[];return n.podcast_enabled&&e.push({id:-1,name:n.podcast_title||n.name,description:n.podcast_description||"",logo_url:n.podcast_art_url,isPubPodcast:!0}),e.push(...n.sections.filter(e=>e.is_podcast).map(e=>({id:e.id,name:e.name,description:e.description||"",logo_url:e.logo_url,isPubPodcast:!1}))),e},[n]);return{podcasts:(0,p.useMemo)(()=>nJ({items:l,excludedIds:null==i?void 0:i.excluded_section_ids,order:null==i?void 0:i.section_order,fallbackSort:e=>{var t;return e.isPubPodcast?-1:null!=(t=il()(n.navigationBarItems,t=>t.section_id===e.id))?t:999}}),[l,n.navigationBarItems,i]),pub:n}},io=e=>{let{contentBlock:t}=e,{iString:n}=(0,I.GO)(),{pub:i}=(0,e2.np)(),{podcasts:l}=ir({contentBlock:t,pub:i}),{latestPodcastPosts:r}=(0,p.useContext)(S);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(td.F,{children:n("Podcasts")})}),(0,o.Y)(P.I1,{gap:4,children:l.length?l.map(e=>{var t,n;let l=e.isPubPodcast?null!=(t=null==r?void 0:r.pubPodcast)?t:null:null!=(n=null==r?void 0:r.sectionPodcasts[e.id])?n:null,a=e.isPubPodcast?null:i.sections.find(t=>t.id===e.id),s=e.isPubPodcast?(0,N.t6y)({pub:i,section:null}):a?(0,B.Dor)(i,{section:a,addBase:!0}):"#";return(0,o.Y)(it,{latestPost:l,podcastArtUrl:e.logo_url,podcastSubtitle:e.description,podcastTitle:e.name,podcastUrl:s,showPlaceholder:!0},e.id)}):(0,o.Y)(tQ,{type:"podcast"})})]})},ia=e=>{let{contentBlock:t}=e,{iString:n}=(0,I.GO)(),{sendPreviewBlockUpdate:i}=(0,tE.T)(),l=(0,nE.MS)(t.id,"podcasts"),r=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"podcasts"},updates:{section_order:e}})},[t.id,i]),a=(0,p.useCallback)(e=>{i({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"podcasts"},updates:{_add_excluded_section_id:e}})},[t.id,i]),{pub:s}=(0,e2.np)(),{podcasts:d}=ir({contentBlock:t,pub:s}),{latestPodcastPosts:c}=(0,p.useContext)(S);return l?(0,o.Y)(n0,{emptyStateType:"podcast",items:d,renderItem:e=>{var t,n;return(0,o.Y)(it,{latestPost:e.isPubPodcast?null!=(t=null==c?void 0:c.pubPodcast)?t:null:null!=(n=null==c?void 0:c.sectionPodcasts[e.id])?n:null,podcastArtUrl:e.logo_url,podcastSubtitle:e.description,podcastTitle:e.name,podcastUrl:(e=>{if(e.isPubPodcast)return(0,N.t6y)({pub:s,section:null});let t=s.sections.find(t=>t.id===e.id);return t?(0,B.Dor)(s,{section:t,addBase:!0}):"#"})(e),showPlaceholder:!0})},title:n("Podcasts"),onRemove:a,onReorder:r}):(0,o.Y)(io,{contentBlock:t})},is=e=>{let{contentBlock:t,moduleId:n}=e;switch(n){case"subscribe":return(0,o.Y)(t2,{});case"recommendations":return(0,o.Y)(t1,{hideHeaderBorder:!0,showEmptyState:!0});case"links":return(0,o.Y)(tJ,{hideHeaderBorder:!0});case"contributors":return(0,o.Y)(n1,{contentBlock:t});case"podcasts":return(0,o.Y)(ia,{contentBlock:t});case"newsletters":return(0,o.Y)(n5,{contentBlock:t});case"top-posts":return(0,o.Y)(nV,{topPostsSettings:t.attrs.top_posts});default:return null}},id=e=>{var t;let{column:n,contentBlock:i,insertAtIndex:l,variant:r="default"}=e,{iString:s}=(0,I.GO)(),{isActive:d}=nD(),{deactivatePreviewBlock:c,requestModulePicker:u}=(0,tE.T)(),h=(0,a.md)(A.nJ),m=(0,p.useMemo)(()=>n?{type:"module-picker",parentContentBlockId:i.id,column:n,insertAtIndex:l}:null,[i.id,n,l]),g=m?(0,tT.tP)(m):void 0,{isActive:v,clickAction:Y}=(0,nE.k6)(m),f=(0,p.useCallback)(e=>{e.stopPropagation(),n&&(v?c():u({parentContentBlockId:i.id,column:n,insertAtIndex:l}))},[n,i.id,v,c,u,l]),b=v&&h&&h.contentBlockId===i.id&&h.column===n&&(null!=(t=h.insertAtIndex)?t:0)===l?h.moduleId:null;if(b){let e=0===l;return(0,o.FD)(o.FK,{children:[!e&&(0,o.Y)(nK,{disabled:!0,label:"",variant:"default",onClick:nf()}),(0,o.Y)("div",{id:g,style:{padding:"12px 4px",margin:"-12px -4px"},children:(0,o.Y)(nW,{column:n,contentBlockId:i.id,disabled:!0,dragId:d?ny({column:n,moduleId:b}):void 0,moduleId:b,children:(0,o.Y)(is,{contentBlock:i,moduleId:b})})}),(0,o.Y)(nK,{disabled:!0,label:"",variant:"default",onClick:nf()})]})}let y=!m||"activate"!==Y&&!v;return(0,o.Y)("div",{id:g,children:(0,o.Y)(nK,{disabled:y,isActive:v,label:s("Click to add module"),variant:r,onClick:f})})},ic=e=>{var t;let{column:n,insertAtIndex:i,variant:l="default"}=e,{iString:r}=(0,I.GO)(),{activeBlockId:a,isDragging:s}=nD(),{isPreviewMode:d,requestModulePicker:c}=(0,tE.T)(),u=(0,nC.Cd)(),h=(null==u||null==(t=u.item)?void 0:t.type)==="sidebar-module",m=!a||!n||!d||s||h,g=(0,p.useCallback)(e=>{e.stopPropagation(),n&&a&&c({parentContentBlockId:a,column:n,insertAtIndex:i})},[n,a,c,i]);return(0,o.Y)(nK,{disabled:m,isActive:!1,label:r("Click to add module"),variant:l,onClick:g})},iu=e=>{let{ids:t,column:n,contentBlock:i}=e,{getColumnItems:l,isActive:r}=nD();(0,a.md)(A.CL);let s=(0,nE.JQ)(),d=(0,nC.kG)(),c=(null==d?void 0:d.type)==="module-picker"&&d.parentBlockId===i.id&&d.column===n,u=r?l(n):t;return 0===t.length&&r?c?(0,o.Y)(nA,{column:n,children:(0,o.Y)(id,{column:n,contentBlock:i,insertAtIndex:0})}):(0,o.Y)("div",{style:{pointerEvents:"auto",minHeight:100,height:"100%"},children:(0,o.Y)(nN,{column:n})}):0===u.length?null:(0,o.Y)(nA,{column:n,children:(0,o.FD)(P.I1,{children:[u.map((e,t)=>(0,o.FD)(p.Fragment,{children:[(0,o.Y)(nW,{column:n,contentBlockId:i.id,disabled:s!==i.id,dragId:r?ny({column:n,moduleId:e}):void 0,moduleId:e,children:(0,o.Y)(is,{contentBlock:i,moduleId:e})}),c&&t<u.length-1?(0,o.Y)(id,{column:n,contentBlock:i,insertAtIndex:t+1}):t<u.length-1&&(0,o.Y)(ic,{column:n,insertAtIndex:t+1})]},e)),c?(0,o.Y)(id,{column:n,contentBlock:i,insertAtIndex:u.length,variant:"space"}):(0,o.Y)(ic,{column:n,insertAtIndex:u.length,variant:"space"})]})})},ip=e=>{var{contentBlock:t,posts:n,postsBySource:l,sourcePosts:a}=e,s=(0,r._)(e,["contentBlock","posts","postsBySource","sourcePosts"]);let d=t.secondary_sidebar_modules,c=t.primary_sidebar_modules;return(0,o.Y)(nF,{attrs:t.attrs,contentBlockId:t.id,leftItems:null!=d?d:[],renderModule:e=>(0,o.Y)(is,{contentBlock:t,moduleId:e}),rightItems:null!=c?c:[],children:(0,o.Y)(ih,(0,i._)({contentBlock:t,posts:n,postsBySource:l,sourcePosts:a},s))})},ih=e=>{var t;let n,i,l,{contentBlock:r,posts:s,postsBySource:d,pub:c,showSearch:u,showSeeAllLink:h,sourcePosts:m,title:g,viewAllUrl:v}=e,{isDesktop:Y,isTablet:f,isMobile:b}=(0,D.sM)(),{isDragging:y}=nD(),_=(0,a.md)(A.nJ),w=(0,a.md)(A.y2),k=(0,nC.kG)(),C=r.secondary_sidebar_modules,I=r.primary_sidebar_modules,S=C&&C.length>0,F=I&&I.length>0,x=(null==_?void 0:_.contentBlockId)===r.id&&(null==_?void 0:_.column)==="left",T=(null==_?void 0:_.contentBlockId)===r.id&&(null==_?void 0:_.column)==="right",E=(null==k?void 0:k.type)==="module-picker"&&k.parentBlockId===r.id&&"left"===k.column,N=(null==k?void 0:k.type)==="module-picker"&&k.parentBlockId===r.id&&"right"===k.column,M=S||y||x||E,R=F||y||T||N,L=(null==w?void 0:w.contentBlockId)===r.id?null==w?void 0:w.updates.num_rows:null,O=null!=(t=null!=L?L:r.num_rows)?t:ti.AD.rows.default,z=null!=L&&m?m:s;Y?(n=M?(0,o.Y)(iu,{column:"left",contentBlock:r,ids:null!=C?C:[]}):void 0,i=R?(0,o.Y)(iu,{column:"right",contentBlock:r,ids:null!=I?I:[]}):void 0,l=4-!!R-!!M):f?F?(i=(0,o.Y)(iu,{column:"right",contentBlock:r,ids:[...I,...null!=C?C:[]]}),l=2):S?(n=(0,o.Y)(iu,{column:"left",contentBlock:r,ids:C}),l=2):l=3:l=1;let U=d&&d.length>0,q="multiple"===r.post_source&&!U,H=l,W=U?(0,o.Y)(P.I1,{gap:b?24:32,children:d.map((e,t)=>{var n,i;let r=e.source.title_override||(null==(n=e.source.section)?void 0:n.name)||(null==(i=e.source.post_tag)?void 0:i.name)||"",a=e.source.section?(0,B.Dor)(c,{section:e.source.section}):e.source.post_tag?(0,B.ii9)(c,e.source.post_tag):void 0,s=e.posts.length>=H;return(0,o.Y)(p.Fragment,{children:(0,o.FD)(P.I1,{children:[r&&(0,o.Y)(nu,{pub:c,showSearch:0===t&&u,title:r,viewAllUrl:s?a:void 0}),(0,o.Y)(nq.C,{numColumns:l,posts:Array.from({length:H},(t,n)=>{var i;return null!=(i=e.posts[n])?i:null})})]})},"".concat(e.source.section_id||e.source.tag_id,"-").concat(t))})}):q?(0,o.FD)(o.FK,{children:[(0,o.Y)(P.I1,{paddingBottom:16,paddingTop:4,paddingX:8,children:(0,o.Y)(ts.x,{size:"lg",width:"20%"})}),(0,o.Y)(nq.C,{numColumns:l,posts:Array.from({length:l},()=>null)})]}):(0,o.FD)(o.FK,{children:[g&&(0,o.Y)(nu,{pub:c,showSearch:u,title:g,viewAllUrl:z.length>=l*O?v:void 0}),(0,o.Y)(nq.C,{numColumns:l,posts:Array.from({length:l*O},(e,t)=>{var n;return null!=(n=z[t])?n:null})}),h&&v&&z.length>=l*O&&(0,o.Y)(nU.k,{url:v})]});return(0,o.Y)(nO,{emptyLeft:!M,emptyRight:!R,children:(0,o.Y)(nz.I,{leftContent:n,mainContent:W,rightContent:i,stretchToFullWidth:!0})})},im=e=>{var{contentBlock:t,posts:n,sourcePosts:l}=e,a=(0,r._)(e,["contentBlock","posts","sourcePosts"]);let s=t.secondary_sidebar_modules,d=t.primary_sidebar_modules;return(0,o.Y)(nF,{attrs:t.attrs,contentBlockId:t.id,leftItems:null!=s?s:[],renderModule:e=>(0,o.Y)(is,{contentBlock:t,moduleId:e}),rightItems:null!=d?d:[],children:(0,o.Y)(ig,(0,i._)({contentBlock:t,posts:n,sourcePosts:l},a))})},ig=e=>{var t;let n,i,{contentBlock:l,posts:r,pub:s,showSearch:d,showSeeAllLink:c,sourcePosts:u,title:p,viewAllUrl:h}=e,{isTablet:m,isDesktop:g}=(0,D.sM)(),{activeBlockId:v}=nD(),{isPreviewMode:Y}=(0,tE.T)(),f=(0,a.md)(A.nJ),b=(0,a.md)(A.y2),y=l.secondary_sidebar_modules,_=l.primary_sidebar_modules,w=(null==b?void 0:b.contentBlockId)===l.id?null==b?void 0:b.updates.num_posts:null,k=null!=(t=null!=w?w:l.num_posts)?t:ti.AD.posts.default,C=null!=w&&u?u:r,I=Array.from({length:k},(e,t)=>{var n;return null!=(n=C[t])?n:null}),S=C.length>0&&C.slice(0,k).every(e=>!e.cover_image),F=C.length>=k,P=y&&y.length>0,x=_&&_.length>0,T=(null==f?void 0:f.contentBlockId)===l.id&&(null==f?void 0:f.column)==="left",E=(null==f?void 0:f.contentBlockId)===l.id&&(null==f?void 0:f.column)==="right",N=(0,o.FD)(o.FK,{children:[p&&(0,o.Y)(nu,{pub:s,showSearch:d,title:p,viewAllUrl:F?h:void 0}),(0,o.Y)(tn.m,{hideImages:S,posts:I,variant:"two-column-list"}),c&&h&&F&&(0,o.Y)(nU.k,{url:h})]});return g?(n=P||v||T?(0,o.Y)(iu,{column:"left",contentBlock:l,ids:null!=y?y:[]}):void 0,i=x||v||E?(0,o.Y)(iu,{column:"right",contentBlock:l,ids:null!=_?_:[]}):void 0):m&&(x?i=(0,o.Y)(iu,{column:"right",contentBlock:l,ids:[..._,...null!=y?y:[]]}):P&&(n=(0,o.Y)(iu,{column:"left",contentBlock:l,ids:y}))),(0,o.Y)(nz.I,{animateColumns:Y,leftContent:n,mainContent:N,rightContent:i})},iv=e=>{let{contentBlock:t}=e,{iString:n}=(0,I.GO)(),{freeSignup:i}=(0,p.useContext)(S),{pub:l,user:r}=(0,e2.np)(),a=(0,m.mJ)(),s=(0,eV.Pu)(),{isMobile:d}=(0,D.sM)(),c=(0,tc.s7)({pub:l,includeTheRampart:!0}),u=i||(null==r?void 0:r.is_free_subscribed),h=null==r?void 0:r.is_pledged,g=!a.getConfigFor("pledges_disabled")&&!!s.getSettingFor("payment_pledges_enabled"),{cta:v,message:Y}=iY({contentBlock:t,freeSignup:i,pub:l,pubSettings:s,siteConfigs:a,user:r}),f=(0,B.eV6)(l,{params:{utm_source:V.VU.subscribeContentBlock,gift:!0,next:document.location.href}}),b=(0,B.eV6)(l,{addBase:!0,user:r,params:{utm_source:V.VU.subscribeContentBlock,simple:!0,next:document.location.href,referring_pub_ids:(0,eg.y)("referring_pub_ids")}}),y=(0,B.RKl)({pub:l,user:r,params:{utm_source:V.VU.subscribeContentBlock,next:document.location.href}}),_=(0,B.LG3)({pub:l});return(0,o.Y)("div",{className:W()("outerContainer-cCKm5T",{"thebulwark-dw_07J":c}),children:(0,o.Y)(F.az,{className:"innerContainer-hMBAPa",paddingY:c||d?40:48,children:(0,o.FD)(P.Ye,{alignItems:"center",direction:d?"column":"row",gap:d?c?16:24:40,justifyContent:c?"space-between":"center",paddingX:8,children:[c&&(0,o.FD)(P.Ye,{alignItems:"center",className:"logoContainer-iUK1Lv",gap:4,children:[(0,o.Y)(eh.wg,{pub:l,size:c||d?56:80}),c&&!d&&(0,o.Y)(x.EY,{color:"pub-primary-text",font:"pub-headings",nowrap:!0,size:20,children:"The Bulwark +"})]}),Y&&(0,o.Y)(P.Ye,{alignItems:"center",direction:d?"column":"row",gap:8,children:(0,o.Y)(x.EY,{align:d||c?"center":"left",className:"message-IKztq4",color:"pub-primary-text",font:"pub-headings",lineHeight:30,size:c?20:24,children:(0,K.preventOrphans)(Y)})}),v&&(0,o.Y)(F.az,{className:"ctaContainer-WOl42W",flex:"auto",children:"subscribe"===v||"upgrade"===v?(0,o.Y)(eu.$n,{href:b,localNavigation:!1,priority:"primary",children:c?"Join Bulwark +":(0,K.getSubscribeText)(l,{isFreeSubscribed:u,isPledged:h,pledgesEnabled:g})}):"upgrade_founding"===v?(0,o.Y)(eu.$n,{href:y,localNavigation:!1,priority:"primary",children:n("Upgrade to founding")}):"pledge"===v?(0,o.Y)(eu.$n,{href:b,localNavigation:!1,priority:"primary",children:n("Pledge your support")}):"gift"===v?c?(0,o.Y)(eu.$n,{href:_,localNavigation:!1,priority:"primary",children:n("Gift a subscription")}):(0,o.Y)(eu.$n,{href:f,localNavigation:!1,priority:"primary",children:n("Gift a subscription")}):null})]})})})},iY=e=>{let{contentBlock:t,freeSignup:n,pub:i,pubSettings:l,siteConfigs:r,user:o}=e,a=n||(null==o?void 0:o.is_free_subscribed),s="enabled"===i.payments_state,d=!r.getConfigFor("pledges_disabled")&&!!l.getSettingFor("payment_pledges_enabled"),c=null==o?void 0:o.is_subscribed,u=null==o?void 0:o.is_founding,p=(0,tF.QN)(i);return{cta:a?s?c?!u&&p?"upgrade_founding":"gift":"upgrade":d?"pledge":null:"subscribe",message:u&&p?t.attrs.founding_member_message:c&&s?t.attrs.paid_subscriber_message:a?t.attrs.free_subscriber_message:t.attrs.non_subscriber_message}};var ib=n(11574),iy=n(77433);let i_=e=>{let{posts:t,title:n,viewAllUrl:i}=e,{isMobile:l,isTablet:r}=(0,D.sM)();return l?(0,o.Y)(iw,{posts:t,title:n,viewAllUrl:i}):(0,o.FD)(P.I1,{gap:40,children:[(0,o.Y)(iy.M,{title:n,titlePreset:"st2"}),(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}),(0,o.Y)(P.Ye,{gap:40,children:t.slice(1,r?3:4).map(e=>(0,o.Y)(P.I1,{borderTop:"detail-themed",flex:"grow",paddingTop:32,children:(0,o.Y)(eX.R,{post:e,variant:"mini"})}))})]})]})},iw=e=>{let{posts:t,title:n,viewAllUrl:i}=e;return(0,o.FD)(P.I1,{gap:20,children:[(0,o.Y)(iy.M,{title:n,titlePreset:"st2",viewAllUrl:i}),(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,o.Y)(P.I1,{children:t.slice(1,4).map(e=>(0,o.Y)(P.I1,{borderTop:"detail-themed",paddingY:16,children:(0,o.Y)(eX.R,{post:e,variant:"mini"})}))})]})]})};var ik=n(60250),iC=n(87677),iI=n(72880),iS=n(77124),iD=n(95691),iF=n(57753),iP=n(74894),ix=n(95294);let iT="panel-K8JY99",iA="navButton-hcrBJt",iE="primaryButton-AbjjpI",iN="secondaryButton-GUipKK",iB="podcastArt-U81yKg",iM=e=>{var t,n,i,l,r,a,s,d,c,u,h,m;let{contentBlock:g}=e,{isMobile:v}=(0,D.sM)(),{pub:Y}=(0,e2.np)(),{sections:f,metadata:b}=(0,iD.P)({pub:Y}),{ids:y,metadata:_}=(0,iS.q)({pub:Y}),{latestPodcastPosts:w}=(0,p.useContext)(S),[k,C]=(0,p.useState)(2),[I,F]=(0,p.useState)(!1),[x,T]=(0,p.useState)(0),A=(0,p.useRef)(null),E=(0,p.useRef)(null),N=(0,p.useRef)(null),B=(0,p.useRef)(null),M=(null==(n=g.attrs)||null==(t=n.media_carousel)?void 0:t.variant)==="videos"?"videos":"podcasts",R=(0,iP.Zu)(Y).filter(e=>!!e.sectionId),L=tq()(R,e=>{var t;return y.indexOf(null!=(t=e.sectionId)?t:-1)}),O="podcasts"===M?L.length:f.length,z=[...L.slice(-2),...L,...L.slice(0,2)],U=[...f.slice(-2),...f,...f.slice(0,2)],q=()=>{C(e=>e+1)},H=()=>{C(e=>e-1)};return((0,p.useEffect)(()=>{1===k?setTimeout(()=>{F(!0),C(O+1),setTimeout(()=>{F(!1)},100)},300):k===O+2&&setTimeout(()=>{F(!0),C(2),setTimeout(()=>{F(!1)},100)},300)},[k,O]),0===O)?null:1===O?"podcasts"===M&&L[0]?(0,o.Y)(iL,{colorString:null!=(a=null==(i=_[null!=(r=L[0].sectionId)?r:"pub"])?void 0:i.carouselColor)?a:"black",podcast:L[0],post:L[0].sectionId?null!=(s=null==w||null==(l=w.sectionPodcasts)?void 0:l[L[0].sectionId])?s:null:null!=(d=null==w?void 0:w.pubPodcast)?d:null}):"videos"===M&&f[0]?(0,o.Y)(iR,{colorString:null!=(h=null==(c=b[f[0].id])?void 0:c.carouselColor)?h:"black",post:null!=(m=null==w||null==(u=w.sectionPodcasts)?void 0:u[f[0].id])?m:null,section:f[0]}):null:(0,o.FD)(P.I1,{gap:16,children:[v&&(0,o.Y)(eO.T,{align:"center",preset:"st2",children:"podcasts"===M?"Listen to Our Latest":"Scroll Through Our Shows"}),(0,o.FD)(P.I1,{className:"container-opjHc4",children:[!v&&(0,o.Y)("div",{className:iA,role:"button",onClick:H,children:(0,o.Y)(ik.A,{size:32,strokeWidth:1.5})}),(0,o.Y)(P.Ye,{className:"track-bJrNCJ",style:{transform:"translateX(calc(".concat(v?32+64*k:80+160*k,"px - ").concat(100*k,"% + ").concat(x,"px))"),transition:I||0!==x?"none":v?"transform 0.15s ease-out":"transform 0.3s ease-in-out"},onTouchEnd:v?()=>{if(null===A.current||null===N.current||null===E.current||null===B.current)return void T(0);let e=N.current-A.current;Math.abs(e)>Math.abs(B.current-E.current)&&Math.abs(e)>50&&(e>0?H():q()),T(0)}:void 0,onTouchMove:v?e=>{var t,n,i,l;if(N.current=null!=(i=null==(t=e.touches[0])?void 0:t.clientX)?i:null,B.current=null!=(l=null==(n=e.touches[0])?void 0:n.clientY)?l:null,null!==A.current&&null!==E.current&&null!==N.current&&null!==B.current){let t=N.current-A.current;Math.abs(t)>Math.abs(B.current-E.current)&&(e.preventDefault(),T(t))}}:void 0,onTouchStart:v?e=>{var t,n,i,l;A.current=null!=(i=null==(t=e.touches[0])?void 0:t.clientX)?i:null,E.current=null!=(l=null==(n=e.touches[0])?void 0:n.clientY)?l:null,N.current=null,B.current=null,T(0)}:void 0,children:"podcasts"===M?z.map(e=>{var t,n,i,l,r,a;return(0,o.Y)("div",{className:iT,children:(0,o.Y)(iL,{colorString:null!=(l=null==(t=_[null!=(i=e.sectionId)?i:-1])?void 0:t.carouselColor)?l:"black",podcast:e,post:e.sectionId?null!=(r=null==w||null==(n=w.sectionPodcasts)?void 0:n[e.sectionId])?r:null:null!=(a=null==w?void 0:w.pubPodcast)?a:null})})}):U.map(e=>{var t,n,i,l;return(0,o.Y)("div",{className:iT,children:(0,o.Y)(iR,{colorString:null!=(i=null==(t=b[e.id])?void 0:t.carouselColor)?i:"black",post:null!=(l=null==w||null==(n=w.sectionPodcasts)?void 0:n[e.id])?l:null,section:e})})})}),!v&&(0,o.Y)("div",{className:iA,role:"button",onClick:q,children:(0,o.Y)(iC.A,{size:32,strokeWidth:1.5})})]})]})},iR=e=>{var t;let{colorString:n,post:i,section:l}=e,{pub:r}=(0,e2.np)(),{isMobile:a}=(0,D.sM)(),s=(0,B.Dor)(r,{section:l}),d=null!=(t=iF.Q3[n])?t:iF.Q3.black,c=d.hex;return(0,o.Y)(P.I1,{style:{backgroundColor:c,height:"100%"},children:a?(0,o.Y)(P.I1,{alignItems:"center",className:"videoPanelContentMobile-r5D1RZ",paddingX:16,paddingY:24,children:(0,o.Y)(iz,{image:i&&(0,o.Y)(ix.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:i}),isInverted:d.invertTextColors,post:i,sectionName:l.name,sectionOrPodcastUrl:s})}):(0,o.FD)(P.Ye,{alignItems:"center",className:"videoPanelContentDesktop-ecA07Z",paddingX:64,paddingY:32,children:[(0,o.Y)(iO,{isInverted:d.invertTextColors,isVideo:!0,post:i,sectionTitle:l.name,sectionUrl:s}),(0,o.Y)(P.I1,{flex:"grow",paddingRight:8,children:i&&(0,o.Y)(ix.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:i})})]})})},iL=e=>{var t,n,i;let{colorString:l,podcast:r,post:a}=e,{isMobile:s}=(0,D.sM)(),{pub:d}=(0,e2.np)(),c=(0,N.t6y)({pub:d,section:r.sectionId&&null!=(i=d.sections.find(e=>e.id===r.sectionId))?i:null}),u=null==(t=iF.Q3[l])?void 0:t.hex,p=null==(n=iF.Q3[l])?void 0:n.invertTextColors;return(0,o.Y)(P.I1,{style:{backgroundColor:u,height:"100%"},children:s?(0,o.Y)(P.I1,{alignItems:"center",className:"podcastPanelContentMobile-En_Ak9",paddingX:16,paddingY:24,children:(0,o.Y)(iz,{image:r.artUrl?(0,o.Y)(iI.o,{className:iB,maxWidth:360,src:r.artUrl}):null,isInverted:p,post:a,sectionName:r.podcastTitle,sectionOrPodcastUrl:c})}):(0,o.FD)(P.Ye,{alignItems:"center",className:"podcastPanelContentDesktop-NIL93C",gap:40,justifyContent:"center",paddingX:64,paddingY:32,children:[r.artUrl&&(0,o.Y)(iI.o,{className:iB,maxWidth:300,src:r.artUrl}),(0,o.Y)(iO,{isInverted:p,isVideo:!1,post:a,sectionTitle:r.podcastTitle,sectionUrl:c})]})})},iO=e=>{let{isInverted:t,isVideo:n,post:i,sectionTitle:l,sectionUrl:r}=e,a=t?"white":"primary";return(0,o.FD)(P.I1,{gap:24,paddingLeft:8,style:{width:426},children:[(0,o.Y)(P.I1,{paddingBottom:8,style:{borderBottom:"1px solid ".concat(t?"white":"var(--color-fg-primary-themed)")},children:(0,o.Y)(eO.T,{color:a,preset:"h6-serif",children:l})}),(0,o.FD)(P.I1,{gap:24,children:[i&&(0,o.FD)(P.I1,{gap:12,children:[(0,o.Y)(eO.T,{clamp:2,color:a,preset:"h6-sans",children:i.title}),(0,o.Y)(eO.T,{clamp:3,color:a,preset:"d3-serif",children:i.description})]}),(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[i&&(0,o.Y)(eO.T,{as:"a",href:i.canonical_url,preset:"detail-large",children:(0,o.Y)(P.Ye,{className:iE,padding:16,children:n?"Watch now":"Listen now"})}),(0,o.Y)(eO.T,{as:"a",className:iN,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},iz=e=>{let{image:t,isInverted:n,post:i,sectionName:l,sectionOrPodcastUrl:r}=e,a=n?"white":"primary";return(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[(0,o.Y)(eO.T,{color:a,preset:"h6-serif",children:l}),(0,o.FD)(P.I1,{gap:32,children:[i&&(0,o.FD)(P.I1,{alignItems:"center",gap:28,children:[t,(0,o.FD)(P.I1,{gap:8,children:[(0,o.Y)(eO.T,{align:"center",clamp:2,color:a,preset:"h4-sans-condensed",children:i.title}),(0,o.Y)(eO.T,{align:"center",clamp:3,color:a,preset:"d3-serif",children:i.description})]})]}),(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[i&&(0,o.Y)(eO.T,{as:"a",href:i.canonical_url,preset:"detail-large",children:(0,o.Y)(P.Ye,{className:iE,padding:16,children:"Watch now"})}),(0,o.Y)(eO.T,{as:"a",className:iN,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},iU="miniPost-O80hP6",iq=e=>{let{posts:t}=e,{latestPostFromSections:n}=(0,p.useContext)(S),{isMobile:i}=(0,D.sM)(),{pub:l}=(0,e2.np)(),r=(0,tc.JQ)({pub:l}),a=d()(r.map(e=>null==n?void 0:n[e]));return i?(0,o.Y)(iH,{posts:t,sectionPosts:a}):(0,o.FD)("div",{className:"container-YOdLMp",children:[(0,o.FD)(P.Ye,{className:"podcastEpisodeContainer-nd115M",gap:20,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(P.I1,{children:(0,o.Y)(e0.A,{gap:24,children:a.map(e=>(0,o.Y)(eX.R,{hideUfi:!0,post:e,showStar:!0,variant:"mini"}))})})]}),(0,o.FD)("div",{className:"plusThreeContainer-VOEUMx",children:[t[1]&&(0,o.Y)(eX.R,{post:t[1],titlePreset:"h6-sans",variant:"content-block-listing"}),(0,o.FD)(P.Ye,{gap:40,children:[t[2]&&(0,o.Y)("div",{className:iU,children:(0,o.Y)(eX.R,{post:t[2],showDescription:!0,variant:"mini"})}),t[3]&&(0,o.Y)("div",{className:iU,children:(0,o.Y)(eX.R,{post:t[3],showDescription:!0,variant:"mini"})})]})]})]})},iH=e=>{let{posts:t,sectionPosts:n}=e;return(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(e0.A,{gap:24,includeBottomDivider:!0,includeTopDivider:!0,children:n.map(e=>(0,o.Y)(eX.R,{post:e,showStar:!0,variant:"mini"}))}),t[1]&&(0,o.Y)(eX.R,{post:t[1],variant:"content-block-listing"}),(0,o.FD)(P.Ye,{gap:24,children:[t[2]&&(0,o.Y)(P.Ye,{flex:"grow",children:(0,o.Y)(eX.R,{post:t[2],variant:"mini"})}),t[3]&&(0,o.Y)(P.Ye,{flex:"grow",children:(0,o.Y)(eX.R,{post:t[3],variant:"mini"})})]})]})},iW=e=>{let{posts:t}=e;return t[0]?(0,o.Y)(P.I1,{className:"container-nYRgUV",children:(0,o.Y)(eX.R,{post:t[0],variant:"content-block-single-large"})}):null};var iG=n(53971);let iK=()=>{let{isMobile:e,isTablet:t}=(0,D.sM)(),{freeSignup:n,freeSignupEmail:i}=(0,p.useContext)(S),{pub:l,user:r}=(0,e2.np)();return(0,o.FD)(P.I1,{alignItems:"center",className:"container-liQ2Vy",gap:24,justifyContent:"center",paddingX:t?16:40,style:{backgroundImage:"url(".concat((0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/fp-subscribe-block-bg.jpg"),304),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"multiply"},children:[(0,o.Y)(eO.T,{align:"center",color:"white",preset:e?"lg-preview-byline":"h6-sans",children:(null==r?void 0:r.is_subscribed)?(0,o.FD)(o.FK,{children:["Share ",(0,o.Y)("em",{children:"The Free Press"})," with other free thinkers."]}):(null==r?void 0:r.is_free_subscribed)?"Become a Paid Subscriber to access our comments section, special columns, and more.":(0,o.FD)(o.FK,{children:["Sign up for your daily window into the world of ",(0,o.Y)("em",{children:"The Free Press"}),"and our take on the world at large"]})}),(0,o.Y)("div",{children:(null==r?void 0:r.is_subscribed)?(0,o.Y)(eR.v,{href:(0,N.eV6)(l,{utm_source:V.VU.subscribeContentBlock,gift:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Send Gift"}):(null==r?void 0:r.is_free_subscribed)?(0,o.Y)(eR.v,{href:(0,N.eV6)(l,{utm_source:V.VU.freePressPromoBox,simple:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Upgrade"}):(0,o.Y)(C.A,{align:"left",expectTruncation:!0,freeSignup:n,freeSignupEmail:i,isStatic:!1,pub:l,source:"the-fp-subscribe-block",user:r})})]})};var iV=n(7755);let ij=()=>{let{isMobile:e}=(0,D.sM)();return(0,o.FD)("div",{className:W()("container-Q2UekY",{"containerMobile-op5rRO":e}),children:[(0,o.Y)(iX,{}),(0,o.Y)(iJ,{}),(0,o.Y)(iK,{})]})},iX=()=>(0,o.Y)("a",{className:W()("promoContainer-M2SbsD","merchContainer-rvwMsY"),href:"https://shop.thefp.com/",rel:"noopener noreferrer",target:"_blank",children:(0,o.FD)(P.I1,{justifyContent:"space-between",padding:32,children:[(0,o.FD)(eO.T,{color:"white",preset:"h5-serif",children:["Get (or give!) a",(0,o.Y)("br",{}),"Free Press hat,",(0,o.Y)("br",{}),"tote, or TGIF socks."]}),(0,o.FD)(P.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(eO.T,{color:"white",preset:"detail-large",children:"Shop Merch"}),(0,o.Y)(iG.A,{size:16,stroke:"white"})]}),(0,o.Y)("img",{alt:"Socks",className:"merchSocks-lut01J",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/thefp-socks.png"))})]})}),iJ=()=>{var e,t,n;let{isMobile:i,isDesktop:l}=(0,D.sM)(),{latestPodcastPosts:r}=(0,p.useContext)(S),{pub:a}=(0,e2.np)(),s=null!=(e=a.sections.find(e=>"honestly"===e.slug))?e:null,{artUrl:d}=(0,iV.ed)({pub:a,section:s}),c=(0,N.t6y)({pub:a,section:s}),u=null!=(n=null==r?void 0:r.sectionPodcasts[null!=(t=null==s?void 0:s.id)?t:""])?n:null,h=(0,N.wu9)(a,u,{noBase:!0});return(0,o.FD)(P.Ye,{children:[d&&(0,o.Y)("a",{href:c,children:(0,o.Y)(iI.o,{className:"podcastImage-tqEnIM",loading:"lazy",maxWidth:440,src:d})}),(0,o.FD)(P.I1,{as:"a",flex:"grow",gap:l?40:16,href:null!=h?h:c,justifyContent:"center",paddingX:16,style:{backgroundColor:"#fa3409",borderLeft:"1px solid var(--web_bg_color)",textDecoration:"none"},children:[u&&(0,o.Y)(eO.T,{clamp:i?4:5,color:"white",preset:"h6-serif",children:u.title}),(0,o.FD)(P.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(eO.T,{color:"white",preset:"detail-large",children:l?"Listen now":"Listen"}),(0,o.Y)(iG.A,{size:16,stroke:"white"})]})]})]})},iZ=(0,p.memo)(e=>{var t,n,i,l;let{contentBlock:r,posts:a,postsBySource:s,pub:d,showSearch:c=!1,showSeeAllLink:u,sourcePosts:p,title:h,viewAllUrl:m}=e,g=(0,tc.lu)({pub:d}),v=null==(t=null!=(i=r.attrs.titleOverride)?i:null==(n=r.attrs.feature)?void 0:n.title)?void 0:t.trim();if("list"===r.block_type)return(0,o.Y)(im,{contentBlock:r,posts:a,pub:d,showSearch:c,showSeeAllLink:u,sourcePosts:p,title:v||h,viewAllUrl:m});if("grid"===r.block_type)return(0,o.Y)(ip,{contentBlock:r,posts:a,postsBySource:s,pub:d,showSearch:c,showSeeAllLink:u,sourcePosts:p,title:v||h,viewAllUrl:m});if("feature"===r.block_type){let e=v||h,t=null==(l=r.attrs.feature)?void 0:l.variant;return g?(0,o.Y)(ib.$,{posts:a,title:e,variant:t,viewAllUrl:m}):(0,o.Y)(nh,{posts:a,pub:d,showSearch:c,title:e,variant:t,viewAllUrl:m})}return"subscribe"===r.block_type?(0,o.Y)(iv,{contentBlock:r}):"podcast_plus_three"===r.block_type?(0,o.Y)(iq,{posts:a}):"subscribe_plus_five"===r.block_type?(0,o.Y)(ij,{}):"single_post"===r.block_type?(0,o.Y)(iW,{posts:a}):"half_feature"===r.block_type?(0,o.Y)(i_,{posts:a,title:v||h,viewAllUrl:m}):"media_carousel"===r.block_type?(0,o.Y)(iM,{contentBlock:r}):null}),iQ=()=>(0,o.Y)(F.az,{paddingBottom:120,children:(0,o.Y)(nz.I,{leftContent:(0,o.Y)("div",{children:"\xa0"}),mainContent:(0,o.Y)(t9.t,{postCount:4,variant:"list"}),rightContent:(0,o.Y)("div",{children:"\xa0"})})});var i$=n(55364),i0=n.n(i$),i1=n(25112);let i2=e=>{let{insertAfterIndex:t,previewBlockData:n,pub:i,variant:l="default"}=e,{iString:r}=(0,I.GO)(),{deactivatePreviewBlock:s,isPreviewMode:d,requestBlockPicker:c,hasReceivedInitialPreviewUIState:u}=(0,tE.T)(),h=(0,a.md)(A.lw),m=(0,p.useMemo)(()=>({type:"block-picker",insertAfterIndex:t}),[t]),g=(0,tT.tP)(m),{isActive:v,clickAction:Y}=(0,nE.k6)(m);if(v&&h&&h.insertAfterIndex===t&&n&&n.insertAfterIndex===t&&n){let e="subscribe"===n.block.block_type?"space":l;return(0,o.FD)(o.FK,{children:[(0,o.Y)(nK,{disabled:!0,label:"",variant:e,onClick:()=>{}}),(0,o.Y)("div",{id:g,children:(0,o.Y)(iZ,{contentBlock:n.block,posts:n.posts,pub:i,showSearch:!1,showSeeAllLink:!1,title:""})}),(0,o.Y)(nK,{disabled:!0,label:"",variant:e,onClick:()=>{}})]})}return(0,o.Y)("div",{id:g,children:(0,o.Y)(nK,{disabled:!d||!u||"activate"!==Y&&!v,isActive:v,label:r("Click to add block"),variant:l,onClick:e=>{e.stopPropagation(),v?s():c({insertAfterIndex:t})}})})},i4="contentBlockEditButton-g_2FSh",i6=["media_carousel","subscribe","subscribe_plus_five"],i7=e=>{var t,i,l;let{contentBlocks:r,firstDividerVariant:s,postsBySectionId:d,postsByTagId:c,postsByContentBlockId:u,postsForContentBlockPins:h,recentPosts:g,showEmptyStates:v}=e,{isMobile:Y}=(0,D.sM)(),{pub:f,user:b}=(0,e2.np)(),{isPreviewMode:y}=(0,tE.T)(),_=(0,tc.S2)({pub:f}),w=(0,tc.lu)({pub:f}),[k,C]=(0,p.useState)(null),{groups:I,contentBlocks:F,hasMultipleLatest:x,isEmpty:T,previewBlockData:E}=function(e){let{allContentBlocks:t,postsBySectionId:n,postsByTagId:i,postsByContentBlockId:l,postsForContentBlockPins:r,recentPosts:o}=e,{breakpoint:s}=(0,D.sM)(),{pub:d,user:c}=(0,e2.np)(),{canRender:u}=(e=>{let{pub:t,user:n}=e,{freeSignup:i}=(0,p.useContext)(S),l=(0,eV.Pu)(),r=(0,m.mJ)();return{canRender:(0,p.useCallback)(e=>{let{contentBlock:o}=e,{cta:a,message:s}=iY({contentBlock:o,freeSignup:i,pub:t,pubSettings:l,siteConfigs:r,user:n});return!!(a||s)},[i,t,l,r,n])}})({pub:d,user:c}),h=(0,a.md)(A.y2),g=(0,a.md)(A.lw),v=(0,tc.lu)({pub:d}),Y=(0,p.useMemo)(()=>t.filter(e=>"subscribe"!==e.block_type||u({contentBlock:e})),[t,u]),f=(0,p.useMemo)(()=>{if(!h)return Y;let{contentBlockId:e,updates:t}=h;return Y.map(n=>n.id===e?i0()({},n,t):n)},[Y,h]),b=(0,p.useMemo)(()=>(0,ti.cD)({contentBlocks:Y,breakpoint:s,isTheFP:v,recentPosts:o,postsBySectionId:n,postsByTagId:i,postsByContentBlockId:l,postsForContentBlockPins:r}),[Y,s,v,o,n,i,l,r]),y=(0,p.useMemo)(()=>{if(!g)return null;let{blockType:e,insertAfterIndex:t}=g,n={attrs:{},block_type:e,id:i1.vK,order:t+1,post_source:"subscribe"===e?"none":"latest",post_tag_id:null,primary_sidebar_modules:[],publication_id:d.id,secondary_sidebar_modules:[],section_id:null},i=0;for(let e=0;e<=t&&e<Y.length;e++){let t=Y[e];if(t&&"latest"===t.post_source){var l,r;i+=null!=(r=null==(l=b[t.id])?void 0:l.posts.length)?r:0}}let a=(0,ti.VK)({contentBlock:n,breakpoint:s,isTheFP:v});return{block:n,posts:o.slice(i,i+a),insertAfterIndex:t}},[g,Y,b,d.id,s,v,o]),_=(0,p.useMemo)(()=>t.filter(e=>"latest"===e.post_source).length>1,[t]);return{groups:(0,p.useMemo)(()=>{let e=[],t=[],l="full-width",r=0;for(let h of f){var a,s,d,c,u,p;let m,g="half_feature"===h.block_type?"half-width":"full-width",v=null!=(s=null==(a=b[h.id])?void 0:a.posts)?s:[],Y=[];"latest"===h.post_source?(Y=o.slice(r),r+=v.length):"section"===h.post_source&&h.section_id?Y=null!=(d=n[h.section_id])?d:[]:"tag"===h.post_source&&h.post_tag_id?Y=null!=(c=i[h.post_tag_id])?c:[]:"multiple"===h.post_source&&(Y=null!=(p=null==(m=null==(u=b[h.id])?void 0:u.postsBySource)?void 0:m.flatMap(e=>e.posts))?p:[]),g!==l&&(t.length&&(e.push({groupType:l,items:t}),t=[]),l=g),t.push({contentBlock:h,posts:v,sourcePosts:Y,postsBySource:m})}return t.length&&e.push({groupType:l,items:t}),e},[f,b,o,n,i]),contentBlocks:f,hasMultipleLatest:_,isEmpty:0===f.length,previewBlockData:y}}({allContentBlocks:r,postsBySectionId:d,postsByTagId:c,postsByContentBlockId:u,postsForContentBlockPins:h,recentPosts:g}),N=null!=(i=F.find(e=>e.id===k))?i:null;if(T&&v)return(0,o.Y)(iQ,{});let B=w||_,M=e=>{if(B)return"none";if(-1===e&&s)return s;let t=F[e],n=F[e+1];return(null==t?void 0:t.block_type)==="subscribe"||(null==n?void 0:n.block_type)==="subscribe"?"space":"default"},R=!1;return(0,o.FD)(P.I1,{paddingBottom:40,children:[F.length>0&&(0,o.Y)(i2,{insertAfterIndex:-1,previewBlockData:E,pub:f,variant:M(-1)}),I.map(e=>{let{groupType:t,items:n}=e;return(0,o.Y)("div",{className:W()({"halfWidthContainer-OZxoCR":"half-width"===t&&!Y,"pillarContentBlocks-pkmgrG":_}),children:n.map(e=>{var n;let{contentBlock:i,posts:l,postsBySource:r,sourcePosts:a}=e,{title:s,viewAllUrl:d}=i8({contentBlock:i,hideRecentPostsTitle:x&&!w,pub:f}),c=!1,u=F.findIndex(e=>e.id===i.id),h=F.slice(u+1),m="latest"===i.post_source&&h.every(e=>"latest"!==e.post_source);return"latest"!==i.post_source||R||(c=!0,R=!0),(0,o.FD)(p.Fragment,{children:[(0,o.Y)(tp.WO,{pub:f,showPubPins:"latest"===i.post_source,showSectionPins:!1,children:(0,o.FD)(P.I1,{className:"contentBlockContainer-BNIIae",id:"block-".concat(i.id),paddingBottom:w?Y?64:80:0,style:{scrollMarginTop:48},children:[!i6.includes(i.block_type)&&w&&(null==b?void 0:b.is_admin)&&(0,o.Y)("div",{className:i4,children:(0,o.Y)(eu.K0,{priority:"primary-mono",size:"sm",onClick:()=>{C(i.id)},children:(0,o.Y)(eE.A,{size:16})})}),"media_carousel"===i.block_type&&(null==b?void 0:b.is_admin)&&(0,o.Y)("div",{className:i4,children:(0,o.Y)(ns.m,{pub:f,sectionType:(null==(n=i.attrs.media_carousel)?void 0:n.variant)==="videos"?"video":"podcast",user:b})}),(0,o.Y)(tA.kT,{previewBlockId:{type:"content-block",contentBlockId:i.id},children:(0,o.Y)(iZ,{contentBlock:i,posts:l,postsBySource:r,pub:f,showSearch:c,showSeeAllLink:m,sourcePosts:a,title:s,viewAllUrl:d})})]})}),u<F.length-1&&"full-width"===t&&(0,o.Y)(i2,{insertAfterIndex:u,previewBlockData:E,pub:f,variant:M(u)})]},i.id)})})}),F.length>0&&y&&(0,o.Y)(i2,{insertAfterIndex:F.length-1,previewBlockData:E,pub:f,variant:"space"}),N&&w&&(0,o.Y)(e4.Ic,{containerId:"block-".concat(N.id),contentBlock:N,module:"@/frontend/components/thefp/EditPinsModal",pinnedPosts:h,posts:null!=(l=null==(t=I.flatMap(e=>e.items).find(e=>e.contentBlock.id===N.id))?void 0:t.posts)?l:[],renderPreview:e=>{let{posts:t}=e,{title:n}=i8({contentBlock:N,hideRecentPostsTitle:!1,pub:f});return(0,o.Y)(iZ,{contentBlock:N,posts:t,pub:f,showSearch:!1,showSeeAllLink:!1,title:n})},resolve:e=>e.EditContentBlockPinsModal,whileLoading:(0,o.Y)("div",{}),onClose:()=>{C(null)},onRequest:()=>n.e("937").then(n.bind(n,93936))})]})},i8=e=>{let t,{contentBlock:n,hideRecentPostsTitle:i,pub:l}=e,r="";if("latest"===n.post_source)r=i?"":"Recent posts",t=(0,N.Xt9)(l);else if("section"===n.post_source&&n.section){let e=n.section;r=(null==e?void 0:e.name)||"",t=e?(0,B.Dor)(l,{section:e}):null}else if("tag"===n.post_source&&n.postTag){let e=n.postTag;r=(null==e?void 0:e.name)||"",t=e?(0,B.ii9)(l,e):null}else"multiple"===n.post_source&&(r="Selected posts");return{title:r,viewAllUrl:t}};var i3=n(24782),i9=n(21919),i5=n(73443),le=n(92019);let lt=e=>{let{pub:t,user:n}=e,[i,l]=(0,p.useState)(!0),{isMobile:r}=(0,D.sM)(),{changeSetting:a}=(0,eo.ur)(),{refetch:s}=(0,eq.st)({pathname:"/api/v1/subscription/sections/email?utm_source=newsletters-modal",auto:!1,method:"PATCH"}),d=async()=>{await a("hasSeenOnboardingNewslettersScreen",!0),l(!1)},c=async(e,t)=>{try{let n=Object.fromEntries([...e.map(e=>[e,{setting:"individual"}]),...t.map(e=>[e,{setting:"disabled"}])]);await s({json:n}),await d()}catch(e){console.error("Failed to update newsletter preferences:",e)}};return(0,o.Y)(o.FK,{children:(0,o.FD)(eL.S,{isOpen:i,width:894,onClose:d,stretchModal:r,fullscreenMobile:!0,children:[r&&(0,o.FD)(P.Ye,{style:{width:"100%"},children:[(0,o.Y)("div",{className:le.A.topBorder}),(0,o.Y)(i9.G,{logoOnly:!0,pub:t,user:n,activeLiveStream:null,freeSignup:!1,showCustomerSupportModeModal:!1}),(0,o.Y)(eu.Nm,{className:le.A.closeButton,onClick:d,children:(0,o.Y)(en.A,{size:24})})]}),(0,o.Y)(i5.k,{isNewSubscriber:!1,pub:t,fullScreen:!1,onSkip:d,onSubmit:c})]})})};var ln=n(26392),li=n(16291);let ll=(0,p.memo)(e=>{var t,n,s,c,u,h,g;let{activeLiveStream:v,bodyPostGroups:Y,freeSignup:f,freeSignupEmail:b,homepageData:y,isPreview:_,pub:w,theme:C,user:I,utm:x,giftCard:T,abTestingId:E}=e,N=(0,r._)(e,["activeLiveStream","bodyPostGroups","freeSignup","freeSignupEmail","homepageData","isPreview","pub","theme","user","utm","giftCard","abTestingId"]),{getConfigFor:B}=(0,m.mJ)(),M=null!=(c=B("use_theme_editor_v2"))&&c,R=null!=(u=B("use_theme_editor_v3"))&&u,L=(0,p.useMemo)(()=>(0,tc.lu)({pub:w})&&y?d()(Object.values(y.contentBlockData.latestPostFromSections).map(e=>null==e?void 0:e.id)):[],[y,w]),O=(0,p.useMemo)(()=>{var e,t,n;let i=new Set([...(null!=(e=null==y?void 0:y.pinnedPosts)?e:[]).map(e=>e.id),...L]);return(null!=(t=null==y?void 0:y.pinnedPosts)?t:[]).concat((null!=(n=null==y?void 0:y.newPosts)?n:[]).filter(e=>!i.has(e.id)))},[null==y?void 0:y.newPosts,null==y?void 0:y.pinnedPosts,L]),{activeLiveStream:z}=(0,ej.Y)({pub:w,user:I,preloadedActiveLiveStream:v,disabled:_}),{breakpoint:U,isMobile:q,isDesktop:H}=(0,D.sM)(),{getSettingFor:G}=(0,eV.Pu)(),j=(0,K.ensureInList)(G("post_preview_crop_gravity"),["center","auto"]),X=(0,m.mJ)(),{open:Q,modal:$}=(0,ei.El)({utm_campaign:(null==T||null==(t=T.gifter)?void 0:t.id)===w.author_id?V._9.viralGiftAppIncentiveFromPub:V._9.viralGiftAppIncentive,utm_source:V.VU.substack,giftCard:T,pub:w,abTestingId:E}),{open:ee,modal:et}=function(e){let{pub:t,abTestingId:n,startingOpen:i,giftCard:l}=e,[r,a]=(0,p.useState)(null!=i&&i),[s,d]=(0,p.useState)(l),c=(0,p.useCallback)(e=>{d(e),a(!0),(0,ea.u4)(ea.qY.ACCEPT_GIFT_MODAL_OPENED,{has_sender_token:!!(0,eg.y)(window._preloads.original_url,"senderToken"),starting_open:i})},[]),u=(0,p.useCallback)(()=>{a(!1)},[]);return{open:c,modal:(0,o.Y)(ex,{isOpen:r,onClose:u,pub:t,giftCard:s,abTestingId:n})}}({pub:w,abTestingId:E,startingOpen:!!(0,eg.y)("accepting_gift"),giftCard:T}),en=(0,tc.lu)({pub:w}),el=(0,tc.S2)({pub:w}),er=el&&"magaziney"===C.home_hero,es=(0,a.md)(A.jd),ec=null!=es?es:C.home_posts,{userSettings:eu}=(0,eo.ur)(),ep=en&&I&&(null==eu?void 0:eu.hasSeenOnboardingNewslettersScreen)!==!0;(0,p.useEffect)(()=>{(0,eg.y)("accepting_gift")?((0,ed.qm)("accepting_gift"),(0,ed.qm)("senderToken"),ee(T)):T&&w&&(T.expired?ee(T):Q())},[]);let eh=O[0],em=(0,p.useMemo)(()=>{var e;return null==y||null==(e=y.topPosts)?void 0:e.filter(e=>!eh||e.id!==eh.id)},[eh,null==y?void 0:y.topPosts]);if(!y)return(0,o.Y)(P.I1,{alignItems:"center",className:W()(J,Z),justifyContent:"center",children:(0,o.Y)("div",{className:"more-loader"})});if(0===O.length)return(0,o.Y)(lr,{});let ev=!(null==(n=O[0])?void 0:n.cover_image),{effectiveHero:eY,numPostsInHero:ef}=(0,tI.z)({breakpoint:U,firstPostMissingImage:ev,heroVariant:C.home_hero,posts:O,pub:w}),eb="podcast"===eY,ey=(0,tT.tP)({type:"home-body"}),e_=["newspaper","podcast"].includes(eY)&&"list"===ec,ew=O.slice(ef),ek=!!(C.home_show_top_posts&&em&&"magaziney"!==eY&&!q),eC=ew.length>0&&"custom"!==ec;["feature-media","podcast"].includes(eY)&&!ek&&(eC=!1),(en||el)&&(eC=!1);let eI=!1,eS=!1;en&&(eI=null!=(h=w.showIntroModule)&&h,eS=null!=(g=w.isPortraitLayout)&&g);let eD=!!((M||R)&&(null==(s=w.theme)?void 0:s.custom_footer)&&"default"!==w.theme.custom_footer.layout);return(0,o.Y)(e2.XL,{authorPagesEnabled:!!X.getConfigFor("enable_author_pages"),cropGravity:j,highlightByline:!!X.getConfigFor("post_preview_highlight_byline"),pub:w,showSectionOrTag:(0,tc.S2)({pub:w}),user:I,utm:x,children:(0,o.Y)(S.Provider,{value:{contributors:y.contentBlockData.contributors,freeSignup:f,freeSignupEmail:b,homepageLinks:y.homepageLinks,latestPodcastPosts:y.contentBlockData.latestPodcastPosts,latestPostByContributorId:y.contentBlockData.latestPostByContributorId,latestPostFromSections:y.contentBlockData.latestPostFromSections,numRecommendations:y.numRecommendations,recommendations:y.recommendations,topPosts:y.topPosts},children:(0,o.FD)(k.DH,{children:[!en&&(null==z?void 0:z.liveStream.id)&&(0,li.A)(z.liveStream.started_streaming_at).isBefore((0,li.A)().subtract(1,"minute"))?z.liveStreamInformation.desktopPlaybackUrl&&"autoPlay"===G("live_stream_homepage_style")?(0,o.Y)(P.I1,{alignItems:"center",paddingTop:24,children:(0,o.Y)(F.az,{className:"liveStreamContainer-t0i18u",position:"relative",children:(0,o.Y)(eT.q,{activeLiveStream:z,fromPub:!0})})}):(0,o.Y)(i3.A,{activeLiveStream:z}):null,ep&&(0,o.Y)(lt,{pub:w,user:I}),et,$,(0,o.Y)(ln.o,{children:(0,o.FD)(P.I1,{className:J,paddingTop:eb||en?0:16,children:[(0,o.Y)(P.I1,{paddingTop:en?H?56:28:0,children:(0,o.Y)(tB,{bodyVariant:C.home_posts,breakpoint:U,heroAlignment:C.home_hero_alignment,heroVariant:C.home_hero,isMobile:q,isPortraitLayout:eS,posts:O,pub:w,replaceTopPostsWithLatest:er,showIntroModule:eI,showPodcastLinks:C.home_hero_show_podcast_links,showTopPosts:C.home_show_top_posts,topPosts:em,user:I,utm:x})}),(0,o.FD)(P.I1,{className:"bodyContainer-GD8kK4",id:"modular-home-posts",paddingTop:eb&&!ek&&"custom"!==ec?40:void 0,children:[eC&&(0,o.Y)(tS.r,{numColumns:e_?3:4}),(0,o.FD)("div",{id:"home-body",style:{scrollMarginTop:48,paddingTop:el?q?40:64:void 0},children:["custom"!==ec&&(0,o.Y)("div",{id:ey,children:(0,o.Y)(na,(0,l._)((0,i._)({},N),{bodyPostGroups:Y,hasCustomFooter:eD,hasEmptyGroupOptions:e.hasEmptyGroupOptions,hideImagesFromList:(0,tF.$P)({pub:w}),posts:ew,postsByGroupId:y.postsByGroupId,pub:w,source:"".concat(C.home_hero,"-").concat(ec,"-home"),user:I,variant:ec}))}),"custom"===ec&&(0,o.Y)(i7,{contentBlocks:y.contentBlockData.contentBlocks,firstDividerVariant:eb&&!ek?"space":void 0,postsByContentBlockId:y.contentBlockData.postsByContentBlockId,postsBySectionId:y.contentBlockData.postsBySectionId,postsByTagId:y.contentBlockData.postsByTagId,postsForContentBlockPins:y.contentBlockData.postsForContentBlockPins,recentPosts:ew,showEmptyStates:_})]})]})]})}),en&&(0,o.Y)(eK,{})]})})})}),lr=()=>{let{iString:e}=(0,I.GO)();return(0,o.Y)(P.I1,{alignItems:"center",className:W()(J,Z),justifyContent:"center",children:e("Coming Soon")})};var lo=n(91089),la=n(57961);let ls=e=>{var t,n,s,c,g,v,Y,{blurbs:f,freeSignup:b,freeSignupEmail:y,hasEmptyGroupOptions:_,hide_intro_popup:w,homepageData:k,isPreview:C,notify_user:I,pub:S,referralCode:F,showWelcome:P,user:x,postTags:T,launchWelcomePage:E,skipIntroPopupRender:N}=e,B=(0,r._)(e,["blurbs","freeSignup","freeSignupEmail","hasEmptyGroupOptions","hide_intro_popup","homepageData","isPreview","notify_user","pub","referralCode","showWelcome","user","postTags","launchWelcomePage","skipIntroPopupRender"]);let{data:M}=(0,D.bH)({preloadedHomepageData:k}),{getConfigFor:R}=(0,m.mJ)(),L=null!=(c=R("use_theme_editor_v2"))&&c,O=null!=(g=R("use_theme_editor_v3"))&&g,z=(0,tN.b)({pub:S}),U=(0,a.md)(A.jd),q=null!=(v=null!=U?U:null==(t=S.theme)?void 0:t.home_posts)?v:"grid",H=null!=(Y=null==(n=S.theme)?void 0:n.home_hero)?Y:"newspaper",{hasBodyPosts:W}=(0,D.oA)({homepageData:null!=M?M:null,heroVariant:H,pub:S});(0,p.useEffect)(()=>{I&&"undefined"!=typeof window&&(0,h.Ay)(I)},[I]);let G=(0,p.useMemo)(()=>{var e,t;return d()(null==(t=S.theme)||null==(e=t.body_post_groups)?void 0:e.map(e=>{var t,n,i,l,r;return e.tag_id?null!=(n=null!=(t=e.post_tag)?t:null==T?void 0:T.find(t=>t.id===e.tag_id))?n:null:e.section_id&&null!=(r=null!=(l=e.section)?l:null==(i=S.sections)?void 0:i.find(t=>t.id===e.section_id))?r:null}))},[T,S.sections,null==(s=S.theme)?void 0:s.body_post_groups]);return S.theme?(0,o.FD)("div",{className:"home-page home-page--modular",children:[(0,o.Y)(lo.PageMetaData,{isHomepage:!0,pub:S}),(0,o.Y)("div",{style:{flex:1},children:(0,o.Y)(ll,(0,l._)((0,i._)({},u()(B,"matches")),{bodyPostGroups:G,freeSignup:b,freeSignupEmail:y,hasEmptyGroupOptions:_,homepageData:M,isPreview:C,pub:S,theme:S.theme,user:x}))}),!z.hiddenPreviewBlocks.includes("footer")&&(0,o.Y)(tA.kT,{flushBottom:!0,previewBlockId:{type:"footer"},children:(0,o.Y)(ee,{activeBodyLayout:q,hasBodyPosts:W,heroLayout:H,homepageData:null!=M?M:null,isCustomFooterEnabled:L||O,isPreview:C,pub:S,user:x})}),N?null:(0,o.Y)(la.l,{blurbs:f,freeSignup:b,freeSignupEmail:y,hide_intro_popup:w,launchWelcomePage:E,pub:S,referralCode:F,showWelcome:P,user:x})]}):null}},80098:function(e,t,n){n.d(t,{P:()=>s});var i=n(4006),l=n(32485),r=n.n(l),o=n(76977);let a={container:"container-k4OAt1","full-width":"full-width-zjiPxJ",fullWidth:"full-width-zjiPxJ","full-width-with-sidebar":"full-width-with-sidebar-epMpKX",fullWidthWithSidebar:"full-width-with-sidebar-epMpKX","show-below":"show-below-NE36A8",showBelow:"show-below-NE36A8","full-width-with-border-and-sidebar":"full-width-with-border-and-sidebar-aSAAEB",fullWidthWithBorderAndSidebar:"full-width-with-border-and-sidebar-aSAAEB","vertical-divider":"vertical-divider-Z42nad",verticalDivider:"vertical-divider-Z42nad","three-column-width":"three-column-width-gNtKSr",threeColumnWidth:"three-column-width-gNtKSr","three-column-width-with-sidebar":"three-column-width-with-sidebar-cRFEVE",threeColumnWidthWithSidebar:"three-column-width-with-sidebar-cRFEVE","two-column-width":"two-column-width-f6IAWT",twoColumnWidth:"two-column-width-f6IAWT","one-column-two-column":"one-column-two-column-dAuMkN",oneColumnTwoColumn:"one-column-two-column-dAuMkN","two-column-one-column-one-column":"two-column-one-column-one-column-GnEn49",twoColumnOneColumnOneColumn:"two-column-one-column-one-column-GnEn49","one-column-two-column-one-column":"one-column-two-column-one-column-g_nrA3",oneColumnTwoColumnOneColumn:"one-column-two-column-one-column-g_nrA3","one-column-one-column-two-column":"one-column-one-column-two-column-e79cH1",oneColumnOneColumnTwoColumn:"one-column-one-column-two-column-e79cH1","one-column-three-columns":"one-column-three-columns-lf36oo",oneColumnThreeColumns:"one-column-three-columns-lf36oo","three-column-one-column-one-column":"three-column-one-column-one-column-MC1z4c",threeColumnOneColumnOneColumn:"three-column-one-column-one-column-MC1z4c"},s=e=>{let{children:t,hideVerticalDividers:n,showContentBelowOnMobile:l,stretchVertically:s,variant:d}=e,c=n?void 0:"detail-themed";return"none"===d?(0,i.Y)("div",{children:t}):(0,i.Y)("div",{style:s?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,i.FD)("div",{className:r()(a.container,a[d],{[a["show-below"]]:l}),style:s?{width:"100%"}:void 0,children:[t,"full-width-with-border-and-sidebar"===d&&(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),["two-column-one-column-one-column","one-column-two-column-one-column","one-column-one-column-two-column","three-column-one-column-one-column"].includes(d)&&(0,i.FD)(i.FK,{children:[(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]}),"one-column-two-column"===d&&(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]})})}},9757:function(e,t,n){n.d(t,{I:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(68410),a=n(89490);let s="column-O67nhJ",d="column1-pd0Ws0",c="columnCollapsed-hX4lgc",u=e=>{let{animateColumns:t,leftContent:n,mainContent:l,rightContent:u,stretchToFullWidth:p}=e,{isMobile:h,isTablet:m,isDesktop:g}=(0,o.sM)(),v=2;p&&(g?v=4-!!n-!!u:m&&(v=3-(n||u?1:0))),h&&(v=1);let Y=n||t,f=u||t;return(0,i.Y)("div",{className:"outerContainer-p1amnX",children:(0,i.FD)("div",{className:"container-uYF5Qm",children:[Y&&(0,i.Y)(a.az,{className:r()(s,d,{[String(c)]:t&&!n}),paddingTop:8,position:"relative",children:n}),(0,i.Y)(a.az,{className:r()(s,{"column2-jVKqxY":2===v,"column3-Brgr2S":3===v,"column4-Z0B2N_":4===v}),children:l}),f&&(0,i.Y)(a.az,{className:r()(s,d,{[String(c)]:t&&!u}),paddingTop:8,position:"relative",children:u})]})})}},24782:function(e,t,n){n.d(t,{A:()=>s});var i=n(4006),l=n(76977),r=n(63136),o=n(49807),a=n(57324);let s=e=>{let{activeLiveStream:t}=e;return(0,i.Y)(l.Ye,{className:"liveStreamBanner-Petbnm",justifyContent:"center",children:(0,i.Y)("a",{href:(0,o.Xrv)({liveStreamId:t.liveStream.id,utm_source:a.VU.web,utm_campaign:a._9.liveStreamPubBanner}),style:{textDecoration:"none"},children:(0,i.FD)(l.Ye,{alignItems:"center",gap:8,padding:12,paddingTop:{desktop:12,mobile:16},children:[(0,i.Y)("div",{className:"liveBadge-f3ITqf",children:(0,i.Y)(r.EY.B5,{color:"white",translated:!0,weight:"semibold",children:"Live"})}),(0,i.FD)(r.EY.B3,{color:"white",translated:!0,weight:"semibold",children:[(0,i.Y)("span",{style:{textTransform:"uppercase"},children:"Live Video"}),": ",I18N.p(t.liveStream.title)]})]})})})}},68265:function(e,t,n){n.d(t,{v:()=>a});var i=n(4006),l=n(76977);let r=e=>{let{children:t,paddingTop:n,paddingBottom:r}=e;return(0,i.Y)("div",{className:"container-FJSDzM",children:(0,i.Y)(l.I1,{paddingBottom:r,paddingTop:n,paddingX:16,children:t})})};var o=n(68410);let a=e=>{let{children:t}=e,{isMobile:n}=(0,o.sM)();return(0,i.Y)(l.I1,{bg:"secondary",className:"container-_aNEvf",paddingY:n?32:64,children:(0,i.Y)(r,{children:t})})}},64648:function(e,t,n){n.d(t,{S:()=>p});var i=n(4006),l=n(72880),r=n(84236),o=n(80098),a=n(68265),s=n(38501),d=n(89490),c=n(76977),u=n(63136);let p=e=>{let{columns:t,description:n,imageUrl:p,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,b=(0,d.iF)({radius:"lg",shadow:"xl"});return(0,i.Y)(a.v,{children:(0,i.Y)(o.P,{variant:4===t?"full-width-with-sidebar":"three-column-width",children:(0,i.FD)(c.Ye,{alignItems:"center",gap:40,paddingX:8,children:[p&&(0,i.Y)(l.o,{className:b,imageIsFixedWidth:!0,maxWidth:250,src:p,useRetinaSizing:!0}),(0,i.FD)(c.I1,{gap:16,children:[(0,i.FD)(c.I1,{gap:8,children:[(0,i.Y)(u.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:h}),(0,i.Y)(u.EY.B2,{color:"pub-secondary-text",children:n}),(0,i.Y)(r.pJ,{align:"right",post:m,pub:g,section:v})]}),Y&&(0,i.Y)(s.D,{post:m,pub:g,section:v,user:f})]})]})})})}},64232:function(e,t,n){n.d(t,{i:()=>h});var i=n(4006),l=n(72880),r=n(84236),o=n(68410),a=n(80098),s=n(68265),d=n(38501),c=n(89490),u=n(76977),p=n(63136);let h=e=>{let{description:t,imageUrl:n,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,{isMobile:b}=(0,o.sM)(),y=(0,c.iF)({radius:"sm",shadow:"lg"});return(0,i.Y)(s.v,{children:(0,i.Y)(a.P,{variant:"two-column-width",children:(0,i.FD)(u.I1,{alignItems:"center",gap:24,paddingX:8*!b,children:[n&&(0,i.Y)(l.o,{className:y,imageIsFixedWidth:!0,maxWidth:100,src:n,useRetinaSizing:!0}),(0,i.FD)(u.I1,{gap:8,children:[(0,i.Y)(p.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:h}),(0,i.Y)(p.EY.B2,{align:"center",color:"pub-secondary-text",children:t})]}),(0,i.Y)(r.pJ,{align:"center",paddingX:8,post:m,pub:g,section:v}),Y&&(0,i.Y)(d.D,{align:"center",post:m,pub:g,section:v,user:f})]})})})}},13790:function(e,t,n){n.d(t,{_:()=>u});var i=n(4006),l=n(72880),r=n(84236),o=n(68265),a=n(38501),s=n(89490),d=n(76977),c=n(63136);let u=e=>{let{description:t,imageUrl:n,name:u,post:p,pub:h,section:m,showPodcastLinks:g,user:v}=e,Y=(0,s.iF)({radius:"lg",shadow:"xl",width:160});return(0,i.Y)(o.v,{children:(0,i.FD)(d.I1,{alignItems:"center",gap:24,children:[n&&(0,i.Y)("div",{children:(0,i.Y)(l.o,{className:Y,imageIsFixedWidth:!0,maxWidth:160,src:n,useRetinaSizing:!0})}),(0,i.FD)(d.I1,{gap:16,children:[(0,i.FD)(d.I1,{gap:8,children:[(0,i.Y)(c.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:u}),(0,i.Y)(c.EY.B2,{align:"center",color:"pub-secondary-text",children:t}),(0,i.Y)(r.pJ,{align:"center",paddingY:8,post:p,pub:h,section:m})]}),g&&(0,i.Y)(a.D,{limit:2,post:p,pub:h,section:m,stretch:!0,user:v})]})]})})}},38501:function(e,t,n){n.d(t,{D:()=>w});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(17402),s=n(82519),d=n(13950),c=n(36233),u=n(84605),p=n(86500),h=n(74894),m=n(68349),g=n(35369),v=n(76977),Y=n(88774),f=n(59294),b=n(60816),y=n(7755),_=n(39318);let w=e=>{let{align:t="left",limit:n=4,post:i,pub:l,section:r,stretch:g,user:w}=e,{iString:C}=(0,u.GO)(),{feedUrl:I,isLoaded:S}=(0,f.Zq)({pub:l,section:r,user:w}),[D,F]=(0,a.useState)(!1),P=i?n-1:n,x=(0,y.Em)({pub:l,section:r,spotifySettings:(0,h.Om)({pub:l,section:null!=r?r:null})}),T=(0,y.dV)({feedUrl:I,isApple:(0,m.cX)()||(0,m.gI)(),isMobile:!1,showLinks:x,userIsSubscribed:!!(null==w?void 0:w.is_subscribed)}),A=T.length+ +!!I>P;(0,a.useEffect)(()=>{S&&F(!0)},[S]);let E=()=>{(0,p.u4)(p.qY.PODCAST_FEED_URL_COPIED,{feedUrl:I}),(0,c.Ay)("RSS feed URL copied"),(0,m.lW)(I)},N=e=>{let{label:t,url:n}=e;return()=>{(0,p.u4)(p.qY.PODCAST_APP_LINK_CLICK,{appName:t,feedUrl:I,url:n}),window.open(n,"_blank")}};return(0,o.Y)(d.DH,{children:(0,o.FD)(v.Ye,{gap:8,justifyContent:"center"===t?"center":void 0,opacity:100*!!D,wrap:"wrap",children:[i&&(0,o.FD)(k,{stretch:g,onClick:N({label:"Substack",url:(0,_.XV8)(l.subdomain,i.slug,{redirect:"app-marketing",source:"podcast-player-link"})}),children:[(0,o.Y)(b.l,{platformKey:"substack"}),"Substack"]}),T.slice(0,P).map(e=>{let{label:t,platform:n,url:i}=e;return(0,o.FD)(k,{stretch:g,onClick:N({label:t,url:i}),children:[(0,o.Y)(b.l,{platformKey:n}),t]})}),I&&!A&&(0,o.FD)(k,{stretch:g,onClick:E,children:[(0,o.Y)(b.l,{platformKey:"rss"}),C("RSS feed")]}),A&&(0,o.FD)(Y.W1,{trigger:(0,o.FD)(k,{children:[C("More"),(0,o.Y)(s.A,{})]}),children:[T.slice(P).map(e=>{let{label:t,platform:n,url:i}=e;return(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:n}),onClick:N({label:t,url:i}),children:t})}),(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:"rss"}),onClick:E,children:C("RSS feed")})]})]})})},k=(0,a.forwardRef)((e,t)=>{var{children:n,stretch:a,onClick:s}=e,d=(0,r._)(e,["children","stretch","onClick"]);return(0,o.Y)(g.$n,(0,l._)((0,i._)({ref:t},d,a?{flex:"grow",justifyContent:"center"}:null),{className:"podcast-player-button",priority:"secondary",onClick:s,children:n}))})},16831:function(e,t,n){n.d(t,{b:()=>c});var i=n(4006),l=n(49802),r=n(50802),o=n(76977),a=n(63136);let s={audio:l.A,video:r.A},d={audio:"Audio",video:"Video"},c=e=>{let{medium:t}=e,n=s[t];return(0,i.FD)(o.Ye,{alignItems:"center",bg:"secondary",color:"pub-secondary-text",gap:4,paddingX:6,radius:"sm",children:[(0,i.Y)(n,{size:12}),(0,i.Y)(a.EY,{font:"text",lineHeight:20,size:12,weight:"semibold",children:d[t]})]})}},24634:function(e,t,n){n.d(t,{t:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(76977),s=n(22602),d=n(69706);let c=(0,o.forwardRef)((e,t)=>{let{variant:n}=e;return["grid","grid-groups"].includes(n)?(0,i.FD)(a.I1,{ref:t,gap:12,children:[(0,i.Y)("div",{style:{aspectRatio:"".concat(d.qr)},children:(0,i.Y)(s.O,{height:"100%"})}),(0,i.FD)(a.I1,{gap:8,children:[(0,i.Y)(s.O,{height:24,width:"70%"}),(0,i.Y)(s.O,{height:20,width:"90%"}),(0,i.Y)(s.O,{height:20,width:"50%"})]})]}):"list"===n?(0,i.FD)(a.I1,{ref:t,gap:8,children:[(0,i.Y)(s.O,{height:28,width:"60%"}),(0,i.Y)(s.O,{height:24,width:"80%"}),(0,i.Y)(s.O,{height:20,width:"20%"})]}):null}),u=(0,o.forwardRef)((e,t)=>{let{postCount:n,variant:l}=e;return(0,i.Y)("div",{ref:t,className:r()({"loadingContainerGrid-ydRZVl":["grid","grid-groups"].includes(l),"loadingContainerList-gZ_Mu2":"list"===l}),children:Array.from(Array(n)).map(()=>(0,i.Y)(c,{variant:l}))})})},72692:function(e,t,n){n.d(t,{k:()=>d});var i=n(4006),l=n(87677),r=n(84605),o=n(68410),a=n(35369),s=n(76977);let d=e=>{let{url:t}=e,{isMobile:n}=(0,o.sM)(),{iString:d}=(0,r.GO)();return(0,i.Y)(s.Ye,{paddingTop:16,paddingX:8*!n,children:(0,i.Y)(a.$n,{"data-testid":"archive-view-all",href:t,priority:"secondary",trailing:(0,i.Y)(l.A,{size:20}),children:d("See all")})})}},85965:function(e,t,n){n.d(t,{C:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(21013),a=n.n(o),s=n(68410),d=n(98002),c=n(76977);let u=e=>{let{hideDescriptions:t,posts:n,numColumns:l,onClickPost:o}=e,{isMobile:u}=(0,s.sM)(),p=n.filter(e=>null!==e),h=p.length>0&&p.every(e=>!e.cover_image),m=a()(n,l);return(0,i.Y)(c.I1,{gap:u?28:4,children:m.map(e=>(0,i.Y)(c.Ye,{className:"postRow-schahZ",children:e.map(e=>(0,i.Y)("div",{className:r()("postContainer-okMiTM",{"postContainerTwoColumn-OPvMmL":2===l,"postContainerThreeColumn-W6tLrW":3===l,"postContainerFourColumn-WylYbU":4===l}),children:(0,i.Y)(d.z,{hideDescription:t,hideImage:h,post:e,variant:"square",onClick:e?o:void 0})}))}))})}},93800:function(e,t,n){n.d(t,{m:()=>h});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(80098),c=n(98002),u=n(76977);let p={container:"container-O1YsI6",divider:"divider-QOeHtM",dividerVertical:"dividerVertical-pPOkXS","long-divider":"long-divider-CDn5cl",longDivider:"long-divider-CDn5cl","two-small-one-large":"two-small-one-large-QUGVE5",twoSmallOneLarge:"two-small-one-large-QUGVE5","two-column-grid":"two-column-grid-h3GUav",twoColumnGrid:"two-column-grid-h3GUav","three-column-grid":"three-column-grid-tc6QOt",threeColumnGrid:"three-column-grid-tc6QOt","four-column-grid":"four-column-grid-IPXx88",fourColumnGrid:"four-column-grid-IPXx88","one-column-list":"one-column-list-YqnT5h",oneColumnList:"one-column-list-YqnT5h","one-column-list-flex":"one-column-list-flex-kqNmJm",oneColumnListFlex:"one-column-list-flex-kqNmJm","large-listing-listing-column":"large-listing-listing-column-feCdFL",largeListingListingColumn:"large-listing-listing-column-feCdFL","square-square-column":"square-square-column-b5mOve",squareSquareColumn:"square-square-column-b5mOve","two-column-list":"two-column-list-BLHtzo",twoColumnList:"two-column-list-BLHtzo","two-column-list--with-dividers":"two-column-list--with-dividers-cHfR0M",twoColumnListWithDividers:"two-column-list--with-dividers-cHfR0M","five-up":"five-up-H_hegz",fiveUp:"five-up-H_hegz","vertical-divider":"vertical-divider-GcHWq8",verticalDivider:"vertical-divider-GcHWq8","mini-row":"mini-row-KFztmA",miniRow:"mini-row-KFztmA","three-column-mini-row":"three-column-mini-row-ep3LFs",threeColumnMiniRow:"three-column-mini-row-ep3LFs"},h=e=>{var t;let{flex:n,hideImages:l,hideHorizontalDividers:r,hideVerticalDividers:a,linkToComments:d,posts:h,source:f,variant:b,onClickPost:y}=e;if("two-three-two"===b)return(0,o.Y)(g,(0,i._)({},e));if("two-small-three-medium"===b)return(0,o.Y)(m,(0,i._)({},e));if(["mini-row","three-column-mini-row"].includes(b))return(0,o.Y)(v,(0,i._)({},e));let _=a?void 0:"detail-themed",w=r?void 0:"detail-themed";return(0,o.Y)("div",{style:"grow"===n?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,o.Y)("div",{className:s()(p.container,p[b],{[null!=(t=p["two-column-list--with-dividers"])?t:""]:"two-column-list"===b&&!r}),children:h.map((e,t)=>(0,o.FD)(o.FK,{children:[t>0&&["one-column-list","two-column-list","two-column-grid","three-column-grid","four-column-grid","large-listing-listing-column"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),t%2==0&&t>0&&["two-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),t%4==0&&t>0&&["four-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),(0,o.Y)(c.z,{hideImage:l,linkToComments:d,post:e,testid:["large-listing-listing-column","two-small-one-large"].includes(b)?"magazine-spot-".concat(t+1):void 0,variant:Y(b,t),onClick:y&&f&&e?n=>{let{event:i}=n;y({event:i,post:e,index:t,source:f})}:void 0}),"five-up"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"two-small-one-large"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"square-square-column"===b&&1===t&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider})]}))})})},m=e=>{let{posts:t,hideVerticalDividers:n}=e,a=(0,r._)(e,["posts","hideVerticalDividers"]),s=t.slice(0,3),c=t.slice(3);return(0,o.FD)(d.P,{hideVerticalDividers:n,stretchVertically:!0,variant:"one-column-two-column",children:[(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"}))]})},g=e=>{let{hideVerticalDividers:t,posts:n}=e,a=(0,r._)(e,["hideVerticalDividers","posts"]),s=n.slice(0,3),c=n.slice(3,5),u=n.slice(5);return(0,o.FD)(d.P,{hideVerticalDividers:t,variant:"one-column-two-column-one-column",children:[(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:u,variant:"square-square-column"}))]})},v=e=>{let{linkToComments:t,posts:n,source:i,variant:l,onClickPost:r}=e;return(0,o.Y)("div",{children:(0,o.Y)("div",{className:s()(p.container,p[l]),children:n.slice(0,"mini-row"===l?4:3).map((e,n)=>(0,o.FD)(o.FK,{children:[n>0&&(0,o.Y)(u.Ye,{alignItems:"center",className:s()(p.divider,p.dividerVertical),paddingY:8,children:(0,o.Y)(u.Ye,{borderLeft:"detail-themed"})}),(0,o.Y)(c.z,{linkToComments:t,post:e,variant:Y(l,n),onClick:r&&i&&e?t=>{let{event:l}=t;r({event:l,post:e,index:n,source:i})}:void 0})]}))})})},Y=(e,t)=>"square-square-column"===e?"square":"large-listing-listing-column"===e?0===t?"large":"listing":"two-small-one-large"===e?0===t?"large":"square":"two-column-list"===e?"listing":"five-up"===e?0===t?"large":"square":["mini-row","three-column-mini-row","one-column-list","one-column-list-flex"].includes(e)?"mini":"square"},72750:function(e,t,n){n.d(t,{h:()=>Q});var i=n(69277),l=n(70408),r=n(4006),o=n(90883),a=n(17402),s=n(13950),d=n(72987),c=n(36233),u=n(2058),p=n(72880),h=n(20562),m=n(68410),g=n(16831),v=n(76977),Y=n(63136),f=n(4016),b=n(57324);let y=e=>{let{description:t,logoUrl:n,name:i,pub:l,section:o,user:a}=e,{isMobile:s}=(0,m.sM)(),d=(0,f.s7)({pub:l,includeTheRampart:!0});return(0,r.FD)(v.Ye,{alignItems:"center",direction:s?"column":"row",gap:32,paddingBottom:24,paddingTop:16,paddingX:8*!s,children:[n&&(0,r.Y)(p.o,{alt:i,className:"logo-vqxCjr",imageIsFixedWidth:!0,maxWidth:300,src:n,useRetinaSizing:!0}),(0,r.FD)(v.I1,{gap:16,children:[(0,r.FD)(v.I1,{children:[d&&(null==a?void 0:a.is_subscribed)&&(0,f.rD)({sectionId:null==o?void 0:o.id})&&(0,r.Y)(Y.EY.Meta,{color:"accent",paddingBottom:8,children:"+ Member-Only"}),(0,r.Y)(Y.EY.H1,{color:"pub-primary-text",font:"pub-headings",children:i}),d&&(0,r.Y)(v.Ye,{alignItems:"center",gap:8,paddingBottom:12,paddingTop:8,children:(0,f.ot)({sectionId:null==o?void 0:o.id}).map(e=>(0,r.Y)(g.b,{medium:e}))}),t&&(0,r.Y)(v.I1,{gap:8,children:t.split("\n").map(e=>(0,r.Y)(Y.EY.B3,{color:"pub-secondary-text",children:e}))})]}),d&&(0,r.Y)(h.t,{pub:l,section:o,trackingSource:b.VU.sectionPage,variant:(null==a?void 0:a.is_subscribed)?"default":"member-only"})]})]})};var _=n(84605),w=n(74894),k=n(59294),C=n(66728),I=n(7755);let S=e=>{let{firstPodcastPost:t,pub:n,user:i,section:l=null}=e,{iString:o}=(0,_.GO)(),{isMobile:a}=(0,m.sM)(),{feedUrl:s}=(0,k.Zq)({pub:n,user:i,section:l}),d=(0,I.Em)({pub:n,section:l,spotifySettings:(0,w.Om)({pub:n,section:null!=l?l:null})});return(0,r.Y)(v.pT,{paddingX:8*!a,children:(0,r.Y)(C.b,{description:o("Add this podcast to your player of choice:"),feedUrl:s,post:null!=t?t:null,pub:n,section:l,showLinks:d,user:i})})};var D=n(10939),F=n(91089),P=n(93800),x=n(12592),T=n(56458),A=n(82776);let E=e=>{var t,n,i,l;let{newPosts:o,pinnedPosts:a,podcastSettings:d,pub:c,search:p,section:h,sort:g,user:v,utm:Y,welcomeAndShareElement:f}=e,{isMobile:b}=(0,m.sM)(),_=(0,A.sectionIsSpecificallyMarkedAsNewsletter)({pub:c,section:h});return(0,r.Y)(s.DH,{children:(0,r.FD)(x.c,{columns:3,children:[(0,r.Y)(F.PageMetaData,{isPodcast:!0,pub:c,section:h}),(0,r.Y)(y,{description:null!=(t=d.description)?t:"",logoUrl:(null==v?void 0:v.is_subscribed)&&null!=(n=d.paidEpisodeArtUrl)?n:d.artUrl,name:null!=(i=d.title)?i:"",pub:c,section:h,user:v}),!b&&(0,r.Y)(D.r,{numColumns:4}),(0,r.FD)("div",{className:"bodyContainer-P2vZHh",children:[(0,r.Y)(u.M,{isPodcast:!_,maxPosts:7,newPosts:o,pinnedPosts:a,pub:c,search:p,sectionId:null==h?void 0:h.id,sort:g,user:v,utm:Y,variant:"list",children:e=>{let{posts:t,linkToComments:n,onClickPost:i}=e;return(0,r.Y)(P.m,{hideImages:(0,T.$P)({pub:c}),linkToComments:n,posts:t,variant:"two-column-list",onClickPost:i})}}),(0,r.Y)(S,{firstPodcastPost:null!=(l=null==o?void 0:o.filter(e=>"podcast"===e.type)[0])?l:null,pub:c,section:h,user:v})]}),f]})})};var N=n(32485),B=n.n(N),M=n(80098),R=n(9757),L=n(89490);let O=e=>{let{align:t,columns:n,description:i,imageUrl:l,name:o,pub:a}=e,{isMobile:s}=(0,m.sM)(),d=(0,L.iF)({radius:"md",width:80}),c=(0,r.FD)(v.I1,{paddingTop:16,children:[(0,r.FD)(v.I1,{alignItems:"center"===t?"center":void 0,gap:12,paddingX:8*!s,children:[l&&(0,r.Y)(p.o,{className:d,imageIsFixedWidth:!0,maxWidth:80,src:l,useRetinaSizing:!0}),(0,r.Y)(Y.EY.H1,{className:B()({"pillarHeader-Bn88EX":(0,f.S2)({pub:a})}),color:"pub-primary-text",font:"pub-headings",children:o}),(0,r.Y)(Y.EY.B2,{align:t,color:"pub-secondary-text",children:i})]}),(0,r.Y)(D.r,{paddingBottom:0,paddingTop:32})]});return 2===n?(0,r.Y)(R.I,{mainContent:c}):(0,r.Y)(M.P,{variant:"three-column-width",children:c})};var z=n(64648),U=n(64232),q=n(13790),H=n(70557),W=n(49807);let G=e=>{var t;let{columns:n,podcastSettings:i,firstPost:l,heroAlignment:o,pub:a,section:s,showPodcastLinks:d,user:c,utm:u,variant:p}=e,{isMobile:h}=(0,m.sM)(),g=null!=(t=i?i.description:null==s?void 0:s.description)?t:"",f=i?i.artUrl:null==s?void 0:s.logo_url,b=i?i.title:null==s?void 0:s.name,y=(0,W.ScI)(f);if("feature-media"===p&&2!==n){let e=l?(0,r.Y)(H.X,{columns:n,hideLogo:!f||y,isPodcast:!!i,post:l,pub:a,section:s,showPodcastLinks:d,user:null!=c?c:null,utm:u}):(0,r.Y)(v.I1,{alignItems:"center",justifyContent:"center",paddingTop:32,children:(0,r.Y)(Y.EY.MarketingHeading2,{font:"pub-headings",translated:!0,children:"Coming Soon"})});return(0,r.Y)(v.I1,{paddingTop:h?16:24,children:e})}return"podcast"===p&&h?(0,r.Y)(q._,{description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&"center"===o?(0,r.Y)(U.i,{description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&i?(0,r.Y)(z.S,{columns:Math.max(n,3),description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):(0,r.Y)(O,{align:o,columns:Math.min(n,3),description:g,imageUrl:y?null:f,name:b,pub:a})};var K=n(28528),V=n(7761);let j=e=>{let{columns:t,isPodcast:n,newPosts:i,pinnedPosts:l,pub:o,search:a,section:s,sort:d,user:c,utm:p,variant:h,onChangeFirstPost:m}=e,g=7;"grid"===h&&(4===t&&(g=8),3===t&&(g=9));let v=(0,r.Y)(u.M,{includePins:!(n&&!s),isPodcast:n,maxPosts:g,newPosts:i,pinnedPosts:l,pub:o,search:a,sectionId:null==s?void 0:s.id,sort:d,user:c,utm:p,variant:h,onPostsLoaded:e=>{var t;let{posts:n}=e;m({post:null!=(t=n[0])?t:null})},children:e=>{let{posts:n,linkToComments:i,onClickPost:l}=e;return(0,r.Y)(V.WO,{pub:o,showPubPins:!1,showSectionPins:!0,children:(0,r.Y)(P.m,{hideHorizontalDividers:"grid"===h,hideImages:(0,T.$P)({pub:o}),linkToComments:i,posts:n,variant:function(e){let{columns:t,variant:n}=e;return"list"===n?"two-column-list":4===t?"four-column-grid":"three-column-grid"}({columns:t,variant:h}),onClickPost:l})})}});return"list"===h?(0,r.Y)(R.I,{mainContent:v}):(0,r.Y)(M.P,{variant:function(e){let{columns:t}=e;return 4===t?"full-width":"three-column-width"}({columns:t}),children:v})};var X=n(57961),J=n(71783),Z=n(46009);let Q=e=>{var t,n,u,p,h,g,Y,b,y,_,w,k,C,I;let{blurbs:S,freeSignup:D,freeSignupEmail:P,hide_intro_popup:T,isPodcast:A,newPostsForPubPodcast:N,notify_user:B,pageTheme:M,pub:R,referralCode:L,search:O,slug:z,sort:U,showWelcome:q,user:H,utm:W,launchWelcomePage:V,sectionPageData:Q,skipIntroPopupRender:ee}=e,{isMobile:et,isTablet:en}=(0,m.sM)(),ei=(0,o.md)(J.cd),el=(0,o.md)(J.qG),er=(0,o.md)(J.$G),eo=(0,o.md)(J.n6),ea=(0,i._)({},ei,el),es=(0,i._)({},er,eo),ed=z?R.sections.find(e=>e.slug===z):void 0,ec=A&&!ed,eu=null!=(g=null!=(h=null!=M?M:ec?null==(t=R.pageThemes)?void 0:t.podcast:null==ed?void 0:ed.pageTheme)?h:null==(n=R.theme)?void 0:n.section_template)?g:null,ep=A&&!ed?N:null==Q||null==(u=Q[null!=(Y=null==ed?void 0:ed.id)?Y:0])?void 0:u.newPosts,eh=null==Q||null==(p=Q[null!=(b=null==ed?void 0:ed.id)?b:0])?void 0:p.pinnedPosts,em=null!=(y=[...null!=eh?eh:[],...null!=ep?ep:[]][0])?y:null,[eg,ev]=(0,a.useState)(em?{[ed?ed.id:"pubPodcast"]:em}:{}),[eY,ef]=(0,a.useState)(!1),eb=null!=(_=eg[ed?ed.id:"pubPodcast"])?_:null,ey=(0,a.useCallback)(e=>{let{post:t}=e;eb||(t?(ev(e=>(0,l._)((0,i._)({},e),{[ed?ed.id:"pubPodcast"]:t})),ef(!1)):ef(!0))},[eb,ed]);if((0,a.useEffect)(()=>{B&&"undefined"!=typeof window&&(0,c.Ay)(B)},[B]),!ed&&!A)return console.warn("Should be either a section or podcast or both"),null;let e_=null;if((A||(null==ed?void 0:ed.is_podcast))&&(e_=ed?(0,Z.lL)({pub:R,section:ed}):(0,Z.j_)({pub:R})),(0,f.lu)({pub:R})&&(A||ed))return(0,r.Y)(d.N,{freeSignup:D,freeSignupEmail:P,isPodcast:!!A,newPosts:ep,pub:R,scheduledLiveStreams:null==Q||null==(w=Q[null!=(k=null==ed?void 0:ed.id)?k:0])?void 0:w.scheduledLiveStreams,section:null!=ed?ed:null,user:H,utm:W},null!=(C=null==ed?void 0:ed.id)?C:-1);let ew=(0,f.s7)({pub:R,includeTheRampart:!0})&&e_,ek=(0,r.Y)(X.l,{blurbs:S,freeSignup:D,freeSignupEmail:P,hide_intro_popup:T,isPodcast:A,launchWelcomePage:V,pub:R,referralCode:L,showWelcome:q,user:H});if(ew&&e_&&ed)return(0,r.Y)(E,{newPosts:ep,pinnedPosts:eh,podcastSettings:e_,pub:R,search:O,section:ed,sort:U,user:H,utm:W,welcomeAndShareElement:ee?null:ek});let eC=eu;eC||(eC=((null==ed?void 0:ed.is_podcast)||A)&&!eY?{hero_alignment:"left",page_hero:"feature-media",page_posts:"grid",show_podcast_links:!1}:{hero_alignment:"left",page_hero:"default",page_posts:"list",show_podcast_links:!1}),eC.page_hero=$(eC.page_hero);let eI=2,eS="grid"===(eC=(0,i._)({},eC,A?ea:es)).page_posts?3:2;return"feature-media"===eC.page_hero?"grid"===eC.page_posts?eI=eS=en?3:4:"list"===eC.page_posts&&(eI=3,eS=2):eI=eS,(0,r.Y)(K.XL,{pub:R,children:(0,r.Y)(s.DH,{children:(0,r.FD)(x.c,{columns:4,paddingTop:"podcast"===eC.page_hero||"feature-media"===eC.page_hero?0:void 0,children:[(0,r.Y)(F.PageMetaData,{isPodcast:A,pub:R,section:ed}),(0,r.Y)(G,{columns:eI,firstPost:eb,heroAlignment:eC.hero_alignment,podcastSettings:e_,pub:R,section:ed,showPodcastLinks:eC.show_podcast_links,user:H,utm:W,variant:eC.page_hero}),(0,r.Y)(v.I1,{opacity:"feature-media"!==eC.page_hero||eb?100:0,paddingBottom:32,paddingTop:et?24:32,children:(0,r.Y)(j,{columns:eS,isPodcast:!!A,newPosts:ep,pinnedPosts:eh,pub:R,search:O,section:ed,sort:U,user:H,utm:W,variant:eC.page_posts,onChangeFirstPost:ey},null!=(I=null==ed?void 0:ed.id)?I:-1)}),!ee&&ek]})})})},$=e=>null!=e?e:"default"},57961:function(e,t,n){n.d(t,{l:()=>h});var i=n(4006),l=n(17402),r=n(9266),o=n(58398),a=n(12215);let s=["astralcodexten","thecoddlingmovie","bariweiss","theprepress"];var d=n(41086),c=n(82776),u=n(68349),p=n(39318);let h=e=>{let{blurbs:t,freeSignup:n,freeSignupEmail:h,hide_intro_popup:m,pub:g,referralCode:v,showWelcome:Y,user:f,launchWelcomePage:b}=e,[y,_]=(0,l.useState)(!1),w=(e=>{let{pub:t,user:n,freeSignup:i}=e,l=new Date(Date.now()-864e5);if((0,d.y)("no_cover")||(0,d.y)("hide_intro_popup"))return!0;if((0,d.y)("showWelcome"))return!1;if("share"===(0,d.y)("action")||(0,d.y)("accepting_gift")||!t||s.includes(t.subdomain)||i||n&&(n.is_free_subscribed||n.is_subscribed||n.is_contributor))return!0;let r=a.get("intro_popup_last_hidden_at");return!!(r&&new Date(r)>=l||"undefined"!=typeof navigator&&(0,c.isSearchEngineCrawlerQuick)(navigator.userAgent))})({pub:g,user:f,freeSignup:n});return(0,l.useEffect)(()=>{"share"===(0,d.y)("action")&&(window.history.replaceState({},document.title,(0,p.oRR)({action:null})),_(!0)),"undefined"!=typeof window&&Y&&(0,u.qm)("showWelcome")},[Y]),(0,i.FD)(i.FK,{children:[(0,i.Y)(o.Z,{isOpen:y,medium:"web",pub:g,user:f,onClose:()=>_(!1)}),(0,i.Y)(r.Ay,{blurbs:t,freeSignup:n,freeSignupEmail:h,hidden:m||y||w,launchWelcomePage:b,publication:g,referralCode:v,showOnMount:Y,user:f})]})}},91704:function(e,t,n){n.d(t,{i:()=>o});var i=n(69277);let l={sm:{size:15,lineHeight:20},md:{size:19,lineHeight:26},lg:{size:30,lineHeight:38},mobileMd:{size:17,lineHeight:24},mobileLg:{size:30,lineHeight:38}},r={sinocism:{sm:{size:13,lineHeight:20},md:{size:16,lineHeight:24},lg:{size:27,lineHeight:36},mobileMd:{size:16,lineHeight:24},mobileLg:{size:27,lineHeight:36}},thepillar:{sm:{size:16,lineHeight:20,fontFamily:"Georgia, serif"},md:{size:22,lineHeight:28,fontFamily:"Georgia, serif"},lg:{size:36,lineHeight:42,fontFamily:"Georgia, serif"},mobileMd:{size:20,lineHeight:26,fontFamily:"Georgia, serif"},mobileLg:{size:28,lineHeight:36,fontFamily:"Georgia, serif"}}},o=e=>{let{preset:t,pub:n}=e;return(n?(0,i._)({},l,r[n.subdomain]):l)[t]}},11574:function(e,t,n){n.d(t,{$:()=>f});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(70103),d=n(78956),c=n(15894),u=n(77433),p=n(68410),h=n(80098),m=n(60355),g=n(76977),v=n(49807),Y=n(45663);let f=e=>{let{posts:t,title:n,variant:o,viewAllUrl:a,headerVariant:s="align-left-with-see-all"}=e,d={posts:t,title:n,viewAllUrl:a,headerVariant:s};switch(o){case"special-feature":return(0,r.Y)(b,(0,i._)({},d));case"large-in-middle":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"middle"}));case"large-on-left":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"left"}));case"large-on-right":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"right"}));default:return null}},b=e=>{let{posts:t,title:n}=e,{isMobile:i,isTablet:l,isDesktop:o}=(0,p.sM)();return i?(0,r.Y)(y,{posts:t,title:n}):(0,r.FD)("div",{children:[(0,r.Y)(_,{title:n}),(0,r.FD)(h.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,r.Y)(m.R,{align:o?"center":"left",post:t[0],showImageLast:o,titlePreset:"h2-serif",variant:"large"}),(0,r.Y)(d.A,{paddingTop:64*!!o,children:t.slice(1,l?5:3).map(e=>(0,r.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),o&&(0,r.Y)(d.A,{paddingTop:64,children:t.slice(3,5).map(e=>(0,r.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))})]}),(0,r.Y)("div",{className:Y.A.threeColumnContainer,children:t.slice(5,8).map(e=>(0,r.Y)(g.I1,{borderTop:"detail-themed",paddingTop:24,children:(0,r.Y)(m.R,{align:"center",hideDescription:!0,hideImage:!0,post:e,variant:"square"})}))})]})},y=e=>{let{title:t,posts:n}=e;return(0,r.FD)("div",{children:[(0,r.Y)(_,{title:t}),(0,r.FD)(g.I1,{gap:32,children:[n[0]&&(0,r.Y)(m.R,{align:"left",post:n[0],titlePreset:"h2-serif",variant:"large"}),(0,r.Y)(s.Z,{children:n.slice(1,5).map(e=>(0,r.Y)(m.R,{hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),(0,r.Y)(d.A,{gap:16,includeTopDivider:!0,children:n.slice(5,8).map(e=>(0,r.Y)(m.R,{post:e,variant:"mini"}))})]})]})},_=e=>{let{title:t}=e,{isMobile:n}=(0,p.sM)(),i="America at 250"===t;return(0,r.FD)(g.Ye,{alignItems:"center",className:Y.A.specialFeatureHeaderContainer,gap:20,paddingBottom:n?28:56,children:[(0,r.Y)("div",{className:i?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule}),i?(0,r.Y)("a",{className:Y.A.america250HomepageHeader,href:"/america250",children:(0,r.Y)("img",{className:Y.A.a250Logo,src:(0,v.dJ9)("".concat((0,v.Ewe)(),"/img/thefp/a250_homepage.png"),500,{quality:"auto:good",crop:"limit"}),width:446})}):(0,r.Y)(c.T,{color:"accent",preset:"st3",children:t}),(0,r.Y)("div",{className:i?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule})]})},w=e=>{let{largeColumnPosition:t,posts:n,title:i,viewAllUrl:l,headerVariant:o}=e,{isMobile:a,isTablet:s,isDesktop:c}=(0,p.sM)();return a?(0,r.Y)(k,{headerVariant:o,posts:n,title:i,viewAllUrl:l}):(0,r.FD)(g.I1,{gap:28,children:[(0,r.Y)(u.M,{title:i,titlePreset:"st2",variant:o,viewAllUrl:l}),(0,r.FD)(h.P,{hideVerticalDividers:!0,variant:{middle:"one-column-two-column-one-column",left:"two-column-one-column-one-column",right:"one-column-one-column-two-column"}[t],children:[n[0]&&(0,r.Y)(m.R,{align:"left",post:n[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.Y)(d.A,{paddingTop:40*!!c,children:n.slice(1,s?5:3).map(e=>(0,r.Y)(m.R,{hideDescription:s,post:e,variant:"square"}))}),c&&(0,r.Y)(d.A,{paddingTop:40,children:n.slice(3,5).map(e=>(0,r.Y)(m.R,{post:e,variant:"square"}))})]})]})},k=e=>{let{posts:t,title:n,viewAllUrl:i,headerVariant:l}=e;return(0,r.FD)(g.I1,{gap:20,children:[(0,r.Y)(u.M,{title:n,titlePreset:"st2",variant:l,viewAllUrl:i}),(0,r.FD)(g.I1,{gap:32,children:[t[0]&&(0,r.Y)(m.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.Y)(s.Z,{children:t.slice(1,5).map(e=>(0,r.Y)(m.R,{hideDescription:!0,post:e,variant:"square"}))})]})]})}},77433:function(e,t,n){n.d(t,{M:()=>p});var i=n(69277),l=n(32641),r=n(4006),o=n(63446),a=n(15894),s=n(84605),d=n(68410),c=n(76977),u=n(45663);let p=e=>{var{variant:t="align-left-with-see-all"}=e,n=(0,l._)(e,["variant"]);return"align-left-with-see-all"===t?(0,r.Y)(h,(0,i._)({},n)):(0,r.Y)(m,(0,i._)({},n))},h=e=>{let{titlePreset:t,title:n,viewAllUrl:i}=e,{iString:l}=(0,s.GO)(),{isMobile:p}=(0,d.sM)();return(0,r.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.Y)(a.T,{preset:t,children:n}),(0,r.FD)(c.Ye,{alignItems:"end",flex:"grow",children:[(0,r.Y)("div",{className:u.A.mediumRule}),i&&(p?(0,r.Y)(c.Ye,{className:u.A.headerButtonMobile,position:"absolute",children:(0,r.Y)(o.v,{href:i,size:"md",trailingIcon:"chevron-right",variant:"tertiary",children:l("See all")})}):(0,r.Y)(o.v,{href:i,trailingIcon:"chevron-right",children:l("See all")}))]})]})},m=e=>{let{titlePreset:t,title:n}=e;return(0,r.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.Y)("div",{className:u.A.mediumRule}),(0,r.Y)(a.T,{preset:t,children:n})]})}},28528:function(e,t,n){n.d(t,{XL:()=>c,np:()=>u,wZ:()=>d});var i=n(69277),l=n(70408),r=n(4006),o=n(69843),a=n.n(o),s=n(17402);let d=(0,s.createContext)({authorPagesEnabled:!1,cropGravity:"center",disableInteractive:!1,hideUfi:!1,highlightByline:!1,linkToComments:!1,pub:null,modifiedPosts:{},showPinForPostIds:new Set,user:null,onChangePost:()=>void 0,onUnpinPost:()=>void 0}),c=e=>{let{actionsClassName:t,authorPagesEnabled:n,children:o,cropGravity:c,disableInteractive:u,hideUfi:p,highlightByline:h,linkToComments:m,postPreviewUrl:g,pub:v,showPinForPostIds:Y,showSectionOrTag:f,user:b,utm:y,onClickPost:_,onToggleMenu:w,onUnpinPost:k}=e,C=(0,s.useContext)(d),[I,S]=(0,s.useState)({}),D=(0,s.useCallback)(e=>{let{post:t}=e;S(e=>(0,l._)((0,i._)({},e),{[t.id]:t}))},[]);return(0,r.Y)(d.Provider,{value:(0,l._)((0,i._)({},C,a()(t)?null:{actionsClassName:t},a()(n)?null:{authorPagesEnabled:n},a()(c)?null:{cropGravity:c},a()(u)?null:{disableInteractive:u},a()(p)?null:{hideUfi:p},a()(h)?null:{highlightByline:h},a()(m)?null:{linkToComments:m},a()(g)?null:{postPreviewUrl:g},a()(v)?null:{pub:v},a()(Y)?null:{showPinForPostIds:Y},a()(f)?null:{showSectionOrTag:f},a()(b)?null:{user:b},a()(y)?null:{utm:y},a()(_)?null:{onClickPost:_},a()(w)?null:{onToggleMenu:w},a()(k)?null:{onUnpinPost:k}),{modifiedPosts:I,onChangePost:D}),children:o})},u=()=>{let e=(0,s.useContext)(d);if(!e.pub)throw Error("No pub provided to PostPreviewContext");return e}},31856:function(e,t,n){n.d(t,{z:()=>a});var i=n(4006),l=n(22602),r=n(69706),o=n(22232);let a=e=>{let{aspectRatio:t=r.B7,radius:n="xs",width:a}=e,s=a?{width:a,height:a/t}:{width:"100%",paddingBottom:"".concat(100/t,"%"),position:"relative"};return(0,i.FD)("div",{className:o.A.noAnimation,style:s,children:[!a&&(0,i.Y)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,i.Y)(l.O,{height:"100%",radius:n,width:"100%"})}),a&&(0,i.Y)(l.O,{height:"100%",radius:n,width:"100%"})]})}},67190:function(e,t,n){n.d(t,{x:()=>a});var i=n(4006),l=n(22602),r=n(22232);let o={sm:12,md:16,lg:24},a=e=>{let{size:t="md",width:n}=e;return(0,i.Y)("div",{className:r.A.noAnimation,children:(0,i.Y)(l.O,{height:o[t],radius:"xs",width:n})})}},98002:function(e,t,n){n.d(t,{z:()=>W});var i=n(69277),l=n(70408),r=n(32641),o=n(79785),a=n(4006),s=n(32485),d=n.n(s),c=n(17402),u=n(84605),p=n(68349),h=n(68410),m=n(28528),g=n(41935),v=n(76977),Y=n(82776);let f=e=>{let{justified:t,post:n}=e,{actionsClassName:i,pub:l,user:r,onChangePost:o,onToggleMenu:s}=(0,m.np)(),d="restack"===n.type;return d?null:(0,a.Y)(v.I1,{className:i,children:(0,a.Y)(g.xx,{allowEdit:!d,editButtonIsLast:!0,hideComments:!(0,Y.showCommentsOnPost)({publication:l,post:n}),hideReactions:!l.community_enabled,hideShare:d,isStatic:!1,justified:t,labelStyle:"counts-or-none",position:"pub-preview",post:n,pub:l,showRestackButton:!0,style:"compressed",user:r,onChange:o,onToggleMenu:s})})};var b=n(84032),y=n(74762),_=n(63136),w=n(65942),k=n(4016);let C=e=>{let{align:t,clamp:n,lineHeight:i=20,maxLength:l=152,paddingBottom:r,post:o,size:s=14,textWrap:d}=e,{postPreviewUrl:c,pub:u}=(0,m.np)();return(0,a.Y)(v.I1,{paddingBottom:r,children:(0,a.Y)(_.EY,{align:t,as:"a",clamp:n,color:"primary",font:"text",href:c,lineHeight:i,size:s,style:(0,k.S2)({pub:u})?{fontFamily:"Georgia, serif"}:void 0,tabIndex:-1,textWrap:d,children:(0,w.A)((0,Y.truncateWords)(o.description,l))})})};var I=n(38970),S=n.n(I),D=n(99862),F=n(49807);let P=e=>{var t,n;let{paddingBottom:i,post:l}=e,{pub:r,showSectionOrTag:o}=(0,m.np)();if(!o)return null;let s=null,d=null;if(l.section_id){let e=r.sections.find(e=>e.id===l.section_id);e&&(s=e.name,d=(0,F.Dor)(r,{section:e}))}else if(null==(t=l.postTags)?void 0:t.length){let e=S()(r.navigationBarItems.filter(e=>e.postTag).map(e=>e.postTag),"id"),t=null==(n=l.postTags)?void 0:n.find(t=>e[t.id]);t&&(s=t.name,d=(0,F.ii9)(r,t))}return s&&d?(0,a.Y)(v.pT,{paddingBottom:i,children:(0,a.Y)(_.EY.Meta,{as:"a",color:"primary",href:d,onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,D.route)(d)},children:s})}):null};var x=n(71834),T=n(56262),A=n(69706);let E=e=>{let{isSmall:t,post:n}=e,{hideUfi:i}=(0,m.np)(),{isTablet:l}=(0,h.sM)(),r=!!(0,T.getCoverImageUrl)(n);return(0,a.FD)("div",{className:d()("container-m3tNBN",{"containerNoImage-bRvPTc":!r}),children:[r&&(0,a.Y)(y.t,{className:"image-e4U1t2",imageAspectRatio:t?A.fo:A.qr,imageWidth:1280,isBelowTheFold:!1,playButtonSize:72,post:n,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center",className:"content-jHL69Q",justifyContent:"center",paddingBottom:64*!r,paddingTop:r?24:64,paddingX:r?32:64,children:[(0,a.Y)(P,{paddingBottom:4,post:n}),(0,a.Y)(x.Z,{align:"center",clamp:3,paddingBottom:8,post:n,preset:l?"mobileLg":"lg",preventOrphans:!0}),(0,a.Y)(C,{align:"center",clamp:3,lineHeight:24,paddingBottom:8,post:n,size:17}),(0,a.Y)(b.xx,{post:n}),!i&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:n})})]})]})};var N=n(86500),B=n(82772),M=n(27437),R=n(31856),L=n(67190);let O=e=>{let{size:t,width:n}=e;return(0,a.Y)("div",{style:{width:n,margin:"0 auto"},children:(0,a.Y)(L.x,{size:t,width:"100%"})})},z=e=>{let{variant:t}=e;switch(t){case"mini":case"mini-episode":case"mini-video":return(0,a.Y)(v.I1,{gap:4,padding:8,paddingBottom:36,children:(0,a.FD)(v.Ye,{gap:12,children:[(0,a.FD)(v.I1,{flex:"grow",gap:8,paddingTop:4,children:[(0,a.Y)(L.x,{size:"sm",width:"80%"}),(0,a.Y)(L.x,{size:"sm",width:"50%"})]}),(0,a.Y)(R.z,{aspectRatio:A.Zi,width:64})]})});case"listing":return(0,a.Y)(v.I1,{gap:8,padding:8,paddingBottom:56,children:(0,a.FD)(v.Ye,{gap:16,children:[(0,a.FD)(v.I1,{flex:"grow",gap:8,children:[(0,a.Y)(L.x,{width:"70%"}),(0,a.Y)(L.x,{width:"80%"}),(0,a.Y)(L.x,{width:"50%"})]}),(0,a.Y)(R.z,{aspectRatio:A.qr,width:160})]})});case"square":return(0,a.FD)(v.I1,{padding:8,style:{paddingBottom:90,gap:18},children:[(0,a.Y)(R.z,{aspectRatio:A.qr}),(0,a.FD)(v.I1,{flex:"grow",style:{gap:10},children:[(0,a.Y)(L.x,{width:"80%"}),(0,a.Y)(L.x,{width:"90%"}),(0,a.Y)(L.x,{width:"50%"})]})]});case"large":return(0,a.FD)(v.I1,{gap:40,padding:8,paddingBottom:100,children:[(0,a.Y)(R.z,{aspectRatio:A.fo}),(0,a.FD)(v.I1,{gap:16,children:[(0,a.Y)(O,{size:"lg",width:"70%"}),(0,a.Y)(O,{size:"lg",width:"50%"}),(0,a.Y)(O,{size:"lg",width:"60%"})]})]});case"jumbo":case"jumbo-small":case"mobile-hero":return(0,a.FD)(v.I1,{gap:16,padding:8,children:[(0,a.Y)(R.z,{aspectRatio:A.B7}),(0,a.FD)(v.I1,{gap:8,children:[(0,a.Y)(L.x,{width:"20%"}),(0,a.Y)(L.x,{width:"90%"}),(0,a.Y)(L.x,{width:"75%"}),(0,a.Y)(L.x,{width:"35%"})]})]});default:return null}};var U=n(88553);function q(){let e=(0,o._)(["Post preview for ",""]);return q=function(){return e},e}let H={jumbo:E,"jumbo-small":e=>(0,a.Y)(E,(0,l._)((0,i._)({},e),{isSmall:!0})),large:e=>{let{align:t="center",hideImage:n,imageAspectRatio:i="standard",post:l}=e,{hideUfi:r,pub:o}=(0,m.np)();return(0,a.FD)(v.I1,{children:[!n&&(0,a.Y)(y.t,{className:"image-QTMr_S",imageAspectRatio:"wide"===i?A.qr:A.fo,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:l,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center"===t?"center":"start",flex:"grow",justifyContent:(0,k.S2)({pub:o})?"start":"center",paddingBottom:0,paddingTop:32,paddingX:16*("left"!==t),children:[(0,a.Y)(P,{paddingBottom:4,post:l}),(0,a.Y)(x.Z,{align:t,clamp:4,paddingBottom:8,post:l,preset:"lg",preventOrphans:!0,textWrap:"balance"}),(0,a.Y)(C,{align:t,clamp:2,lineHeight:(0,k.S2)({pub:o})?28:24,paddingBottom:8,post:l,size:(0,k.S2)({pub:o})?20:17,textWrap:"balance"}),(0,a.Y)(b.xx,{post:l}),!r&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:l})})]})]})},listing:e=>{let{hideImage:t,post:n}=e,{hideUfi:i,pub:l}=(0,m.np)(),{isMobile:r}=(0,h.sM)(),o=!!l.community_enabled;return t&&!r&&(o=!1),(0,a.FD)("div",{className:d()("container-Qnseki",{"container--no-image-zKZVLo":t}),children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,position:"relative",children:[(0,a.Y)(P,{post:n}),(0,a.Y)(x.Z,{clamp:3,post:n,preset:r?"mobileMd":"md"}),!(0,k.S2)({pub:l})&&(0,a.Y)(C,{clamp:2,lineHeight:t?24:20,post:n,size:15}),(0,a.Y)(b.xx,{post:n}),!i&&(0,a.Y)(f,{justified:o,post:n})]}),!t&&(0,a.Y)(y.t,{className:"image-tkPTAj",hidePlaceholder:!0,imageAspectRatio:r?A.Zi:A.fo,imageWidth:r?150:320,isBelowTheFold:!0,playButtonSize:r?32:40,post:n,squareImageSize:"small"})]})},mini:e=>{let{post:t}=e,{hideUfi:n,pub:i}=(0,m.np)(),l=!!i.community_enabled;return(0,a.FD)(v.I1,{gap:4,children:[(0,a.FD)(v.Ye,{gap:12,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(P,{post:t}),(0,a.Y)(x.Z,{clamp:2,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]}),(0,a.Y)(y.t,{className:"image-tBOtsv",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:A.Zi,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t})]}),!n&&(0,a.Y)(f,{justified:l,post:t})]})},"mini-episode":e=>{let{post:t}=e,n=(0,c.useRef)(null);return(0,B.S8)(n,()=>{(0,N.u4)(N.qY.RECENT_EPISODE_ITEM_SEEN,{post_id:t.id})}),(0,a.FD)(v.Ye,{ref:n,gap:16,children:[(0,a.Y)(y.t,{className:"image-UySkN_",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:A.Zi,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t}),(0,a.FD)(v.I1,{flex:"grow",children:[(0,a.Y)(x.Z,{clamp:2,paddingBottom:4,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]})]})},"mini-video":e=>{let{post:t}=e;return(0,a.FD)(v.Ye,{gap:16,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[t.section_name?(0,a.Y)(_.EY.Meta,{color:"accent",children:t.section_name}):null,(0,a.Y)(_.EY.B3,{clamp:2,color:"primary",weight:"semibold",children:t.title}),(0,a.Y)(_.EY.Meta,{color:"secondary",children:t.publishedBylines.map((e,t)=>(0,a.FD)(a.FK,{children:[t>0?", ":null,(0,a.Y)(M.ProfileHoverCard,{disabled:!1,subject:e,trigger:(0,a.Y)(_.EY,{as:"a",decoration:"hover-underline",children:e.name}),utmSource:"byline"})]}))})]}),(0,a.Y)(y.t,{className:"image-XZMKsB",hidePlaceholder:!0,hideTimestampIcon:!0,imageAspectRatio:A.qr,imageWidth:120,isBelowTheFold:!1,playButtonSize:null,post:t})]})},"mobile-hero":e=>{let{hidePlaceholder:t,post:n}=e,{hideUfi:i,pub:l}=(0,m.np)(),r=!!l.community_enabled;return(0,a.FD)(v.I1,{children:[n.cover_image&&(0,a.Y)(y.t,{className:"image-vqosjM",hidePlaceholder:t,imageAspectRatio:A.qr,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:n,squareImageSize:"large"}),(0,a.FD)(v.I1,{flex:"grow",justifyContent:"center",paddingTop:16,paddingX:16,children:[(0,a.Y)(P,{paddingBottom:4,post:n}),(0,a.FD)(v.I1,{gap:8,paddingBottom:12,children:[(0,a.Y)(x.Z,{clamp:3,post:n,preset:"mobileLg",preventOrphans:!0}),(0,a.Y)(C,{clamp:3,lineHeight:20,post:n,size:15}),(0,a.Y)(b.xx,{post:n})]}),!i&&(0,a.Y)(f,{justified:r,post:n})]})]})},square:e=>{let{hideDescription:t,hideImage:n,post:i}=e,{hideUfi:l,pub:r}=(0,m.np)(),o=!!r.community_enabled,s=t||(0,k.S2)({pub:r});return(0,a.FD)(v.I1,{gap:12,children:[!n&&(0,a.Y)(y.t,{className:d()("image-Ac018u"),imageAspectRatio:A.fo,imageWidth:600,isBelowTheFold:!0,playButtonSize:56,post:i,squareImageSize:"medium"}),(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(P,{post:i}),(0,a.Y)(x.Z,{clamp:3,post:i,preset:"md"}),!s&&(0,a.Y)(C,{clamp:1,post:i}),(0,a.Y)(b.xx,{post:i}),!l&&(0,a.Y)(f,{justified:o,post:i})]})]})}},W=e=>{var t,{linkToComments:n,post:o,testid:s,variant:g,onClick:Y}=e,f=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{iTemplate:b}=(0,u.GO)(),{isMobile:y}=(0,h.sM)(),{disableInteractive:_,pub:w,modifiedPosts:C,utm:I}=(0,m.np)(),[S,D]=(0,c.useState)(!1),F=(0,c.useCallback)(e=>{let{active:t}=e;D(!!t)},[]);if(!o)return(0,a.Y)(v.I1,{style:{width:"100%"},children:(0,a.Y)(z,{variant:g})});let P=null!=(t=C[o.id])?t:o,x=H[g];if(!x)return console.warn("PostPreview: ".concat(g," not implemented")),null;let T=(0,U.U)({linkToComments:!!n,post:P,pub:w,utm:I});return(0,a.Y)(m.XL,{actionsClassName:d()("actions-YFg47u",{"actions--menu-open-bDkeVH":S}),hideUfi:(0,k.S2)({pub:w}),postPreviewUrl:T,onToggleMenu:F,children:(0,a.Y)(v.I1,{"aria-label":b(q(),P.title),className:d()("container-H2dyKk",{"container--menu-open-RRT2Fw":S}),"data-testid":s,padding:8*!y,position:"relative",radius:"sm",role:"article",tabIndex:0,onClick:e=>{Y&&Y({event:e,post:P}),_||(0,p.V2)(T,{event:e})},children:(0,a.Y)(x,(0,l._)((0,i._)({},f),{post:P}))})})}},84032:function(e,t,n){n.d(t,{xx:()=>D,aR:()=>P});var i=n(69277),l=n(70408),r=n(79785),o=n(4006),a=n(38970),s=n.n(a),d=n(27786),c=n(36066),u=n(27437),p=n(41935),h=n(84605),m=n(85478),g=n(28528),v=n(7761),Y=n(63136),f=n(16291),b=n(4016),y=n(56262),_=n(39318),w=n(82776);let k="icon-cvHqCn",C="link-HFGLqU",I="dividerChar-SbAJEi";function S(){let e=(0,r._)(["Published on ",""]);return S=function(){return e},e}let D=e=>{let{clamp:t,hideLock:n,post:i}=e,{iTemplate:l}=(0,h.GO)(),{getPubPinInfo:r,getSectionPinInfo:a}=(0,v.b$)(),{highlightByline:s,pub:u,user:p}=(0,g.np)(),{showPin:m}=r({post:i}),{showPin:f}=a({post:i}),_=(m||f)&&(!(0,b.S2)({pub:u})||!!(null==p?void 0:p.is_contributor)),C=!n&&(0,y.isPaidAudience)(i.audience)&&!(0,b.zM)({post:i})&&!(0,b.S2)({pub:u}),D=(0,w.getBylineUsers)(i);return(0,o.FD)(Y.EY.Meta,{clamp:t,color:"pub-secondary-text",display:"inline",children:[_&&(0,o.Y)("div",{className:k,children:(0,o.Y)(d.A,{size:12})}),C&&(0,o.Y)("div",{className:k,children:(0,o.Y)(c.A,{audience:i.audience,size:12})}),i.restacked_pub_name?(0,o.FD)(o.FK,{children:[(0,o.Y)("span",{children:l(S(),i.restacked_pub_name)}),"\xa0",(0,o.Y)("span",{className:I,children:""}),"\xa0"]}):null,(0,o.Y)(P,{post:i}),"restack"!==i.type&&D.length>0&&u.bylines_enabled&&(0,o.FD)(o.FK,{children:["\xa0",(0,o.Y)("span",{className:I,children:""}),"\xa0",(0,o.Y)(Y.EY,{as:"span",color:s?"accent":void 0,children:(0,o.Y)(F,{clamp:t,post:i,pub:u})})]})]})},F=e=>{let{post:t,clamp:n,pub:r}=e,a=(0,w.getBylineUsers)(t),{getConfigFor:d}=(0,m.mJ)(),c=!!d("enable_author_pages"),p=s()(r.contributors,"user_id"),h=e=>{let t=c?(0,_.cxh)({userId:e.id,pub:r}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:c?{href:void 0,onClick:void 0}:{href:(0,_.laT)(e,r),onClick:e=>e.stopPropagation()}},g=e=>{var t,n,i;return null!=(i=null!=(n=null==(t=p[e.id])?void 0:t.name)?n:e.name)?i:""};return(0,o.Y)(o.FK,{children:(0,w.oxfordComma)(a.map(e=>n?(0,o.Y)("a",(0,l._)((0,i._)({className:C},h(e)),{children:g(e)})):(0,o.Y)(u.ProfileHoverCard,{disabled:c,subject:e,trigger:h(e).href?(0,o.Y)("a",(0,l._)((0,i._)({className:C},h(e)),{children:g(e)})):(0,o.Y)("span",{className:"notLink-oAjaXn",children:g(e)}),utmSource:"byline"})),{noBreakSpace:!0})})},P=e=>{let{customFormat:t="MM.DD.YY",post:n}=e,{language:i}=(0,h.GO)(),{pub:l}=(0,g.np)();return(0,o.Y)("time",{className:"date-rtYe1v",dateTime:(0,f.A)(n.post_date).toISOString(),children:(0,b.lu)({pub:l})?(0,f.A)(n.post_date).format(t):(0,b.S2)({pub:l})?(0,f.A)(n.post_date).format("MMMM D, YYYY"):(0,p.sq)({post:n,showDatetime:!1,language:i})})}},70557:function(e,t,n){n.d(t,{X:()=>x});var i=n(4006),l=n(50802),r=n(49802),o=n(48635),a=n(17402),s=n(23623),d=n(41935),c=n(84236),u=n(84605),p=n(68349),h=n(68410),m=n(80098),g=n(38501),v=n(74762),Y=n(88553),f=n(89490),b=n(35369),y=n(76977),_=n(63136),w=n(13348),k=n(91496),C=n(7755),I=n(56262),S=n(82776),D=n(69706);let F={container:"container-pFhu3n",containerNoImage:"containerNoImage-W5VZl3",videoLayer:"videoLayer-gwRrVN",contentLayer:"contentLayer-OGm4Y9",content:"content-iO1vNE",imageContainer:"imageContainer-ddA7f9",image:"image-deX_la",flippedImageContainer:"flippedImageContainer-rBB6TZ",flippedImage:"flippedImage-rChY0M",blurOverlay:"blurOverlay-xN2HYo",darkOverlay:"darkOverlay-jsLZzF",noImageBackground:"noImageBackground-gL1zkp",postTitleMobile:"postTitleMobile-ut7sIL"},P=(0,f.yw)({position:"absolute",inset:0,radius:"sm",pointerEvents:"none"}),x=e=>{let{columns:t,hideLogo:n,highlightPost:l=!1,isPodcast:r,post:o,pub:u,section:f,showPodcastLinks:b,user:w,utm:S}=e,x=(0,a.useRef)(null),{isMobile:E}=(0,h.sM)(),N=(0,I.getDurationForPostPreview)({post:o}),{title:B,description:M}=(0,C.ed)({pub:u,podcastUpload:o.podcastUpload,section:null!=f?f:null}),R=l?o.title:B,L=l?o.subtitle:M,O=!!o.cover_image,z=e=>{let t=(0,Y.U)({linkToComments:!1,post:o,pub:u,utm:S});(0,p.V2)(t,{event:e})};return E?(0,i.FD)(y.I1,{gap:12,children:[(0,i.Y)(y.I1,{onClick:z,children:(0,i.FD)(y.Ye,{ref:x,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,i.FD)(y.Ye,{className:F.videoLayer,direction:"column",position:"absolute",radius:"sm",children:[(0,i.Y)(y.Ye,{flex:"grow",position:"relative",style:{width:"100%"},children:(0,i.Y)(v.t,{className:F.image,hideTimestamp:!0,imageAspectRatio:D.qr,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:x,squareImageSize:"large"})}),(0,i.Y)(y.Ye,{className:F.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,i.Y)(v.t,{className:F.flippedImage,hideTimestamp:!0,imageAspectRatio:D.qr,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:x,squareImageSize:"large"})}),(0,i.Y)(P,{className:O?F.darkOverlay:F.noImageBackground}),O&&(0,i.Y)(y.Ye,{className:F.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,i.Y)(y.Ye,{className:F.contentLayer,pointerEvents:"none",position:"absolute",children:(0,i.Y)(s.a,{disable:!O,children:(0,i.Y)(y.Ye,{flex:"grow",children:(0,i.FD)(y.I1,{gap:16,padding:16,paddingBottom:24,children:[!n&&!l&&(0,i.Y)(k.M,{post:o,pub:u,section:null!=f?f:null,size:48,useSection:!r}),(0,i.FD)(y.I1,{gap:8,children:[(0,i.Y)(_.EY.H4,{color:"primary",font:"pub-headings",children:R}),(0,i.Y)(_.EY.B4,{clamp:2,className:F.descriptionMobile,color:"primary",children:L}),(0,i.Y)(y.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,i.Y)(T,{duration:N,hasImage:O,highlightPost:l,post:o}):(0,i.Y)(A,{hasImage:O,highlightPost:l,post:o})]})})})})]})}),(0,i.Y)(c.pJ,{align:"center",post:o,pub:u,section:f}),b&&r&&(0,i.Y)(g.D,{limit:2,post:o,pub:u,section:null!=f?f:null,stretch:!0,user:w})]}):(0,i.Y)(m.P,{variant:4===t?"full-width":"three-column-width",children:(0,i.FD)(y.I1,{gap:12,children:[(0,i.Y)(y.I1,{paddingX:8,onClick:z,children:(0,i.FD)(y.Ye,{ref:x,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,i.Y)(y.Ye,{position:"absolute",style:{bottom:16,right:16,zIndex:1},children:(0,i.Y)(d.xx,{allowEdit:!0,hideComments:!0,hideFeedRestackButton:!0,hideReactions:!0,hideSavePost:!0,hideShare:!0,isStatic:!1,labelStyle:"counts-or-none",post:o,pub:u,style:"compressed",user:w,onChange:()=>void 0})}),(0,i.FD)(y.Ye,{position:"absolute",radius:"sm",style:{width:"100%",height:"100%"},children:[(0,i.Y)(y.Ye,{flex:"grow",position:"relative",children:(0,i.Y)(y.Ye,{className:F.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,i.Y)(v.t,{className:F.flippedImage,disableVideoHover:!0,hideTimestamp:!0,imageAspectRatio:D.qr,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:x,squareImageSize:"large"})})}),(0,i.Y)(y.Ye,{className:F.imageContainer,position:"relative",children:(0,i.Y)(v.t,{className:F.image,hideTimestamp:!0,imageAspectRatio:D.qr,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:x,squareImageSize:"large"})}),(0,i.Y)(P,{className:O?F.darkOverlay:F.noImageBackground}),O&&(0,i.Y)(y.Ye,{className:F.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,i.FD)(y.Ye,{pointerEvents:"none",position:"absolute",style:{width:"100%",height:"100%"},children:[(0,i.Y)(s.a,{disable:!O,children:(0,i.Y)(y.Ye,{flex:"grow",children:(0,i.Y)(y.I1,{justifyContent:n||l?"end":"center",padding:48,children:(0,i.FD)(y.I1,{gap:24,children:[!n&&!l&&(0,i.Y)(k.M,{post:o,pub:u,section:null!=f?f:null,size:72,useSection:!r}),(0,i.FD)(y.I1,{gap:8,children:[(0,i.Y)(_.EY.H2,{clamp:3,color:"primary",font:"pub-headings",children:R}),(0,i.Y)(_.EY.B4,{clamp:3,color:"primary",children:L}),(0,i.Y)(y.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,i.Y)(T,{duration:N,hasImage:O,highlightPost:l,post:o}):(0,i.Y)(A,{hasImage:O,highlightPost:l,post:o})]})})})}),(0,i.Y)(y.Ye,{flex:"grow",pointerEvents:"none"})]})]})}),(0,i.Y)(c.pJ,{align:"right",paddingX:8,post:o,pub:u,section:f}),b&&r&&(0,i.Y)(y.I1,{paddingX:8,children:(0,i.Y)(g.D,{post:o,pub:u,section:null!=f?f:null,stretch:!0,user:w})})]})})},T=e=>{let{duration:t,hasImage:n,highlightPost:o,post:s}=e,{iString:d}=(0,u.GO)(),{isMobile:c}=(0,h.sM)(),p=n?"white":"var(--color-text-primary)";return(0,i.FD)(y.Ye,{alignItems:"center",gap:c?16:24,pointerEvents:"auto",children:[(0,i.Y)(y.Ye,{flex:"auto",children:(0,i.Y)(w.ro,{isPlaying:!1,size:c?56:72})}),(0,i.Y)(y.Ye,{alignItems:"center",children:(0,i.FD)(y.I1,{children:[(0,i.FD)(y.Ye,{alignItems:"center",gap:4,children:[(0,i.Y)(y.Ye,{gap:4,width:16,children:s.videoUpload?(0,i.Y)(l.A,{size:14,stroke:p}):(0,i.Y)(r.A,{size:14,stroke:p})}),(0,i.Y)(_.EY.Meta,{color:"primary",children:d("LATEST")}),t>0&&(0,i.FD)(a.Fragment,{children:[(0,i.Y)(_.EY.Meta,{color:"primary",children:"\xb7"}),(0,i.Y)(_.EY.Meta,{color:"primary",children:(0,S.secondsToHHMMSS)(t)})]})]}),!o&&(0,i.Y)(_.EY.Meta,{color:"primary",children:s.title})]})})]})},A=e=>{let{hasImage:t,highlightPost:n,post:l}=e,{iString:r}=(0,u.GO)();return(0,i.FD)(y.Ye,{alignItems:"center",gap:16,pointerEvents:"auto",children:[(0,i.Y)(b.K0,{priority:t?"primary-mono":"primary",rounded:!0,size:"md",children:(0,i.Y)(o.A,{size:20})}),(0,i.FD)(y.I1,{children:[(0,i.Y)(_.EY.Meta,{color:"primary",children:r(n?"READ THE LATEST":"LATEST")}),!n&&(0,i.Y)(_.EY.B2,{clamp:1,color:"primary",weight:"semibold",children:l.title})]})]})}},98920:function(e,t,n){n.d(t,{Z:()=>c});var i=n(69277),l=n(70408),r=n(4006),o=n(46271),a=n(94954),s=n(97307),d=n(62088);let c=e=>{let{displaySignInModal:t,onCloseSignInModal:n,isStatic:c,entry:u}=e,p=(0,s.n)(),{user:h,setUser:m}=(0,o.ur)();if(c)return null;let g=()=>{p.open({skipRedirectOnExit:!0})};return(0,r.FD)(r.FK,{children:[(0,r.Y)(d.M9,{isOpen:!!t,onCancel:n,onSignup:()=>{n(),g()},onSuccess:()=>{document.location.reload()},onUserCreated:e=>{n(),m(e),g()}}),(0,r.Y)(a.O,(0,l._)((0,i._)({},p.modalProps),{entry:u||"post-preview",onAfterClose:()=>{h&&document.location.reload()}}))]})}},71834:function(e,t,n){n.d(t,{Z:()=>h});var i=n(69277),l=n(70408),r=n(4006),o=n(15052),a=n(91704),s=n(28528),d=n(76977),c=n(63136),u=n(4016),p=n(82776);let h=e=>{let{align:t,clamp:n,maxLength:h=140,noIcons:m,paddingBottom:g,post:v,preset:Y,preventOrphans:f,textWrap:b}=e,{linkToComments:y,postPreviewUrl:_,pub:w}=(0,s.np)(),{lineHeight:k,size:C,fontFamily:I}=(0,a.i)({preset:Y,pub:w}),S=(0,u.S2)({pub:w}),D=C>=28;return(0,r.Y)(d.I1,{paddingBottom:g,children:(0,r.FD)(c.EY,(0,l._)((0,i._)({},_?{as:"a",href:_,tabIndex:-1}:null),{align:t,clamp:S?void 0:n,color:"pub-primary-text","data-testid":"post-preview-title",font:"pub-headings",style:{fontSize:C,lineHeight:"".concat(k,"px"),fontFamily:I},textWrap:b,children:["thread"===v.type&&!m&&(0,r.Y)(o.A,{className:"icon-cUpv7d",height:D?26:17}),y&&"thread"!==v.type&&"Comments on: ",f?(0,p.preventOrphans)((0,p.truncateWords)(v.title,h)):(0,p.truncateWords)(v.title,h)]}))})}},47173:function(e,t,n){n.d(t,{q:()=>h});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(38970),d=n.n(s),c=n(85478),u=n(39318),p=n(82776);let h=e=>{let{post:t,clamp:n,pub:o}=e,s=(0,p.getBylineUsers)(t),{getConfigFor:h}=(0,c.mJ)(),m=!!h("enable_author_pages"),g=d()(o.contributors,"user_id"),v=e=>{let t=m?(0,u.cxh)({userId:e.id,pub:o}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:m?{href:void 0,onClick:void 0}:{href:(0,u.laT)(e,o),onClick:e=>e.stopPropagation()}},Y=e=>{var t,n,i;return null!=(i=null!=(n=null==(t=g[e.id])?void 0:t.name)?n:e.name)?i:""};return(0,r.Y)("div",{className:a()("container-Mw45dL",{"containerSingleLine-xWghSN":1===n}),children:(0,p.oxfordComma)(s.map(e=>v(e).href?(0,r.Y)("a",(0,l._)((0,i._)({className:"link-iknc0_"},v(e)),{children:Y(e)})):(0,r.Y)("span",{className:"notLink-U0WbwD",children:Y(e)})),{noBreakSpace:!0})})}},60355:function(e,t,n){n.d(t,{R:()=>B});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(27786),c=n(61250),u=n(68349),p=n(28528),h=n(36027),m=n(68410),g=n(95294),v=n(15894),Y=n(76977),f=n(65942),b=n(82776);let y=e=>{let{align:t="left",clamp:n,color:i,paddingBottom:l,post:r,preset:a}=e,{postPreviewUrl:s}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:l,children:(0,o.Y)(v.T,{align:t,as:"a",clamp:n,color:i,href:s,preset:a,wrap:"center"===t?"balance":"pretty",children:(0,f.A)((0,b.truncateWords)(r.subtitle,152))})})},_=e=>{var{align:t="left",clamp:n,color:a,paddingBottom:d,post:c,preset:u,preventOrphans:h=!0}=e,m=(0,r._)(e,["align","clamp","color","paddingBottom","post","preset","preventOrphans"]);let{postPreviewUrl:g}=(0,p.np)(),f=(0,b.truncateWords)(c.title,140),y=h?(0,b.preventOrphans)(f):f;return(0,o.Y)(Y.I1,{paddingBottom:d,children:(0,o.Y)(v.T,(0,l._)((0,i._)({},m,g?{as:"a",href:g}:null),{align:t,clamp:n,className:s()("post-preview-title","title-vqpS7B",{"hoverColor-w9y2tS":"white"!==a}),color:a,preset:u,wrap:"center"===t?"balance":"pretty",children:y}))})};var w=n(61755);let k=e=>{let{post:t}=e,{pub:n,user:i,onChangePost:l}=(0,p.np)(),r=(0,b.showCommentsOnPost)({publication:n,post:t}),a=n.community_enabled,s=!!(null==i?void 0:i.is_contributor);return"restack"===t.type?null:(0,o.FD)(Y.Ye,{alignItems:"center",gap:6,children:[r&&(0,o.Y)(w.qS,{post:t,pub:n,size:"small"}),a&&(0,o.Y)(w.ct,{post:t,pub:n,size:"small",user:i,onChange:l}),s&&(0,o.Y)(w.xn,{context:"post-preview",post:t,pub:n,user:i})]})};var C=n(84032),I=n(47173);let S=e=>{let{align:t="left",color:n,paddingBottom:i,post:l,preset:r}=e,{pub:a}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:i,children:(0,o.FD)(v.T,{align:t,color:null!=n?n:"sm-preview-byline"===r?"accent":void 0,preset:r,children:[(0,o.Y)(I.q,{post:l,pub:a}),"  ",(0,o.Y)(C.aR,{post:l})]})})};var D=n(69706);let F=e=>{let{align:t,hideDescription:n,hideImage:i,post:l,titlePreset:r}=e;return(0,o.FD)(Y.I1,{children:[!i&&(0,o.Y)(g.D,{className:"image-EaGmDd",imageAspectRatio:D.B7,imageWidth:600,isBelowTheFold:!0,post:l}),(0,o.FD)(Y.I1,{gap:4,paddingTop:8*!i,children:[(0,o.Y)(_,{align:t,post:l,preset:null!=r?r:i?"h5-serif":"h7-serif"}),!n&&(0,o.Y)(y,{align:t,clamp:3,post:l,preset:"d4-serif"}),(0,o.Y)(Y.I1,{alignItems:"center"===t?"center":"start",paddingY:4,children:(0,o.Y)(k,{post:l})}),(0,o.Y)(S,{align:t,post:l,preset:"sm-preview-byline"})]})]})};var P=n(13589);let x=e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{alignItems:"center",children:[(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:32,children:(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t})}),(0,o.Y)(_,{align:"center",color:"white",paddingBottom:32,post:t,preset:"h2-serif"}),(0,o.Y)(y,{align:"center",color:"white",paddingBottom:32,post:t,preset:"d1-sans-medium"}),(0,o.Y)(S,{color:"white",post:t,preset:"lg-preview-byline"})]})};var T=n(39318),A=n(92636),E=n(88553);let N={archive:e=>{let{forceShowPlayButton:t,post:n}=e,{isMobile:i}=(0,m.sM)();return(0,o.FD)(Y.Ye,{gap:i?24:40,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:"image-YTYBVT",forceShowPlayButton:t,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!0,post:n})}),(0,o.FD)(Y.I1,{gap:8*!i,overflow:"hidden",children:[(0,o.Y)(_,{post:n,preset:"h5-serif"}),(0,o.Y)(Y.I1,{flex:i?void 0:"grow",paddingBottom:16*!!i,children:(0,o.Y)(y,{clamp:3,post:n,preset:"d3-serif"})}),(0,o.Y)(h.E,{post:n})]})]})},"content-block-episode":e=>{let{post:t}=e,{isMobile:n}=(0,m.sM)();return n?(0,o.Y)(F,{align:"left",post:t,titlePreset:"h4-sans-condensed"}):(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(g.D,{className:"image-Vu2JCA",imageAspectRatio:22/31,imageWidth:440,isBelowTheFold:!0,post:t}),(0,o.FD)(Y.I1,{flex:"grow",gap:8,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-condensed"}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(k,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-listing":e=>{let{post:t,titlePreset:n="h6-sans"}=e,i="h4-sans-condensed"===n;return(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:i?"image220-p05U5w":"image140-mQ92WN",imageAspectRatio:1,imageWidth:300,isBelowTheFold:!0,post:t})}),(0,o.FD)(Y.I1,{gap:i?8:4,children:[(0,o.Y)(_,{post:t,preset:n}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(k,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-single-large":e=>{let{post:t}=e,{isMobile:n}=(0,m.sM)(),[r,a]=(0,P.Mk)();return n?(0,o.Y)(x,{post:t}):(0,o.FD)(Y.Ye,{alignItems:"center",gap:40,children:[(0,o.FD)(Y.I1,{alignItems:"center",flex:"grow",children:[(0,o.Y)(S,{color:"white",paddingBottom:56,post:t,preset:"lg-preview-byline"}),(0,o.Y)(_,(0,l._)((0,i._)({},a),{align:"center",color:"white",paddingBottom:40,post:t,preset:"h2-serif"})),(0,o.Y)(Y.I1,{width:360,children:(0,o.Y)(y,{align:"center",color:"white",post:t,preset:"d1-sans-medium"})})]}),(0,o.Y)(Y.I1,{flex:"grow",children:(0,o.FD)(Y.I1,(0,l._)((0,i._)({},a),{className:"imageContainer-LhpEMl",position:"relative",children:[(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t}),(0,o.Y)(Y.Ye,{className:"imageContainerOverlay-L73_9b",inset:0,position:"absolute",style:{opacity:+!!r}})]}))})]})},"event-page":e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{gap:20,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-regular"}),(0,o.Y)(g.D,{className:"image-J1_9gh",imageAspectRatio:16/9,imageWidth:660,isBelowTheFold:!0,post:t})]})},large:e=>{let{align:t="center",hideImage:n,imageAspectRatio:i="standard",post:l,showImageLast:r,titlePreset:a="h3-compressed"}=e,{isMobile:s}=(0,m.sM)(),d=!n&&(0,o.Y)(g.D,{className:"image-v6H72k",imageAspectRatio:"wide"===i?D.B7:"portrait"===i?3/4:D.fo,imageWidth:1250,isBelowTheFold:!1,post:l});return(0,o.FD)(Y.I1,{children:[!r&&d,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",justifyContent:"center",paddingBottom:8*!!r,paddingTop:r?0:s?16:32,paddingX:16*("left"!==t),children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:l,preset:a}),r&&(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:8,children:d}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:s?8:12,children:[(0,o.Y)(y,{align:t,post:l,preset:"d2-serif"}),(0,o.FD)(Y.Ye,{alignItems:"center",gap:24,justifyContent:"center",children:[(0,o.Y)(S,{align:t,post:l,preset:"lg-preview-byline"}),(0,o.Y)(k,{post:l})]})]})]})]})},mini:e=>{let{clampTitle:t,hideUfi:n,post:i,showDescription:l,showStar:r}=e;return(0,o.FD)(Y.Ye,{alignItems:"start",gap:16,children:[r&&(0,o.Y)("img",{alt:"star",height:24,src:(0,T.dJ9)("".concat((0,A.Ew)(),"/img/thefp/thefp-star.svg")),width:24}),(0,o.FD)(Y.I1,{gap:4,children:[(0,o.Y)(_,{clamp:t,post:i,preset:"h6-serif"}),l&&(0,o.Y)(y,{clamp:3,post:i,preset:"d4-serif"}),!n&&(0,o.Y)(Y.I1,{paddingY:4,children:(0,o.Y)(k,{post:i})}),(0,o.Y)(S,{post:i,preset:"sm-preview-byline"})]})]})},portrait:e=>{let{align:t="center",hideImage:n,post:i,titlePreset:l="h3-compressed"}=e,{isMobile:r}=(0,m.sM)(),a=!n&&(0,o.Y)(g.D,{className:"image-UumsF2",imageAspectRatio:3/4,imageWidth:1250,isBelowTheFold:!1,post:i});return(0,o.FD)(Y.Ye,{className:"container-lZcN1f",gap:24,children:[a,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",className:"text-WvW3re",justifyContent:"space-between",paddingBottom:0,paddingX:16*("left"!==t),children:[(0,o.FD)(Y.I1,{className:"contentWrapper-NnSZwz",justifyContent:"center",children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:i,preset:l,preventOrphans:!1}),(0,o.Y)(y,{align:t,post:i,preset:"d2-serif"})]}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:r?8:12,children:[(0,o.Y)(k,{post:i}),(0,o.Y)(S,{align:t,post:i,preset:"lg-preview-byline"})]})]})]})},square:F},B=e=>{var t,n,a,{linkToComments:h,post:m,testid:g,variant:v,onClick:f}=e,b=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{cropGravity:y,disableInteractive:_,pub:w,modifiedPosts:k,showPinForPostIds:C,utm:I,onClickPost:S,onUnpinPost:D}=(0,p.np)(),F=null!=(n=k[m.id])?n:m,P=!!(null==C?void 0:C.has(F.id)),x=null!=(a=null==(t=F.postTheme)?void 0:t.post_preview_crop_gravity)?a:y,T=N[v];if(!T)return console.warn("PostPreview: ".concat(v," not implemented")),null;let A=(0,E.U)({linkToComments:!!h,post:F,pub:w,utm:I});return(0,o.Y)(p.XL,{cropGravity:x,linkToComments:h,postPreviewUrl:A,children:(0,o.FD)(Y.I1,{className:s()("container-r9Uobv","post-preview-container"),"data-testid":g,position:"relative",radius:"sm",onClick:e=>{f&&f({event:e,post:F}),S&&S({event:e,post:F}),_||(0,u.V2)(A,{event:e})},children:[(0,o.Y)(T,(0,l._)((0,i._)({},b),{post:F})),P&&(0,o.FD)(Y.Ye,{bg:"white",className:"pinContainer-waOJ8r",padding:8,position:"absolute",radius:"xs",onClick:e=>{e.stopPropagation(),D({postId:F.id})},children:[(0,o.Y)(d.A,{className:"pinIcon-Ad2m5R",size:20}),(0,o.Y)(c.A,{className:"unpinIcon-vVpw5q",size:20})]})]})})}},95294:function(e,t,n){n.d(t,{D:()=>f});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(36534),s=n(59307),d=n(72880),c=n(68410),u=n(28528),p=n(91694),h=n(73066),m=n(76977),g=n(59294),v=n(56262),Y=n(39318);let f=e=>{var t,n,l,f,b;let{className:y,disableVideoHover:_,disableVideoHoverFade:w,forceShowPlayButton:k,hidePlaceholder:C,imageAspectRatio:I,imageWidth:S,isBelowTheFold:D,post:F,videoPlayIconVariant:P="default"}=e,{cropGravity:x,pub:T}=(0,u.np)(),{isMobile:A}=(0,c.sM)(),E=(0,o.useRef)(null),[N]=(0,g.TR)(E),B=!!F.videoUpload,M=!!(!B&&"podcast"===F.type),R=(0,v.getCoverImageUrl)(F);!R&&((null==(f=F.videoUpload)?void 0:f.thumbnail_id)?R=(0,Y.Pzx)(F.videoUpload):(null==(b=F.podcastUpload)?void 0:b.thumbnail_id)&&(R=(0,Y.Pzx)(F.podcastUpload,{post:F})));let L=S<=640;if(!R&&C)return null;let O=S||I?I:1.32,z=S||336,U=!!(null==(t=F.videoUpload)?void 0:t.live_stream_id);return(0,i.FD)("div",{ref:E,className:r()(y,"container-XQwt8c","post-preview-image",{[String("containerEmpty-v9lUvg")]:!R}),style:{aspectRatio:"".concat(O)},children:[(M||B||k)&&(0,i.Y)(m.Ye,{alignItems:"center",className:r()("fpPodcastOverlay-F_ObU8",{"fpPodcastOverlayHover-j8gEjt":!w}),inset:0,justifyContent:"center",position:"absolute",children:"default"===P?(0,i.Y)(a.A,{fill:"white",height:36,stroke:"none"}):(0,i.Y)("div",{className:"redPlayContainer-gIeqLa",children:(0,i.Y)(s.A,{fill:"white",height:A?12:20,stroke:"none"})})}),B&&(L?(0,i.Y)(p.A,{aspectRatio:(null==(n=F.videoUpload)?void 0:n.width)&&(null==(l=F.videoUpload)?void 0:l.height)?F.videoUpload.width/F.videoUpload.height:O,containerRef:E,post:F,size:S>320?"large":"medium"}):(0,i.Y)(h.A,{isHovered:N&&!_,post:F,pub:T})),R?(0,i.Y)(d.o,{alt:"",className:"image-wHmpR_",imageProps:O?{height:Math.round(z/O),smartCrop:!0,gravity:U?"auto":x}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:D?"lazy":void 0,maxWidth:z,src:R,style:{aspectRatio:"".concat(O)}}):null]})}},88218:function(e,t,n){n.d(t,{F:()=>r});var i=n(4006),l=n(63136);let r=e=>{let{align:t,children:n}=e;return(0,i.Y)(l.EY.B2,{align:t,color:"pub-primary-text",font:"pub-headings",weight:"bold",children:n})}},15040:function(e,t,n){n.d(t,{$o:()=>I,Ex:()=>f,Ff:()=>T,Pk:()=>P,w4:()=>D});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(14701),c=n(14647),u=n(20713),p=n(76977),h=n(81203),m=n(63136),g=n(49095),v=n(6986),Y=n(62614);let f=e=>{let t;var{content:n,children:l}=e,a=(0,r._)(e,["content","children"]);return t=n?"number"==typeof n?(0,o.Y)(k,(0,i._)({number:n},a)):"string"==typeof n?(0,o.Y)(w,(0,i._)({text:n},a)):(0,o.Y)(C,(0,i._)({icon:n},a)):(0,o.Y)(_,(0,i._)({},a)),(0,o.Y)(b,{badge:t,children:l})},b=e=>{let{children:t,badge:n}=e;return(0,o.FD)(p.pT,{position:"relative",className:v.A.container,children:[t,n]})},y=e=>{let{priority:t="primary",theme:n="accent",placement:i="top-right",shape:l="circle",radius:r="full",className:a,children:d,style:c}=e;return(0,o.Y)(p.pT,{alignItems:"center",justifyContent:"center",position:"absolute",userSelect:"none",sizing:"border-box",radius:r,className:s()(v.A.badge,v.A["placement_".concat(i)],v.A["shape_".concat(l)],Y.A["theme_".concat(n)],Y.A["priority_".concat(t)],a),style:c,children:d})},_=e=>{var{className:t}=e,n=(0,r._)(e,["className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},n),{className:s()(v.A.dot,t)}))},w=e=>{var{text:t,className:n}=e,a=(0,r._)(e,["text","className"]);let d=1===t.length;return(0,o.Y)(y,(0,l._)((0,i._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,n),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},k=e=>{var{number:t,className:n}=e,a=(0,r._)(e,["number","className"]);let d=1===t.toString().length;return(0,o.Y)(y,(0,l._)((0,i._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,n),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},C=e=>{var{icon:t,fillIcon:n,className:a,style:d}=e,c=(0,r._)(e,["icon","fillIcon","className","style"]);return(0,o.Y)(y,(0,l._)((0,i._)({},c),{className:s()(v.A.singleElement,n&&v.A.fillIcon,a),style:d,children:t}))},I=e=>{var{children:t,placement:n="bottom-right",tier:l}=e,a=(0,r._)(e,["children","placement","tier"]);let s=(0,o.Y)(S,(0,i._)({placement:n,tier:l},a));return l?(0,o.Y)(b,{badge:s,children:t}):(0,o.Y)(o.FK,{children:t})},S=e=>{var{userId:t,tier:n,className:a}=e,d=(0,r._)(e,["userId","tier","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},d),{className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserStatusSymbols,{tier:n,userId:t,size:"sm"})}))},D=e=>{var{children:t,placement:n="bottom-right"}=e,l=(0,r._)(e,["children","placement"]);let a=(0,o.Y)(F,(0,i._)({placement:n},l));return(0,o.Y)(b,{badge:a,children:t})},F=e=>{var{tier:t,fgOverride:n,bgOverride:l}=e,a=(0,r._)(e,["tier","fgOverride","bgOverride"]);return"author"===t?(0,o.Y)(C,(0,i._)({theme:"accent",fillIcon:!0,icon:(0,o.Y)(u.A,{size:12}),style:(0,i._)({},l&&{"--color-tag-bg":l}||{},n&&{"--color-tag-fg":n}||{})},a)):"founding"===t?(0,o.Y)(C,(0,i._)({theme:"default",priority:"secondary",icon:(0,o.Y)(d.A,{size:12})},a)):"paid"===t?(0,o.Y)(C,(0,i._)({theme:"default",priority:"secondary",icon:(0,o.Y)(c.A,{size:12})},a)):null},P=e=>{var{children:t}=e,n=(0,r._)(e,["children"]);return(0,o.Y)(b,{badge:(0,o.Y)(x,(0,i._)({},n)),children:t})},x=e=>{var{badge:t,placement:n="bottom-right",className:a}=e,d=(0,r._)(e,["badge","placement","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},d),{placement:n,className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserBadge,{userBadge:t,size:"sm"})}))},T=e=>{var{pub:t,children:n,placement:l="bottom-right"}=e,a=(0,r._)(e,["pub","children","placement"]);let s=(0,o.Y)(A,(0,i._)({pub:t,placement:l},a));return t?(0,o.Y)(b,{badge:s,children:n}):(0,o.Y)(o.FK,{children:n})},A=e=>{var{pub:t,className:n}=e,a=(0,r._)(e,["pub","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},a),{radius:"xs",className:s()(v.A.singleElement,v.A.empty,n),children:(0,o.Y)(h.Nq,{pub:t,size:16,radius:"xs"})}))}},58326:function(e,t,n){n.d(t,{N:()=>h});var i=n(4006),l=n(32485),r=n.n(l),o=n(71464),a=n(17402),s=n(84605),d=n(35369),c=n(76977),u=n(63136),p=n(98949);let h=e=>{let{onFileSelected:t,dropCTA:n,pickCTA:l,pickCTAHandler:h,acceptableTypes:m,loading:g,className:v,multiple:Y=!1,addMode:f=!1,onDrop:b,onPick:y,info:_}=e,[w,k]=(0,a.useState)(!1),C=(0,a.useRef)(null),{iString:I}=(0,s.GO)();l||h||(l=(0,i.Y)(d.$n,{size:"sm",priority:"secondary-outline",children:Y?I("Choose files"):I("Choose file")})),n||(n=I("Drop file here"));let S=e=>{e.preventDefault(),k(!0)},D=async e=>{var n,i,l,r;let o,a;if(e.preventDefault(),k(!1),(null==(i=e.dataTransfer)||null==(n=i.items)?void 0:n.length)>0){let t=Array.from(e.dataTransfer.items);for(let e of t)if("file"!==e.kind)return void alert(I("Please only drag files!"));o=e.dataTransfer.items[0].getAsFile(),a=t.map(e=>e.getAsFile())}else{if(!((null==(r=e.dataTransfer)||null==(l=r.files)?void 0:l.length)>0))return void alert(I("Something went wrong!"));o=e.dataTransfer.files[0],a=e.dataTransfer.files}Y?await t(a):await t(o),null==b||b(Y?a:o)};return(0,i.FD)(i.FK,{children:[(0,i.FD)(c.VP,{alignItems:"center",justifyContent:"center",gap:12,radius:"md",className:r()("dragArea-sMT00C",v,{"dragActive-g1aWbC":w,"test-drag-active":w}),onDragEnter:S,onDragOver:S,onDragLeave:e=>{e.preventDefault(),k(!1)},onDrop:D,"aria-label":I("File Picker"),onClick:()=>{if(!h){var e;null==(e=C.current)||e.click()}},children:[!f&&(0,i.Y)(o.A,{size:32,strokeWidth:1.5}),!p.Fr&&(0,i.Y)("p",{className:"text-ehFyYa",children:g?I("Loading..."):w?I("Release to upload"):f?I("Add another image"):(0,i.FD)(i.FK,{children:[n," ",I("or")," "]})}),(0,i.FD)(c.VP,{gap:4,children:[(0,i.Y)(u.EY.B3,{color:"primary",weight:"medium",children:f?I("Add another file"):I("Drag files here to upload")}),_?"string"==typeof _?(0,i.Y)(u.EY.B4,{color:"secondary",children:_}):_:null]}),l||(h?h(()=>{var e;null==(e=C.current)||e.click()}):null)]}),(0,i.Y)("input",{className:r()("file-P3qftv","file-picker-input"),ref:C,type:"file",name:"file",accept:m,multiple:Y,onInput:async e=>{let n=e.target,i=n.files;i&&i[0]&&(Y?await t(i):await t(i[0]),null==y||y(Y?i:i[0])),n.value=""}})]})}},49045:function(e,t,n){n.d(t,{Z:()=>m});var i=n(4006),l=n(38314),r=n(37455),o=n(32485),a=n.n(o),s=n(24914),d=n(12815),c=n(17028),u=n(65842),p=n(97684),h=n(24311);function m(e){let{options:t,value:n,onChange:o,placeholder:m,disabled:g,onCreate:v,isCreateOptionValid:Y}=e,{trimmedInputValue:f,filteredOptions:b,handleInputChange:y,showCreateOption:_,noResults:w,processSelectionValue:k,getDisplayValue:C}=(0,d.B)({options:t,onCreate:v,isCreateOptionValid:Y}),{refs:I,floatingStyles:S}=(0,l.we)(s.Oo),D=async e=>{k(e,o)};return(0,i.Y)(r.G,{value:n,onChange:D,disabled:g,nullable:!0,children:e=>{let{open:t}=e;return(0,i.FD)(i.FK,{children:[(0,i.FD)(c.fI,{ref:I.setReference,flex:"grow",alignItems:"center",position:"relative",children:[(0,i.Y)(r.G.Input,{className:a()("pencraft",h.A.input,h.A.inputText,h.A.trailing,g&&h.A.disabled),onChange:y,placeholder:m,displayValue:C}),(0,i.Y)(u.uk,{position:"trailing",pointerEvents:"auto",children:(0,i.Y)(s.TO,{})})]}),t&&(0,i.FD)(r.G.Options,{ref:I.setFloating,style:S,static:!0,className:a()(p.A.options,w&&p.A.empty),children:[b.slice(0,s.DT).map(e=>{let t=e.value===n;return(0,i.Y)(s.jO,{option:e,isSelected:t},String(e.value))}),_&&(0,i.Y)(s.vS,{inputString:f})]})]})}})}},72879:function(e,t,n){n.d(t,{M:()=>d});var i=n(4006),l=n(17402),r=n(76977),o=n(20500),a=n(76171),s=n(65842);let d=e=>{let{className:t,children:n,detail:r,label:o,alignment:a="vertical",error:s=!1}=e;return(0,i.Y)("vertical"===a?c:u,{className:t,detail:r,error:s,label:o,children:l.Children.map(n,e=>(0,l.isValidElement)(e)?(0,l.cloneElement)(e,{error:s}):e)})},c=e=>{let{children:t,className:n,detail:l,error:r,label:d}=e;return(0,i.FD)(s.A0,{className:n,children:[(0,i.Y)(a.JU,{weight:"semibold",color:r?"error":"primary",children:d}),t,l?(0,i.Y)(o.EE,{children:l}):r?(0,i.Y)(o.yn,{children:r}):null]})},u=e=>{let{children:t,className:n,detail:l,error:d,label:c}=e;return(0,i.FD)(r.Ye,{className:n,justifyContent:"space-between",alignItems:"start",gap:12,children:[(0,i.FD)(s.A0,{children:[c&&(0,i.Y)(a.JU,{children:c}),l&&(0,i.Y)(o.EE,{children:l}),d&&(0,i.Y)(o.yn,{children:d})]}),t]})}},77103:function(e,t,n){n.d(t,{E:()=>r});var i=n(86500),l=n(39318);let r=e=>{let{feedUrl:t,pub:n,post:r}=e;(0,i.u4)(i.qY.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:t}),document.location.href=(0,l.XV8)(null==n?void 0:n.subdomain,null==r?void 0:r.slug,{redirect:"app-marketing",source:"podcast-dropdown"})}},25758:function(e,t,n){n.d(t,{r:()=>b});var i=n(4006),l=n(70511),r=n(78834),o=n(17402),a=n(84605),s=n(89490),d=n(35369),c=n(76977),u=n(16993),p=n(57820),h=n(75303),m=n(21356),g=n(92563),v=n(83447);let Y=[{value:"card",label:"Card"},{value:"poster",label:"Poster"},{value:"split",label:"Split"},{value:"overlay",label:"Overlay"},{value:"title",label:"Title"},{value:"app",label:"App"},{value:"solid",label:"Solid"}],f={card:["composed","sticker","background"],poster:["composed","sticker","background"],split:["composed"],overlay:["composed"],title:["composed","sticker","background"],app:["composed"],solid:["composed"]};function b(e){var t;let{isOpen:n,onClose:h,post:b}=e,{iString:_}=(0,a.GO)(),[C,I]=(0,o.useState)("card"),[S,D]=(0,o.useState)("composed"),[F,P]=(0,o.useState)("stories"),[x,T]=(0,o.useState)("light"),[A,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{E(!1)},[C,S,F]),(0,o.useEffect)(()=>{f[C].includes(S)||D("composed")},[C,S]);let{width:N,height:B}=(0,g.S8)(F),M="/api/v1/press_kit/asset/".concat(b.id,"/").concat(C,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(x,"&contentType=text/html"),R="/api/v1/press_kit/asset/".concat(b.id,"/").concat(C,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(x,"&contentType=image/png"),L="".concat(null==(t=b.title)?void 0:t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_").concat(C,"_").concat(S,"_").concat(x,".png"),O="composed"===S?w:k,z=[{value:"stories",label:(0,i.Y)(m.s,{children:(0,i.Y)(l.A,{size:20})})},{value:"grid",label:(0,i.Y)(m.s,{children:(0,i.Y)(r.A,{size:20})})}],U=[{value:"light",label:(0,i.Y)(y,{backgroundColor:"var(--color-light-bg-primary)"})},{value:"dark",label:(0,i.Y)(y,{backgroundColor:"var(--color-dark-bg-primary)"})},{value:"accent",label:(0,i.Y)(y,{backgroundColor:"var(--color-accent)"})}];return(0,i.FD)(u.aF,{isOpen:n,onClose:h,width:500,children:[(0,i.Y)(u.rQ,{title:_("Social assets"),showClose:!0,onClose:h,showDivider:!0}),(0,i.Y)(u.cw,{children:(0,i.FD)(c.VP,{gap:20,children:[(0,i.FD)(c.fI,{justifyContent:"center",gap:12,children:[(0,i.Y)(m.T,{tabs:z,value:F,onChange:P}),"solid"===C&&(0,i.Y)(m.T,{tabs:U,value:x,onChange:T})]}),(0,i.Y)(c.ov,{children:(0,i.FD)(O,{style:{width:N,height:B},children:[!A&&(0,i.Y)(c.ov,{className:v.A.spinner,children:(0,i.Y)(p.y$,{})}),(0,i.Y)(s.az,{as:"iframe",src:M,onLoad:()=>{E(!0)},style:{width:N,height:B},border:"unset"})]})}),(0,i.Y)(c.ov,{children:(0,i.Y)(m.T,{tabs:Y,value:C,onChange:I})})]})}),(0,i.Y)(u.jl,{direction:"column",primaryButton:(0,i.Y)(d.vx,{priority:"primary",href:R,download:L,children:_("Download")})})]})}function y(e){let{backgroundColor:t}=e;return(0,i.Y)(_,{children:(0,i.Y)(s.az,{height:20,width:20,style:{backgroundColor:t}})})}let _=(0,h.I4)({height:20,width:20,radius:"xs",overflow:"hidden",border:"detail"}),w=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",bg:"secondary"}),k=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",className:v.A.transparent})},89129:function(e,t,n){n.d(t,{a:()=>r});var i=n(16291),l=n(82776);let r=function(e){let{stripeSub:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.A)(e).subtract((!t||t.cancel_at_period_end||"trialing"===t.status?0:"send_invoice"===t.billing?l.MANUAL_BILLING_DAYS_UNTIL_DUE:l.GRACE_PERIOD_DAYS)*24,"hour")}},45387:function(e,t,n){n.d(t,{JQ:()=>s,MS:()=>c,k6:()=>d});var i=n(90883),l=n(17402),r=n(90800),o=n(71783),a=n(2247);function s(){let e=(0,i.md)(o.c5);return(0,l.useMemo)(()=>e&&"content-block"===e.block.type?e.block.id:null,[e])}function d(e){let t=(0,i.md)(o.c5),n=(0,i.md)(o.SH);return(0,l.useMemo)(()=>{if(!e)return{isActive:null===t&&null===n,clickAction:"none",showOverlay:!1};let{selection:i,picker:l}=(0,a.U)(e);return(0,r.uz)(i,l,t,n)},[n,e,t])}function c(e,t){let n=(0,i.md)(o.c5);return(0,l.useMemo)(()=>!!n&&"content-block"===n.block.type&&n.block.id===e&&!!n.item&&"sidebar-module"===n.item.type&&n.item.moduleId===t,[e,t,n])}},90839:function(e,t,n){n.d(t,{sb:()=>g,Z4:()=>v,kT:()=>Y});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(84605),s=n(25112),d=n(45387),c=n(65670),u=n(90800),p=n(86503),h=n(99156);let m=(0,o.createContext)({previewBlockId:null,disabled:!1}),g=()=>(0,o.useContext)(m).previewBlockId,v=()=>(0,o.useContext)(m).disabled,Y=e=>{let{children:t,disabled:n,flushBottom:l,flushTop:g,layoutVariant:v,previewBlockId:Y}=e,{iString:f}=(0,a.GO)(),{isMobileEditor:b,isPreviewMode:y}=(0,h.T)(),_=(0,c.Cd)(),w=(0,c.kG)(),{isClickable:k,handleClick:C,isSelf:I,shouldHideOverlay:S,showOverlay:D}=function(e){let{activatePreviewBlock:t,deactivatePreviewBlock:n}=(0,h.T)(),{isActive:i,clickAction:l,showOverlay:r}=(0,d.k6)(e),a="activate"===l;return{isClickable:a,handleClick:(0,o.useCallback)(i=>{"none"===l||document.documentElement.classList.contains("theme-editor-dragging")||(i.stopPropagation(),"activate"===l?t(e):n())},[l,e,t,n]),isSelf:i,shouldHideOverlay:!a,showOverlay:r}}(Y),F=(0,u.tP)(Y),P=(0,o.useMemo)(()=>!!(null==_?void 0:_.item)&&"content-block"===Y.type&&"content-block"===_.block.type&&_.block.id===Y.contentBlockId,[_,Y]),x=(0,o.useMemo)(()=>({previewBlockId:Y,disabled:null!=n&&n}),[Y,n]);if(!y||n)return(0,i.Y)(m.Provider,{value:x,children:t});let T="content-block"===Y.type&&Y.contentBlockId===s.vK&&(null==w?void 0:w.type)==="block-picker",A=k&&!T,E=D&&!(I||T)&&(0,i.Y)(p.O,{flushBottom:l,flushTop:g,isActive:!1,isClickable:A,isHidden:S||b,label:f("Click to edit"),size:"md",onClick:C});return(0,i.Y)(m.Provider,{value:x,children:(0,i.FD)("div",{className:r()("container-QjkLOY",{[String("containerClickable-y3Lkil")]:A,[String("containerParentOfActive-ol8TRC")]:P,[String("threeColumn-Bky0HP")]:"three-column"===v}),id:F,onClick:T?void 0:C,children:[(0,i.Y)("div",{className:"content-SqAaA1",children:t}),(0,i.Y)("div",{className:"overlayWrapper-m1uuha","data-spotlight-target":!0,children:E})]})})}},86503:function(e,t,n){n.d(t,{O:()=>h});var i=n(4006),l=n(32485),r=n.n(l),o=n(32708),a=n(17402),s=n(35369),d=n(76977),c=n(81929);let u=e=>{let{children:t,className:n}=e;return(0,i.Y)(c.vw,{className:r()("label-XuJdtO",n),priority:"primary",theme:"accent",children:t})};var p=n(53168);let h=e=>{let{flushBottom:t,flushTop:n,isActive:l,isClickable:c=!0,isHidden:h,label:m,size:g,onClick:v,onRemove:Y}=e,f=(0,a.useCallback)(e=>{e.stopPropagation(),null==Y||Y(e)},[Y]);return(0,i.FD)(d.pT,{alignItems:"start",className:r()("overlay-eiZ8aN",{[String("flushBottom-kP5XHz")]:t,[String("flushTop-OmnylT")]:n,[String("hoverDisabled-gnX9_W")]:!c,[String("active-GDa56u")]:l,[String("sidebarModule-EK8DQl")]:"sm"===g}),cursor:"sm"===g?"grab":c?"pointer":"default",justifyContent:"center",opacity:h&&!l?0:void 0,pointerEvents:l?"none":"auto",position:"absolute",style:{zIndex:"sm"===g?p.AG+1:p.AG},onClick:v,children:[!l&&(0,i.Y)(u,{children:m}),Y&&!l&&(0,i.Y)(s.K0,{className:"removeButton-uczOyA",priority:"tertiary-accent",size:"xs",onClick:f,children:(0,i.Y)(o.A,{size:16})})]})}},26392:function(e,t,n){n.d(t,{o:()=>s});var i=n(4006),l=n(32485),r=n.n(l),o=n(99156);let a="fullHeight-adKNT4",s=e=>{let{children:t,fullHeight:n}=e,{isPreviewMode:l}=(0,o.T)();return l?(0,i.Y)("div",{className:r()("container-EyuCoW",{[String(a)]:n}),children:(0,i.Y)("div",{className:r()("content-ybzYkV",{[String(a)]:n}),children:t})}):t}},45122:function(e,t,n){n.d(t,{z:()=>p});var i=n(4006),l=n(46271),r=n(13074),o=n(24078),a=n(35369),s=n(76977),d=n(16993),c=n(63136),u=n(49807);let p=e=>{let{isOpen:t,utmSource:n,onClose:p,setShared:h}=e,{user:m}=(0,l.ur)();if(!m)return(0,i.Y)(i.FK,{});let g=(0,u.gYq)(m,{utm_source:n}),v="/img/profile_cards/card-bg-".concat(Math.ceil((null==m?void 0:m.id)?m.id%9+1:8*Math.random()),".png");return(0,i.FD)(d.aF,{isOpen:t,onClose:p,width:480,children:[(0,i.Y)(d.rQ,{showClose:!0,onClose:p}),(0,i.FD)(s.I1,{paddingX:32,paddingTop:16,paddingBottom:24,gap:20,children:[(0,i.FD)(s.I1,{alignItems:"center",gap:8,children:[(0,i.Y)(c.EY.H2,{weight:"semibold",children:"Invite your friends"}),(0,i.Y)(c.EY.B3,{align:"center",color:"secondary",children:"Share your profile to help your friends and followers find you on Substack."})]}),(0,i.FD)(s.I1,{justifyContent:"center",alignItems:"center",border:"detail",radius:"md",shadow:"lg",className:"card-qnekae",children:[(0,i.Y)(s.I1,{flex:"grow",className:"cardTop-yLKLMp",children:(0,i.Y)("img",{className:"cardOverlay-BwDmPh",src:(0,u.dJ9)(v,800)})}),(0,i.FD)(s.I1,{flex:"grow",alignSelf:"stretch",className:"cardBottom-eN66Vc",gap:16,paddingX:20,paddingBottom:20,paddingTop:0,children:[(0,i.FD)(s.pT,{justifyContent:"space-between",alignItems:"end",children:[(0,i.Y)(o.eu,{user:m,size:112,className:"cardAvatar-lmAiQ1"}),(0,i.Y)(a.$n,{priority:"secondary",rounded:!0,className:"fakeButton-UNdCaV",children:"Subscribe"})]}),(0,i.FD)(s.I1,{flex:"grow",gap:8,children:[(0,i.Y)(c.EY.H2,{children:m.name}),(0,i.Y)(c.EY.Meta,{className:"cardUrl-Ccl_69",size:12,color:"substack",children:g.replace(/^(http|https):\/\//,"").replace(/\?.*$/,"")}),m.bio&&(0,i.Y)(c.EY.B4,{color:"secondary",children:m.bio})]})]})]}),(0,i.Y)(c.EY.Meta,{align:"center",children:"Share via"}),(0,i.Y)(r.lE,{shareUrl:g,shareEventType:"profile",shareText:"Subscribe to me on Substack",itemKey:m.id,onShare:()=>{h&&h()}})]})]})}},504:function(e,t,n){n.d(t,{KY:()=>k,Q$:()=>d,Qb:()=>u,Si:()=>b,aK:()=>y,fP:()=>p,n5:()=>g,qx:()=>w,rX:()=>f,tR:()=>c});var i=n(69277),l=n(70408),r=n(62193),o=n.n(r),a=n(27749),s=n(86500);function d(e,t){var n;let{extraEventProps:i={},tabId:l,primaryItem:r,isLoggedIn:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="trackingParameters"in e&&"item_entity_key"in e.trackingParameters?null==(n=e.trackingParameters)?void 0:n.item_entity_key:null;a&&o&&fetch("/api/v1/reader/feed/".concat(a,"/seen"),{method:"POST"}),Y("seen",e,t,{extraEventProps:i,tabId:l,primaryItem:r})}function c(e,t,n){let{extraEventProps:r={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("seen_for_duration",e,t,{extraEventProps:(0,l._)((0,i._)({},r),{timeVisible:n}),tabId:o,primaryItem:a})}function u(e,t,n){let{extraEventProps:r={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("clicked",e,t,{extraEventProps:(0,l._)((0,i._)({clicked_element:n},r),{tabId:o,primaryItem:a})})}function p(e,t){let{extraEventProps:n={},tabId:r,primaryItem:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y("swiped",e,t,{extraEventProps:(0,l._)((0,i._)({},n),{tabId:r,primaryItem:o})})}function h(e){var t,n,i,l,r,o,a,s,d,c,u,p,h,m,g;let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{primaryItem:Y}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{item_primary_entity_key:Y&&"entity_key"in Y?Y.entity_key:"entity_key"in e?e.entity_key:"",item_entity_key:"entity_key"in e?e.entity_key:"",item_type:e.type,item_content_user_id:"comment"in e?e.comment&&e.comment.user_id?e.comment.user_id:0:"post"in e?null!=(h=null==(n=e.post.publishedBylines)||null==(t=n[0])?void 0:t.id)?h:e.publication.author_id:0,item_content_timestamp:"comment"in e&&(null==(i=e.comment)?void 0:i.date)?new Date(e.comment.date).toISOString():"post"in e&&(null==(l=e.post)?void 0:l.post_date)?new Date(e.post.post_date).toISOString():"community_post"in e&&(null==(r=e.community_post)?void 0:r.created_at)?new Date(e.community_post.created_at).toISOString():null,item_context_type:"context"in e?e.context.type:"",item_context_type_bucket:"context"in e&&null!=(m=e.context.typeBucket)?m:"",item_context_timestamp:new Date("context"in e?e.context.timestamp:new Date).toISOString(),item_context_user_id:"context"in e?null==(o=e.context.users[0])?void 0:o.id:void 0,item_context_user_ids:"context"in e&&(null!=(g=null==(a=e.context.users)?void 0:a.length)?g:0)>0?e.context.users.map(e=>{let{id:t}=e;return t}):[],item_publication_id:"publication"in e?null==(s=e.publication)?void 0:s.id:void 0,item_post_id:null==(d=e.post)?void 0:d.id,item_comment_id:null==(c=e.comment)?void 0:c.id,item_can_reply:!("canReply"in e)||e.canReply,item_source:"frontend",item_model_rank:null,item_model_score:null,tab_id:null!=v?v:void 0,item_module_id:"id"in e?e.id:void 0,followed_user_count:0,subscribed_publication_count:0,is_following:!1,is_explicitly_subscribed:!1,trending_topic_id:"trendingTopic"in e?null==(u=e.trendingTopic)?void 0:u.id:void 0,trending_topic_query:"trendingTopic"in e?null==(p=e.trendingTopic)?void 0:p.query:void 0}}function m(e,t){let{primaryItem:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"comment"===e.type||"post"===e.type||"featuredCollection"===e.type||"featuredPublication"===e.type?o()(e.trackingParameters)?h(e,t,{primaryItem:n}):e.trackingParameters:h(e,t,{primaryItem:n})}function g(e){let{primaryItem:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l._)((0,i._)({},e),{trackingParameters:h(e,null,{primaryItem:t})})}n(40659),n(82776);let v=new Map([["featuredCollection","featured_collection"],["featuredPublication","featured_publication"]]);function Y(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=r?r:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_ITEM_SEEN:"seen_for_duration"===e?s.qY.FEED_ITEM_SEEN_FOR_DURATION:"swiped"===e?s.qY.FEED_ITEM_SWIPED:s.qY.FEED_ITEM_CLICKED,(0,i._)({surface:n,tabId:r,module:d},a,l))}function f(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=r?r:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_MODULE_ITEM_SEEN:s.qY.FEED_MODULE_ITEM_CLICKED,(0,i._)({surface:n,tabId:r,module:d},a,l))}function b(e,t){let{extraEventProps:n={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_("seen",e,t,{extraEventProps:n})}function y(e,t,n){let{extraEventProps:l={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_("clicked",e,t,{extraEventProps:(0,i._)({clicked_element:n},l)})}function _(e,t,n){var l,r,o;let{extraEventProps:a={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,s.u4)("seen"===e?s.qY.FEED_USER_SUGGESTION_SEEN:s.qY.FEED_USER_SUGGESTION_CLICKED,(0,i._)({suggested_user_id:t.user.id,suggested_publication_id:null!=(r=null==(l=t.publication)?void 0:l.id)?r:null,suggestion_source:null!=(o=t.source)?o:null,surface:n},t.trackingParameters,a))}function w(e,t){let{tabId:n,noteId:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.u4)(s.qY.FEED_HIDDEN_ATTACHMENT_SHOWN,{attachmentId:e,reason:t,tabId:n,noteId:i})}function k(e){let{props:t,isModuleItem:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,a.PK)(),r=n?f:Y;return n=>{r("clicked",e,l,{extraEventProps:(0,i._)({clicked_element:n},t)})}}},9761:function(e,t,n){n.d(t,{QH:()=>I});var i=n(69277),l=n(70408),r=n(4006),o=n(17402),a=n(45773),s=n(80697),d=n(46271),c=n(82772),u=n(24078),p=n(35369),h=n(76977);n(22602);var m=n(81203),g=n(63136),v=n(2548),Y=n(85050),f=n(32848),b=n(49095),y=n(73030),_=n(96301),w=n(39318),k=n(49807),C=n(57324);function I(e){let{items:t,surface:n,page_num:a=0,focusedPubId:s,onClickItem:d,onItemFirstVisible:c}=e,u=(0,f.n7)(),p=a*y.Ew,h=new Map(t.map(e=>{var t,n;let{publication:i}=e;return[i.id,null==(n=u.result)||null==(t=n.subscriptions)?void 0:t.some(e=>e.publication_id===i.id&&e.membership_state&&(0,_.KB)(e.membership_state))]}));return(0,r.Y)(v.I1,{gap:8,children:t.map((e,t)=>{var r;return(0,o.createElement)(S,(0,l._)((0,i._)({},e),{key:e.publication.id,isSubscribed:null!=(r=h.get(e.publication.id))&&r,rank:t+p+1,surface:n,isFocused:s===e.publication.id,onClick:d,onFirstVisible:c}))})})}function S(e){let{user:t,publication:n,rank:i,isSubscribed:l,surface:a,isFocused:s,onClick:p,onFirstVisible:Y,trackingParameters:f}=e,y=(0,d.Jd)(),_=(0,o.useRef)(null),C=!!y&&y.id===(null==t?void 0:t.id);return(0,c.S8)(_,()=>{null==Y||Y({publication:n,rank:i,trackingParameters:f})}),(0,r.Y)(v.Qe,{id:n.id.toString(),bg:C||s?"accent-orange":void 0,href:t?(0,k.gYq)(t):(0,w.$_T)(n),onClick:()=>p({publication:n,rank:i,trackingParameters:f}),children:(0,r.FD)(h.pT,{justifyContent:"space-between",flex:"grow",alignItems:"center",paddingX:12,ref:_,children:[(0,r.FD)(h.pT,{gap:16,alignItems:"center",children:[(0,r.Y)(g.EY.Digit,{minWidth:16,children:i}),t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(u.eu,{user:t,size:40}),(0,r.FD)(v.I1,{children:[(0,r.FD)(h.pT,{alignItems:"center",gap:4,children:[(0,r.Y)(g.EY.B3,{weight:"semibold",children:t.name}),(0,r.Y)(b.UserStatusSymbols,{tier:t.bestseller_tier,status:t.status,userId:t.id,size:"sm"})]}),(0,r.Y)(g.EY.B4,{color:"secondary",children:n.name})]})]}),!t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(m.Nq,{radius:"full",pub:n,size:32}),(0,r.Y)(v.I1,{children:(0,r.Y)(g.EY.B3,{weight:"bold",children:n.name})})]})]}),!C&&(0,r.Y)(D,{pub:n,user:t,surface:a,isSubscribed:l,currentUser:y})]})})}function D(e){let{pub:t,user:n,surface:i,isSubscribed:l,currentUser:o}=e,d=(0,f.n7)(),c=(0,Y.s)({surface:i})(t);return l?(0,r.Y)(h.pT,{alignItems:"center",justifyContent:"center",padding:8,children:(0,r.Y)(a.A,{size:16,stroke:"var(--color-fg-tertiary)"})}):(0,r.Y)(p.K0,{priority:"secondary",size:"sm",newTab:!0,href:(0,w.eV6)(t,{addBase:!0,user:o,utm_source:C.VU.substack,utm_medium:C.Jn.web,utm_campaign:C._9.reader2}),onClick:e=>{if(e.stopPropagation(),n){let e="visibilitychange",n=()=>{"visible"===document.visibilityState&&(document.removeEventListener(e,n),d.refetchPublication(t.id))};document.addEventListener(e,n)}c(e)},children:(0,r.Y)(s.A,{size:20})})}},85050:function(e,t,n){n.d(t,{s:()=>o}),n(17402);var i=n(46271),l=n(86500),r=n(46453);function o(e){let{surface:t}=e,n=(0,i.Jd)(),{onboardingModal:o}=(0,r.eE)();return(e,i)=>r=>{if(!e)return void console.warn("No publication provided to usePubOnboardingHandler handler");if(!n){if(!o)return;r.preventDefault(),i?o.openForPub(e,i):o.openToPubSignup(e);return}(0,l.fN)(e,t)}}},28916:function(e,t,n){n.d(t,{I:()=>I,w:()=>S});var i=n(69277),l=n(4006),r=n(15977),o=n(50180),a=n(17402),s=n(71941),d=n(84605),c=n(46271),u=n(12501),p=n(68349),h=n(35369),m=n(76977),g=n(88774),v=n(16993),Y=n(63136),f=n(36372),b=n(5180),y=n(2481),_=n(90554),w=n(70189),k=n(18947),C=n(49807);function I(e){var t,n;let{pub:h,post:m,comment:v,feedItem:Y,onRestack:I,tabId:D,surface:F,renderWithoutUser:P=!1}=e,x=(0,c.Jd)(),T=(0,f.d)(),A=(!!x||P)&&!(null==h?void 0:h.hide_post_restacks)&&!(null==h?void 0:h.invite_only),E=!!(null==(t=v||m)?void 0:t.restacked),N=(null==(n=v||m)?void 0:n.restacks)||0,B=(0,b.wA)(),M=(0,y.NP)(),[R,L]=(0,a.useState)(!1),O=(0,u.st)({pathname:"/api/v1/restack/feed"}),{iString:z}=(0,d.GO)(),{nuxModal:U,showRestackNux:q}=S(v&&!v.post_id?"note":v?"comment":"post"),H=async()=>{var e,t;if(!x)return void L(!0);null==I||I(!0);let n=await O.refetch({method:"POST",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D,surface:F}});if(n instanceof Error){null==I||I(!1),alert((0,p.uX)(n));return}if(T.popToast(()=>(0,l.Y)(f.y,{text:n.comment?z("Note restacked"):z("Post restacked"),Icon:r.A,cta:z("View now"),href:(0,w.oT)()})),n.comment)B({type:"comment_restack",payload:{commentId:n.comment.id,isRestacked:!0}});else{B({type:"post_restack",payload:{postId:n.post.id,isRestacked:!0}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:n.post.id,mediaClipId:e,isRestacked:!0}})}q()},W=async()=>{var e,t;null==I||I(!1);let n=await O.refetch({method:"DELETE",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D}});if(n instanceof Error){null==I||I(!0),alert((0,p.uX)(n));return}if(T.popToast(()=>(0,l.Y)(f.y,{text:z("Restack undone"),Icon:o.A})),v)B({type:"comment_restack",payload:{commentId:v.id,isRestacked:!1}});else if(m){B({type:"post_restack",payload:{postId:m.id,isRestacked:!1}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:m.id,mediaClipId:e,isRestacked:!1}})}},G=async()=>{if(!x)return void L(!0);try{var e;await M.open((0,i._)({feedItem:Y,restackUrl:v?(0,k.XB)(m,v,h):(0,C.wu9)(h,m),tabId:D,surface:F},(null==Y?void 0:Y.type)==="post"&&{mediaClipId:null==(e=Y.mediaClip)?void 0:e.id})),q()}catch(e){}};return(0,_.y)({name:"restack-comment",action:()=>{A&&G()}}),{canRestack:A,isRestacked:E,restacks:N,nuxModal:U,loggedOutRestackAttempt:R,menuItems:[E?(0,l.Y)(g.Dr,{leading:(0,l.Y)(o.A,{}),onClick:W,children:z("Undo restack")}):(0,l.Y)(g.Dr,{leading:(0,l.Y)(r.A,{}),onClick:H,children:z("Restack")}),(0,l.Y)(g.Dr,{leading:(0,l.Y)(s.A,{}),onClick:G,children:z("Restack with a note")})]}}function S(e){let t=function(e){let{entityType:t}=e,[n,i]=(0,a.useState)(!1),r=()=>{i(!1)};return{open:()=>{i(!0)},element:(0,l.Y)(v.aF,{isOpen:n,onClose:r,children:(0,l.Y)(D,{onClose:r,entityType:t})})}}({entityType:e}),n=(0,u.st)({pathname:"/api/v1/feed/has-restacked",auto:!1,cacheTtl:1/0}),i=async()=>{var e;let i=null!=(e=n.result)?e:await n.refetch();i instanceof Error||(null==i?void 0:i.hasRestacked)!==!1||(t.open(),n.setResult({hasRestacked:!0}))};return{nuxModal:t.element,showRestackNux:i}}function D(e){let{onClose:t,entityType:n}=e,{iString:i}=(0,d.GO)();return(0,l.FD)(m.I1,{paddingX:16,children:[(0,l.Y)(m.pT,{justifyContent:"center",paddingTop:32,paddingBottom:24,children:(0,l.Y)(r.A,{size:40,stroke:"var(--color-fg-primary)"})}),(0,l.FD)(m.I1,{gap:12,children:[(0,l.FD)(Y.EY.H3,{align:"center",children:["comment"===n&&i("You restacked a comment"),"note"===n&&i("You restacked a note"),"post"===n&&i("You restacked a post")]}),(0,l.FD)(Y.EY.B3,{color:"secondary",align:"center",children:["comment"===n&&i("Restack comments that inspire you to share them with more people."),"note"===n&&i("Restack notes that inspire you to share them with more people."),"post"===n&&i("Restack posts that inspire you to share them with more people.")," ",i("Subscribers can see your restacks in the Notes tab and on your profile.")]})]}),(0,l.FD)(m.I1,{paddingBottom:16,paddingTop:20,gap:8,children:[(0,l.Y)(h.$n,{priority:"primary",href:(0,w.oT)(),children:i("View now")}),(0,l.Y)(h.$n,{priority:"secondary-outline",onClick:t,children:i("OK")})]})]})}},90554:function(e,t,n){n.d(t,{y:()=>l});var i=n(17402);function l(e){let{name:t,action:n}=e;(0,i.useEffect)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){n();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},60816:function(e,t,n){n.d(t,{l:()=>a});var i=n(4006),l=n(43954),r=n(89490);let o={apple_podcasts:"/img/shows_app_icons/apple_podcasts.svg?v=1",overcast:"/img/shows_app_icons/overcast.svg?v=1",pocket_casts:"/img/shows_app_icons/pocket_casts.svg?v=1",rss:"/img/shows_app_icons/rss.svg?v=1",spotify:"/img/shows_app_icons/spotify.svg?v=1",spotify_for_paid_users:"/img/shows_app_icons/spotify.svg?v=1",spotify_open_access:"/img/shows_app_icons/spotify.svg?v=1",substack:"/img/shows_app_icons/substack.svg?v=1",youtube:"/img/shows_app_icons/youtube.svg?v=1",youtube_music:"/img/shows_app_icons/youtube_music.svg?v=1"},a=e=>{let{platformKey:t,size:n=20}=e;return"email"===t?(0,i.Y)(l.A,{size:n,stroke:"var(--color-fg-secondary)"}):(0,i.Y)(r.az,{width:n,height:n,className:"image-aVeTJg",style:{backgroundImage:"url(".concat(o[t],")")}})}},66728:function(e,t,n){n.d(t,{b:()=>b});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(15734),s=n.n(a),d=n(36233),c=n(84605),u=n(86500),p=n(68349),h=n(88218),m=n(76977),g=n(63136),v=n(77103),Y=n(60816),f=n(7755);let b=e=>{let{description:t,feedUrl:n,pub:l,post:r,section:o,showLinks:a,user:s}=e,{iString:d}=(0,c.GO)();return(0,i.FD)(m.I1,{gap:t?8:16,"data-testid":"shows-listen-on",role:"region","aria-label":d("Listen on"),"aria-hidden":!0,children:[(0,i.Y)(h.F,{children:d("Listen on")}),t&&(0,i.Y)(g.EY.B3,{color:"pub-secondary-text",paddingBottom:8,children:t}),(0,i.FD)(m.Ye,{gap:8,wrap:"wrap",children:[r&&(0,i.Y)(y,{platformKey:"substack",label:d("Substack App"),onClick:()=>{(0,v.E)({feedUrl:n,pub:l,post:r})}}),(0,f.RM)({feedUrl:n,isApple:(0,p.cX)(),isMobile:!1,showLinks:a,user:s,render:e=>{let{label:t,key:n,onClick:l}=e;return(0,i.Y)(y,{label:t,platformKey:n,onClick:l})}}),(null==s?void 0:s.is_subscribed)&&(0,i.Y)(_,{section:o})]})]})},y=e=>{let{disabled:t,label:n,platformKey:l,onClick:o}=e;return(0,i.FD)(m.Ye,{alignItems:"center",bg:"secondary",className:r()("listen-on-item-yiZDJR",{"listen-on-item--disabled-S4EzSi":t}),gap:8,paddingX:12,radius:"sm",onClick:t?void 0:o,children:[(0,i.Y)(m.pT,{opacity:t?40:100,children:(0,i.Y)(Y.l,{platformKey:l})}),(0,i.Y)(g.EY.B4,{weight:"semibold",color:"pub-secondary-text",opacity:t?80:100,nowrap:!0,children:n})]})},_=e=>{let{section:t}=e,{iString:n}=(0,c.GO)(),[l,r]=(0,o.useState)(!1),a=async()=>{try{(0,u.u4)(u.qY.PODCAST_EMAIL_LINK_CLICKED),await s().post("/api/v1/subscription/send_podcast_email").send({section_id:null==t?void 0:t.id}),(0,d.Ay)(n("Email sent")),r(!0)}catch(e){(null==e?void 0:e.status)===429?((0,d.Ay)(n("Email already sent")),r(!0)):(0,d.Ay)(n("Something went wrong sending email"))}};return(0,i.Y)(y,{disabled:l,label:l?n("Email sent"):n("Email mobile setup link"),platformKey:"email",onClick:()=>{a()}})}},79564:function(e,t,n){n.d(t,{H:()=>tR});var i=n(69277),l=n(70408),r=n(4006),o=n(17402),a=n(15734),s=n.n(a),d=n(69715),c=n(71328),u=n(6212),p=n(13918),h=n(41935),m=n(86227),g=n(46360),v=n(85478),Y=n(46271),f=n(95064),b=n(26289),y=n(86500),_=n(74894),w=n(68349),k=n(68410),C=n(76977),I=n(45994);let S=e=>{let{visible:t,className:n,style:i={}}=e,[l,o]=(0,I.J0)(!1),[a,s]=(0,I.J0)(t);return((0,I.vJ)(()=>{t?(s(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})})):o(!1)},[t]),(0,I.vJ)(()=>{t&&s(!0)},[t]),a)?(0,r.Y)("div",{className:"".concat("backdrop-_YQndu"," ").concat(l?"backdropVisible-eL7zZp":"backdropHidden-pg_NJc"," ").concat(n),onTransitionEnd:function(){t||s(!1)},style:i}):null};var D=n(59294),F=n(32485),P=n.n(F),x=n(27747),T=n(4016);let A=e=>{let{audioPlayerRef:t,hasPaywall:n,feedUrl:i,isPrivateFeed:l,isServingFreePodcastUrl:o,post:a,pub:s,section:d,user:c,onChange:u,onCommentsClick:p,freeSignup:m,reaction_token:g}=e,{isMobile:v}=(0,k.sM)(),Y=(0,T.lu)({pub:s});return(0,r.Y)("div",{className:P()("player-wrapper-outer-eAOhcD",{"playerWrapperOuterFP-bKWoVB":Y}),children:(0,r.Y)("div",{className:P()("player-wrapper-inner-KUdif0",{"playerWrapperInnerFP-Cm0O_q":Y}),children:(0,r.Y)(x.Uz,{audioPlayerRef:t,explicitHeight:Y?340:void 0,feedUrl:i,hasPaywall:n,isPrivateFeed:l,isServingFreePodcastUrl:o,post:a,pub:s,radius:Y&&v?"none":void 0,section:d,user:c,freeSignup:m,ufiComponent:Y?null:(0,r.Y)(h.xx,{isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:a,pub:s,style:"large-on-dark",user:c,onChange:u,onCommentsClick:p}),reaction_token:g})})})};var E=n(20674),N=n(13950),B=n(84236),M=n(63446),R=n(82180),L=n(36027),O=n(7903),z=n(15894),U=n(37659),q=n(28528),H=n(16074),W=n(63136),G=n(69308),K=n(73164),V=n(84605),j=n(35369),X=n(16993),J=n(75303),Z=n(36372),Q=n(77103),$=n(60816),ee=n(7755),et=n(98949);let en=e=>{let{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:a,showLinks:s,user:d,onTranscriptClick:c}=e,{iString:u}=(0,V.GO)(),[p,h]=(0,o.useState)(!1);return(0,r.FD)(r.FK,{children:[(0,r.FD)(C.Ye,{gap:8,overflowX:"auto",className:"horizontalScrolling-CUpSMl",children:[(0,r.Y)(j.$n,{leading:(0,r.Y)(K.A,{height:18,style:{stroke:"none"}}),priority:"secondary",onClick:()=>(0,Q.E)({feedUrl:t,pub:a,post:l}),children:u("Open in app")}),c&&(0,r.Y)(j.$n,{leading:(0,r.Y)(G.A,{size:20}),priority:"secondary",onClick:c,children:u("Transcript")}),!n&&i&&(0,r.Y)(j.$n,{priority:"secondary",onClick:()=>{h(!0)},children:u("Listen via...")})]}),(0,r.Y)(ei,{isModalOpen:p,setIsModalOpen:h,feedUrl:t,showLinks:s,user:d})]})},ei=e=>{let{isModalOpen:t,setIsModalOpen:n,feedUrl:i,showLinks:l,user:o}=e,{iString:a}=(0,V.GO)(),s=(0,Z.d)();return(0,r.FD)(X.aF,{isOpen:t,onClose:()=>n(!1),children:[(0,r.Y)(X.rQ,{title:a("Listen via..."),description:a("Select your favorite podcast app from the list below."),showClose:!0,showDivider:!0,onClose:()=>n(!1)}),(0,r.Y)(X.cw,{children:(0,r.Y)(C.I1,{gap:20,children:l&&(0,ee.RM)({feedUrl:i,isApple:(0,et.aR)(),isMobile:!0,showLinks:l,user:o,render:e=>{let{key:t,label:n,url:i,onClick:l}=e;return(0,r.Y)(el,{platformKey:t,label:n,url:i,onClick:l})}})})}),(0,r.Y)(X.jl,{direction:"column",secondaryButton:(0,r.Y)(j.$n,{priority:"secondary",onClick:()=>{s.popToast(()=>(0,r.Y)(Z.y,{text:a("Copied link to clipboard")})),(0,w.lW)(i)},children:a("Copy RSS feed URL")})})]})},el=e=>{let{platformKey:t,label:n,url:i,onClick:l}=e;return(0,r.Y)(J.AE,{href:i,children:(0,r.FD)(C.Ye,{alignItems:"center",gap:12,onClick:l,children:[(0,r.Y)($.l,{platformKey:t,size:40}),(0,r.Y)(W.EY.B3,{weight:"bold",children:n})]})})};var er=n(39318),eo=n(49807),ea=n(96063);let es=e=>{let{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:o,magicToken:a,section:s,showLinks:d,user:c,onChange:u,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g}=e,{isMobile:v}=(0,k.sM)();return(0,T.lu)({pub:o})?(0,r.Y)(ed,{post:l,pub:o,section:s,user:c}):(0,r.Y)(N.DH,{children:(0,r.FD)(C.I1,{gap:16,children:[v&&(0,r.Y)(en,{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:o,showLinks:d,user:c,onTranscriptClick:g}),v&&(0,r.Y)(B.pJ,{align:"center",direction:"column",gap:8,paddingY:8,post:l,pub:o,section:s,textField:"episode_short_text"}),(0,r.FD)(C.I1,{gap:8,children:[(0,r.Y)(W.EY.H2,{color:"pub-primary-text",font:"pub-headings",dir:"auto",className:ea.A.title,children:l.title}),l.subtitle&&(0,r.Y)(W.EY.B2,{color:"pub-secondary-text",font:"pub-headings",weight:"regular",dir:"auto",className:ea.A.subtitle,children:l.subtitle})]}),(0,r.Y)(E.D,{variant:"shows",post:l,pub:o}),!v&&(0,r.Y)(h.bW,{post:l,pub:o,user:c,onChange:u,postReactionToken:a,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g,position:"shows-episode-player"})]})})},ed=e=>{var t;let{post:n,pub:i,section:l,user:o}=e,{isMobile:a}=(0,k.sM)(),s=(0,er.t6y)({pub:i,section:l}),d=!!n.videoUpload,c=null!=(t=null==l?void 0:l.is_podcast)&&t,u=c||!d;return(0,r.Y)(q.XL,{pub:i,children:(0,r.Y)(N.DH,{children:(0,r.FD)(C.I1,{gap:24,children:[(0,r.FD)(C.I1,{gap:12,children:[(0,r.FD)(C.I1,{gap:8,children:[l&&(0,r.Y)(M.v,{alignSelf:"start",href:u?s:(0,eo.Dor)(i,{section:l}),variant:"tertiary",size:"md",leadingIcon:"chevron-left",children:"View all episodes"}),(0,r.Y)(z.T,{preset:"h4-serif",children:n.title}),(0,r.Y)(L.E,{post:n})]}),n.subtitle&&(0,r.Y)(z.T,{preset:"d3-serif",children:n.subtitle})]}),u&&(0,r.FD)(C.pT,{alignItems:a?"start":"center",direction:a?"column":"row",gap:24,justifyContent:"space-between",children:[(0,r.Y)(R.Z,{pub:i,section:l,user:o}),l&&(0,r.Y)(O.S,{pub:i,section:l,user:o,isPodcastOrVideo:!0})]}),d&&!c&&l&&(0,T.lu)({pub:i})&&(0,r.FD)(C.pT,{direction:a?"column":"row",justifyContent:"space-between",children:[(0,r.Y)(U.m,{pub:i,section:l}),(0,r.Y)(O.S,{pub:i,section:l,user:o,isPodcastOrVideo:!0})]}),(0,r.Y)(H.c,{})]})})})};var ec=n(88218),eu=n(24078),ep=n(15040);let eh=e=>{let{bylines:t,variant:n}=e;return(0,r.Y)(C.pT,(0,l._)((0,i._)({},"shows"===n?{direction:"row",gap:12,wrap:"wrap"}:{direction:"column",gap:24}),{children:t.map(e=>(0,r.FD)(C.Ye,{alignItems:"center",gap:8,children:[(0,r.Y)(ep.$o,{tier:e.bestseller_tier,children:(0,r.Y)(eu.tp,{user:e,utmSource:"author-byline-face-podcast",size:32})}),(0,r.FD)(C.I1,{children:[(0,r.Y)(W.EY.B4,{color:"pub-primary-text",children:e.name}),e.primaryPublicationName&&(e.primaryPublicationUrl?(0,r.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes"," ",(0,r.Y)("a",{style:{textDecoration:"none"},href:e.primaryPublicationUrl,children:I18N.p(e.primaryPublicationName)})," ",(0,r.Y)("a",{href:"".concat(e.primaryPublicationUrl,"/subscribe"),children:"Subscribe"})]}):(0,r.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes ",I18N.p(e.primaryPublicationName)]}))]})]}))}))},em=e=>{let{bylines:t,isStandaloneVideo:n,eligibleForPodcast:i}=e,{iString:l}=(0,V.GO)();return(0,r.FD)(C.I1,{gap:16,"aria-label":"Appears in episode",role:"region",children:[(0,r.Y)(ec.F,{children:l(n||!i?"Authors":"Appears in episode")}),(0,r.Y)(eh,{bylines:t,variant:"shows"})]})};var eg=n(79391),ev=n(16831),eY=n(91496);let ef=e=>{let{post:t,pub:n,section:i,user:l,isStandaloneVideo:o}=e,{title:a,description:s,url:d}=(0,ee.ed)({pub:n,section:i,useSection:o});return(0,r.FD)(C.I1,{border:"detail-themed",className:"container-MuztBl",gap:24,paddingX:16,paddingY:24,radius:"md",shadow:"lg",onClick:()=>{window.location.href=d},children:[(0,r.FD)(C.I1,{gap:8,alignItems:"center",children:[(0,r.Y)(eY.M,{post:t,pub:n,section:i,useSection:o}),a&&(0,r.Y)(ec.F,{align:"center",children:a}),(0,T.s7)({pub:n,includeTheRampart:!0})&&(0,r.Y)(C.Ye,{alignItems:"center",gap:8,children:(0,T.ot)({sectionId:null==i?void 0:i.id}).map(e=>(0,r.Y)(ev.b,{medium:e}))}),s&&(0,r.FD)(C.I1,{gap:8,children:[s.split("\n").map(e=>(0,r.Y)(W.EY.B4,{className:"description-ij0plp",color:"pub-secondary-text",align:"center",children:e})),(0,r.Y)("span",{hidden:!0,"data-testid":"podcast-description",children:s})]})]}),!(null==l?void 0:l.is_subscribed)&&(0,r.Y)("div",{className:"subscribe-container-_pmqCv",onClick:e=>{e.stopPropagation()},children:(0,r.Y)(eg.A,{expectTruncation:!0,pub:n,source:"episode-page-sidebar",user:l})})]})};var eb=n(66728),ey=n(98002);let e_=e=>{let{isStandaloneVideo:t,pub:n,recentEpisodes:i,user:l}=e,{iString:o}=(0,V.GO)(),{isMobile:a}=(0,k.sM)();return(0,r.Y)(q.XL,{pub:n,user:l,children:(0,r.FD)(C.I1,{gap:a?12:8,"aria-label":o("Recent episodes"),role:"region",children:[(0,r.Y)(ec.F,{children:o(t?"Recent Posts":"Recent Episodes")}),(0,r.Y)(C.I1,{gap:12,style:{margin:a?void 0:"0 -8px"},"aria-label":o("Recent episodes"),role:"region",children:i.map(e=>(0,r.Y)(ey.z,{post:e,variant:"mini-episode",onClick:()=>{(0,y.u4)(y.qY.RECENT_EPISODE_ITEM_CLICKED,{post_id:e.id})}}))})]})})};var ew=n(82776);let ek=e=>{var t;let{feedUrl:n,isStandaloneVideo:l,eligibleForPodcast:a,post:d,pub:c,recentEpisodes:u,section:p,showLinks:h,user:m}=e,{iString:g}=(0,V.GO)(),{isMobile:v}=(0,k.sM)(),[Y,f]=(0,o.useState)(u),b=(0,o.useMemo)(()=>{var e;return null!=(e=null==Y?void 0:Y.filter(e=>e.id!==d.id))?e:null},[Y,d.id]),y=(0,B.Jq)(c,p),_=(0,ew.getBylineUsers)(d).sort((e,t)=>e.id===c.author_id?-1:t.id===c.author_id?1:e.is_guest&&!t.is_guest?-1:!e.is_guest&&t.is_guest?1:(e.name||"").localeCompare(t.name||""));return(0,o.useEffect)(()=>{let e=async()=>{var e,t;f(null!=(t=(await s().get("/api/v1/recent_posts").query((0,i._)({rss_episodes_only:!(null==(e=d.podcastFields)?void 0:e.hide_from_feed)},(null==p?void 0:p.id)?{section_id:p.id}:{}))).body)?t:[])};u||e()},[d.id,null==(t=d.podcastFields)?void 0:t.hide_from_feed,u,c.id,null==p?void 0:p.id]),(0,r.FD)(C.I1,{gap:y?24:32,"aria-label":g("Sidebar content"),role:"complementary",children:[!v&&(0,r.Y)(B.pJ,{align:"center",direction:"column",gap:8,post:d,pub:c,section:p,textField:"episode_short_text"}),!v&&(0,r.Y)(ef,{post:d,pub:c,section:p,user:m,isStandaloneVideo:l}),(0,r.FD)(C.I1,{gap:32,children:[!v&&!l&&a&&(0,r.Y)(eb.b,{feedUrl:n,showLinks:h,post:d,pub:c,section:p,user:m}),!v&&c.bylines_enabled&&_.length>0&&(0,r.Y)(em,{bylines:_,isStandaloneVideo:l,eligibleForPodcast:a}),b&&b.length>0&&(0,r.Y)(e_,{isStandaloneVideo:l,pub:c,recentEpisodes:b,user:m})]})]})};var eC=n(26747),eI=n(72536),eS=n(48697),eD=n(52077),eF=n(21003),eP=n(89490);let ex="transcriptionWords-u5CRAD",eT="transcription-timestamp-mDeQkH",eA="transcription-text-align-left-V7cht2",eE=e=>{let{activeRowIndex:t,isPlaying:n,postId:i,row:l,rowIndex:a,showSpeaker:s,speakerName:d,words:c,onPause:u,onPlay:p}=e,{searchTerm:h,focusedItemStart:m}=(0,f.IS)(),g=(0,o.useRef)(null),v=h&&l.text.toLowerCase().includes(h.toLowerCase());(0,o.useEffect)(()=>{if(m&&g.current&&l.start===m){var e;null==(e=g.current)||e.scrollIntoView({behavior:"smooth",block:"center"})}},[m,l.start]);let Y=()=>v?(0,r.Y)(eF.x,{isFocused:l.start===m,searchTerm:h,rowIndex:a,text:l.text.trim()}):(0,r.Y)(eP.az,{display:"inline",className:ex,lineHeight:20,radius:"sm","data-chunk-index":a,children:((null==c?void 0:c.length)?c.map(e=>e.word).join(" "):l.text).trim()});return(0,r.Y)("div",{ref:g,children:(0,r.Y)(eD.vo,{onPlay:p,onPause:u,postId:i,isActiveRow:t==a,isPlaying:n,row:l,rowIndex:a,className:"transcription-chunk-YeZNdv",activeClassName:"transcription-chunk--active-HnAU7N",children:d&&s?(0,r.FD)(C.I1,{paddingTop:2,children:[(0,r.FD)(C.Ye,{alignItems:"baseline",gap:12,children:[(0,r.Y)(W.EY.B4,{className:P()(eT,eA),color:"pub-secondary-text",children:d?(0,ew.secondsToHHMMSS)(l.start):""}),(0,r.Y)(W.EY.Meta,{padding:2,paddingTop:4,color:"accent",weight:"semibold",children:d})]}),(0,r.FD)(C.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":a,children:[(0,r.Y)(W.EY.B4,{className:P()(eT,eA),color:"pub-secondary-text",children:d?"":(0,ew.secondsToHHMMSS)(l.start)}),(0,r.Y)(eP.az,{display:"inline",className:ex,lineHeight:20,padding:2,radius:"sm","data-chunk-index":a,children:Y()})]})]}):(0,r.FD)(C.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":a,children:[(0,r.Y)(W.EY.B4,{className:P()(eT,eA),color:"pub-secondary-text",children:d?"":(0,ew.secondsToHHMMSS)(l.start)}),(0,r.Y)(eP.az,{display:"inline",className:ex,padding:2,radius:"sm","data-chunk-index":a,children:Y()})]})})},a)},eN=e=>{let{post:t,playerRef:n,transcription:a,fullWidth:s,onClose:d,onExpand:c,onCollapse:u}=e,{isMobile:p}=(0,k.sM)(),[h,m]=(0,o.useState)(0),g=(0,o.useRef)(null),[v,Y]=(0,o.useState)(!1),[b,y]=(0,o.useState)(0),{searchTerm:_}=(0,f.IS)(),w=()=>{if(g.current){let e=g.current.getBoundingClientRect().top,t=window.scrollY||window.scrollY;t>b&&e<=0?Y(!0):t<=b&&Y(!1)}};return(0,o.useEffect)(()=>{let e=g.current,t=()=>{e&&!v&&y(e.offsetTop)};t();let n=new ResizeObserver(t);return e&&n.observe(e),window.addEventListener("scroll",w),()=>{e&&n.unobserve(e),window.removeEventListener("scroll",w)}},[v]),(0,r.Y)(N.DH,{children:(0,r.FD)(C.I1,{gap:24,flex:"grow",children:[(0,r.FD)(C.Ye,{gap:8,alignItems:"center",children:[(0,r.Y)(C.Ye,{flex:"grow",ref:g,className:v?"sticky-zutBDd":"",display:!_&&v?"none":void 0,children:(0,r.Y)(C.Ye,{paddingLeft:p&&v?8:0,children:(0,r.Y)(f.Qj,{postId:t.id,closeAlwaysVisible:!1})})}),!p&&(0,r.FD)(o.Fragment,{children:[!s&&(0,r.Y)(j.K0,{onClick:c,children:(0,r.Y)(eC.A,{})}),s&&(0,r.Y)(j.K0,{onClick:u,children:(0,r.Y)(eI.A,{})})]}),(0,r.Y)(j.K0,{onClick:d,children:(0,r.Y)(eS.A,{})})]}),(0,r.Y)("div",{className:"transcription-full-body-container-LXFSNv",children:(0,r.Y)(eD.Ay,{player:n,postId:t.id,renderTranscriptionChunk:e=>(0,r.Y)(eE,(0,l._)((0,i._)({},e),{activeRowIndex:h,postId:t.id})),transcription:a,onUpdateActiveRowIndex:m})})]})})};var eB=n(99851),eM=n(32641),eR=n(77849),eL=n(41873),eO=n(16784),ez=n(83137),eU=n(70107),eq=n(60285),eH=n(49869),eW=n(13348),eG=n(99070),eK=n(72880),eV=n(28734),ej=n(8734),eX=n(4246),eJ=n(46009);let eZ=e=>{var t,n,i,l;let{alternateAudioSource:a,audioPlayerRef:s,hideControls:d,isIdle:c,post:u,pub:p,showPaywall:h,onFinishAudio:m,onSetAudioIsPlaying:g}=e,{iString:v}=(0,V.GO)(),{isMobile:Y}=(0,k.sM)(),f=(0,b.By)(s),y=u.section_id&&null!=(t=p.sections.find(e=>e.id===u.section_id))?t:null,{artUrl:_}=y?(0,eJ.lL)({pub:p,section:y}):(0,eJ.j_)({pub:p}),w=y?null!=(n=y.podcastPalette)?n:null:null!=(i=p.podcastPalette)?i:null,I=["extra_audio_preview","alternate_audio_preview"].includes(a.type);return(0,o.useEffect)(()=>{g(f)},[f,g]),(0,r.Y)(eG.A,{ref:s,src:a.url,updateOnEveryFrame:(null!=(l=u.podcast_duration)?l:0)<300,onFinishAudio:m,trackingProps:{contentType:"post",entityKey:u.id,entityType:"post",surface:"post"},render:e=>{let{duration:t,isPlaying:n,togglePlayback:i}=e,l=e=>e.stopPropagation();return(0,r.FD)(C.I1,{alignItems:"center",bg:"primary",flex:"grow",justifyContent:"center",position:"relative",overflow:Y?"auto":"hidden",onClick:()=>{i()},children:[(0,r.Y)(eV._,{backgroundUrl:_,blurAmount:40,isBlurred:!0,palette:w,radius:"none"}),(0,r.Y)(C.Ye,{className:"darkenBottom-zaTJyO",position:"absolute",inset:0}),(0,r.FD)(C.Ye,{position:"relative",children:[_&&!h&&(0,r.Y)(eK.o,{imageIsFixedWidth:!0,maxWidth:Y?160:340,radius:"md",src:_,useRetinaSizing:!0}),(0,r.Y)(C.Ye,{alignItems:"center",inset:0,justifyContent:"center",position:"absolute",children:(0,r.Y)(C.Ye,{onClick:l,opacity:100*!d,children:(0,r.Y)(eW.ro,{isPlaying:null!=n&&n,size:Y?56:72,onTogglePlayback:i})})})]}),(0,r.Y)(C.Ye,{onClick:l,children:(0,r.Y)(eX.Jf,{disableShortcuts:!0,disableTooltips:!0,duration:t,handle:null,isActive:(!n||!c)&&!h,isAudio:!0,isFocused:!1,post:u,pub:p,mediaUpload:null,mediaRef:s,showPaywall:!1})}),I&&(0,r.Y)(C.Ye,{position:"absolute",style:{top:12,left:12},children:(0,r.Y)(ej.d,{avoidBackgroundBlur:!0,children:v("Preview")})})]})}})};var eQ=n(31790),e$=n(50802),e0=n(49802),e1=n(66511);let e2={unselectedButton:"unselectedButton-LnSrSa"},e4="switcher-audio-button",e6=e=>{let{selected:t,sourceType:n,onSelect:i}=e,{iString:l}=(0,V.GO)(),{isMobile:o}=(0,k.sM)(),a={alternate_audio_preview:l("Switch to audio"),alternate_full_audio:l("Switch to audio"),extra_audio_preview:l("Switch to the audio preview"),free_podcast_url:l("Switch to the full ad-supported audio")}[n];return(0,r.FD)(C.I1,{bg:"glass-inverted-medium",gap:4*!o,padding:4,pointerEvents:o?"none":"auto",radius:"full",children:[(0,r.Y)(e1.m_,{disabled:o,side:"right",text:l("Switch to video"),children:(0,r.Y)(j.mZ,{className:P()({[e2.unselectedButton]:"video"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==i||i("video")},children:(0,r.Y)(e$.A,{size:o?18:20})})}),(0,r.Y)(C.Ye,{position:"relative",className:e2.audioButtonContainer,children:(0,r.Y)(e1.m_,{disabled:o,side:"right",text:a,children:(0,r.Y)(j.mZ,{id:e4,className:P()({[e2.unselectedButton]:"audio"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==i||i("audio")},children:(0,r.Y)(e0.A,{size:o?16:18})})})})]})},e7=(0,o.createContext)({containerRef:{current:null},clearSelection:()=>void 0,finishedSelection:null,isSelecting:!1,selectionBegin:null,selectionFinish:null,selectionRef:{current:null}}),e8=e=>{let{children:t}=e,n=(0,o.useRef)(null),i=(0,o.useRef)(null),[l,a]=(0,o.useState)(!1),[s,d]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),m=c&&p&&(p.rowIndex<c.rowIndex||p.rowIndex===c.rowIndex&&p.wordIndex<c.wordIndex),g=m?p:c,v=m?c:p,Y=(0,o.useMemo)(()=>s&&g&&v?{begin:g,finish:v}:null,[g,v,s]);(0,o.useEffect)(()=>{if(!n.current)return;let e=n.current,t=e=>{s&&(d(!1),a(!1),u(null),h(null));let t=Number(e.target.dataset.rowIndex),n=Number(e.target.dataset.wordIndex);isNaN(t)||isNaN(n)||u({rowIndex:t,wordIndex:n})},i=e=>{if(!c||s)return;l||a(!0);let t=e.target.dataset;if("true"===t.inBetween){let e=Number(t.prevRowIndex),n=Number(t.prevWordIndex),i=Number(t.nextRowIndex),l=Number(t.nextWordIndex);if(isNaN(e)||isNaN(n)||isNaN(i)||isNaN(l))return;c.rowIndex<e||c.rowIndex===e&&c.wordIndex<n?h({rowIndex:e,wordIndex:n}):h({rowIndex:i,wordIndex:l});return}let n=Number(t.rowIndex),i=Number(t.wordIndex);isNaN(n)||isNaN(i)||h({rowIndex:n,wordIndex:i})},r=()=>{d(!0)};return e.addEventListener("mousedown",t),e.addEventListener("mousemove",i),e.addEventListener("mouseup",r),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",i),e.removeEventListener("mouseup",r)}},[n,s,l,c]);let f=(0,o.useCallback)(()=>{d(!1),a(!1),u(null),h(null);let e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},[]);return(0,r.Y)(e7.Provider,{value:{clearSelection:f,finishedSelection:Y,isSelecting:l,containerRef:n,selectionBegin:g,selectionFinish:v,selectionRef:i},children:t})},e3=()=>(0,o.useContext)(e7);var e9=n(78659),e5=n.n(e9),te=n(69843),tt=n.n(te),tn=n(7350),ti=n.n(tn),tl=n(6632),tr=n(43241),to=n(23623),ta=n(90250),ts=n(91262),td=n(6579),tc=n(90128),tu=n.n(tc),tp=n(16858),th=n(92967);let tm="hideSelectionBackground-vjEoVj",tg=(0,o.memo)(e=>{var t;let{clipWordEnd:n,clipWordStart:a,isFinishedSelecting:s,focusedItemStart:d,isClipping:c,isFaded:u,isFirstInSelection:p,isMeasuring:h,isScrolling:m,isSelecting:g,listContainerRef:v,postId:Y,rowIndex:f,rows:b,searchTerm:_,selectedWordEnd:w,selectionRef:k,selectedWordStart:I,speakerMap:S,onClickRow:D,onCreateClip:F}=e,x=(0,o.useRef)(null),T=b[f];T||console.error("Transcript row at index ".concat(f," is missing"));let A=0===f?null:b[f-1],E=f===b.length-1?null:b[f+1],N=0===f?null:b[f-1],B=(!N||N.speaker!==T.speaker)&&T.speaker?null!=(t=S[T.speaker])?t:function(e){if(!e)return"Unknown Speaker";let t=e.split("_"),n=parseInt(t[1]);return"".concat(tu()(t[0])," ").concat(n+1)}(T.speaker):null,M=_&&T.text.toLowerCase().includes(_.toLowerCase()),R=A?{"data-in-between":!0,"data-prev-row-index":f-1,"data-prev-word-index":A.words.length-1,"data-next-row-index":f,"data-next-word-index":0}:{},L=E?{"data-in-between":!0,"data-prev-row-index":f,"data-prev-word-index":T.words.length-1,"data-next-row-index":f+1,"data-next-word-index":0}:{};return(0,r.FD)(C.Ye,{alignItems:"start",gap:12,paddingX:16,"data-transcript-row-index":f,onClick:()=>{var e;(null==(e=window.getSelection())||!e.toString())&&D&&Y&&((0,y.u4)(y.qY.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:Y,timestamp:(0,th.kq)(T.start)}),D({rowIndex:f}))},style:h?{overflowY:"scroll"}:void 0,children:[(0,r.Y)(C.Ye,{bg:"glass-inverted-medium",paddingX:4,radius:"sm",userSelect:"none",children:(0,r.Y)(W.EY.Meta,{color:"white",lineHeight:20,children:(0,ew.secondsToHHMMSS)(T.start)})}),(0,r.FD)(C.I1,{flex:"grow",gap:2,children:[B&&(0,r.Y)(W.EY.Meta,(0,l._)((0,i._)({color:"white",opacity:60,userSelect:"none",weight:"semibold"},R),{children:B})),(0,r.FD)(C.I1,{position:"relative",children:[M&&(0,r.Y)(tv,{isFocused:T.start===d,searchTerm:_,text:T.text.trim()}),(0,r.FD)(C.I1,{ref:x,position:"relative",children:[(0,r.Y)(W.EY.B3,(0,l._)((0,i._)({className:P()(tm,{"textContainerFadedShows-pHGywl":u}),cursor:"pointer",lineHeight:20,paddingBottom:12},L),{children:!T.words.length||m&&!c&&tt()(I)&&tt()(w)?T.text:T.words.map((e,t)=>{let i=!tt()(I)&&!tt()(w)&&t>=I&&t<=w,l=p&&t===I,o=c&&!g&&!tt()(n)&&!tt()(a)&&t>=a&&t<=n;return(0,r.FD)(r.FK,{children:[(0,r.Y)("span",{ref:l?k:null,className:P()("word-IefdhU",{"wordSelectedShows-Tf85j5":o||i}),"data-row-index":f,"data-word-index":t,children:e.word})," "]})})})),p&&s&&F&&v&&!c&&(0,r.Y)(tf,{firstWordRef:k,listContainerRef:v,rowElemRef:x,children:(0,r.Y)(tb,{onClick:F})})]})]})]})]})}),tv=e=>{let{searchTerm:t,isFocused:n,text:i}=e,l=RegExp("(".concat(t,")"),"gi"),o=i.split(l);return(0,r.Y)(W.EY.B3,{className:"textHidden-zukLlK",position:"absolute",inset:0,children:o.map(e=>e.match(l)?(0,r.Y)("span",{className:P()("searchResult-cbPSuC",{"isFocused-wy1BKg":n}),children:e}):(0,r.Y)("span",{children:e}))})},tY=(0,o.memo)(e=>{let{style:t,index:n,data:i,isScrolling:l}=e,{activeRowIndex:o,listContainerRef:a,postId:s,rows:c,speakerMap:u,onClickRow:p,onCreateClip:h}=i,{finishedSelection:m,isSelecting:g,selectionBegin:v,selectionFinish:Y,selectionRef:b}=e3(),{searchTerm:y,focusedItemStart:_}=(0,f.IS)(),{clipTimes:w,isClipping:k}=(0,d.MC)(),C=c[n];C||console.error("Transcript row at index ".concat(n," is missing"));let I=!!(v&&v.rowIndex===n),S=null,D=null;if(v&&Y){let e=n===v.rowIndex&&n===Y.rowIndex,t=n===v.rowIndex,i=n===Y.rowIndex,l=n>v.rowIndex&&n<Y.rowIndex;e?(S=v.wordIndex,D=Y.wordIndex):t?(S=v.wordIndex,D=C.words.length-1):i?(S=0,D=Y.wordIndex):l&&(S=0,D=C.words.length-1)}let F=null,P=null;if(k&&w)for(let e=0;e<C.words.length;e++){let t=C.words[e];!tt()(t)&&t.end>w.start&&t.start<w.end&&(null===F&&(F=e),P=e)}return(0,r.Y)("div",{className:tm,style:t,children:(0,r.Y)(tg,{clipWordStart:F,clipWordEnd:P,focusedItemStart:_,isClipping:k,isFaded:!k&&"number"==typeof o&&o!==n,isFinishedSelecting:!!m,isFirstInSelection:I,isScrolling:l,isSelecting:g,listContainerRef:a,postId:s,rows:c,rowIndex:n,searchTerm:y,selectionRef:b,selectedWordStart:S,selectedWordEnd:D,speakerMap:u,onClickRow:p,onCreateClip:h})})},td.t7),tf=e=>{let{children:t,firstWordRef:n,listContainerRef:i,rowElemRef:l}=e;if(!(null==n?void 0:n.current)||!l.current||!i.current)return null;let o=n.current.offsetTop,{top:a}=l.current.getBoundingClientRect(),{top:s,height:d}=i.current.getBoundingClientRect(),c=e5()(o-8,s-a+8+32,s+d-a-8);return(0,r.Y)(C.I1,{position:"absolute",style:{top:c,left:"45%",transform:"translate(-50%, -100%)"},onClick:ty,onMouseDown:ty,onMouseMove:ty,onMouseUp:ty,userSelect:"none",zIndex:1,children:t})},tb=e=>{let{onClick:t}=e,{iString:n}=(0,V.GO)();return(0,r.Y)(j.$n,{leading:(0,r.Y)(tp.A,{size:16}),priority:"secondary",onClick:t,children:n("Create clip")})},ty=e=>{e.stopPropagation()},t_=e=>{let{activeRowIndex:t,height:n,id:i,listContainerRef:l,listRef:a,postId:s,rows:d,speakerMap:c,width:u,onClickRow:p,onCreateClip:h,onScroll:m}=e,[g,v]=(0,o.useState)(null);(0,o.useLayoutEffect)(()=>{if(g||!u)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.width="".concat(u,"px"),e.style.pointerEvents="none",e.style.visibility="hidden",v(e),document.body.appendChild(e)},[g,u]);let Y=(0,o.useCallback)(e=>g?(g.innerHTML=(0,ts.F0)((0,r.Y)(tg,{isMeasuring:!0,isScrolling:!1,rows:d,rowIndex:e,selectedWordEnd:null,selectedWordStart:null,speakerMap:c})),g.clientHeight||0):0,[g,d,c]),f=(0,o.useMemo)(()=>({activeRowIndex:t,listContainerRef:l,postId:s,rows:d,speakerMap:c,onClickRow:p,onCreateClip:h}),[t,l,s,d,c,p,h]);return g?(0,r.Y)("div",{id:i,children:(0,r.Y)(td._m,{ref:a,itemCount:d.length,itemSize:Y,height:n,width:u,itemData:f,outerElementType:tw,useIsScrolling:!0,onScroll:m,children:tY})}):null},tw=(0,o.forwardRef)((e,t)=>{var{style:n}=e,o=(0,eM._)(e,["style"]);return(0,r.Y)("div",(0,i._)({ref:t,style:(0,l._)((0,i._)({},n),{overflowY:"scroll"})},o))});var tk=n(50874);let tC="video-transcription",tI=e=>{let{isClipping:t,playerRef:n,postId:l,transcription:a,onClose:s,surface:c}=e,{iString:u}=(0,V.GO)(),{clipTimes:p,virtualizedListRef:h,onStartClipping:m}=(0,d.MC)(),g=(0,o.useRef)(null),{containerRef:v,finishedSelection:Y,clearSelection:_,isSelecting:w}=e3(),{rows:k,speakerMap:I}=(0,D.Fy)({transcription:a,processAlignedRows:tk.qD}),{isPlaying:S,currentTime:F}=(0,b.yr)(n),{setItems:P,focusedItemStart:x,searchTerm:T}=(0,f.IS)(),[A,E]=(0,o.useState)(null),[N,B]=(0,o.useState)(!1),{width:M,height:R}=(0,eH.w)({containerRef:g}),[L,O]=(0,o.useState)("in-view"),[z,U]=(0,o.useState)("in-view"),[q,H]=(0,o.useState)("in-view"),G=!!(null==T?void 0:T.trim()),K=S&&!G&&!t&&!Y,X=p&&tS(k,p.start),J=p&&tS(k,p.end);(0,o.useEffect)(()=>{P(k)},[k,P]),(0,o.useEffect)(()=>{var e,t,i,l;!w||(null==(t=n.current)||null==(e=t.player)?void 0:e.paused)||null==(l=n.current)||null==(i=l.player)||i.pause()},[w,n]),(0,o.useEffect)(()=>{if(N)return;let e=k.findIndex(e=>e.start<=F&&e.end>F);-1!==e&&e!==A&&E(e)},[A,F,N,k]),(0,o.useEffect)(()=>{if(!G||!(null==h?void 0:h.current))return;let e=k.findIndex(e=>e.start===x);h.current.scrollToItem(e,"start")},[x,G,k,h]),(0,o.useEffect)(()=>{var e,t;if(!K||!(null==h?void 0:h.current))return;let n=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(A,'"]'));if(!n)return;let i=n.parentElement,l=document.querySelector("#".concat(tC," > div")),r=null!=(e=null==l?void 0:l.children[0])?e:null;if(!l||!i||!r)return;let o=r.offsetHeight-l.offsetHeight,a=parseInt(null!=(t=i.style.top.split("px")[0])?t:""),s=l.scrollTop,d=e5()(a-32,0,o);(0,ta.eb)({virtualizedListRef:h,start:s,end:d,duration:300})},[A,K,h]);let Z=(0,o.useCallback)(ti()(()=>{if("number"!=typeof A)return;if(document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(A,'"]')))return void O("in-view");let e=document.querySelector("#".concat(tC," [data-transcript-row-index]"));e&&O(((null==e?void 0:e.dataset.transcriptRowIndex)?parseInt(e.dataset.transcriptRowIndex):-1)>A?"is-before":"is-after")},100),[A]),Q=(0,o.useCallback)(ti()(()=>{if(tt()(X)||tt()(J))return;let e=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(X,'"]')),t=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(J,'"]')),n=document.querySelector("#".concat(tC," [data-transcript-row-index]"));if(!n)return;let i=(null==n?void 0:n.dataset.transcriptRowIndex)?parseInt(n.dataset.transcriptRowIndex):-1;e||t||i>X&&i<J?U("in-view"):U(i>X?"is-before":"is-after")},100),[J,X]),$=(0,o.useCallback)(ti()(()=>{if(!Y)return;let e=Y.begin.rowIndex;if(document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(e,'"]')))return void H("in-view");let t=document.querySelector("#".concat(tC," [data-transcript-row-index]"));t&&H(((null==t?void 0:t.dataset.transcriptRowIndex)?parseInt(t.dataset.transcriptRowIndex):-1)>e?"is-before":"is-after")}),[Y]),ee=(0,o.useCallback)(e=>{let{scrollUpdateWasRequested:n}=e;n||(Y?$():t?Q():Z())},[Y,t,Z,Q,$]);(0,o.useEffect)(()=>{S&&Z()},[S,Z]),(0,o.useEffect)(()=>{if(!p||!(null==h?void 0:h.current))return;let e=tS(k,p.start);h.current.scrollToItem(Math.max(e,0),"smart"),U("in-view")},[p,k,Q,h]);let et=(0,o.useCallback)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(A,"start"),O("in-view"))},[A,h]),en=(0,o.useCallback)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(X,"start"),U("in-view"))},[X,h]),ei=(0,o.useCallback)(()=>{if(!Y||!k)return;let{start:e,end:t}=(0,ta.ng)({finishedSelection:Y,transcriptionRows:k});_(),(0,y.u4)(y.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"post transcript",surface:c}),m({start:e,end:t,source:"side-by-side-transcript",title:null})},[_,Y,m,k,c]);(0,o.useEffect)(()=>{Y&&(t?ei():$())},[Y,ei,t,$]);let el=(0,o.useCallback)(async e=>{var i;let{rowIndex:l}=e;if(null==(i=n.current)?void 0:i.player){if(t){let e=k[l];m({start:e.start,end:e.end,source:"side-by-side-transcript",title:null});return}if(S&&l===A)return void n.current.player.pause();n.current.player.currentTime=k[l].start,E(l),B(!0),await n.current.player.play(),B(!1)}},[A,t,S,m,n,k]);return(0,r.Y)(to.a,{children:(0,r.FD)(C.I1,{inset:0,position:"absolute",style:{backgroundColor:"#161718"},children:[(0,r.FD)(C.Ye,{alignItems:"center",justifyContent:"space-between",padding:16,children:[(0,r.Y)(W.EY.B2,{color:"primary",weight:"semibold",children:u(t?"Create clip":"Transcript")}),s&&(0,r.Y)(j.K0,{priority:"secondary",size:"sm",onClick:s,children:(0,r.Y)(eS.A,{size:20})})]}),(0,r.Y)(C.Ye,{paddingX:16,paddingBottom:16,onKeyDown:e=>{e.stopPropagation()},children:(0,r.Y)(f.Qj,{postId:l,closeAlwaysVisible:!1})}),(0,r.FD)(C.I1,{ref:g,flex:"grow",position:"relative",children:[(0,r.Y)(C.I1,{ref:v,position:"absolute",inset:0,children:!!M&&(0,r.Y)(t_,{activeRowIndex:S?A:null,height:R,id:tC,listContainerRef:g,listRef:h,postId:l,rows:k,speakerMap:I,width:M,onClickRow:el,onCreateClip:ei,onScroll:ee})}),K&&"in-view"!==L&&(0,r.Y)(C.I1,{position:"absolute",style:(0,i._)({left:16,right:16},"is-before"===L?{top:0}:{bottom:16}),children:(0,r.Y)(j.$n,{leading:"is-before"===L?(0,r.Y)(tl.A,{size:16}):(0,r.Y)(tr.A,{size:16}),priority:"secondary",onClick:et,children:u("Back to current time")})}),t&&!w&&"in-view"!==z&&(0,r.Y)(C.I1,{position:"absolute",style:(0,i._)({left:16,right:16},"is-before"===z?{top:0}:{bottom:16}),children:(0,r.Y)(j.$n,{leading:"is-before"===z?(0,r.Y)(tl.A,{size:16}):(0,r.Y)(tr.A,{size:16}),priority:"secondary",onClick:en,children:u("Back to clipped segment")})}),Y&&"in-view"!==q&&!t&&(0,r.Y)(C.Ye,{position:"absolute",justifyContent:"center",style:(0,i._)({left:0,right:0},"is-before"===q?{top:0}:{bottom:16}),children:(0,r.Y)(tb,{onClick:ei})})]})]})})},tS=(e,t)=>{for(let n=0;n<e.length;n++){if(e[n].start<=t&&e[n].end>=t)return n;if(t<e[n].start)return n>0?n-1:0}return e.length-1},tD="video-wrapper-lforaE",tF="preview-label-container-RuWmAN",tP="sidebar-NzGH2W",tx="sidebar--hidden-xMFnhp";class tT extends eL.A{constructor(...e){super(...e),(0,eB._)(this,"playbackEnabled",()=>!!this.props.showPreview)}}let tA=e=>{var t,n,a,s,c,u,p,m,g,v,{alternateAudioSource:Y,audioIsPlaying:b,audioPlayerHasMounted:_,audioPlayerRef:w,containerRef:I,disableShortcuts:S,hasPaywall:F,isIdle:x,isPostPreview:A,mediaUpload:E,post:N,pub:B,selectedMedium:M,showAudioPaywall:R,showVideoPaywall:L,style:O,transcription:z,user:U,videoIsPlaying:q,videoPlayerRef:H,onChange:W,onCommentsClick:G,onFinishAudio:K,onSelectMedium:j,onSetAudioIsPlaying:X}=e,J=(0,eM._)(e,["alternateAudioSource","audioIsPlaying","audioPlayerHasMounted","audioPlayerRef","containerRef","disableShortcuts","hasPaywall","isIdle","isPostPreview","mediaUpload","post","pub","selectedMedium","showAudioPaywall","showVideoPaywall","style","transcription","user","videoIsPlaying","videoPlayerRef","onChange","onCommentsClick","onFinishAudio","onSelectMedium","onSetAudioIsPlaying"]);let{iString:Z}=(0,V.GO)(),Q=(0,T.lu)({pub:B}),{isClipping:$,onCancelClipping:ee}=(0,d.MC)(),[et,en]=(0,o.useState)(!1),ei=(0,eR.V)(),el=(0,o.useRef)(null),{width:er}=(0,eH.w)({containerRef:el}),[eo,ea]=(0,o.useState)(ei.active&&"undefined"!=typeof window?window.innerWidth:null!=(u=null==(t=el.current)?void 0:t.offsetWidth)?u:1100),[es,ed]=(0,eU.f)({key:"video_player:show_transcript",initialValue:!1}),ec=(es||$)&&!!z,{isMobile:eu}=(0,k.sM)(),ep=(0,D.AC)(I),eh=(null!=(p=E.preview_duration)?p:0)>0,[em,eg]=(0,o.useState)(!1),ev=ec?(eo-360-36)/eo:1,eY="post";return(0,o.useEffect)(()=>{$&&(0,y.u4)(y.qY.MEDIA_CLIP_CREATE_MODAL_OPENED,{video_upload_id:E.id,post_id:null==N?void 0:N.id,is_post_editor:!1,source:"create",surface:eY})},[$,E.id,null==N?void 0:N.id]),(0,o.useEffect)(()=>{ei.active&&"undefined"!=typeof window?setTimeout(()=>{ea(window.innerWidth)},10):ea(null!=er?er:1100)},[ei.active,er]),(0,r.FD)("div",{ref:el,className:P()(tD,{"video-full-screen-K4tmIj":ei.active}),style:O,children:[(0,r.FD)("div",{style:{visibility:"audio"===M?"hidden":void 0},children:[(0,r.Y)(eR.m,{handle:ei,children:(0,r.FD)(C.Ye,{justifyContent:"center",position:"relative",overflow:$?"visible":"hidden",style:{width:"100%",height:"100%",backgroundColor:"#000"},children:[(0,r.Y)(C.Ye,{flex:"grow",position:"relative",style:{transform:"scale(".concat(ev,")"),transformOrigin:"0 50%",transition:"transform 0.15s ease-in-out",zIndex:$?1:void 0},children:(0,r.Y)(tT,(0,l._)((0,i._)({},J),{ref:H,doNotResetOnEnd:!0,hidePlayButton:L,isClipping:$,mediaUpload:E,podcastUpload:N.podcastUpload,showPreview:!F||eh,noControls:!0,noKeyboardShortcuts:!0,stopPropagation:!0,post:N,pub:B,renderPlayButton:()=>(0,r.Y)(eW.ro,{isPlaying:!1,size:eu?56:72}),usePreview:F&&eh,videoType:"post",onAutoplayMuted:()=>eg(!0)}))}),(0,r.Y)(C.Ye,{position:"absolute",style:{left:0,right:0,bottom:0,width:"".concat(100*ev,"%"),transition:"width 0.15s ease-in-out"},children:(0,r.Y)(eX.Jf,{disableShortcuts:S,handle:ei,hasPaywall:F,hasTranscript:!!z,hideNextVideoButton:A||Q,isActive:null!=(m=et||!x||$)&&m,isFocused:ep,mediaRef:H,mediaUpload:E,podcastUpload:null!=(g=null==(n=N.videoUpload)?void 0:n.extractedAudio)?g:N.podcastUpload,post:N,pub:B,showPaywall:L,showTranscript:ec,onShareMenuClose:()=>en(!1),onShareMenuOpen:()=>en(!0),onToggleShowTranscript:()=>{ed(!ec)},autoPlayMuted:em})}),z&&(0,r.Y)(C.Ye,{color:"white",opacity:100*!!ec,overflow:"auto",pointerEvents:ec?"auto":"none",position:"absolute",style:{top:0,bottom:0,right:0,transform:ec?"translateX(0)":"translateX(20%)",transition:ec?"transform 0.1s ease-in-out 0.05s, opacity 0.1s ease-in-out 0.05s":"transform 0.15s ease-in-out, opacity 0.15s ease-in-out",width:360,zIndex:$?1:void 0},children:(0,r.Y)(f.Of,{children:(0,r.Y)(e8,{children:(0,r.Y)(tI,{isClipping:null!=$&&$,playerRef:H,postId:N.id,transcription:z,onClose:()=>{if($){var e;(0,y.u4)(y.qY.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:N.id,surface:eY}),q&&(null==(e=H.current)?void 0:e.player)&&H.current.player.pause(),ee()}else ed(!1)},surface:eY})})})})]})}),eh&&F&&!L&&(0,r.Y)("div",{className:tF,children:(0,r.Y)(ej.d,{children:Z("Preview")})}),(null==(a=H.current)?void 0:a.player)&&(0,r.Y)(eO.p,{containerRef:I,post:N,pub:B,visible:$,videoPlayerRef:H,videoUpload:E,surface:eY})]}),("audio"===M||_)&&Y&&(0,r.Y)(C.pT,{inset:0,position:"absolute",style:{visibility:"audio"!==M?"hidden":void 0},children:(0,r.Y)(eZ,{alternateAudioSource:Y,audioPlayerRef:w,isIdle:x,hideControls:(q||b)&&x,post:N,pub:B,showPaywall:R,onFinishAudio:K,onSetAudioIsPlaying:X})}),!eu&&!L&&!A&&!Q&&(0,r.Y)("div",{className:P()(tP,"sidebar-right-ktL8if",{[tx]:(q||b)&&x}),children:(0,r.Y)(C.pT,{className:P()("sidebar-icons-YDR6ix"),bg:"glass-inverted-thick",paddingX:8,paddingY:16,children:(0,r.Y)(h.xx,{hideSavePost:!0,initialShareTimestamp:null!=(v=null==(c=H.current)||null==(s=c.player)?void 0:s.currentTime)?v:0,isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:N,pub:B,showClipping:!!N.videoUpload,style:"large-on-dark",user:U,onChange:W,onCommentsClick:G})})}),Y&&!Q&&(0,r.Y)("div",{className:P()(tP,"sidebar-left-K3vrOP",{[tx]:(q||b)&&x}),style:{zIndex:L?1:void 0},children:(0,r.Y)(e6,{selected:M,sourceType:Y.type,onSelect:j})})]})},tE=e=>{var t;let{audioPlayerRef:n,hasPaywall:a,isPostPreview:s,mediaUpload:d,post:c,pub:u,user:p,videoIsPlaying:h,videoPlayerRef:m,onFinishVideo:g,freeSignup:v,reaction_token:Y}=e,f=(0,eM._)(e,["audioPlayerRef","hasPaywall","isPostPreview","mediaUpload","post","pub","user","videoIsPlaying","videoPlayerRef","onFinishVideo","freeSignup","reaction_token"]),{isMobile:b}=(0,k.sM)(),{iString:_}=(0,V.GO)(),w=(0,T.lu)({pub:u}),I=(0,ee.Ei)({post:c,pub:u,user:p}),[S,D]=(0,o.useState)(!1),[F,x]=(0,o.useState)(!1),[A,E]=(0,o.useState)(!1),N=(null!=(t=d.preview_duration)?t:0)>0,B=!!I&&!N&&a,[M,R]=(0,eq.k)({initialValue:B?"audio":"video",key:"initial_medium",type:"string",isArray:!1,disable:!I}),[L,O]=(0,o.useState)(B),z=(0,o.useRef)(null),{isIdle:U}=(0,ez.U)({idleAfter:2e3,element:z.current}),q="video"===M&&a&&(!N||F),H="audio"===M&&a&&S&&!!I&&"free_podcast_url"!==I.type,W=!(0,et.Fr)(),G=e=>{var t,i;if(e===M)return;let l=(e,t)=>5>Math.abs(e-t),r=null==(t=m.current)?void 0:t.player,o=null==(i=n.current)?void 0:i.player;"audio"===e&&(null==r?void 0:r.currentTime)&&o?r.currentTime>0&&l(o.duration,r.duration)&&(o.currentTime=r.currentTime,r.paused||o.play()):"video"===e&&(null==o?void 0:o.currentTime)&&r&&o.currentTime>0&&l(o.duration,r.duration)&&(r.currentTime=o.currentTime,o.paused||r.play()),h&&(null==r||r.pause()),"video"===e&&o&&o.pause(),F&&(x(!1),r&&(r.currentTime=0)),"audio"!==e||L||O(!0),(0,y.u4)(y.qY.AUDIO_VIDEO_SWITCHER_CLICKED,{post_id:c.id,selected:e}),R(e)},K=()=>{D(!0)};return(0,r.FD)("div",{className:P()("container-dlhqPD",{"postPreview-mgizmD":s}),ref:z,children:[W?(0,r.Y)(tA,(0,l._)((0,i._)({},e),{alternateAudioSource:I,audioIsPlaying:A,audioPlayerHasMounted:L,audioPlayerRef:n,containerRef:z,isIdle:U,selectedMedium:M,showAudioPaywall:H,showVideoPaywall:q,videoIsPlaying:h,onFinishAudio:K,onFinishVideo:()=>{if((null==I?void 0:I.type)==="free_podcast_url"){var e,t;null==(t=document.getElementById(e4))||null==(e=t.parentNode)||e.dispatchEvent(new Event("mouseenter"))}x(!0)},onSelectMedium:G,onSetAudioIsPlaying:E})):(0,r.FD)("div",{className:P()(tD),children:[(0,r.Y)(tT,(0,l._)((0,i._)({},f),{ref:m,doNotResetOnEnd:!0,hidePlayButton:q,mediaUpload:d,podcastUpload:c.podcastUpload,showPreview:!a||N,noControls:q&&!a,stopPropagation:!0,post:c,pub:u,renderPlayButton:()=>(0,r.Y)(eW.ro,{isPlaying:!1,size:b?56:72}),usePreview:a&&N,onFinishVideo:g,style:{visibility:"audio"===M?"hidden":void 0}})),N&&a&&!q&&"video"===M&&(0,r.Y)("div",{className:tF,children:(0,r.Y)(ej.d,{children:_("Preview")})}),("audio"===M||L)&&I&&(0,r.Y)(C.Ye,{position:"absolute",inset:0,style:{visibility:"audio"===M?"visible":"hidden"},children:(0,r.Y)(eZ,{alternateAudioSource:I,audioPlayerRef:n,hideControls:!1,isIdle:U,post:c,pub:u,showPaywall:H,onFinishAudio:K,onSetAudioIsPlaying:E})}),I&&!w&&(0,r.Y)(C.Ye,{position:"absolute",padding:12,onClick:()=>{G("audio"===M?"video":"audio")},style:{top:"50%",left:0,transform:"translateY(-50%)",visibility:"video"===M&&h&&U?"hidden":"visible"},children:(0,r.Y)(e6,{selected:M,sourceType:I.type,onSelect:null})})]}),q&&(0,r.Y)(eQ.v,{disableButtons:s,isFreeSubscribed:!!((null==p?void 0:p.is_free_subscribed)||v),medium:"video",post:c,pub:u,variant:"dialog",onRestart:N?()=>{var e;(null==(e=m.current)?void 0:e.player)&&(x(!1),m.current.player.currentTime=0,m.current.player.play())}:void 0,magicToken:Y}),H&&(0,r.Y)(eQ.v,{disableButtons:s,isFreeSubscribed:!!((null==p?void 0:p.is_free_subscribed)||v),medium:"audio",post:c,pub:u,variant:"dialog",onRestart:()=>{var e;(null==(e=n.current)?void 0:e.player)&&(D(!1),n.current.player.currentTime=0,n.current.player.play())},magicToken:Y})]})};var tN=n(56458),tB=n(9036);let tM=(0,o.forwardRef)((e,t)=>{var n;let{isServingFreePodcastUrl:a,paywall:I,post:F,pub:P,reaction_token:x,recentEpisodes:E,showComments:N,user:B,videoPlayerRef:M,onChange:R,freeSignup:L}=e,{getConfigFor:O}=(0,v.mJ)(),z=(0,Y.Qg)().autoPlayVideo,{isMobile:U}=(0,k.sM)(),[q,H]=(0,o.useState)(null),[W,G]=(0,o.useState)(null),[K,V]=(0,o.useState)(!1),[j,X]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(!1),Q=(0,o.useRef)(null),{isClipping:$,onStartClipping:et}=(0,d.MC)(),en=(0,tN.NJ)(F),ei=!I||(0,T.NO)({pub:P}),el=(null==en?void 0:en.approved_at)&&ei,{isPlaying:er}=(0,b.yr)(M),eo=(0,T.lu)({pub:P}),ea=e=>{(0,y.u4)(y.qY.TRANSCRIPTION_TOGGLED,{state:e?"expanded":"collapsed",post_id:F.id,transcript_as_content:!0}),V(e)};(0,o.useEffect)(()=>{("undefined"!=typeof window?(0,tB.m)(window.location.href):{}).clippingMode&&(setTimeout(()=>{et({source:"query-param",title:null})},10),(0,w.qm)("clippingMode"))},[et]);let ed=F.section_id&&null!=(n=P.sections.find(e=>e.id===F.section_id))?n:null,{feedUrl:ec,isPrivateFeed:eu}=(0,D.Zq)({pub:P,magicToken:x,user:null!=B?B:null,section:ed}),ep=(0,ee.Em)({pub:P,section:ed,spotifySettings:(0,_.Om)({pub:P,section:ed})}),eh=(0,tN.rI)({post:F,section:ed,pub:P}),em=(0,tN.Xk)({post:F,section:ed,pub:P}),eg=!!q&&q.length>0,ev=e=>{e.preventDefault(),(0,y.u4)(y.qY.COMMENTS_CLICKED,{post_id:F.id});let t=document.getElementById(ee.R4);t&&t.scrollIntoView({behavior:"smooth"})};(0,o.useEffect)(()=>{(async()=>{let e=await s().get("/api/v1/post/".concat(F.id,"/facepile"));H(e.body.reactors),G(e.body.restackers)})()},[F.id]);let eY=!1;return"undefined"!=typeof window&&(eY=new URLSearchParams(window.location.search).has("postPreview")),(0,r.Y)(u.L4,(0,l._)((0,i._)({},e),{ref:t,isShowsPost:!0,renderContent:e=>{let{comments:t,crossPostInfo:n,postContent:i}=e;return(0,r.FD)("div",{children:[(0,r.Y)(S,{visible:$,style:{zIndex:1}}),F.videoUpload?(0,r.Y)(tE,{audioPlayerRef:Q,autoPlay:z,disableShortcuts:J||$,duration:F.videoUpload.duration,hasPaywall:null!=I&&I,isClipping:$,isPostPreview:eY,mediaUpload:F.videoUpload,post:F,pub:P,freeSignup:L,reaction_token:x,restorePlaybackLocation:!eY,transcription:el?en:null,user:null!=B?B:null,videoIsPlaying:er,videoPlayerRef:M,onChange:R,onCommentsClick:ev,surface:"post",entityKey:F.id,entityType:"post",contentType:"post"}):(0,r.Y)(A,{audioPlayerRef:Q,feedUrl:ec,hasPaywall:null!=I&&I,isPrivateFeed:eu,isServingFreePodcastUrl:a,post:F,pub:P,section:ed,user:null!=B?B:null,freeSignup:L,onChange:R,onCommentsClick:ev,reaction_token:x}),(0,r.FD)("div",{className:eo?"mainContentFP-GnDHcW":"main-content-and-sidebar-fw1PHW",children:[(0,r.FD)("div",{className:eo?"":j?"main-content-full-width-eYkBTb":"main-content-qKkUCg",children:[!K&&(0,r.FD)(C.I1,{gap:16,children:[(0,r.Y)(es,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,magicToken:x,post:F,pub:P,section:ed,showLinks:ep,user:null!=B?B:null,onChange:R,onCommentsClick:ev,onToggleRestackModal:Z,onTranscriptClick:el?()=>{ea(!0)}:void 0}),eo&&(0,r.Y)(g.L,{post:F,pub:P,user:null!=B?B:null,variant:"shows-post"}),n&&(0,r.Y)(c.k,{crossPostInfo:n,postType:F.type}),(0,r.FD)("div",{className:"postContentWrapper-MYe7fH",children:[i,eo?(0,r.Y)(C.I1,{paddingTop:40,paddingBottom:20,children:(0,r.Y)(m.u,{post:F,pub:P,user:B})}):O("like_posts_enabled")&&P.community_enabled&&eg&&!I&&(0,r.Y)(C.pT,{borderTop:"detail-themed",paddingY:16,children:(0,r.Y)(p.d2,{post:F,pub:P,user:B,reactors:q,secondaryFaces:W})}),!I&&N&&t]})]}),K&&el&&(0,r.Y)(C.Ye,{paddingTop:j?32:void 0,children:(0,r.Y)(f.Of,{children:(0,r.Y)(eN,{fullWidth:j,playerRef:F.videoUpload?M:Q,post:F,transcription:en,onClose:()=>{ea(!1),X(!1)},onCollapse:()=>X(!1),onExpand:()=>X(!0)})})})]}),!j&&!eo&&(0,r.Y)(C.I1,{className:"sidebar-RUDMha",borderLeft:U?void 0:"detail-themed",children:(0,r.Y)(ek,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,post:F,pub:P,recentEpisodes:null!=E?E:null,section:ed,showLinks:ep,user:null!=B?B:null})})]}),U&&!eo&&(0,r.Y)(h.I2,{allowEdit:null==B?void 0:B.is_contributor,hideComments:!N,isStatic:!1,post:F,postReactionToken:x,pub:P,user:B,onCommentsClick:ev,onChange:R})]})}}))}),tR=(0,o.forwardRef)((e,t)=>{let n=(0,o.useRef)(null),a=(0,o.useRef)(null);return(0,r.Y)(d.UQ,{postId:e.post.id,videoPlayerRef:n,virtualizedListRef:a,children:(0,r.Y)(tM,(0,l._)((0,i._)({},e),{ref:t,videoPlayerRef:n}))})})},19601:function(e,t,n){n.d(t,{A:()=>l});var i=n(56262);let l=(e,t,n,l,r)=>!(!r&&!(null==e?void 0:e.has_publication)||l.invite_only||(0,i.isPaidAudience)(n.audience))&&!!t.enable_restacking},22092:function(e,t,n){n.d(t,{E:()=>r,_:()=>o});var i=n(4016),l=n(39318);let r=e=>{let{pub:t,section:n}=e;return(0,i.lu)({pub:t})&&!!n&&"the-free-press-live"===n.slug},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.a7q)({for_pub:e.subdomain,justTrying:!0,redirect:(0,l.eV6)(e,t)})}}}]);